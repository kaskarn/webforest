var tabviz=(function(Se){"use strict";var Nv=Object.defineProperty;var rf=Se=>{throw TypeError(Se)};var Hv=(Se,je,nn)=>je in Se?Nv(Se,je,{enumerable:!0,configurable:!0,writable:!0,value:nn}):Se[je]=nn;var Ar=(Se,je,nn)=>Hv(Se,typeof je!="symbol"?je+"":je,nn),As=(Se,je,nn)=>je.has(Se)||rf("Cannot "+nn);var O=(Se,je,nn)=>(As(Se,je,"read from private field"),nn?nn.call(Se):je.get(Se)),le=(Se,je,nn)=>je.has(Se)?rf("Cannot add the same private member more than once"):je instanceof WeakSet?je.add(Se):je.set(Se,nn),qt=(Se,je,nn,Aa)=>(As(Se,je,"write to private field"),Aa?Aa.call(Se,nn):je.set(Se,nn),nn),Ke=(Se,je,nn)=>(As(Se,je,"access private method"),nn);var Uc,Yc,Jo,ti,To,No,Li,ei,ni,fn,Ws,Gi,Rs,of,af,tr,er,Ns,Cr,Ho,Tr,nr,Pn,Nr,Or,no,Ao,ro,Wo,$r,ba,an,Av,Wv,zs,Na,Ha,Is,dr,Hr,On,Ro,Di,Bi,Ma,Zc;const pn=Symbol(),D=Symbol("filename"),sf="http://www.w3.org/1999/xhtml",Fs=(Yc=(Uc=globalThis.process)==null?void 0:Uc.env)==null?void 0:Yc.NODE_ENV,dt=Fs&&!Fs.toLowerCase().startsWith("prod");var gi=Array.isArray,lf=Array.prototype.indexOf,Vi=Array.from,oo=Object.defineProperty,Fo=Object.getOwnPropertyDescriptor,Ps=Object.getOwnPropertyDescriptors,Ls=Object.prototype,cf=Array.prototype,Oi=Object.getPrototypeOf,Ds=Object.isExtensible;const Bs=()=>{};function ff(t){for(var e=0;e<t.length;e++)t[e]()}function Gs(){var t,e,r=new Promise((o,i)=>{t=o,e=i});return{promise:r,resolve:t,reject:e}}function Wa(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const o of t)if(r.push(o),r.length===e)break;return r}const cn=2,Ra=4,za=8,uf=1<<24,Wr=16,Rr=32,qr=64,$i=128,or=512,vn=1024,kn=2048,pr=4096,Dn=8192,Xr=16384,Ia=32768,io=65536,ji=1<<17,Vs=1<<18,ao=1<<19,df=1<<20,zr=1<<25,Ur=32768,Fa=1<<21,qi=1<<22,Yr=1<<23,vr=Symbol("$state"),hf=Symbol(""),Os=Symbol("proxy path"),Po=new class extends Error{constructor(){super(...arguments);Ar(this,"name","StaleReactionError");Ar(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},gf=1,pf=11;function $s(){if(dt){const t=new Error("invalid_snippet_arguments\nA snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\nhttps://svelte.dev/e/invalid_snippet_arguments");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/invalid_snippet_arguments")}function vf(){if(dt){const t=new Error("snippet_without_render_tag\nAttempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\nhttps://svelte.dev/e/snippet_without_render_tag");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/snippet_without_render_tag")}function mf(){if(dt){const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function yf(t,e){if(dt){const r=new Error(`component_api_changed
Calling \`${t}\` on a component instance (of ${e}) is no longer valid in Svelte 5
https://svelte.dev/e/component_api_changed`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/component_api_changed")}function _f(t,e){if(dt){const r=new Error(`component_api_invalid_new
Attempted to instantiate ${t} with \`new ${e}\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \`compatibility.componentApi\` compiler option to \`4\` to keep it working.
https://svelte.dev/e/component_api_invalid_new`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/component_api_invalid_new")}function xf(){if(dt){const t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function wf(t,e,r){if(dt){const o=new Error(`each_key_duplicate
${r?`Keyed each block has duplicate key \`${r}\` at indexes ${t} and ${e}`:`Keyed each block has duplicate key at indexes ${t} and ${e}`}
https://svelte.dev/e/each_key_duplicate`);throw o.name="Svelte error",o}else throw new Error("https://svelte.dev/e/each_key_duplicate")}function bf(t){if(dt){const e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Mf(){if(dt){const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Sf(t){if(dt){const e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function Ef(){if(dt){const t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function kf(){if(dt){const t=new Error("invalid_snippet\nCould not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\nhttps://svelte.dev/e/invalid_snippet");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/invalid_snippet")}function Cf(t){if(dt){const e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Tf(){if(dt){const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Nf(){if(dt){const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Hf(){if(dt){const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Af(){if(dt){const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}var so="font-weight: bold",lo="font-weight: normal";function Wf(t){dt?console.warn(`%c[svelte] console_log_state
%cYour \`console.${t}\` contained \`$state\` proxies. Consider using \`$inspect(...)\` or \`$state.snapshot(...)\` instead
https://svelte.dev/e/console_log_state`,so,lo):console.warn("https://svelte.dev/e/console_log_state")}function Rf(t,e){dt?console.warn(`%c[svelte] event_handler_invalid
%c${t} should be a function. Did you mean to ${e}?
https://svelte.dev/e/event_handler_invalid`,so,lo):console.warn("https://svelte.dev/e/event_handler_invalid")}function zf(){dt?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,so,lo):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function If(){dt?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",so,lo):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function pi(t){dt?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,so,lo):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Ff(){dt?console.warn(`%c[svelte] state_proxy_unmount
%cTried to unmount a state proxy, rather than a component
https://svelte.dev/e/state_proxy_unmount`,so,lo):console.warn("https://svelte.dev/e/state_proxy_unmount")}function Pf(){dt?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",so,lo):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Pv(t){}function js(t){return t===this.v}function qs(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Xs(t){return!qs(t,this.v)}let Lf=!1;var Df="font-weight: bold",Bf="font-weight: normal";function Us(t){dt?console.warn(`%c[svelte] state_snapshot_uncloneable
%c${t?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${t}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,Df,Bf):console.warn("https://svelte.dev/e/state_snapshot_uncloneable")}const Gf=[];function Vf(t,e=!1,r=!1){if(dt&&!e){const o=[],i=vi(t,new Map,"",o,null,r);if(o.length===1&&o[0]==="")Us();else if(o.length>0){const a=o.length>10?o.slice(0,7):o.slice(0,10),s=o.length-a.length;let c=a.map(f=>`- <value>${f}`).join(`
`);s>0&&(c+=`
- ...and ${s} more`),Us(c)}return i}return vi(t,new Map,"",Gf,null,r)}function vi(t,e,r,o,i=null,a=!1){if(typeof t=="object"&&t!==null){var s=e.get(t);if(s!==void 0)return s;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(gi(t)){var c=Array(t.length);e.set(t,c),i!==null&&e.set(i,c);for(var f=0;f<t.length;f+=1){var l=t[f];f in t&&(c[f]=vi(l,e,dt?`${r}[${f}]`:r,o,null,a))}return c}if(Oi(t)===Ls){c={},e.set(t,c),i!==null&&e.set(i,c);for(var u in t)c[u]=vi(t[u],e,dt?`${r}.${u}`:r,o,null,a);return c}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!a)return vi(t.toJSON(),e,dt?`${r}.toJSON()`:r,o,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return dt&&o.push(r),t}}function v(t,e){return t.label=e,Ys(t.v,e),t}function Ys(t,e){var r;return(r=t==null?void 0:t[Os])==null||r.call(t,e),t}function Of(t){const e=new Error,r=$f();return r.length===0?null:(r.unshift(`
`),oo(e,"stack",{value:r.join(`
`)}),oo(e,"name",{value:t}),e)}function $f(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];const r=e.split(`
`),o=[];for(let i=0;i<r.length;i++){const a=r[i],s=a.replaceAll("\\","/");if(a.trim()!=="Error"){if(a.includes("validate_each_keys"))return[];s.includes("svelte/src/internal")||s.includes("node_modules/.vite")||o.push(a)}}return o}let tn=null;function Lo(t){tn=t}let Ir=null;function Xi(t){Ir=t}function I(t,e,r,o,i,a){const s=Ir;Ir={type:e,file:r[D],line:o,column:i,parent:s,...a};try{return t()}finally{Ir=s}}let Do=null;function Ui(t){Do=t}function Ee(t,e=!1,r){tn={p:tn,i:!1,c:null,e:null,s:t,x:null,l:null},dt&&(tn.function=r,Do=r)}function ke(t){var e=tn,r=e.e;if(r!==null){e.e=null;for(var o of r)ul(o)}return t!==void 0&&(e.x=t),e.i=!0,tn=e.p,dt&&(Do=(tn==null?void 0:tn.function)??null),t??{}}function Zs(){return!0}let co=[];function Ks(){var t=co;co=[],ff(t)}function Bo(t){if(co.length===0&&!mi){var e=co;queueMicrotask(()=>{e===co&&Ks()})}co.push(t)}function jf(){for(;co.length>0;)Ks()}const Pa=new WeakMap;function Qs(t){var e=_e;if(e===null)return ne.f|=Yr,t;if(dt&&t instanceof Error&&!Pa.has(t)&&Pa.set(t,qf(t,e)),(e.f&Ia)===0){if((e.f&$i)===0)throw dt&&!e.parent&&t instanceof Error&&Js(t),t;e.b.error(t)}else Go(t,e)}function Go(t,e){for(;e!==null;){if((e.f&$i)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw dt&&t instanceof Error&&Js(t),t}function qf(t,e){var s,c,f;const r=Fo(t,"message");if(!(r&&!r.configurable)){for(var o=$a?"  ":"	",i=`
${o}in ${((s=e.fn)==null?void 0:s.name)||"<unknown>"}`,a=e.ctx;a!==null;)i+=`
${o}in ${(c=a.function)==null?void 0:c[D].split("/").pop()}`,a=a.p;return{message:t.message+`
${i}
`,stack:(f=t.stack)==null?void 0:f.split(`
`).filter(l=>!l.includes("svelte/src/internal")).join(`
`)}}}function Js(t){const e=Pa.get(t);e&&(oo(t,"message",{value:e.message}),oo(t,"stack",{value:e.stack}))}const Yi=new Set;let ce=null,Qe=null,jn=[],Zi=null,La=!1,mi=!1;const wa=class wa{constructor(){le(this,fn);Ar(this,"committed",!1);Ar(this,"current",new Map);Ar(this,"previous",new Map);le(this,Jo,new Set);le(this,ti,new Set);le(this,To,0);le(this,No,0);le(this,Li,null);le(this,ei,new Set);le(this,ni,new Set);Ar(this,"skipped_effects",new Set);Ar(this,"is_fork",!1)}is_deferred(){return this.is_fork||O(this,No)>0}process(e){var o;jn=[],this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of e)Ke(this,fn,Ws).call(this,i,r);this.is_fork||Ke(this,fn,of).call(this),this.is_deferred()?(Ke(this,fn,Gi).call(this,r.effects),Ke(this,fn,Gi).call(this,r.render_effects)):(ce=null,el(r.render_effects),el(r.effects),(o=O(this,Li))==null||o.resolve()),Qe=null}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&Yr)===0&&(this.current.set(e,e.v),Qe==null||Qe.set(e,e.v))}activate(){ce=this,this.apply()}deactivate(){ce===this&&(ce=null,Qe=null)}flush(){if(this.activate(),jn.length>0){if(tl(),ce!==null&&ce!==this)return}else O(this,To)===0&&this.process([]);this.deactivate()}discard(){for(const e of O(this,ti))e(this);O(this,ti).clear()}increment(e){qt(this,To,O(this,To)+1),e&&qt(this,No,O(this,No)+1)}decrement(e){qt(this,To,O(this,To)-1),e&&qt(this,No,O(this,No)-1),this.revive()}revive(){for(const e of O(this,ei))O(this,ni).delete(e),mn(e,kn),fo(e);for(const e of O(this,ni))mn(e,pr),fo(e);this.flush()}oncommit(e){O(this,Jo).add(e)}ondiscard(e){O(this,ti).add(e)}settled(){return(O(this,Li)??qt(this,Li,Gs())).promise}static ensure(){if(ce===null){const e=ce=new wa;Yi.add(ce),mi||wa.enqueue(()=>{ce===e&&e.flush()})}return ce}static enqueue(e){Bo(e)}apply(){}};Jo=new WeakMap,ti=new WeakMap,To=new WeakMap,No=new WeakMap,Li=new WeakMap,ei=new WeakMap,ni=new WeakMap,fn=new WeakSet,Ws=function(e,r){var u;e.f^=vn;for(var o=e.first;o!==null;){var i=o.f,a=(i&(Rr|qr))!==0,s=a&&(i&vn)!==0,c=s||(i&Dn)!==0||this.skipped_effects.has(o);if((o.f&$i)!==0&&((u=o.b)!=null&&u.is_pending())&&(r={parent:r,effect:o,effects:[],render_effects:[]}),!c&&o.fn!==null){a?o.f^=vn:(i&Ra)!==0?r.effects.push(o):bi(o)&&((o.f&Wr)!==0&&O(this,ei).add(o),Mi(o));var f=o.first;if(f!==null){o=f;continue}}var l=o.parent;for(o=o.next;o===null&&l!==null;)l===r.effect&&(Ke(this,fn,Gi).call(this,r.effects),Ke(this,fn,Gi).call(this,r.render_effects),r=r.parent),o=l.next,l=l.parent}},Gi=function(e){for(const r of e)(r.f&kn)!==0?O(this,ei).add(r):(r.f&pr)!==0&&O(this,ni).add(r),Ke(this,fn,Rs).call(this,r.deps),mn(r,vn)},Rs=function(e){if(e!==null)for(const r of e)(r.f&cn)===0||(r.f&Ur)===0||(r.f^=Ur,Ke(this,fn,Rs).call(this,r.deps))},of=function(){if(O(this,No)===0){for(const e of O(this,Jo))e();O(this,Jo).clear()}O(this,To)===0&&Ke(this,fn,af).call(this)},af=function(){var a;if(Yi.size>1){this.previous.clear();var e=Qe,r=!0,o={parent:null,effect:null,effects:[],render_effects:[]};for(const s of Yi){if(s===this){r=!1;continue}const c=[];for(const[l,u]of this.current){if(s.current.has(l))if(r&&u!==s.current.get(l))s.current.set(l,u);else continue;c.push(l)}if(c.length===0)continue;const f=[...s.current.keys()].filter(l=>!this.current.has(l));if(f.length>0){var i=jn;jn=[];const l=new Set,u=new Map;for(const h of c)nl(h,f,l,u);if(jn.length>0){ce=s,s.apply();for(const h of jn)Ke(a=s,fn,Ws).call(a,h,o);s.deactivate()}jn=i}}ce=null,Qe=e}this.committed=!0,Yi.delete(this)};let mr=wa;function Xf(t){var e=mi;mi=!0;try{for(var r;;){if(jf(),jn.length===0&&(ce==null||ce.flush(),jn.length===0))return Zi=null,r;tl()}}finally{mi=e}}function tl(){var t=po;La=!0;var e=dt?new Set:null;try{var r=0;for(ea(!0);jn.length>0;){var o=mr.ensure();if(r++>1e3){if(dt){var i=new Map;for(const s of o.current.keys())for(const[c,f]of s.updated??[]){var a=i.get(c);a||(a={error:f.error,count:0},i.set(c,a)),a.count+=f.count}for(const s of i.values())s.error&&console.error(s.error)}Uf()}if(o.process(jn),Zr.clear(),dt)for(const s of o.current.keys())e.add(s)}}finally{if(La=!1,ea(t),Zi=null,dt)for(const s of e)s.updated=null}}function Uf(){try{Ef()}catch(t){dt&&oo(t,"stack",{value:""}),Go(t,Zi)}}let ir=null;function el(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var o=t[r++];if((o.f&(Xr|Dn))===0&&bi(o)&&(ir=new Set,Mi(o),o.deps===null&&o.first===null&&o.nodes===null&&(o.teardown===null&&o.ac===null?pl(o):o.fn=null),(ir==null?void 0:ir.size)>0)){Zr.clear();for(const i of ir){if((i.f&(Xr|Dn))!==0)continue;const a=[i];let s=i.parent;for(;s!==null;)ir.has(s)&&(ir.delete(s),a.push(s)),s=s.parent;for(let c=a.length-1;c>=0;c--){const f=a[c];(f.f&(Xr|Dn))===0&&Mi(f)}}ir.clear()}}ir=null}}function nl(t,e,r,o){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const i of t.reactions){const a=i.f;(a&cn)!==0?nl(i,e,r,o):(a&(qi|Wr))!==0&&(a&kn)===0&&rl(i,e,o)&&(mn(i,kn),fo(i))}}function rl(t,e,r){const o=r.get(t);if(o!==void 0)return o;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&cn)!==0&&rl(i,e,r))return r.set(i,!0),!0}return r.set(t,!1),!1}function fo(t){for(var e=Zi=t;e.parent!==null;){e=e.parent;var r=e.f;if(La&&e===_e&&(r&Wr)!==0&&(r&Vs)===0)return;if((r&(qr|Rr))!==0){if((r&vn)===0)return;e.f^=vn}}jn.push(e)}function Yf(t){let e=0,r=uo(0),o;return dt&&v(r,"createSubscriber version"),()=>{xi()&&(n(r),Ji(()=>(e===0&&(o=ra(()=>t(()=>yi(r)))),e+=1,()=>{Bo(()=>{e-=1,e===0&&(o==null||o(),o=void 0,yi(r))})})))}}var Zf=io|ao|$i;function Kf(t,e,r){new Qf(t,e,r)}class Qf{constructor(e,r,o){le(this,an);Ar(this,"parent");le(this,tr,!1);le(this,er);le(this,Ns,null);le(this,Cr);le(this,Ho);le(this,Tr);le(this,nr,null);le(this,Pn,null);le(this,Nr,null);le(this,Or,null);le(this,no,null);le(this,Ao,0);le(this,ro,0);le(this,Wo,!1);le(this,$r,null);le(this,ba,Yf(()=>(qt(this,$r,uo(O(this,Ao))),dt&&v(O(this,$r),"$effect.pending()"),()=>{qt(this,$r,null)})));qt(this,er,e),qt(this,Cr,r),qt(this,Ho,o),this.parent=_e.b,qt(this,tr,!!O(this,Cr).pending),qt(this,Tr,ta(()=>{_e.b=this;{var i=Ke(this,an,zs).call(this);try{qt(this,nr,qn(()=>o(i)))}catch(a){this.error(a)}O(this,ro)>0?Ke(this,an,Ha).call(this):qt(this,tr,!1)}return()=>{var a;(a=O(this,no))==null||a.remove()}},Zf))}is_pending(){return O(this,tr)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!O(this,Cr).pending}update_pending_count(e){Ke(this,an,Is).call(this,e),qt(this,Ao,O(this,Ao)+e),O(this,$r)&&Oo(O(this,$r),O(this,Ao))}get_effect_pending(){return O(this,ba).call(this),n(O(this,$r))}error(e){var r=O(this,Cr).onerror;let o=O(this,Cr).failed;if(O(this,Wo)||!r&&!o)throw e;O(this,nr)&&(wn(O(this,nr)),qt(this,nr,null)),O(this,Pn)&&(wn(O(this,Pn)),qt(this,Pn,null)),O(this,Nr)&&(wn(O(this,Nr)),qt(this,Nr,null));var i=!1,a=!1;const s=()=>{if(i){Pf();return}i=!0,a&&Af(),mr.ensure(),qt(this,Ao,0),O(this,Nr)!==null&&go(O(this,Nr),()=>{qt(this,Nr,null)}),qt(this,tr,this.has_pending_snippet()),qt(this,nr,Ke(this,an,Na).call(this,()=>(qt(this,Wo,!1),qn(()=>O(this,Ho).call(this,O(this,er)))))),O(this,ro)>0?Ke(this,an,Ha).call(this):qt(this,tr,!1)};var c=ne;try{Cn(null),a=!0,r==null||r(e,s),a=!1}catch(f){Go(f,O(this,Tr)&&O(this,Tr).parent)}finally{Cn(c)}o&&Bo(()=>{qt(this,Nr,Ke(this,an,Na).call(this,()=>{mr.ensure(),qt(this,Wo,!0);try{return qn(()=>{o(O(this,er),()=>e,()=>s)})}catch(f){return Go(f,O(this,Tr).parent),null}finally{qt(this,Wo,!1)}}))})}}tr=new WeakMap,er=new WeakMap,Ns=new WeakMap,Cr=new WeakMap,Ho=new WeakMap,Tr=new WeakMap,nr=new WeakMap,Pn=new WeakMap,Nr=new WeakMap,Or=new WeakMap,no=new WeakMap,Ao=new WeakMap,ro=new WeakMap,Wo=new WeakMap,$r=new WeakMap,ba=new WeakMap,an=new WeakSet,Av=function(){try{qt(this,nr,qn(()=>O(this,Ho).call(this,O(this,er))))}catch(e){this.error(e)}qt(this,tr,!1)},Wv=function(){const e=O(this,Cr).pending;e&&(qt(this,Pn,qn(()=>e(O(this,er)))),mr.enqueue(()=>{var r=Ke(this,an,zs).call(this);qt(this,nr,Ke(this,an,Na).call(this,()=>(mr.ensure(),qn(()=>O(this,Ho).call(this,r))))),O(this,ro)>0?Ke(this,an,Ha).call(this):(go(O(this,Pn),()=>{qt(this,Pn,null)}),qt(this,tr,!1))}))},zs=function(){var e=O(this,er);return O(this,tr)&&(qt(this,no,Kr()),O(this,er).before(O(this,no)),e=O(this,no)),e},Na=function(e){var r=_e,o=ne,i=tn;ar(O(this,Tr)),Cn(O(this,Tr)),Lo(O(this,Tr).ctx);try{return e()}catch(a){return Qs(a),null}finally{ar(r),Cn(o),Lo(i)}},Ha=function(){const e=O(this,Cr).pending;O(this,nr)!==null&&(qt(this,Or,document.createDocumentFragment()),O(this,Or).append(O(this,no)),yl(O(this,nr),O(this,Or))),O(this,Pn)===null&&qt(this,Pn,qn(()=>e(O(this,er))))},Is=function(e){var r;if(!this.has_pending_snippet()){this.parent&&Ke(r=this.parent,an,Is).call(r,e);return}qt(this,ro,O(this,ro)+e),O(this,ro)===0&&(qt(this,tr,!1),O(this,Pn)&&go(O(this,Pn),()=>{qt(this,Pn,null)}),O(this,Or)&&(O(this,er).before(O(this,Or)),qt(this,Or,null)))};function Jf(t,e,r,o){const i=Da;if(r.length===0&&t.length===0){o(e.map(i));return}var a=ce,s=_e,c=tu();function f(){Promise.all(r.map(l=>ru(l))).then(l=>{c();try{o([...e.map(i),...l])}catch(u){(s.f&Xr)===0&&Go(u,s)}a==null||a.deactivate(),Ki()}).catch(l=>{Go(l,s)})}t.length>0?Promise.all(t).then(()=>{c();try{return f()}finally{a==null||a.deactivate(),Ki()}}):f()}function tu(){var t=_e,e=ne,r=tn,o=ce;if(dt)var i=Ir;return function(s=!0){ar(t),Cn(e),Lo(r),s&&(o==null||o.activate()),dt&&Xi(i)}}async function eu(t){var e=await t;return()=>e}function Ki(){ar(null),Cn(null),Lo(null),dt&&Xi(null)}const nu=new Set;function Da(t){var e=cn|kn,r=ne!==null&&(ne.f&cn)!==0?ne:null;return _e!==null&&(_e.f|=ao),{ctx:tn,deps:null,effects:null,equals:js,f:e,fn:t,reactions:null,rv:0,v:pn,wv:0,parent:r??_e,ac:null}}function ru(t,e){let r=_e;r===null&&mf();var o=r.b,i=void 0,a=uo(pn),s=!ne,c=new Map;return _u(()=>{var d;var f=Gs();i=f.promise;try{Promise.resolve(t()).then(f.resolve,f.reject).then(()=>{l===ce&&l.committed&&l.deactivate(),Ki()})}catch(g){f.reject(g),Ki()}var l=ce;if(s){var u=!o.is_pending();o.update_pending_count(1),l.increment(u),(d=c.get(l))==null||d.reject(Po),c.delete(l),c.set(l,f)}const h=(g,p=void 0)=>{if(l.activate(),p)p!==Po&&(a.f|=Yr,Oo(a,p));else{(a.f&Yr)!==0&&(a.f^=Yr),Oo(a,g);for(const[y,_]of c){if(c.delete(y),y===l)break;_.reject(Po)}}s&&(o.update_pending_count(-1),l.decrement(u))};f.promise.then(h,g=>h(null,g||"unknown"))}),qa(()=>{for(const f of c.values())f.reject(Po)}),dt&&(a.f|=qi),new Promise(f=>{function l(u){function h(){u===i?f(a):l(i)}u.then(h,h)}l(i)})}function m(t){const e=Da(t);return xl(e),e}function ou(t){const e=Da(t);return e.equals=Xs,e}function Ba(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)wn(e[r])}}let Ga=[];function iu(t){for(var e=t.parent;e!==null;){if((e.f&cn)===0)return(e.f&Xr)===0?e:null;e=e.parent}return null}function Va(t){var e,r=_e;if(ar(iu(t)),dt){let o=Vo;il(new Set);try{Ga.includes(t)&&xf(),Ga.push(t),t.f&=~Ur,Ba(t),e=Ua(t)}finally{ar(r),il(o),Ga.pop()}}else try{t.f&=~Ur,Ba(t),e=Ua(t)}finally{ar(r)}return e}function ol(t){var e=Va(t);if(t.equals(e)||(ce!=null&&ce.is_fork||(t.v=e),t.wv=Ml()),!jo)if(Qe!==null)(xi()||ce!=null&&ce.is_fork)&&Qe.set(t,e);else{var r=(t.f&or)===0?pr:vn;mn(t,r)}}let Vo=new Set;const Zr=new Map;function il(t){Vo=t}let Oa=!1;function au(){Oa=!0}function uo(t,e){var r={f:0,v:t,reactions:null,equals:js,rv:0,wv:0};return r}function Wt(t,e){const r=uo(t);return xl(r),r}function su(t,e=!1,r=!0){const o=uo(t);return e||(o.equals=Xs),o}function at(t,e,r=!1){ne!==null&&(!xr||(ne.f&ji)!==0)&&Zs()&&(ne.f&(cn|Wr|qi|ji))!==0&&!(bn!=null&&bn.includes(t))&&Hf();let o=r?yr(e):e;return dt&&Ys(o,t.label),Oo(t,o)}function Oo(t,e){var i;if(!t.equals(e)){var r=t.v;jo?Zr.set(t,e):Zr.set(t,r),t.v=e;var o=mr.ensure();if(o.capture(t,r),dt){if(_e!==null){t.updated??(t.updated=new Map);const a=(((i=t.updated.get(""))==null?void 0:i.count)??0)+1;if(t.updated.set("",{error:null,count:a}),a>5){const s=Of("updated at");if(s!==null){let c=t.updated.get(s.stack);c||(c={error:s,count:0},t.updated.set(s.stack,c)),c.count++}}}_e!==null&&(t.set_during_effect=!0)}(t.f&cn)!==0&&((t.f&kn)!==0&&Va(t),mn(t,(t.f&or)!==0?vn:pr)),t.wv=Ml(),sl(t,kn),_e!==null&&(_e.f&vn)!==0&&(_e.f&(Rr|qr))===0&&(Xn===null?bu([t]):Xn.push(t)),!o.is_fork&&Vo.size>0&&!Oa&&al()}return e}function al(){Oa=!1;var t=po;ea(!0);const e=Array.from(Vo);try{for(const r of e)(r.f&vn)!==0&&mn(r,pr),bi(r)&&Mi(r)}finally{ea(t)}Vo.clear()}function yi(t){at(t,t.v+1)}function sl(t,e){var r=t.reactions;if(r!==null)for(var o=r.length,i=0;i<o;i++){var a=r[i],s=a.f;if(dt&&(s&ji)!==0){Vo.add(a);continue}var c=(s&kn)===0;if(c&&mn(a,e),(s&cn)!==0){var f=a;Qe==null||Qe.delete(f),(s&Ur)===0&&(s&or&&(a.f|=Ur),sl(f,pr))}else c&&((s&Wr)!==0&&ir!==null&&ir.add(a),fo(a))}}const lu=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function yr(t){if(typeof t!="object"||t===null||vr in t)return t;const e=Oi(t);if(e!==Ls&&e!==cf)return t;var r=new Map,o=gi(t),i=Wt(0),a=vo,s=u=>{if(vo===a)return u();var h=ne,d=vo;Cn(null),bl(a);var g=u();return Cn(h),bl(d),g};o&&(r.set("length",Wt(t.length)),dt&&(t=uu(t)));var c="";let f=!1;function l(u){if(!f){f=!0,c=u,v(i,`${c} version`);for(const[h,d]of r)v(d,ho(c,h));f=!1}}return new Proxy(t,{defineProperty(u,h,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Tf();var g=r.get(h);return g===void 0?g=s(()=>{var p=Wt(d.value);return r.set(h,p),dt&&typeof h=="string"&&v(p,ho(c,h)),p}):at(g,d.value,!0),!0},deleteProperty(u,h){var d=r.get(h);if(d===void 0){if(h in u){const g=s(()=>Wt(pn));r.set(h,g),yi(i),dt&&v(g,ho(c,h))}}else at(d,pn),yi(i);return!0},get(u,h,d){var _;if(h===vr)return t;if(dt&&h===Os)return l;var g=r.get(h),p=h in u;if(g===void 0&&(!p||(_=Fo(u,h))!=null&&_.writable)&&(g=s(()=>{var x=yr(p?u[h]:pn),C=Wt(x);return dt&&v(C,ho(c,h)),C}),r.set(h,g)),g!==void 0){var y=n(g);return y===pn?void 0:y}return Reflect.get(u,h,d)},getOwnPropertyDescriptor(u,h){var d=Reflect.getOwnPropertyDescriptor(u,h);if(d&&"value"in d){var g=r.get(h);g&&(d.value=n(g))}else if(d===void 0){var p=r.get(h),y=p==null?void 0:p.v;if(p!==void 0&&y!==pn)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return d},has(u,h){var y;if(h===vr)return!0;var d=r.get(h),g=d!==void 0&&d.v!==pn||Reflect.has(u,h);if(d!==void 0||_e!==null&&(!g||(y=Fo(u,h))!=null&&y.writable)){d===void 0&&(d=s(()=>{var _=g?yr(u[h]):pn,x=Wt(_);return dt&&v(x,ho(c,h)),x}),r.set(h,d));var p=n(d);if(p===pn)return!1}return g},set(u,h,d,g){var k;var p=r.get(h),y=h in u;if(o&&h==="length")for(var _=d;_<p.v;_+=1){var x=r.get(_+"");x!==void 0?at(x,pn):_ in u&&(x=s(()=>Wt(pn)),r.set(_+"",x),dt&&v(x,ho(c,_)))}if(p===void 0)(!y||(k=Fo(u,h))!=null&&k.writable)&&(p=s(()=>Wt(void 0)),dt&&v(p,ho(c,h)),at(p,yr(d)),r.set(h,p));else{y=p.v!==pn;var C=s(()=>yr(d));at(p,C)}var W=Reflect.getOwnPropertyDescriptor(u,h);if(W!=null&&W.set&&W.set.call(g,d),!y){if(o&&typeof h=="string"){var H=r.get("length"),M=Number(h);Number.isInteger(M)&&M>=H.v&&at(H,M+1)}yi(i)}return!0},ownKeys(u){n(i);var h=Reflect.ownKeys(u).filter(p=>{var y=r.get(p);return y===void 0||y.v!==pn});for(var[d,g]of r)g.v!==pn&&!(d in u)&&h.push(d);return h},setPrototypeOf(){Nf()}})}function ho(t,e){return typeof e=="symbol"?`${t}[Symbol(${e.description??""})]`:lu.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Fr(t){try{if(t!==null&&typeof t=="object"&&vr in t)return t[vr]}catch{}return t}function cu(t,e){return Object.is(Fr(t),Fr(e))}const fu=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function uu(t){return new Proxy(t,{get(e,r,o){var i=Reflect.get(e,r,o);return fu.has(r)?function(...a){au();var s=i.apply(this,a);return al(),s}:i}})}function du(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:r,lastIndexOf:o,includes:i}=t;t.indexOf=function(a,s){const c=r.call(this,a,s);if(c===-1){for(let f=s??0;f<this.length;f+=1)if(Fr(this[f])===a){pi("array.indexOf(...)");break}}return c},t.lastIndexOf=function(a,s){const c=o.call(this,a,s??this.length-1);if(c===-1){for(let f=0;f<=(s??this.length-1);f+=1)if(Fr(this[f])===a){pi("array.lastIndexOf(...)");break}}return c},t.includes=function(a,s){const c=i.call(this,a,s);if(!c){for(let f=0;f<this.length;f+=1)if(Fr(this[f])===a){pi("array.includes(...)");break}}return c},Array.__svelte_cleanup=()=>{t.indexOf=r,t.lastIndexOf=o,t.includes=i}}function w(t,e,r=!0){try{t===e!=(Fr(t)===Fr(e))&&pi(r?"===":"!==")}catch{}return t===e===r}function he(t,e,r=!0){return t==e!=(Fr(t)==Fr(e))&&pi(r?"==":"!="),t==e===r}var $o,$a,ll,cl;function hu(){if($o===void 0){$o=window,$a=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;ll=Fo(e,"firstChild").get,cl=Fo(e,"nextSibling").get,Ds(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ds(r)&&(r.__t=void 0),dt&&(t.__svelte_meta=null,du())}}function Kr(t=""){return document.createTextNode(t)}function Pr(t){return ll.call(t)}function _i(t){return cl.call(t)}function Q(t,e){return Pr(t)}function mt(t,e=!1){{var r=Pr(t);return r instanceof Comment&&r.data===""?_i(r):r}}function rt(t,e=1,r=!1){let o=t;for(;e--;)o=_i(o);return o}function gu(t){t.textContent=""}function fl(){return!1}function ja(t){var e=ne,r=_e;Cn(null),ar(null);try{return t()}finally{Cn(e),ar(r)}}function pu(t){_e===null&&(ne===null&&Sf(t),Mf()),jo&&bf(t)}function vu(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function _r(t,e,r){var o=_e;if(dt)for(;o!==null&&(o.f&ji)!==0;)o=o.parent;o!==null&&(o.f&Dn)!==0&&(t|=Dn);var i={ctx:tn,deps:null,nodes:null,f:t|kn|or,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,wv:0,ac:null};if(dt&&(i.component_function=Do),r)try{Mi(i),i.f|=Ia}catch(c){throw wn(i),c}else e!==null&&fo(i);var a=i;if(r&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&ao)===0&&(a=a.first,(t&Wr)!==0&&(t&io)!==0&&a!==null&&(a.f|=io)),a!==null&&(a.parent=o,o!==null&&vu(a,o),ne!==null&&(ne.f&cn)!==0&&(t&qr)===0)){var s=ne;(s.effects??(s.effects=[])).push(a)}return i}function xi(){return ne!==null&&!xr}function qa(t){const e=_r(za,null,!1);return mn(e,vn),e.teardown=t,e}function Qi(t){pu("$effect"),dt&&oo(t,"name",{value:"$effect"});var e=_e.f,r=!ne&&(e&Rr)!==0&&(e&Ia)===0;if(r){var o=tn;(o.e??(o.e=[])).push(t)}else return ul(t)}function ul(t){return _r(Ra|df,t,!1)}function mu(t){mr.ensure();const e=_r(qr|ao,t,!0);return()=>{wn(e)}}function yu(t){mr.ensure();const e=_r(qr|ao,t,!0);return(r={})=>new Promise(o=>{r.outro?go(e,()=>{wn(e),o(void 0)}):(wn(e),o(void 0))})}function dl(t){return _r(Ra,t,!1)}function _u(t){return _r(qi|ao,t,!0)}function Ji(t,e=0){return _r(za|e,t,!0)}function J(t,e=[],r=[],o=[]){Jf(o,e,r,i=>{_r(za,()=>t(...i.map(n)),!0)})}function ta(t,e=0){var r=_r(Wr|e,t,!0);return dt&&(r.dev_stack=Ir),r}function qn(t){return _r(Rr|ao,t,!0)}function hl(t){var e=t.teardown;if(e!==null){const r=jo,o=ne;_l(!0),Cn(null);try{e.call(null)}finally{_l(r),Cn(o)}}}function gl(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const i=r.ac;i!==null&&ja(()=>{i.abort(Po)});var o=r.next;(r.f&qr)!==0?r.parent=null:wn(r,e),r=o}}function xu(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Rr)===0&&wn(e),e=r}}function wn(t,e=!0){var r=!1;(e||(t.f&Vs)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(wu(t.nodes.start,t.nodes.end),r=!0),gl(t,e&&!r),na(t,0),mn(t,Xr);var o=t.nodes&&t.nodes.t;if(o!==null)for(const a of o)a.stop();hl(t);var i=t.parent;i!==null&&i.first!==null&&pl(t),dt&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function wu(t,e){for(;t!==null;){var r=t===e?null:_i(t);t.remove(),t=r}}function pl(t){var e=t.parent,r=t.prev,o=t.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),e!==null&&(e.first===t&&(e.first=o),e.last===t&&(e.last=r))}function go(t,e,r=!0){var o=[];vl(t,o,!0);var i=()=>{r&&wn(t),e&&e()},a=o.length;if(a>0){var s=()=>--a||i();for(var c of o)c.out(s)}else i()}function vl(t,e,r){if((t.f&Dn)===0){t.f^=Dn;var o=t.nodes&&t.nodes.t;if(o!==null)for(const c of o)(c.is_global||r)&&e.push(c);for(var i=t.first;i!==null;){var a=i.next,s=(i.f&io)!==0||(i.f&Rr)!==0&&(t.f&Wr)!==0;vl(i,e,s?r:!1),i=a}}}function Xa(t){ml(t,!0)}function ml(t,e){if((t.f&Dn)!==0){t.f^=Dn,(t.f&vn)===0&&(mn(t,kn),fo(t));for(var r=t.first;r!==null;){var o=r.next,i=(r.f&io)!==0||(r.f&Rr)!==0;ml(r,i?e:!1),r=o}var a=t.nodes&&t.nodes.t;if(a!==null)for(const s of a)(s.is_global||e)&&s.in()}}function yl(t,e){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end;r!==null;){var i=r===o?null:_i(r);e.append(r),r=i}}let po=!1;function ea(t){po=t}let jo=!1;function _l(t){jo=t}let ne=null,xr=!1;function Cn(t){ne=t}let _e=null;function ar(t){_e=t}let bn=null;function xl(t){ne!==null&&(bn===null?bn=[t]:bn.push(t))}let Mn=null,Bn=0,Xn=null;function bu(t){Xn=t}let wl=1,wi=0,vo=wi;function bl(t){vo=t}function Ml(){return++wl}function bi(t){var e=t.f;if((e&kn)!==0)return!0;if(e&cn&&(t.f&=~Ur),(e&pr)!==0){var r=t.deps;if(r!==null)for(var o=r.length,i=0;i<o;i++){var a=r[i];if(bi(a)&&ol(a),a.wv>t.wv)return!0}(e&or)!==0&&Qe===null&&mn(t,vn)}return!1}function Sl(t,e,r=!0){var o=t.reactions;if(o!==null&&!(bn!=null&&bn.includes(t)))for(var i=0;i<o.length;i++){var a=o[i];(a.f&cn)!==0?Sl(a,e,!1):e===a&&(r?mn(a,kn):(a.f&vn)!==0&&mn(a,pr),fo(a))}}function Ua(t){var p;var e=Mn,r=Bn,o=Xn,i=ne,a=bn,s=tn,c=xr,f=vo,l=t.f;Mn=null,Bn=0,Xn=null,ne=(l&(Rr|qr))===0?t:null,bn=null,Lo(t.ctx),xr=!1,vo=++wi,t.ac!==null&&(ja(()=>{t.ac.abort(Po)}),t.ac=null);try{t.f|=Fa;var u=t.fn,h=u(),d=t.deps;if(Mn!==null){var g;if(na(t,Bn),d!==null&&Bn>0)for(d.length=Bn+Mn.length,g=0;g<Mn.length;g++)d[Bn+g]=Mn[g];else t.deps=d=Mn;if(xi()&&(t.f&or)!==0)for(g=Bn;g<d.length;g++)((p=d[g]).reactions??(p.reactions=[])).push(t)}else d!==null&&Bn<d.length&&(na(t,Bn),d.length=Bn);if(Zs()&&Xn!==null&&!xr&&d!==null&&(t.f&(cn|pr|kn))===0)for(g=0;g<Xn.length;g++)Sl(Xn[g],t);return i!==null&&i!==t&&(wi++,Xn!==null&&(o===null?o=Xn:o.push(...Xn))),(t.f&Yr)!==0&&(t.f^=Yr),h}catch(y){return Qs(y)}finally{t.f^=Fa,Mn=e,Bn=r,Xn=o,ne=i,bn=a,Lo(s),xr=c,vo=f}}function Mu(t,e){let r=e.reactions;if(r!==null){var o=lf.call(r,t);if(o!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[o]=r[i],r.pop())}}r===null&&(e.f&cn)!==0&&(Mn===null||!Mn.includes(e))&&(mn(e,pr),(e.f&or)!==0&&(e.f^=or,e.f&=~Ur),Ba(e),na(e,0))}function na(t,e){var r=t.deps;if(r!==null)for(var o=e;o<r.length;o++)Mu(t,r[o])}function Mi(t){var e=t.f;if((e&Xr)===0){mn(t,vn);var r=_e,o=po;if(_e=t,po=!0,dt){var i=Do;Ui(t.component_function);var a=Ir;Xi(t.dev_stack??Ir)}try{(e&(Wr|uf))!==0?xu(t):gl(t),hl(t);var s=Ua(t);t.teardown=typeof s=="function"?s:null,t.wv=wl;var c;dt&&Lf&&(t.f&kn)!==0&&t.deps}finally{po=o,_e=r,dt&&(Ui(i),Xi(a))}}}async function Su(){await Promise.resolve(),Xf()}function n(t){var e=t.f,r=(e&cn)!==0;if(ne!==null&&!xr){var o=_e!==null&&(_e.f&Xr)!==0;if(!o&&!(bn!=null&&bn.includes(t))){var i=ne.deps;if((ne.f&Fa)!==0)t.rv<wi&&(t.rv=wi,Mn===null&&i!==null&&i[Bn]===t?Bn++:Mn===null?Mn=[t]:Mn.includes(t)||Mn.push(t));else{(ne.deps??(ne.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[ne]:a.includes(ne)||a.push(ne)}}}if(dt&&nu.delete(t),jo){if(Zr.has(t))return Zr.get(t);if(r){var s=t,c=s.v;return((s.f&vn)===0&&s.reactions!==null||kl(s))&&(c=Va(s)),Zr.set(s,c),c}}else r&&(!(Qe!=null&&Qe.has(t))||ce!=null&&ce.is_fork&&!xi())&&(s=t,bi(s)&&ol(s),po&&xi()&&(s.f&or)===0&&El(s));if(Qe!=null&&Qe.has(t))return Qe.get(t);if((t.f&Yr)!==0)throw t.v;return t.v}function El(t){if(t.deps!==null){t.f^=or;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&cn)!==0&&(e.f&or)===0&&El(e)}}function kl(t){if(t.v===pn)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Zr.has(e)||(e.f&cn)!==0&&kl(e))return!0;return!1}function ra(t){var e=xr;try{return xr=!0,t()}finally{xr=e}}const Eu=-7169;function mn(t,e){t.f=t.f&Eu|e}function ku(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(vr in t)Ya(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&vr in r&&Ya(r)}}}function Ya(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{Ya(t[o],e)}catch{}const r=Oi(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=Ps(r);for(let i in o){const a=o[i].get;if(a)try{a.call(t)}catch{}}}}}const Cl=new Set,Za=new Set;function Cu(t,e,r,o={}){function i(a){if(o.capture||Si.call(e,a),!a.cancelBubble)return ja(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Bo(()=>{e.addEventListener(t,i,o)}):e.addEventListener(t,i,o),i}function Gn(t,e,r,o,i){var a={capture:o,passive:i},s=Cu(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&qa(()=>{e.removeEventListener(t,s,a)})}function mo(t){for(var e=0;e<t.length;e++)Cl.add(t[e]);for(var r of Za)r(t)}let Tl=null;function Si(t){var _;var e=this,r=e.ownerDocument,o=t.type,i=((_=t.composedPath)==null?void 0:_.call(t))||[],a=i[0]||t.target;Tl=t;var s=0,c=Tl===t&&t.__root;if(c){var f=i.indexOf(c);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var l=i.indexOf(e);if(l===-1)return;f<=l&&(s=f)}if(a=i[s]||t.target,a!==e){oo(t,"currentTarget",{configurable:!0,get(){return a||r}});var u=ne,h=_e;Cn(null),ar(null);try{for(var d,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+o];y!=null&&(!a.disabled||t.target===a)&&y.call(a,t)}catch(x){d?g.push(x):d=x}if(t.cancelBubble||p===e||p===null)break;a=p}if(d){for(let x of g)queueMicrotask(()=>{throw x});throw d}}finally{t.__root=e,delete t.currentTarget,Cn(u),ar(h)}}}function sr(t,e,r,o,i,a=!1,s=!1){var l,u;let c,f;try{c=t()}catch(h){f=h}if(typeof c!="function"&&(a||c!=null||f)){const h=o==null?void 0:o[D],d=i?` at ${h}:${i[0]}:${i[1]}`:` in ${h}`,g=((l=r[0])==null?void 0:l.eventPhase)<Event.BUBBLING_PHASE?"capture":"",y=`\`${((u=r[0])==null?void 0:u.type)+g}\` handler${d}`;if(Rf(y,s?"remove the trailing `()`":"add a leading `() =>`"),f)throw f}c==null||c.apply(e,r)}function Nl(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ei(t,e){var r=_e;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function _t(t,e){var r=(e&1)!==0,o=(e&2)!==0,i,a=!t.startsWith("<!>");return()=>{i===void 0&&(i=Nl(a?t:"<!>"+t),r||(i=Pr(i)));var s=o||$a?document.importNode(i,!0):i.cloneNode(!0);if(r){var c=Pr(s),f=s.lastChild;Ei(c,f)}else Ei(s,s);return s}}function Tu(t,e,r="svg"){var o=!t.startsWith("<!>"),i=(e&1)!==0,a=`<${r}>${o?t:"<!>"+t}</${r}>`,s;return()=>{if(!s){var c=Nl(a),f=Pr(c);if(i)for(s=document.createDocumentFragment();Pr(f);)s.appendChild(Pr(f));else s=Pr(f)}var l=s.cloneNode(!0);if(i){var u=Pr(l),h=l.lastChild;Ei(u,h)}else Ei(l,l);return l}}function Pt(t,e){return Tu(t,e,"svg")}function Et(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Kr();return t.append(e,r),Ei(e,r),t}function F(t,e){t!==null&&t.before(e)}const Nu=["touchstart","touchmove"];function Hu(t){return Nu.includes(t)}function Qt(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Au(t,e){return Wu(t,e)}const qo=new Map;function Wu(t,{target:e,anchor:r,props:o={},events:i,context:a,intro:s=!0}){hu();var c=new Set,f=h=>{for(var d=0;d<h.length;d++){var g=h[d];if(!c.has(g)){c.add(g);var p=Hu(g);e.addEventListener(g,Si,{passive:p});var y=qo.get(g);y===void 0?(document.addEventListener(g,Si,{passive:p}),qo.set(g,1)):qo.set(g,y+1)}}};f(Vi(Cl)),Za.add(f);var l=void 0,u=yu(()=>{var h=r??e.appendChild(Kr());return Kf(h,{pending:()=>{}},d=>{if(a){Ee({});var g=tn;g.c=a}i&&(o.$$events=i),l=t(d,o)||{},a&&ke()}),()=>{var p;for(var d of c){e.removeEventListener(d,Si);var g=qo.get(d);--g===0?(document.removeEventListener(d,Si),qo.delete(d)):qo.set(d,g)}Za.delete(f),h!==r&&((p=h.parentNode)==null||p.removeChild(h))}});return Ka.set(l,u),l}let Ka=new WeakMap;function Ru(t,e){const r=Ka.get(t);return r?(Ka.delete(t),r(e)):(dt&&(vr in t?Ff():zf()),Promise.resolve())}function zu(t){return t.toString=()=>(vf(),""),t}class Hl{constructor(e,r=!0){Ar(this,"anchor");le(this,dr,new Map);le(this,Hr,new Map);le(this,On,new Map);le(this,Ro,new Set);le(this,Di,!0);le(this,Bi,()=>{var e=ce;if(O(this,dr).has(e)){var r=O(this,dr).get(e),o=O(this,Hr).get(r);if(o)Xa(o),O(this,Ro).delete(r);else{var i=O(this,On).get(r);i&&(O(this,Hr).set(r,i.effect),O(this,On).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),o=i.effect)}for(const[a,s]of O(this,dr)){if(O(this,dr).delete(a),a===e)break;const c=O(this,On).get(s);c&&(wn(c.effect),O(this,On).delete(s))}for(const[a,s]of O(this,Hr)){if(a===r||O(this,Ro).has(a))continue;const c=()=>{if(Array.from(O(this,dr).values()).includes(a)){var l=document.createDocumentFragment();yl(s,l),l.append(Kr()),O(this,On).set(a,{effect:s,fragment:l})}else wn(s);O(this,Ro).delete(a),O(this,Hr).delete(a)};O(this,Di)||!o?(O(this,Ro).add(a),go(s,c,!1)):c()}}});le(this,Ma,e=>{O(this,dr).delete(e);const r=Array.from(O(this,dr).values());for(const[o,i]of O(this,On))r.includes(o)||(wn(i.effect),O(this,On).delete(o))});this.anchor=e,qt(this,Di,r)}ensure(e,r){var o=ce,i=fl();if(r&&!O(this,Hr).has(e)&&!O(this,On).has(e))if(i){var a=document.createDocumentFragment(),s=Kr();a.append(s),O(this,On).set(e,{effect:qn(()=>r(s)),fragment:a})}else O(this,Hr).set(e,qn(()=>r(this.anchor)));if(O(this,dr).set(o,e),i){for(const[c,f]of O(this,Hr))c===e?o.skipped_effects.delete(f):o.skipped_effects.add(f);for(const[c,f]of O(this,On))c===e?o.skipped_effects.delete(f.effect):o.skipped_effects.add(f.effect);o.oncommit(O(this,Bi)),o.ondiscard(O(this,Ma))}else O(this,Bi).call(this)}}dr=new WeakMap,Hr=new WeakMap,On=new WeakMap,Ro=new WeakMap,Di=new WeakMap,Bi=new WeakMap,Ma=new WeakMap;function Iu(t,e,...r){var o=new Hl(t);ta(()=>{const i=e()??null;dt&&i==null&&kf(),o.ensure(i,i&&(a=>i(a,...r)))},io)}function Fu(t,e){const r=(o,...i)=>{var a=Do;Ui(t);try{return e(o,...i)}finally{Ui(a)}};return zu(r),r}if(dt){let t=function(e){if(!(e in globalThis)){let r;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(r!==void 0)return r;Cf(e)},set:o=>{r=o}})}};t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function q(t,e,r){return(...o)=>{const i=t(...o);var a=i.nodeType===pf?i.firstChild:i;return Al(a,e,r),i}}function Pu(t,e,r){t.__svelte_meta={parent:Ir,loc:{file:e,line:r[0],column:r[1]}},r[2]&&Al(t.firstChild,e,r[2])}function Al(t,e,r){for(var o=0;t&&o<r.length;)t.nodeType===gf&&Pu(t,e,r[o++]),t=t.nextSibling}function Ne(t){t&&_f(t[D]??"a component",t.name)}function He(){const t=tn==null?void 0:tn.function;function e(r){yf(r,t[D])}return{$destroy:()=>e("$destroy()"),$on:()=>e("$on(...)"),$set:()=>e("$set(...)")}}function Lu(t,...e){(typeof t!="object"||!(t instanceof Node))&&$s();for(let r of e)typeof r!="function"&&$s()}function X(t,e,r=!1){var o=new Hl(t),i=r?io:0;function a(s,c){o.ensure(s,c)}ta(()=>{var s=!1;e((c,f=!0)=>{s=!0,a(f,c)}),s||a(!1,null)},i)}function wr(t,e){return e}function Du(t,e,r){for(var o=[],i=e.length,a,s=e.length,c=0;c<i;c++){let h=e[c];go(h,()=>{if(a){if(a.pending.delete(h),a.done.add(h),a.pending.size===0){var d=t.outrogroups;Qa(Vi(a.done)),d.delete(a),d.size===0&&(t.outrogroups=null)}}else s-=1},!1)}if(s===0){var f=o.length===0&&r!==null;if(f){var l=r,u=l.parentNode;gu(u),u.append(l),t.items.clear()}Qa(e,!f)}else a={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(a)}function Qa(t,e=!0){for(var r=0;r<t.length;r++)wn(t[r],e)}var Wl;function ze(t,e,r,o,i,a=null){var s=t,c=new Map,f=(e&4)!==0;if(f){var l=t;s=l.appendChild(Kr())}var u=null,h=ou(()=>{var x=r();return gi(x)?x:x==null?[]:Vi(x)}),d,g=!0;function p(){_.fallback=u,Bu(_,d,s,e,o),u!==null&&(d.length===0?(u.f&zr)===0?Xa(u):(u.f^=zr,ki(u,null,s)):go(u,()=>{u=null}))}var y=ta(()=>{d=n(h);for(var x=d.length,C=new Set,W=ce,H=fl(),M=0;M<x;M+=1){var k=d[M],b=o(k,M),S=g?null:c.get(b);S?(S.v&&Oo(S.v,k),S.i&&Oo(S.i,M),H&&W.skipped_effects.delete(S.e)):(S=Gu(c,g?s:Wl??(Wl=Kr()),k,b,M,i,e,r),g||(S.e.f|=zr),c.set(b,S)),C.add(b)}if(x===0&&a&&!u&&(g?u=qn(()=>a(s)):(u=qn(()=>a(Wl??(Wl=Kr()))),u.f|=zr)),!g)if(H){for(const[P,T]of c)C.has(P)||W.skipped_effects.add(T.e);W.oncommit(p),W.ondiscard(()=>{})}else p();n(h)}),_={effect:y,items:c,outrogroups:null,fallback:u};g=!1}function Bu(t,e,r,o,i){var T,R,A,V,Z,ct,gt,L,it;var a=(o&8)!==0,s=e.length,c=t.items,f=t.effect.first,l,u=null,h,d=[],g=[],p,y,_,x;if(a)for(x=0;x<s;x+=1)p=e[x],y=i(p,x),_=c.get(y).e,(_.f&zr)===0&&((R=(T=_.nodes)==null?void 0:T.a)==null||R.measure(),(h??(h=new Set)).add(_));for(x=0;x<s;x+=1){if(p=e[x],y=i(p,x),_=c.get(y).e,t.outrogroups!==null)for(const $ of t.outrogroups)$.pending.delete(_),$.done.delete(_);if((_.f&zr)!==0)if(_.f^=zr,_===f)ki(_,null,r);else{var C=u?u.next:f;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Qr(t,u,_),Qr(t,_,C),ki(_,C,r),u=_,d=[],g=[],f=u.next;continue}if((_.f&Dn)!==0&&(Xa(_),a&&((V=(A=_.nodes)==null?void 0:A.a)==null||V.unfix(),(h??(h=new Set)).delete(_))),_!==f){if(l!==void 0&&l.has(_)){if(d.length<g.length){var W=g[0],H;u=W.prev;var M=d[0],k=d[d.length-1];for(H=0;H<d.length;H+=1)ki(d[H],W,r);for(H=0;H<g.length;H+=1)l.delete(g[H]);Qr(t,M.prev,k.next),Qr(t,u,M),Qr(t,k,W),f=W,u=k,x-=1,d=[],g=[]}else l.delete(_),ki(_,f,r),Qr(t,_.prev,_.next),Qr(t,_,u===null?t.effect.first:u.next),Qr(t,u,_),u=_;continue}for(d=[],g=[];f!==null&&f!==_;)(l??(l=new Set)).add(f),g.push(f),f=f.next;if(f===null)continue}(_.f&zr)===0&&d.push(_),u=_,f=_.next}if(t.outrogroups!==null){for(const $ of t.outrogroups)$.pending.size===0&&(Qa(Vi($.done)),(Z=t.outrogroups)==null||Z.delete($));t.outrogroups.size===0&&(t.outrogroups=null)}if(f!==null||l!==void 0){var b=[];if(l!==void 0)for(_ of l)(_.f&Dn)===0&&b.push(_);for(;f!==null;)(f.f&Dn)===0&&f!==t.fallback&&b.push(f),f=f.next;var S=b.length;if(S>0){var P=(o&4)!==0&&s===0?r:null;if(a){for(x=0;x<S;x+=1)(gt=(ct=b[x].nodes)==null?void 0:ct.a)==null||gt.measure();for(x=0;x<S;x+=1)(it=(L=b[x].nodes)==null?void 0:L.a)==null||it.fix()}Du(t,b,P)}}a&&Bo(()=>{var $,ft;if(h!==void 0)for(_ of h)(ft=($=_.nodes)==null?void 0:$.a)==null||ft.apply()})}function Gu(t,e,r,o,i,a,s,c){var f=(s&1)!==0?(s&16)===0?su(r,!1,!1):uo(r):null,l=(s&2)!==0?uo(i):null;return dt&&f&&(f.trace=()=>{c()[(l==null?void 0:l.v)??i]}),{v:f,i:l,e:qn(()=>(a(e,f??r,l??i,c),()=>{t.delete(o)}))}}function ki(t,e,r){if(t.nodes)for(var o=t.nodes.start,i=t.nodes.end,a=e&&(e.f&zr)===0?e.nodes.start:r;o!==null;){var s=_i(o);if(a.before(o),o===i)return;o=s}}function Qr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function oa(t,e,r){dl(()=>{var o=ra(()=>e(t,r==null?void 0:r())||{});if(r&&(o!=null&&o.update)){var i=!1,a={};Ji(()=>{var s=r();ku(s),i&&qs(a,s)&&(a=s,o.update(s))}),i=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}const Rl=[...` 	
\r\f \v\uFEFF`];function Vu(t,e,r){var o=t==null?"":""+t;if(e&&(o=o?o+" "+e:e),r){for(var i in r)if(r[i])o=o?o+" "+i:i;else if(o.length)for(var a=i.length,s=0;(s=o.indexOf(i,s))>=0;){var c=s+a;(s===0||Rl.includes(o[s-1]))&&(c===o.length||Rl.includes(o[c]))?o=(s===0?"":o.substring(0,s))+o.substring(c+1):s=c}}return o===""?null:o}function zl(t,e=!1){var r=e?" !important;":";",o="";for(var i in t){var a=t[i];a!=null&&a!==""&&(o+=" "+i+": "+a+r)}return o}function Ja(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ou(t,e){if(e){var r="",o,i;if(Array.isArray(e)?(o=e[0],i=e[1]):o=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,s=0,c=!1,f=[];o&&f.push(...Object.keys(o).map(Ja)),i&&f.push(...Object.keys(i).map(Ja));var l=0,u=-1;const y=t.length;for(var h=0;h<y;h++){var d=t[h];if(c?d==="/"&&t[h-1]==="*"&&(c=!1):a?a===d&&(a=!1):d==="/"&&t[h+1]==="*"?c=!0:d==='"'||d==="'"?a=d:d==="("?s++:d===")"&&s--,!c&&a===!1&&s===0){if(d===":"&&u===-1)u=h;else if(d===";"||h===y-1){if(u!==-1){var g=Ja(t.substring(l,u).trim());if(!f.includes(g)){d!==";"&&h++;var p=t.substring(l,h).trim();r+=" "+p+";"}}l=h+1,u=-1}}}}return o&&(r+=zl(o)),i&&(r+=zl(i,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function Tn(t,e,r,o,i,a){var s=t.__className;if(s!==r||s===void 0){var c=Vu(r,o,a);c==null?t.removeAttribute("class"):t.className=c,t.__className=r}else if(a&&i!==a)for(var f in a){var l=!!a[f];(i==null||l!==!!i[f])&&t.classList.toggle(f,l)}return a}function ts(t,e={},r,o){for(var i in r){var a=r[i];e[i]!==a&&(r[i]==null?t.style.removeProperty(i):t.style.setProperty(i,a,o))}}function Ie(t,e,r,o){var i=t.__style;if(i!==e){var a=Ou(e,o);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}else o&&(Array.isArray(o)?(ts(t,r==null?void 0:r[0],o[0]),ts(t,r==null?void 0:r[1],o[1],"important")):ts(t,r,o));return o}function es(t,e,r=!1){if(t.multiple){if(e==null)return;if(!gi(e))return If();for(var o of t.options)o.selected=e.includes(Fl(o));return}for(o of t.options){var i=Fl(o);if(cu(i,e)){o.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Il(t){var e=new MutationObserver(()=>{es(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qa(()=>{e.disconnect()})}function Fl(t){return"__value"in t?t.__value:t.value}const $u=Symbol("is custom element"),ju=Symbol("is html");function qu(t,e){var r=ns(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Xu(t,e){var r=ns(t);r.checked!==(r.checked=e??void 0)&&(t.checked=e)}function N(t,e,r,o){var i=ns(t);i[e]!==(i[e]=r)&&(e==="loading"&&(t[hf]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Uu(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function ns(t){return t.__attributes??(t.__attributes={[$u]:t.nodeName.includes("-"),[ju]:t.namespaceURI===sf})}var Pl=new Map;function Uu(t){var e=t.getAttribute("is")||t.nodeName,r=Pl.get(e);if(r)return r;Pl.set(e,r=[]);for(var o,i=t,a=Element.prototype;a!==i;){o=Ps(i);for(var s in o)o[s].set&&r.push(s);i=Oi(i)}return r}function Ll(t,e){return t===e||(t==null?void 0:t[vr])===e}function yo(t={},e,r,o){return dl(()=>{var i,a;return Ji(()=>{i=a,a=[],ra(()=>{t!==r(...a)&&(e(t,...a),i&&Ll(r(...i),t)&&e(null,...i))})}),()=>{Bo(()=>{a&&Ll(r(...a),t)&&e(null,...a)})}}),t}function Vn(t,e,r,o){var i=o,a=!0,s=()=>(a&&(a=!1,i=o),i),c;c=t[e],c===void 0&&o!==void 0&&(c=s());var f;return f=()=>{var l=t[e];return l===void 0?s():(a=!0,l)},f}function yn(t,e){Ji(()=>{const r=new Map,o=t(),i=gi(o)?o:o==null?[]:Array.from(o),a=i.length;for(let s=0;s<a;s++){const c=e(i[s],s);if(r.has(c)){const f=String(r.get(c)),l=String(s);let u=String(c);u.startsWith("[object ")&&(u=null),wf(f,l,u)}r.set(c,s)}})}function Dl(t,...e){return ra(()=>{try{let r=!1;const o=[];for(const i of e)i&&typeof i=="object"&&vr in i?(o.push(Vf(i,!0)),r=!0):o.push(i);r&&(Wf(t),console.log("%c[snapshot]","color: grey",...o))}catch{}}),e}const Yu="5";typeof window<"u"&&((Zc=window.__svelte??(window.__svelte={})).v??(Zc.v=new Set)).add(Yu);function Bl(t){var o,i;const e=((o=t==null?void 0:t.shapes)==null?void 0:o.lineWidth)??1.5,r=((i=t==null?void 0:t.colors)==null?void 0:i.intervalLine)??"#475569";return{width:Math.max(4,Math.round(e*3)),height:Math.max(6,Math.round(e*4)),color:r,opacity:1}}function ia(t,e,r,o){const{width:i,height:a}=o,s=a/2;return t==="left"?`M ${e} ${r} L ${e+i} ${r-s} L ${e+i} ${r+s} Z`:`M ${e} ${r} L ${e-i} ${r-s} L ${e-i} ${r+s} Z`}const Gl=[1,5,2,2.5,4,3],br=[.001,.002,.005,.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,300,500,750,1e3];function aa(t,e){return e?Zu(t):Ku(t)}function Zu(t){if(t[0]<=0||t[1]<=0)return[.1,10];if(t[0]>=t[1])return t;let e=br[0];for(const o of br)if(o<=t[0])e=o;else break;t[0]<br[0]&&(e=Math.pow(10,Math.floor(Math.log10(t[0]))));let r=br[br.length-1];for(let o=br.length-1;o>=0&&br[o]>=t[1];o--)r=br[o];return t[1]>br[br.length-1]&&(r=Math.pow(10,Math.ceil(Math.log10(t[1])))),[e,r]}function Ku(t){const e=t[1]-t[0];if(e===0)return t;if(e<0)return[t[1],t[0]];const r=Math.pow(10,Math.floor(Math.log10(e)));let o=r,i=1/0;for(const c of Gl)for(const f of[.1,1,10]){const l=c*r*f;if(l<=0)continue;const u=Math.floor(t[0]/l)*l,g=(Math.ceil(t[1]/l)*l-u)/e-1;g>=0&&g<i&&(i=g,o=l)}const a=Math.floor(t[0]/o)*o,s=Math.ceil(t[1]/o)*o;return[Math.round(a*1e10)/1e10,Math.round(s*1e10)/1e10]}function Un(t,e,r,o,i=!1){if(t&&r in t){const a=t[r];if(typeof a=="number"&&Number.isFinite(a)&&(!i||a>0))return a}return r===o&&e!=null&&Number.isFinite(e)&&(!i||e>0)?e:null}const Nn=12;function Vl(t){const{rows:e,config:r,scale:o,nullValue:i,forestWidth:a,pointSize:s,effects:c=[],pointCol:f,lowerCol:l,upperCol:u}=t,h=Qu(e,r,o,i,c,f,l,u),d=Ju(h,r,o,a,s),g=Ol(h,r,o,i);return{axisLimits:h,plotRegion:d,ticks:g}}function Qu(t,e,r,o,i=[],a,s,c){const f=e.rangeMin!=null,l=e.rangeMax!=null;if(f&&l)return[e.rangeMin,e.rangeMax];const u=[],h=r==="log",d=a||"point";for(const $ of t){const ft=Un($.metadata,void 0,d,"point",h);ft!=null&&u.push(ft);for(const G of i){const ot=Un($.metadata,void 0,G.pointCol,"point",h);ot!=null&&u.push(ot)}}if(u.length===0)return r==="log"?[.1,10]:[-1,1];let g=Math.min(...u),p=Math.max(...u);(e.includeNull??!0)&&(g=Math.min(g,o),p=Math.max(p,o));const _=g,x=p;let C;if(h){const $=Math.max(g,.001),ft=Math.max(p,.001);C=Math.log(ft)-Math.log($)}else C=p-g;if(C===0||!Number.isFinite(C)){const $=u[0];if(h)return aa([$/2,$*2],!0);{const ft=Math.max(1,Math.abs($)*.1);return aa([$-ft,$+ft],!1)}}const[W,H]=aa([g,p],h),M=e.ciClipFactor??2;let k=W,b=H;const S=[],P=[],T=s||"lower",R=c||"upper";for(const $ of t){const ft=Un($.metadata,void 0,T,"lower",h);ft!=null&&S.push(ft);const G=Un($.metadata,void 0,R,"upper",h);G!=null&&P.push(G);for(const ot of i){const tt=Un($.metadata,void 0,ot.lowerCol,"lower",h);tt!=null&&S.push(tt);const nt=Un($.metadata,void 0,ot.upperCol,"upper",h);nt!=null&&P.push(nt)}}let A,V;if(h)A=k/M,V=b*M;else{const $=b-k;A=k-$*M,V=b+$*M}let Z=!1,ct=!1;for(const $ of S)$>=A?k=Math.min(k,$):Z=!0;for(const $ of P)$<=V?b=Math.max(b,$):ct=!0;if(Z&&(k=Math.min(k,A)),ct&&(b=Math.max(b,V)),e.symmetric===!0&&!f&&!l)if(r==="log"){const $=Math.log(o),ft=Math.max(Math.abs(Math.log(Math.max(_,.001))-$),Math.abs(Math.log(x)-$));k=Math.exp($-ft),b=Math.exp($+ft)}else{const $=Math.max(Math.abs(_-o),Math.abs(x-o));k=o-$,b=o+$}let L=f?e.rangeMin:k,it=l?e.rangeMax:b;return aa([L,it],r==="log")}function Ju(t,e,r,o,i){if(!(e.markerMargin??!0)||o<=0)return t;const s=o-2*Nn;if(s<=0)return t;if(r==="log"){const l=Math.log(Math.max(t[0],.001)),u=Math.log(Math.max(t[1],.001)),h=u-l,d=i/2*(h/s),g=Math.min(d,.5);return[Math.exp(l-g),Math.exp(u+g)]}const c=t[1]-t[0],f=i/2*(c/s);return[t[0]-f,t[1]+f]}function Ol(t,e,r,o){const[i,a]=t,s=o>=i&&o<=a,c=(e.nullTick??!0)&&s;if(e.tickValues&&e.tickValues.length>0){let u=e.tickValues.filter(h=>h>=i&&h<=a);return c&&!u.includes(o)&&(u=[...u,o].sort((h,d)=>h-d)),u}const f=e.tickCount??5;let l=r==="log"?ed(t,f):td(t,f);return c&&!l.includes(o)&&(l=[...l,o].sort((u,h)=>u-h)),l}function td(t,e){const[r,o]=t,i=o-r;if(i===0)return[r];const a=i/Math.max(e-1,1),s=Math.pow(10,Math.floor(Math.log10(a)));let c=s,f=1/0;for(const h of Gl){const d=h*s,g=Math.floor(i/d)+1,p=Math.abs(g-e);p<f&&(f=p,c=d);const y=h*s/10;if(y>0){const _=Math.floor(i/y)+1,x=Math.abs(_-e);x<f&&(f=x,c=y)}}const l=Math.ceil(r/c)*c,u=[];for(let h=l;h<=o+c*.001;h+=c){const d=Math.round(h*1e10)/1e10;d>=r&&d<=o&&u.push(d)}return u.length<2&&(u.includes(r)||u.unshift(r),u.includes(o)||u.push(o)),u}function ed(t,e){const[r,o]=t,a=[.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,500,1e3].filter(f=>f>=r&&f<=o);if(a.length<=e)return a;const s=[1,.1,10,100,.5,2,5,.2,.25,1.5,3,4,20,50],c=[];for(const f of s)a.includes(f)&&c.length<e&&c.push(f);if(c.length<e){const f=a.filter(u=>!c.includes(u)),l=Math.max(1,Math.floor(f.length/(e-c.length)));for(let u=0;u<f.length&&c.length<e;u+=l)c.push(f[u])}return c.sort((f,l)=>f-l)}const nd=.05,rd=.12,od=.16,id=.22,Yn={RENDERING_BUFFER:4,DEFAULT_AXIS_GAP:12},Mr={FONT_SCALE:.8,PADDING:4,GAP:6},Sr={DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:32,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800},Er={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,PT_TO_PX:96/72},Fe={INDENT_PER_LEVEL:12,TEXT_PADDING:10,DEFAULT_TICK_COUNT:5},ad={OVERALL_ROW_HEIGHT_MULTIPLIER:1.5},Zn={MIN:60,MAX:600,LABEL_MAX:400,VISUAL_MIN:{sparkline:92,bar:100,stars:84,range:84,badge:74,forest:200,viz_bar:150,viz_boxplot:150,viz_violin:150}},Jr={CHEVRON_WIDTH:12,GAP:6,SAFETY_MARGIN:8},$l={SPACING:6},rs={EDGE_THRESHOLD:35,MIN_TICK_SPACING:50},Ci={success:"#16a34a",warning:"#d97706",error:"#dc2626",info:"#2563eb"};function jl(t,e){return e<=1?0:-((e-1)*$l.SPACING)/2+t*$l.SPACING}$e[D]="src/components/forest/RowInterval.svelte";var sd=q(Pt('<polygon stroke-width="1" class="point-estimate svelte-1wct561"></polygon>'),$e[D],[[251,10]]),ld=q(Pt("<path></path>"),$e[D],[[276,12]]),cd=q(Pt("<line></line>"),$e[D],[[282,12]]),fd=q(Pt("<path></path>"),$e[D],[[293,12]]),ud=q(Pt("<line></line>"),$e[D],[[299,12]]),dd=q(Pt('<circle class="point-estimate svelte-1wct561"></circle>'),$e[D],[[314,12]]),hd=q(Pt('<polygon class="point-estimate svelte-1wct561"></polygon>'),$e[D],[[329,12]]),gd=q(Pt('<polygon class="point-estimate svelte-1wct561"></polygon>'),$e[D],[[341,12]]),pd=q(Pt('<rect class="point-estimate svelte-1wct561"></rect>'),$e[D],[[349,12]]),vd=q(Pt("<line></line><!><!><!>",1),$e[D],[[266,10]]),md=q(Pt('<g class="interval-row svelte-1wct561" role="button" tabindex="0"></g>'),$e[D],[[218,2]]);function $e(t,e){Ne(new.target),Ee(e,!0,$e);let r=Vn(e,"weightCol",3,null),o=Vn(e,"isLog",3,!1),i=Vn(e,"forestColumnOptions",3,null);const a=v(m(()=>Bl(e.theme)),"arrowConfig"),s=v(m(()=>{if(!i())return[];const b=w(i().scale,"log")||o();if(i().point&&i().lower&&i().upper){const S=e.row.metadata[i().point],P=e.row.metadata[i().lower],T=e.row.metadata[i().upper],R=!b||he(S,null,!1)&&S>0?S:null,A=!b||he(P,null,!1)&&P>0?P:null,V=!b||he(T,null,!1)&&T>0?T:null;return[{id:"inline",pointCol:i().point,lowerCol:i().lower,upperCol:i().upper,label:null,color:null,shape:null,opacity:null,point:R,lower:A,upper:V}]}return i().effects&&i().effects.length>0?i().effects.map(S=>({...S,point:Un(e.row.metadata,null,S.pointCol,"point",b),lower:Un(e.row.metadata,null,S.lowerCol,"lower",b),upper:Un(e.row.metadata,null,S.upperCol,"upper",b)})):[]}),"effectsToRender"),c=v(m(()=>n(s).some(b=>he(b.point,null,!1)&&!Number.isNaN(b.point)&&he(b.lower,null,!1)&&!Number.isNaN(b.lower)&&he(b.upper,null,!1)&&!Number.isNaN(b.upper))),"hasAnyValidValues"),f=v(m(()=>{var b;return w((b=e.row.style)==null?void 0:b.type,"summary")}),"isSummaryRow");function l(b){return e.clipBounds?b<e.clipBounds[0]:e.xScale(b)<0}function u(b){return e.clipBounds?b>e.clipBounds[1]:e.xScale(b)>e.layout.forestWidth}function h(b){if(!e.clipBounds)return Math.max(0,Math.min(e.layout.forestWidth,e.xScale(b)));const S=Math.max(e.clipBounds[0],Math.min(e.clipBounds[1],b));return e.xScale(S)}const d=v(m(()=>e.clipBounds?e.xScale(e.clipBounds[0]):Nn),"leftArrowX"),g=v(m(()=>e.clipBounds?e.xScale(e.clipBounds[1]):e.layout.forestWidth-Nn),"rightArrowX"),p=v(m(()=>{var b;return((b=e.theme)==null?void 0:b.shapes.summaryHeight)??10}),"diamondHeight"),y=v(m(()=>n(p)/2),"halfDiamondHeight"),_=v(m(()=>{var b;return((b=e.theme)==null?void 0:b.shapes.pointSize)??6}),"basePointSize");function x(b){var P;if(b&&he((P=e.row.markerStyle)==null?void 0:P.size,null,!1))return n(_)*e.row.markerStyle.size;const S=r()?e.row.metadata[r()]:void 0;if(S){const T=.5+Math.sqrt(S/100)*1.5;return Math.min(Math.max(n(_)*T,3),n(_)*2.5)}return n(_)}function C(b,S){var L,it,$,ft;const P=w(S,0),T=e.row.markerStyle,R=(L=e.theme)==null?void 0:L.shapes.effectColors,A=(it=e.theme)==null?void 0:it.shapes.markerShapes,V=["square","circle","diamond","triangle"];let Z;P&&(T!=null&&T.color)?Z=T.color:b.color?Z=b.color:R&&R.length>0?Z=R[S%R.length]:Z=(($=e.theme)==null?void 0:$.colors.interval)??((ft=e.theme)==null?void 0:ft.colors.primary)??"#2563eb";let ct;P&&(T!=null&&T.shape)?ct=T.shape:b.shape?ct=b.shape:A&&A.length>0?ct=A[S%A.length]:ct=V[S%V.length];let gt;return P&&he(T==null?void 0:T.opacity,null,!1)?gt=T.opacity:he(b.opacity,null,!1)?gt=b.opacity:gt=1,{color:Z,shape:ct,opacity:gt}}var W={...He()},H=Et(),M=mt(H);{var k=b=>{var S=md();S.__click=function(...P){sr(()=>e.onRowClick,this,P,$e,[222,13])},S.__keydown=P=>{var T;return w(P.key,"Enter")&&((T=e.onRowClick)==null?void 0:T.call(e))},I(()=>ze(S,21,()=>n(s),wr,(P,T,R)=>{const A=v(m(()=>he(n(T).point,null,!1)&&!Number.isNaN(n(T).point)&&he(n(T).lower,null,!1)&&!Number.isNaN(n(T).lower)&&he(n(T).upper,null,!1)&&!Number.isNaN(n(T).upper)),"hasValidEffect");n(A);var V=Et(),Z=mt(V);{var ct=gt=>{const L=v(m(()=>e.yPosition+jl(R,n(s).length)),"effectY");n(L);const it=v(m(()=>e.xScale(n(T).lower)),"x1");n(it);const $=v(m(()=>e.xScale(n(T).upper)),"x2");n($);const ft=v(m(()=>e.xScale(n(T).point)),"cx");n(ft);const G=v(m(()=>C(n(T),R)),"style");n(G);const ot=v(m(()=>x(w(R,0))),"pointSize");n(ot);const tt=v(m(()=>{var Gt;return((Gt=e.theme)==null?void 0:Gt.colors.intervalLine)??"#475569"}),"lineColor");n(tt);var nt=Et(),Ht=mt(nt);{var kt=Gt=>{const Be=v(m(()=>[`${n(it)},${n(L)}`,`${n(ft)},${n(L)-n(y)}`,`${n($)},${n(L)}`,`${n(ft)},${n(L)+n(y)}`].join(" ")),"summaryDiamondPoints");n(Be);var ge=sd();J(()=>{var Yt;N(ge,"points",n(Be)),N(ge,"fill",n(G).color),N(ge,"fill-opacity",n(G).opacity),N(ge,"stroke",((Yt=e.theme)==null?void 0:Yt.colors.summaryBorder)??"#1d4ed8")}),F(Gt,ge)},ut=Gt=>{const Be=v(m(()=>l(n(T).lower)),"clippedL");n(Be);const ge=v(m(()=>u(n(T).upper)),"clippedR");n(ge);const Yt=v(m(()=>h(n(T).lower)),"clampedX1");n(Yt);const Ae=v(m(()=>h(n(T).upper)),"clampedX2");n(Ae);const pt=v(m(()=>n(a).height/2),"whiskerHalfHeight");n(pt);const bt=v(m(()=>h(n(T).point)),"clampedCx");n(bt);var ee=vd(),Ge=mt(ee),xt=rt(Ge);{var pe=Xt=>{var At=ld();J(We=>{N(At,"d",We),N(At,"fill",n(a).color),N(At,"fill-opacity",n(a).opacity)},[()=>ia("left",n(d),n(L),n(a))]),F(Xt,At)},Lt=Xt=>{var At=cd();J(()=>{var We;N(At,"x1",n(Yt)),N(At,"x2",n(Yt)),N(At,"y1",n(L)-n(pt)),N(At,"y2",n(L)+n(pt)),N(At,"stroke",n(tt)),N(At,"stroke-width",((We=e.theme)==null?void 0:We.shapes.lineWidth)??1.5)}),F(Xt,At)};I(()=>X(xt,Xt=>{n(Be)?Xt(pe):Xt(Lt,!1)}),"if",$e,275,10)}var Dt=rt(xt);{var Ue=Xt=>{var At=fd();J(We=>{N(At,"d",We),N(At,"fill",n(a).color),N(At,"fill-opacity",n(a).opacity)},[()=>ia("right",n(g),n(L),n(a))]),F(Xt,At)},qe=Xt=>{var At=ud();J(()=>{var We;N(At,"x1",n(Ae)),N(At,"x2",n(Ae)),N(At,"y1",n(L)-n(pt)),N(At,"y2",n(L)+n(pt)),N(At,"stroke",n(tt)),N(At,"stroke-width",((We=e.theme)==null?void 0:We.shapes.lineWidth)??1.5)}),F(Xt,At)};I(()=>X(Dt,Xt=>{n(ge)?Xt(Ue):Xt(qe,!1)}),"if",$e,292,10)}var Me=rt(Dt);{var Sn=Xt=>{var At=dd();J(()=>{N(At,"cx",n(bt)),N(At,"cy",n(L)),N(At,"r",n(ot)),N(At,"fill",n(G).color),N(At,"fill-opacity",n(G).opacity)}),F(Xt,At)},sn=Xt=>{var At=Et(),We=mt(At);{var rr=_n=>{const Je=v(m(()=>[`${n(bt)},${n(L)-n(ot)}`,`${n(bt)+n(ot)},${n(L)}`,`${n(bt)},${n(L)+n(ot)}`,`${n(bt)-n(ot)},${n(L)}`].join(" ")),"diamondPts");n(Je);var En=hd();J(()=>{N(En,"points",n(Je)),N(En,"fill",n(G).color),N(En,"fill-opacity",n(G).opacity)}),F(_n,En)},hr=_n=>{var Je=Et(),En=mt(Je);{var jr=Ye=>{const un=v(m(()=>[`${n(bt)},${n(L)-n(ot)}`,`${n(bt)+n(ot)},${n(L)+n(ot)}`,`${n(bt)-n(ot)},${n(L)+n(ot)}`].join(" ")),"trianglePts");n(un);var Ln=gd();J(()=>{N(Ln,"points",n(un)),N(Ln,"fill",n(G).color),N(Ln,"fill-opacity",n(G).opacity)}),F(Ye,Ln)},xn=Ye=>{var un=pd();J(()=>{N(un,"x",n(bt)-n(ot)),N(un,"y",n(L)-n(ot)),N(un,"width",n(ot)*2),N(un,"height",n(ot)*2),N(un,"fill",n(G).color),N(un,"fill-opacity",n(G).opacity)}),F(Ye,un)};I(()=>X(En,Ye=>{w(n(G).shape,"triangle")?Ye(jr):Ye(xn,!1)},!0),"if",$e,335,10)}F(_n,Je)};I(()=>X(We,_n=>{w(n(G).shape,"diamond")?_n(rr):_n(hr,!1)},!0),"if",$e,322,10)}F(Xt,At)};I(()=>X(Me,Xt=>{w(n(G).shape,"circle")?Xt(Sn):Xt(sn,!1)}),"if",$e,313,10)}J(()=>{var Xt;N(Ge,"x1",n(Yt)),N(Ge,"x2",n(Ae)),N(Ge,"y1",n(L)),N(Ge,"y2",n(L)),N(Ge,"stroke",n(tt)),N(Ge,"stroke-width",((Xt=e.theme)==null?void 0:Xt.shapes.lineWidth)??1.5)}),F(Gt,ee)};I(()=>X(Ht,Gt=>{n(f)?Gt(kt):Gt(ut,!1)}),"if",$e,240,8)}F(gt,nt)};I(()=>X(Z,gt=>{n(A)&&gt(ct)}),"if",$e,231,6)}F(P,V)}),"each",$e,227,4),Gn("mouseenter",S,P=>{var T;return(T=e.onRowHover)==null?void 0:T.call(e,!0,P)}),Gn("mouseleave",S,P=>{var T;return(T=e.onRowHover)==null?void 0:T.call(e,!1,P)}),F(b,S)};I(()=>X(M,b=>{n(c)&&b(k)}),"if",$e,217,0)}return F(t,H),ke(W)}mo(["click","keydown"]),Hn[D]="src/components/forest/EffectAxis.svelte";function yd(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}var _d=q(Pt('<line stroke="var(--wf-border, #e2e8f0)" stroke-width="1" opacity="0.5"></line>'),Hn[D],[[171,6]]),xd=q(Pt('<g><line stroke="var(--wf-border, #e2e8f0)" stroke-width="1"></line><text fill="var(--wf-secondary, #64748b)" font-size="var(--wf-font-size-sm, 0.75rem)" class="svelte-hf6bj6"> </text></g>'),Hn[D],[[187,4,[[188,6],[194,6]]]]),wd=q(Pt('<text text-anchor="middle" fill="var(--wf-secondary, #64748b)" font-size="var(--wf-font-size-sm, 0.75rem)" font-weight="500" class="svelte-hf6bj6"> </text>'),Hn[D],[[208,4]]),bd=q(Pt('<g class="effect-axis svelte-hf6bj6"><line stroke="var(--wf-border, #e2e8f0)" stroke-width="1"></line><!><!><!></g>'),Hn[D],[[157,0,[[159,2]]]]);function Hn(t,e){Ne(new.target),Ee(e,!0,Hn);let r=Vn(e,"position",3,"bottom"),o=Vn(e,"plotHeight",3,0);const i=v(m(()=>{var b;return(b=e.theme)==null?void 0:b.axis}),"axisConfig"),a=v(m(()=>{var b;return e.gridlines??((b=n(i))==null?void 0:b.gridlines)??!1}),"showGridlines"),s=v(m(()=>{var b;return((b=n(i))==null?void 0:b.gridlineStyle)??"dotted"}),"gridlineStyle"),c=35,f=v(m(()=>{var b;return((b=n(i))==null?void 0:b.nullTick)??!0}),"shouldIncludeNullTick"),l=v(m(()=>{var Ht,kt;const[b,S]=e.xScale.domain(),P=e.layout.nullValue,T=P>=b&&P<=S;if((Ht=n(i))!=null&&Ht.tickValues&&n(i).tickValues.length>0){let ut=n(i).tickValues.filter(Gt=>Gt>=b&&Gt<=S);return n(f)&&T&&!ut.includes(P)&&(ut=[...ut,P].sort((Gt,Be)=>Gt-Be)),ut}const R=50,A=Math.max(2,Math.floor(e.layout.forestWidth/R)),Z=((kt=n(i))==null?void 0:kt.tickCount)??null??Math.min(7,A),ct=e.baseTicks&&e.baseTicks.length>0?e.baseTicks.filter(ut=>ut>=b&&ut<=S):e.xScale.ticks(Z);if(w(ct.length,0))return n(f)&&T?[P]:[];const gt=e.xScale(P),L=ct.filter(ut=>ut<P).reverse(),it=ct.filter(ut=>ut>P),$=ct.some(ut=>w(ut,P)),ft=[];let G=gt;for(const ut of L){const Gt=e.xScale(ut);G-Gt>=R&&(ft.unshift(ut),G=Gt)}const ot=[];let tt=gt;for(const ut of it){const Gt=e.xScale(ut);Gt-tt>=R&&(ot.push(ut),tt=Gt)}const nt=[...ft];if(($||n(f)&&T)&&nt.push(P),nt.push(...ot),nt.length<2){const ut=new Set(nt);ut.has(b)||nt.unshift(b),nt.length<2&&!ut.has(S)&&nt.push(S)}return nt}),"ticks"),u=v(m(()=>w(r(),"bottom")?0:e.layout.headerHeight-8),"axisY"),h=v(m(()=>w(r(),"bottom")),"isBottom"),d=v(m(()=>w(n(s),"dashed")?"4,4":w(n(s),"dotted")?"2,2":"none"),"gridlineDashArray");function g(b){return b<c?"start":b>e.layout.forestWidth-c?"end":"middle"}function p(b){return b<c?2:b>e.layout.forestWidth-c?-2:0}var y={...He()},_=bd(),x=Q(_),C=rt(x);{var W=b=>{var S=Et(),P=mt(S);yn(()=>n(l),T=>T),I(()=>ze(P,16,()=>n(l),T=>T,(T,R)=>{var A=_d();J((V,Z)=>{N(A,"x1",V),N(A,"x2",Z),N(A,"y1",(n(h),n(u))),N(A,"y2",n(h)?-o():o()),N(A,"stroke-dasharray",n(d))},[()=>e.xScale(R),()=>e.xScale(R)]),F(T,A)}),"each",Hn,170,4),F(b,S)};I(()=>X(C,b=>{n(a)&&o()>0&&b(W)}),"if",Hn,169,2)}var H=rt(C);yn(()=>n(l),b=>b),I(()=>ze(H,16,()=>n(l),b=>b,(b,S)=>{const P=v(m(()=>e.xScale(S)),"tickX");n(P);var T=xd(),R=Q(T),A=rt(R),V=Q(A,!0);J((Z,ct,gt)=>{N(T,"transform",`translate(${n(P)??""}, 0)`),N(R,"y1",n(h)?n(u):n(u)-4),N(R,"y2",n(h)?n(u)+4:n(u)),N(A,"x",Z),N(A,"y",n(h)?n(u)+16:n(u)-8),N(A,"text-anchor",ct),Qt(V,gt)},[()=>p(n(P)),()=>g(n(P)),()=>yd(S)]),F(b,T)}),"each",Hn,185,2);var M=rt(H);{var k=b=>{var S=wd(),P=Q(S);J(()=>{N(S,"x",e.layout.forestWidth/2),N(S,"y",n(h)?n(u)+28:n(u)-24),Qt(P,e.axisLabel)}),F(b,S)};I(()=>X(M,b=>{e.axisLabel&&b(k)}),"if",Hn,207,2)}return J((b,S)=>{N(x,"x1",b),N(x,"x2",S),N(x,"y1",n(u)),N(x,"y2",n(u))},[()=>e.xScale.range()[0],()=>e.xScale.range()[1]]),F(t,_),ke(y)}to[D]="src/components/forest/SummaryDiamond.svelte";var Md=q(Pt('<path fill="var(--wf-summary-fill, #2563eb)"></path>'),to[D],[[58,4]]),Sd=q(Pt('<path fill="var(--wf-summary-fill, #2563eb)"></path>'),to[D],[[66,4]]),Ed=q(Pt('<g class="summary-diamond svelte-1g0hzau"><polygon fill="var(--wf-summary-fill, #2563eb)" stroke="var(--wf-summary-border, #1d4ed8)" stroke-width="1" class="svelte-1g0hzau"></polygon><!><!></g>'),to[D],[[47,0,[[49,2]]]]);function to(t,e){Ne(new.target),Ee(e,!0,to);const r=v(m(()=>{var p;return((p=e.theme)==null?void 0:p.shapes.summaryHeight)??10}),"diamondHeight"),o=v(m(()=>n(r)/2),"halfHeight"),i=v(m(()=>{const p=e.xScale(e.lower),y=e.xScale(e.point),_=e.xScale(e.upper),x=0,C=e.layout.forestWidth,W=Math.max(x,p),H=Math.min(C,_);return[[W,e.yPosition].join(","),[y,e.yPosition-n(o)].join(","),[H,e.yPosition].join(","),[y,e.yPosition+n(o)].join(",")].join(" ")}),"points"),a=v(m(()=>e.xScale(e.lower)<0),"clippedLeft"),s=v(m(()=>e.xScale(e.upper)>e.layout.forestWidth),"clippedRight");var c={...He()},f=Ed(),l=Q(f),u=rt(l);{var h=p=>{var y=Md();J(()=>N(y,"d",`M 4 ${e.yPosition??""} L 10 ${e.yPosition-4} L 10 ${e.yPosition+4} Z`)),F(p,y)};I(()=>X(u,p=>{n(a)&&p(h)}),"if",to,57,2)}var d=rt(u);{var g=p=>{var y=Sd();J(()=>N(y,"d",`M ${e.layout.forestWidth-4} ${e.yPosition??""} L ${e.layout.forestWidth-10} ${e.yPosition-4} L ${e.layout.forestWidth-10} ${e.yPosition+4} Z`)),F(p,y)};I(()=>X(d,p=>{n(s)&&p(g)}),"if",to,65,2)}return J(()=>N(l,"points",n(i))),F(t,f),ke(c)}Kn[D]="src/components/forest/PlotHeader.svelte";var kd=q(_t('<h2 class="plot-title svelte-xpghc"> </h2>'),Kn[D],[[17,8]]),Cd=q(_t('<p class="plot-subtitle svelte-xpghc"> </p>'),Kn[D],[[20,8]]),Td=q(_t('<div class="controls-area svelte-xpghc"><!></div>'),Kn[D],[[24,6]]),Nd=q(_t('<div class="header-area svelte-xpghc"><div class="title-area svelte-xpghc"><!> <!></div> <!></div>'),Kn[D],[[14,2,[[15,4]]]]);function Kn(t,e){Ne(new.target),Ee(e,!0,Kn);var r={...He()},o=Et(),i=mt(o);{var a=s=>{var c=Nd(),f=Q(c),l=Q(f);{var u=y=>{var _=kd(),x=Q(_);J(()=>Qt(x,e.title)),F(y,_)};I(()=>X(l,y=>{e.title&&y(u)}),"if",Kn,16,6)}var h=rt(l,2);{var d=y=>{var _=Cd(),x=Q(_);J(()=>Qt(x,e.subtitle)),F(y,_)};I(()=>X(h,y=>{e.subtitle&&y(d)}),"if",Kn,19,6)}var g=rt(f,2);{var p=y=>{var _=Td(),x=Q(_);I(()=>Iu(x,()=>e.controls),"render",Kn,25,8),F(y,_)};I(()=>X(g,y=>{e.controls&&y(p)}),"if",Kn,23,4)}F(s,c)};I(()=>X(i,s=>{(e.title||e.subtitle)&&s(a)}),"if",Kn,13,0)}return F(t,o),ke(r)}Lr[D]="src/components/forest/PlotFooter.svelte";var Hd=q(_t('<p class="plot-caption svelte-7xjsde"> </p>'),Lr[D],[[13,6]]),Ad=q(_t('<p class="plot-footnote svelte-7xjsde"> </p>'),Lr[D],[[16,6]]),Wd=q(_t('<div class="plot-footer svelte-7xjsde"><!> <!></div>'),Lr[D],[[11,2]]);function Lr(t,e){Ne(new.target),Ee(e,!0,Lr);var r={...He()},o=Et(),i=mt(o);{var a=s=>{var c=Wd(),f=Q(c);{var l=d=>{var g=Hd(),p=Q(g);J(()=>Qt(p,e.caption)),F(d,g)};I(()=>X(f,d=>{e.caption&&d(l)}),"if",Lr,12,4)}var u=rt(f,2);{var h=d=>{var g=Ad(),p=Q(g);J(()=>Qt(p,e.footnote)),F(d,g)};I(()=>X(u,d=>{e.footnote&&d(h)}),"if",Lr,15,4)}F(s,c)};I(()=>X(i,s=>{(e.caption||e.footnote)&&s(a)}),"if",Lr,10,0)}return F(t,o),ke(r)}Xo[D]="src/components/forest/GroupHeader.svelte";var Rd=q(_t('<span class="group-count svelte-16smacw"> </span>'),Xo[D],[[64,4]]),zd=q(_t('<div><span><svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="1.5" fill="none"></path></svg></span> <span class="group-label svelte-16smacw"> </span> <!></div>'),Xo[D],[[49,0,[[57,2,[[58,4,[[59,6]]]]],[62,2]]]]);function Xo(t,e){Ne(new.target),Ee(e,!0,Xo);let r=Vn(e,"level",3,1);function o(y,_){const x=_==null?void 0:_.groupHeaders;return x?w(y,1)?{fontSize:x.level1FontSize,fontWeight:x.level1FontWeight,italic:x.level1Italic,borderBottom:x.level1BorderBottom}:w(y,2)?{fontSize:x.level2FontSize,fontWeight:x.level2FontWeight,italic:x.level2Italic,borderBottom:x.level2BorderBottom}:{fontSize:x.level3FontSize,fontWeight:x.level3FontWeight,italic:x.level3Italic,borderBottom:x.level3BorderBottom}:{fontSize:void 0,fontWeight:void 0,italic:!1,borderBottom:!1}}const i=v(m(()=>o(r(),e.theme)),"levelStyles");var a={...He()},s=zd();let c,f;var l=Q(s);let u;var h=rt(l,2),d=Q(h),g=rt(h,2);{var p=y=>{var _=Rd(),x=Q(_);J(()=>Qt(x,`(${e.rowCount??""})`)),F(y,_)};I(()=>X(g,y=>{w(e.rowCount,void 0,!1)&&y(p)}),"if",Xo,63,2)}return J(()=>{c=Tn(s,1,"group-header svelte-16smacw",null,c,{"has-border":n(i).borderBottom,italic:n(i).italic}),N(s,"aria-expanded",!e.group.collapsed),f=Ie(s,"",f,{"font-size":n(i).fontSize,"font-weight":n(i).fontWeight}),u=Tn(l,1,"group-chevron svelte-16smacw",null,u,{collapsed:e.group.collapsed}),Qt(d,e.group.label)}),F(t,s),ke(a)}_o[D]="src/components/ui/Tooltip.svelte";var Id=q(_t('<div class="tooltip-row svelte-c43bsi"><span class="tooltip-label svelte-c43bsi"> </span> <span class="tooltip-value svelte-c43bsi"> </span></div>'),_o[D],[[77,8,[[78,10],[79,10]]]]),Fd=q(_t('<div class="tabviz-tooltip svelte-c43bsi"><div class="tooltip-header svelte-c43bsi"> </div> <div class="tooltip-body svelte-c43bsi"><div class="tooltip-row tooltip-estimate svelte-c43bsi"><span class="tooltip-label svelte-c43bsi">Estimate</span> <span class="tooltip-value svelte-c43bsi"> </span></div> <!></div></div>'),_o[D],[[67,2,[[68,4],[69,4,[[70,6,[[71,8],[72,8]]]]]]]]);function _o(t,e){Ne(new.target),Ee(e,!0,_o);let r=Vn(e,"fields",3,null),o=v(Wt(void 0),"tooltipEl");function i(d){return w(d,null)||w(d,void 0)?"—":w(typeof d,"number")?Number.isInteger(d)?d.toString():d.toFixed(3):String(d)}const a=v(m(()=>!e.row||!r()||w(r().length,0)?[]:Object.entries(e.row.metadata).filter(([g])=>r().includes(g))),"displayFields"),s=v(m(()=>{if(!e.position)return"";const d=220,g=100,p=10;let y=e.position.x+p,_=e.position.y-p;const x=w(typeof window,"undefined",!1)?window.innerWidth:1e3;return w(typeof window,"undefined",!1)&&window.innerHeight,y+d>x-p&&(y=e.position.x-d-p),_-g<p?(_=e.position.y+p,`left: ${y}px; top: ${_}px; transform: none;`):`left: ${y}px; top: ${_}px;`}),"positionStyle"),c=v(m(()=>e.row&&e.position&&r()&&r().length>0),"shouldShow");var f={...He()},l=Et(),u=mt(l);{var h=d=>{var g=Fd(),p=Q(g),y=Q(p),_=rt(p,2),x=Q(_),C=rt(Q(x),2),W=Q(C),H=rt(x,2);yn(()=>n(a),([M,k])=>M),I(()=>ze(H,17,()=>n(a),([M,k])=>M,(M,k)=>{var b=m(()=>Wa(n(k),2));let S=()=>n(b)[0];S();let P=()=>n(b)[1];P();var T=Id(),R=Q(T),A=Q(R,!0);var V=rt(R,2),Z=Q(V,!0);J(ct=>{Qt(A,S()),Qt(Z,ct)},[()=>i(P())]),F(M,T)}),"each",_o,76,6),yo(g,M=>at(o,M),()=>n(o)),J((M,k,b)=>{Ie(g,n(s)),Qt(y,e.row.label),Qt(W,`${M??""} (${k??""}, ${b??""})`)},[()=>i(e.row.point),()=>i(e.row.lower),()=>i(e.row.upper)]),F(d,g)};I(()=>X(u,d=>{n(c)&&d(h)}),"if",_o,66,0)}return F(t,l),ke(f)}xo[D]="src/components/table/CellBar.svelte";var Pd=q(_t('<span class="bar-label svelte-1l4k3z2"> </span>'),xo[D],[[39,6]]),Ld=q(_t('<div class="cell-bar svelte-1l4k3z2"><div class="bar-track svelte-1l4k3z2"><div class="bar-fill svelte-1l4k3z2"></div></div> <!></div>'),xo[D],[[30,2,[[31,4,[[32,6]]]]]]);function xo(t,e){Ne(new.target),Ee(e,!0,xo);let r=Vn(e,"maxValue",3,100);const o=v(m(()=>{var d;return((d=e.options)==null?void 0:d.maxValue)??r()}),"effectiveMax"),i=v(m(()=>{var d;return((d=e.options)==null?void 0:d.showLabel)??!0}),"showLabel"),a=v(m(()=>{var d;return((d=e.options)==null?void 0:d.color)??"var(--wf-primary, #2563eb)"}),"barColor"),s=v(m(()=>()=>w(e.value,void 0)||w(e.value,null)||n(o)<=0?0:Math.min(100,Math.max(0,e.value/n(o)*100))),"percentage"),c=v(m(()=>()=>w(e.value,void 0)||w(e.value,null)?"":e.value>=100?e.value.toFixed(0):e.value>=10?e.value.toFixed(1):e.value.toFixed(2)),"formattedValue");var f={...He()},l=Et(),u=mt(l);{var h=d=>{var g=Ld(),p=Q(g),y=Q(p);let _;var x=rt(p,2);{var C=W=>{var H=Pd(),M=Q(H);J(k=>Qt(M,k),[()=>n(c)()]),F(W,H)};I(()=>X(x,W=>{n(i)&&W(C)}),"if",xo,38,4)}J(W=>_=Ie(y,"",_,W),[()=>({width:`${n(s)()??""}%`,"background-color":n(a)})]),F(d,g)};I(()=>X(u,d=>{w(e.value,void 0,!1)&&w(e.value,null,!1)&&d(h)}),"if",xo,29,0)}return F(t,l),ke(f)}Uo[D]="src/components/table/CellPvalue.svelte";var Dd=q(_t('<span class="pvalue-stars svelte-1hymfkc"> </span>'),Uo[D],[[99,4]]),Bd=q(_t('<span><span class="pvalue-number svelte-1hymfkc"> </span> <!></span>'),Uo[D],[[86,0,[[97,2]]]]);function Uo(t,e){Ne(new.target),Ee(e,!0,Uo);const r=v(m(()=>{var A;return((A=e.cellStyle)==null?void 0:A.bold)??!1}),"isBold"),o=v(m(()=>{var A;return((A=e.cellStyle)==null?void 0:A.italic)??!1}),"isItalic"),i=v(m(()=>{var A;return((A=e.cellStyle)==null?void 0:A.color)??null}),"textColor"),a=v(m(()=>{var A;return((A=e.cellStyle)==null?void 0:A.bg)??null}),"bgColor"),s=v(m(()=>{var A;return((A=e.cellStyle)==null?void 0:A.emphasis)??!1}),"isEmphasis"),c=v(m(()=>{var A;return((A=e.cellStyle)==null?void 0:A.muted)??!1}),"isMuted"),f=v(m(()=>{var A;return((A=e.cellStyle)==null?void 0:A.accent)??!1}),"isAccent"),l={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function u(A){return A.split("").map(V=>l[V]??V).join("")}const h=v(m(()=>{var A;return((A=e.options)==null?void 0:A.stars)??!1}),"showStars"),d=v(m(()=>{var A;return((A=e.options)==null?void 0:A.thresholds)??[.05,.01,.001]}),"thresholds"),g=v(m(()=>{var A;return((A=e.options)==null?void 0:A.format)??"auto"}),"format"),p=v(m(()=>{var A;return((A=e.options)==null?void 0:A.digits)??2}),"digits"),y=v(m(()=>{var A;return((A=e.options)==null?void 0:A.expThreshold)??.001}),"expThreshold"),_=v(m(()=>{var A;return((A=e.options)==null?void 0:A.abbrevThreshold)??null}),"abbrevThreshold"),x=v(m(()=>{if(!n(h)||w(e.value,void 0)||w(e.value,null))return"";const[A,V,Z]=n(d);return e.value<Z?"***":e.value<V?"**":e.value<A?"*":""}),"stars"),C=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";if(w(n(_),null,!1)&&e.value<n(_))return`<${n(_)}`;if(w(n(g),"scientific")||w(n(g),"auto")&&e.value<n(y)){const A=Math.floor(Math.log10(e.value));return`${(e.value/Math.pow(10,A)).toPrecision(n(p))}×10${u(A.toString())}`}return e.value>=.1?e.value.toFixed(n(p)):e.value>=.01?e.value.toFixed(n(p)+1):e.value.toFixed(n(p)+2)}),"formattedValue"),W=v(m(()=>n(x).length>0),"isSignificant");var H={...He()},M=Bd();let k,b;var S=Q(M),P=Q(S),T=rt(S,2);{var R=A=>{var V=Dd(),Z=Q(V);J(()=>Qt(Z,n(x))),F(A,V)};I(()=>X(T,A=>{n(x)&&A(R)}),"if",Uo,98,2)}return J(()=>{k=Tn(M,1,"cell-pvalue svelte-1hymfkc",null,k,{significant:n(W),"cell-bold":n(r),"cell-italic":n(o),"cell-emphasis":n(s),"cell-muted":n(c),"cell-accent":n(f)}),b=Ie(M,"",b,{color:n(i),"background-color":n(a)}),Qt(P,n(C))}),F(t,M),ke(H)}function sa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gd(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ql(t){let e,r,o;t.length!==2?(e=sa,r=(c,f)=>sa(t(c),f),o=(c,f)=>t(c)-f):(e=t===sa||t===Gd?t:Vd,r=t,o=t);function i(c,f,l=0,u=c.length){if(l<u){if(e(f,f)!==0)return u;do{const h=l+u>>>1;r(c[h],f)<0?l=h+1:u=h}while(l<u)}return l}function a(c,f,l=0,u=c.length){if(l<u){if(e(f,f)!==0)return u;do{const h=l+u>>>1;r(c[h],f)<=0?l=h+1:u=h}while(l<u)}return l}function s(c,f,l=0,u=c.length){const h=i(c,f,l,u-1);return h>l&&o(c[h-1],f)>-o(c[h],f)?h-1:h}return{left:i,center:s,right:a}}function Vd(){return 0}function Od(t){return t===null?NaN:+t}const $d=ql(sa).right;ql(Od).center;const jd=Math.sqrt(50),qd=Math.sqrt(10),Xd=Math.sqrt(2);function la(t,e,r){const o=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(o)),a=o/Math.pow(10,i),s=a>=jd?10:a>=qd?5:a>=Xd?2:1;let c,f,l;return i<0?(l=Math.pow(10,-i)/s,c=Math.round(t*l),f=Math.round(e*l),c/l<t&&++c,f/l>e&&--f,l=-l):(l=Math.pow(10,i)*s,c=Math.round(t/l),f=Math.round(e/l),c*l<t&&++c,f*l>e&&--f),f<c&&.5<=r&&r<2?la(t,e,r*2):[c,f,l]}function os(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const o=e<t,[i,a,s]=o?la(e,t,r):la(t,e,r);if(!(a>=i))return[];const c=a-i+1,f=new Array(c);if(o)if(s<0)for(let l=0;l<c;++l)f[l]=(a-l)/-s;else for(let l=0;l<c;++l)f[l]=(a-l)*s;else if(s<0)for(let l=0;l<c;++l)f[l]=(i+l)/-s;else for(let l=0;l<c;++l)f[l]=(i+l)*s;return f}function is(t,e,r){return e=+e,t=+t,r=+r,la(t,e,r)[2]}function Ud(t,e,r){e=+e,t=+t,r=+r;const o=e<t,i=o?is(e,t,r):is(t,e,r);return(o?-1:1)*(i<0?1/-i:i)}function Xl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function as(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Ul(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}function Ti(){}var Ni=.7,ca=1/Ni,Yo="\\s*([+-]?\\d+)\\s*",Hi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yd=/^#([0-9a-f]{3,8})$/,Zd=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),Kd=new RegExp(`^rgb\\(${kr},${kr},${kr}\\)$`),Qd=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${Hi}\\)$`),Jd=new RegExp(`^rgba\\(${kr},${kr},${kr},${Hi}\\)$`),th=new RegExp(`^hsl\\(${Hi},${kr},${kr}\\)$`),eh=new RegExp(`^hsla\\(${Hi},${kr},${kr},${Hi}\\)$`),Yl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};as(Ti,Ai,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Zl,formatHex:Zl,formatHex8:nh,formatHsl:rh,formatRgb:Kl,toString:Kl});function Zl(){return this.rgb().formatHex()}function nh(){return this.rgb().formatHex8()}function rh(){return nc(this).formatHsl()}function Kl(){return this.rgb().formatRgb()}function Ai(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Yd.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Ql(e):r===3?new An(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?fa(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?fa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Zd.exec(t))?new An(e[1],e[2],e[3],1):(e=Kd.exec(t))?new An(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Qd.exec(t))?fa(e[1],e[2],e[3],e[4]):(e=Jd.exec(t))?fa(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=th.exec(t))?ec(e[1],e[2]/100,e[3]/100,1):(e=eh.exec(t))?ec(e[1],e[2]/100,e[3]/100,e[4]):Yl.hasOwnProperty(t)?Ql(Yl[t]):t==="transparent"?new An(NaN,NaN,NaN,0):null}function Ql(t){return new An(t>>16&255,t>>8&255,t&255,1)}function fa(t,e,r,o){return o<=0&&(t=e=r=NaN),new An(t,e,r,o)}function oh(t){return t instanceof Ti||(t=Ai(t)),t?(t=t.rgb(),new An(t.r,t.g,t.b,t.opacity)):new An}function ss(t,e,r,o){return arguments.length===1?oh(t):new An(t,e,r,o??1)}function An(t,e,r,o){this.r=+t,this.g=+e,this.b=+r,this.opacity=+o}as(An,ss,Ul(Ti,{brighter(t){return t=t==null?ca:Math.pow(ca,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ni:Math.pow(Ni,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new An(wo(this.r),wo(this.g),wo(this.b),ua(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jl,formatHex:Jl,formatHex8:ih,formatRgb:tc,toString:tc}));function Jl(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}`}function ih(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}${bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function tc(){const t=ua(this.opacity);return`${t===1?"rgb(":"rgba("}${wo(this.r)}, ${wo(this.g)}, ${wo(this.b)}${t===1?")":`, ${t})`}`}function ua(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bo(t){return t=wo(t),(t<16?"0":"")+t.toString(16)}function ec(t,e,r,o){return o<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new lr(t,e,r,o)}function nc(t){if(t instanceof lr)return new lr(t.h,t.s,t.l,t.opacity);if(t instanceof Ti||(t=Ai(t)),!t)return new lr;if(t instanceof lr)return t;t=t.rgb();var e=t.r/255,r=t.g/255,o=t.b/255,i=Math.min(e,r,o),a=Math.max(e,r,o),s=NaN,c=a-i,f=(a+i)/2;return c?(e===a?s=(r-o)/c+(r<o)*6:r===a?s=(o-e)/c+2:s=(e-r)/c+4,c/=f<.5?a+i:2-a-i,s*=60):c=f>0&&f<1?0:s,new lr(s,c,f,t.opacity)}function ah(t,e,r,o){return arguments.length===1?nc(t):new lr(t,e,r,o??1)}function lr(t,e,r,o){this.h=+t,this.s=+e,this.l=+r,this.opacity=+o}as(lr,ah,Ul(Ti,{brighter(t){return t=t==null?ca:Math.pow(ca,t),new lr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ni:Math.pow(Ni,t),new lr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*e,i=2*r-o;return new An(ls(t>=240?t-240:t+120,i,o),ls(t,i,o),ls(t<120?t+240:t-120,i,o),this.opacity)},clamp(){return new lr(rc(this.h),da(this.s),da(this.l),ua(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ua(this.opacity);return`${t===1?"hsl(":"hsla("}${rc(this.h)}, ${da(this.s)*100}%, ${da(this.l)*100}%${t===1?")":`, ${t})`}`}}));function rc(t){return t=(t||0)%360,t<0?t+360:t}function da(t){return Math.max(0,Math.min(1,t||0))}function ls(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const cs=t=>()=>t;function sh(t,e){return function(r){return t+r*e}}function lh(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(o){return Math.pow(t+o*e,r)}}function ch(t){return(t=+t)==1?oc:function(e,r){return r-e?lh(e,r,t):cs(isNaN(e)?r:e)}}function oc(t,e){var r=e-t;return r?sh(t,r):cs(isNaN(t)?e:t)}const ic=(function t(e){var r=ch(e);function o(i,a){var s=r((i=ss(i)).r,(a=ss(a)).r),c=r(i.g,a.g),f=r(i.b,a.b),l=oc(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=c(u),i.b=f(u),i.opacity=l(u),i+""}}return o.gamma=t,o})(1);function fh(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,o=e.slice(),i;return function(a){for(i=0;i<r;++i)o[i]=t[i]*(1-a)+e[i]*a;return o}}function uh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dh(t,e){var r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),a=new Array(r),s;for(s=0;s<o;++s)i[s]=ds(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(c){for(s=0;s<o;++s)a[s]=i[s](c);return a}}function hh(t,e){var r=new Date;return t=+t,e=+e,function(o){return r.setTime(t*(1-o)+e*o),r}}function ha(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function gh(t,e){var r={},o={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=ds(t[i],e[i]):o[i]=e[i];return function(a){for(i in r)o[i]=r[i](a);return o}}var fs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,us=new RegExp(fs.source,"g");function ph(t){return function(){return t}}function vh(t){return function(e){return t(e)+""}}function mh(t,e){var r=fs.lastIndex=us.lastIndex=0,o,i,a,s=-1,c=[],f=[];for(t=t+"",e=e+"";(o=fs.exec(t))&&(i=us.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),c[s]?c[s]+=a:c[++s]=a),(o=o[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,f.push({i:s,x:ha(o,i)})),r=us.lastIndex;return r<e.length&&(a=e.slice(r),c[s]?c[s]+=a:c[++s]=a),c.length<2?f[0]?vh(f[0].x):ph(e):(e=f.length,function(l){for(var u=0,h;u<e;++u)c[(h=f[u]).i]=h.x(l);return c.join("")})}function ds(t,e){var r=typeof e,o;return e==null||r==="boolean"?cs(e):(r==="number"?ha:r==="string"?(o=Ai(e))?(e=o,ic):mh:e instanceof Ai?ic:e instanceof Date?hh:uh(e)?fh:Array.isArray(e)?dh:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gh:ha)(t,e)}function yh(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function _h(t){return function(){return t}}function xh(t){return+t}var ac=[0,1];function Zo(t){return t}function hs(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:_h(isNaN(e)?NaN:.5)}function wh(t,e){var r;return t>e&&(r=t,t=e,e=r),function(o){return Math.max(t,Math.min(e,o))}}function bh(t,e,r){var o=t[0],i=t[1],a=e[0],s=e[1];return i<o?(o=hs(i,o),a=r(s,a)):(o=hs(o,i),a=r(a,s)),function(c){return a(o(c))}}function Mh(t,e,r){var o=Math.min(t.length,e.length)-1,i=new Array(o),a=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<o;)i[s]=hs(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(c){var f=$d(t,c,1,o)-1;return a[f](i[f](c))}}function sc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lc(){var t=ac,e=ac,r=ds,o,i,a,s=Zo,c,f,l;function u(){var d=Math.min(t.length,e.length);return s!==Zo&&(s=wh(t[0],t[d-1])),c=d>2?Mh:bh,f=l=null,h}function h(d){return d==null||isNaN(d=+d)?a:(f||(f=c(t.map(o),e,r)))(o(s(d)))}return h.invert=function(d){return s(i((l||(l=c(e,t.map(o),ha)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,xh),u()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),r=yh,u()},h.clamp=function(d){return arguments.length?(s=d?!0:Zo,u()):s!==Zo},h.interpolate=function(d){return arguments.length?(r=d,u()):r},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,g){return o=d,i=g,u()}}function Sh(){return lc()(Zo,Zo)}function Eh(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ga(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,o=t.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+t.slice(r+1)]}function Ko(t){return t=ga(Math.abs(t)),t?t[1]:NaN}function kh(t,e){return function(r,o){for(var i=r.length,a=[],s=0,c=t[0],f=0;i>0&&c>0&&(f+c+1>o&&(c=Math.max(1,o-f)),a.push(r.substring(i-=c,i+c)),!((f+=c+1)>o));)c=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Ch(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Th=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wi(t){if(!(e=Th.exec(t)))throw new Error("invalid format: "+t);var e;return new gs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Wi.prototype=gs.prototype;function gs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nh(t){t:for(var e=t.length,r=1,o=-1,i;r<e;++r)switch(t[r]){case".":o=i=r;break;case"0":o===0&&(o=r),i=r;break;default:if(!+t[r])break t;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var cc;function Hh(t,e){var r=ga(t,e);if(!r)return t+"";var o=r[0],i=r[1],a=i-(cc=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=o.length;return a===s?o:a>s?o+new Array(a-s+1).join("0"):a>0?o.slice(0,a)+"."+o.slice(a):"0."+new Array(1-a).join("0")+ga(t,Math.max(0,e+a-1))[0]}function fc(t,e){var r=ga(t,e);if(!r)return t+"";var o=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}const uc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Eh,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fc(t*100,e),r:fc,s:Hh,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function dc(t){return t}var hc=Array.prototype.map,gc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ah(t){var e=t.grouping===void 0||t.thousands===void 0?dc:kh(hc.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?dc:Ch(hc.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function l(h){h=Wi(h);var d=h.fill,g=h.align,p=h.sign,y=h.symbol,_=h.zero,x=h.width,C=h.comma,W=h.precision,H=h.trim,M=h.type;M==="n"?(C=!0,M="g"):uc[M]||(W===void 0&&(W=12),H=!0,M="g"),(_||d==="0"&&g==="=")&&(_=!0,d="0",g="=");var k=y==="$"?r:y==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",b=y==="$"?o:/[%p]/.test(M)?s:"",S=uc[M],P=/[defgprs%]/.test(M);W=W===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,W)):Math.max(0,Math.min(20,W));function T(R){var A=k,V=b,Z,ct,gt;if(M==="c")V=S(R)+V,R="";else{R=+R;var L=R<0||1/R<0;if(R=isNaN(R)?f:S(Math.abs(R),W),H&&(R=Nh(R)),L&&+R==0&&p!=="+"&&(L=!1),A=(L?p==="("?p:c:p==="-"||p==="("?"":p)+A,V=(M==="s"?gc[8+cc/3]:"")+V+(L&&p==="("?")":""),P){for(Z=-1,ct=R.length;++Z<ct;)if(gt=R.charCodeAt(Z),48>gt||gt>57){V=(gt===46?i+R.slice(Z+1):R.slice(Z))+V,R=R.slice(0,Z);break}}}C&&!_&&(R=e(R,1/0));var it=A.length+R.length+V.length,$=it<x?new Array(x-it+1).join(d):"";switch(C&&_&&(R=e($+R,$.length?x-V.length:1/0),$=""),g){case"<":R=A+R+V+$;break;case"=":R=A+$+R+V;break;case"^":R=$.slice(0,it=$.length>>1)+A+R+V+$.slice(it);break;default:R=$+A+R+V;break}return a(R)}return T.toString=function(){return h+""},T}function u(h,d){var g=l((h=Wi(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Ko(d)/3)))*3,y=Math.pow(10,-p),_=gc[8+p/3];return function(x){return g(y*x)+_}}return{format:l,formatPrefix:u}}var pa,ps,pc;Wh({thousands:",",grouping:[3],currency:["$",""]});function Wh(t){return pa=Ah(t),ps=pa.format,pc=pa.formatPrefix,pa}function Rh(t){return Math.max(0,-Ko(Math.abs(t)))}function zh(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ko(e)/3)))*3-Ko(Math.abs(t)))}function Ih(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ko(e)-Ko(t))+1}function Fh(t,e,r,o){var i=Ud(t,e,r),a;switch(o=Wi(o??",f"),o.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return o.precision==null&&!isNaN(a=zh(i,s))&&(o.precision=a),pc(o,s)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(a=Ih(i,Math.max(Math.abs(t),Math.abs(e))))&&(o.precision=a-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(a=Rh(i))&&(o.precision=a-(o.type==="%")*2);break}}return ps(o)}function Ph(t){var e=t.domain;return t.ticks=function(r){var o=e();return os(o[0],o[o.length-1],r??10)},t.tickFormat=function(r,o){var i=e();return Fh(i[0],i[i.length-1],r??10,o)},t.nice=function(r){r==null&&(r=10);var o=e(),i=0,a=o.length-1,s=o[i],c=o[a],f,l,u=10;for(c<s&&(l=s,s=c,c=l,l=i,i=a,a=l);u-- >0;){if(l=is(s,c,r),l===f)return o[i]=s,o[a]=c,e(o);if(l>0)s=Math.floor(s/l)*l,c=Math.ceil(c/l)*l;else if(l<0)s=Math.ceil(s*l)/l,c=Math.floor(c*l)/l;else break;f=l}return t},t}function Qn(){var t=Sh();return t.copy=function(){return sc(t,Qn())},Xl.apply(t,arguments),Ph(t)}function Lh(t,e){t=t.slice();var r=0,o=t.length-1,i=t[r],a=t[o],s;return a<i&&(s=r,r=o,o=s,s=i,i=a,a=s),t[r]=e.floor(i),t[o]=e.ceil(a),t}function vc(t){return Math.log(t)}function mc(t){return Math.exp(t)}function Dh(t){return-Math.log(-t)}function Bh(t){return-Math.exp(-t)}function Gh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Vh(t){return t===10?Gh:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Oh(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yc(t){return(e,r)=>-t(-e,r)}function $h(t){const e=t(vc,mc),r=e.domain;let o=10,i,a;function s(){return i=Oh(o),a=Vh(o),r()[0]<0?(i=yc(i),a=yc(a),t(Dh,Bh)):t(vc,mc),e}return e.base=function(c){return arguments.length?(o=+c,s()):o},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const f=r();let l=f[0],u=f[f.length-1];const h=u<l;h&&([l,u]=[u,l]);let d=i(l),g=i(u),p,y;const _=c==null?10:+c;let x=[];if(!(o%1)&&g-d<_){if(d=Math.floor(d),g=Math.ceil(g),l>0){for(;d<=g;++d)for(p=1;p<o;++p)if(y=d<0?p/a(-d):p*a(d),!(y<l)){if(y>u)break;x.push(y)}}else for(;d<=g;++d)for(p=o-1;p>=1;--p)if(y=d>0?p/a(-d):p*a(d),!(y<l)){if(y>u)break;x.push(y)}x.length*2<_&&(x=os(l,u,_))}else x=os(d,g,Math.min(g-d,_)).map(a);return h?x.reverse():x},e.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=o===10?"s":","),typeof f!="function"&&(!(o%1)&&(f=Wi(f)).precision==null&&(f.trim=!0),f=ps(f)),c===1/0)return f;const l=Math.max(1,o*c/e.ticks().length);return u=>{let h=u/a(Math.round(i(u)));return h*o<o-.5&&(h*=o),h<=l?f(u):""}},e.nice=()=>r(Lh(r(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function Dr(){const t=$h(lc()).domain([1,10]);return t.copy=()=>sc(t,Dr()).base(t.base()),Xl.apply(t,arguments),t}function rn(t){return function(){return t}}const _c=1e-12,vs=Math.PI,ms=2*vs,Mo=1e-6,jh=ms-Mo;function xc(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function qh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xc;const r=10**e;return function(o){this._+=o[0];for(let i=1,a=o.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+o[i]}}class Xh{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xc:qh(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,o,i){this._append`Q${+e},${+r},${this._x1=+o},${this._y1=+i}`}bezierCurveTo(e,r,o,i,a,s){this._append`C${+e},${+r},${+o},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,o,i,a){if(e=+e,r=+r,o=+o,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,c=this._y1,f=o-e,l=i-r,u=s-e,h=c-r,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>Mo)if(!(Math.abs(h*f-l*u)>Mo)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let g=o-s,p=i-c,y=f*f+l*l,_=g*g+p*p,x=Math.sqrt(y),C=Math.sqrt(d),W=a*Math.tan((vs-Math.acos((y+d-_)/(2*x*C)))/2),H=W/C,M=W/x;Math.abs(H-1)>Mo&&this._append`L${e+H*u},${r+H*h}`,this._append`A${a},${a},0,0,${+(h*g>u*p)},${this._x1=e+M*f},${this._y1=r+M*l}`}}arc(e,r,o,i,a,s){if(e=+e,r=+r,o=+o,s=!!s,o<0)throw new Error(`negative radius: ${o}`);let c=o*Math.cos(i),f=o*Math.sin(i),l=e+c,u=r+f,h=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Mo||Math.abs(this._y1-u)>Mo)&&this._append`L${l},${u}`,o&&(d<0&&(d=d%ms+ms),d>jh?this._append`A${o},${o},0,1,${h},${e-c},${r-f}A${o},${o},0,1,${h},${this._x1=l},${this._y1=u}`:d>Mo&&this._append`A${o},${o},0,${+(d>=vs)},${h},${this._x1=e+o*Math.cos(a)},${this._y1=r+o*Math.sin(a)}`)}rect(e,r,o,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${o=+o}v${+i}h${-o}Z`}toString(){return this._}}function wc(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const o=Math.floor(r);if(!(o>=0))throw new RangeError(`invalid digits: ${r}`);e=o}return t},()=>new Xh(e)}function bc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Mc(t){this._context=t}Mc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Sc(t){return new Mc(t)}function Ec(t){return t[0]}function kc(t){return t[1]}function Cc(t,e){var r=rn(!0),o=null,i=Sc,a=null,s=wc(c);t=typeof t=="function"?t:t===void 0?Ec:rn(t),e=typeof e=="function"?e:e===void 0?kc:rn(e);function c(f){var l,u=(f=bc(f)).length,h,d=!1,g;for(o==null&&(a=i(g=s())),l=0;l<=u;++l)!(l<u&&r(h=f[l],l,f))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(h,l,f),+e(h,l,f));if(g)return a=null,g+""||null}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:rn(+f),c):t},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:rn(+f),c):e},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:rn(!!f),c):r},c.curve=function(f){return arguments.length?(i=f,o!=null&&(a=i(o)),c):i},c.context=function(f){return arguments.length?(f==null?o=a=null:a=i(o=f),c):o},c}function Uh(t,e,r){var o=null,i=rn(!0),a=null,s=Sc,c=null,f=wc(l);t=typeof t=="function"?t:t===void 0?Ec:rn(+t),e=typeof e=="function"?e:rn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?kc:rn(+r);function l(h){var d,g,p,y=(h=bc(h)).length,_,x=!1,C,W=new Array(y),H=new Array(y);for(a==null&&(c=s(C=f())),d=0;d<=y;++d){if(!(d<y&&i(_=h[d],d,h))===x)if(x=!x)g=d,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),p=d-1;p>=g;--p)c.point(W[p],H[p]);c.lineEnd(),c.areaEnd()}x&&(W[d]=+t(_,d,h),H[d]=+e(_,d,h),c.point(o?+o(_,d,h):W[d],r?+r(_,d,h):H[d]))}if(C)return c=null,C+""||null}function u(){return Cc().defined(i).curve(s).context(a)}return l.x=function(h){return arguments.length?(t=typeof h=="function"?h:rn(+h),o=null,l):t},l.x0=function(h){return arguments.length?(t=typeof h=="function"?h:rn(+h),l):t},l.x1=function(h){return arguments.length?(o=h==null?null:typeof h=="function"?h:rn(+h),l):o},l.y=function(h){return arguments.length?(e=typeof h=="function"?h:rn(+h),r=null,l):e},l.y0=function(h){return arguments.length?(e=typeof h=="function"?h:rn(+h),l):e},l.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:rn(+h),l):r},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(r)},l.lineX1=function(){return u().x(o).y(e)},l.defined=function(h){return arguments.length?(i=typeof h=="function"?h:rn(!!h),l):i},l.curve=function(h){return arguments.length?(s=h,a!=null&&(c=s(a)),l):s},l.context=function(h){return arguments.length?(h==null?a=c=null:c=s(a=h),l):a},l}function Tc(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function ys(t,e){this._context=t,this._k=(1-e)/6}ys.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Tc(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Tc(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},(function t(e){function r(o){return new ys(o,e)}return r.tension=function(o){return t(+o)},r})(0);function Yh(t,e,r){var o=t._x1,i=t._y1,a=t._x2,s=t._y2;if(t._l01_a>_c){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,i=(i*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>_c){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*l+t._y1*t._l23_2a-r*t._l12_2a)/u}t._context.bezierCurveTo(o,i,a,s,t._x2,t._y2)}function Nc(t,e){this._context=t,this._alpha=e}Nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,o=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Yh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Hc=(function t(e){function r(o){return e?new Nc(o,e):new ys(o,0)}return r.alpha=function(o){return t(+o)},r})(.5);Wn[D]="src/components/table/CellSparkline.svelte";var Zh=q(Pt('<rect opacity="0.8"></rect>'),Wn[D],[[72,8]]),Kh=q(Pt('<path opacity="0.3"></path><path fill="none" stroke-width="1.5"></path>',1),Wn[D],[[82,6],[83,6]]),Qh=q(Pt('<circle r="2"></circle>'),Wn[D],[[89,8]]),Jh=q(Pt('<path fill="none" stroke-width="1.5"></path><!>',1),Wn[D],[[85,6]]),tg=q(Pt('<text text-anchor="middle" dominant-baseline="middle" fill="var(--wf-muted, #94a3b8)" font-size="8">--</text>'),Wn[D],[[93,4]]),eg=q(Pt('<svg class="cell-sparkline svelte-hfafss"><!></svg>'),Wn[D],[[68,0]]);function Wn(t,e){Ne(new.target),Ee(e,!0,Wn);const r=v(m(()=>{var _;return((_=e.options)==null?void 0:_.type)??"line"}),"chartType"),o=v(m(()=>{var _;return((_=e.options)==null?void 0:_.height)??20}),"chartHeight"),i=v(m(()=>{var _;return((_=e.options)==null?void 0:_.color)??"var(--wf-primary, #2563eb)"}),"chartColor"),a=60,s=v(m(()=>!e.data||!Array.isArray(e.data)||w(e.data.length,0)?[]:Array.isArray(e.data[0])?e.data[0]:e.data),"normalizedData"),c=v(m(()=>{if(w(n(s).length,0))return[];const _=Math.min(...n(s)),x=Math.max(...n(s)),C=(x-_)*.1||1,W=Qn().domain([0,n(s).length-1]).range([2,a-2]),H=Qn().domain([_-C,x+C]).range([n(o)-2,2]);return n(s).map((M,k)=>[W(k),H(M)])}),"points"),f=v(m(()=>w(n(c).length,0)?"":Cc().x(x=>x[0]).y(x=>x[1]).curve(Hc.alpha(.5))(n(c))??""),"linePath"),l=v(m(()=>w(n(c).length,0)?"":Uh().x(x=>x[0]).y0(n(o)-2).y1(x=>x[1]).curve(Hc.alpha(.5))(n(c))??""),"areaPath"),u=v(m(()=>n(c).length>0?(a-8)/n(c).length-1:0),"barWidth");var h={...He()},d=eg();N(d,"width",a);var g=Q(d);{var p=_=>{var x=Et(),C=mt(x);{var W=M=>{var k=Et(),b=mt(k);I(()=>ze(b,17,()=>n(c),wr,(S,P)=>{var T=m(()=>Wa(n(P),2));let R=()=>n(T)[0];R();let A=()=>n(T)[1];A();var V=Zh();J(()=>{N(V,"x",R()-n(u)/2),N(V,"y",A()),N(V,"width",n(u)),N(V,"height",n(o)-2-A()),N(V,"fill",n(i))}),F(S,V)}),"each",Wn,71,6),F(M,k)},H=M=>{var k=Et(),b=mt(k);{var S=T=>{var R=Kh(),A=mt(R),V=rt(A);J(()=>{N(A,"d",n(l)),N(A,"fill",n(i)),N(V,"d",n(f)),N(V,"stroke",n(i))}),F(T,R)},P=T=>{var R=Jh(),A=mt(R),V=rt(A);{var Z=ct=>{const gt=v(m(()=>n(c)[n(c).length-1]),"lastPoint");n(gt);var L=Qh();J(()=>{N(L,"cx",n(gt)[0]),N(L,"cy",n(gt)[1]),N(L,"fill",n(i))}),F(ct,L)};I(()=>X(V,ct=>{n(c).length>0&&ct(Z)}),"if",Wn,87,6)}J(()=>{N(A,"d",n(f)),N(A,"stroke",n(i))}),F(T,R)};I(()=>X(b,T=>{w(n(r),"area")?T(S):T(P,!1)},!0),"if",Wn,81,4)}F(M,k)};I(()=>X(C,M=>{w(n(r),"bar")?M(W):M(H,!1)}),"if",Wn,70,4)}F(_,x)},y=_=>{var x=tg();N(x,"x",a/2),J(()=>N(x,"y",n(o)/2)),F(_,x)};I(()=>X(g,_=>{n(c).length>0?_(p):_(y,!1)}),"if",Wn,69,2)}return J(()=>{N(d,"height",n(o)),N(d,"viewBox",`0 0 60 ${n(o)??""}`)}),F(t,d),ke(h)}cr[D]="src/components/table/CellContent.svelte";var ng=q(_t('<span class="cell-icon svelte-mxyczy"> </span>'),cr[D],[[34,15]]),rg=q(_t('<span class="cell-badge svelte-mxyczy"> </span>'),cr[D],[[36,16]]),og=q(_t('<span><!> <span class="cell-value"> </span> <!></span>'),cr[D],[[23,0,[[35,2]]]]);function cr(t,e){Ne(new.target),Ee(e,!0,cr);const r=v(m(()=>{var M;return!!((M=e.cellStyle)!=null&&M.badge)}),"hasBadge"),o=v(m(()=>{var M;return!!((M=e.cellStyle)!=null&&M.icon)}),"hasIcon"),i=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.bold)??!1}),"isBold"),a=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.italic)??!1}),"isItalic"),s=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.color)??null}),"textColor"),c=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.bg)??null}),"bgColor"),f=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.emphasis)??!1}),"isEmphasis"),l=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.muted)??!1}),"isMuted"),u=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.accent)??!1}),"isAccent");var h={...He()},d=og();let g,p;var y=Q(d);{var _=M=>{var k=ng(),b=Q(k);J(()=>{var S;return Qt(b,(S=e.cellStyle)==null?void 0:S.icon)}),F(M,k)};I(()=>X(y,M=>{n(o)&&M(_)}),"if",cr,34,2)}var x=rt(y,2),C=Q(x),W=rt(x,2);{var H=M=>{var k=rg(),b=Q(k);J(()=>{var S;return Qt(b,(S=e.cellStyle)==null?void 0:S.badge)}),F(M,k)};I(()=>X(W,M=>{n(r)&&M(H)}),"if",cr,36,2)}return J(M=>{g=Tn(d,1,"cell-content svelte-mxyczy",null,g,{"cell-bold":n(i),"cell-italic":n(a),"cell-emphasis":n(f),"cell-muted":n(l),"cell-accent":n(u)}),N(d,"title",M),p=Ie(d,"",p,{color:n(s),"background-color":n(c)}),Qt(C,e.value??"")},[()=>String(e.value??"")]),F(t,d),ke(h)}Ri[D]="src/components/table/CellIcon.svelte";var ig=q(_t("<span> </span>"),Ri[D],[[32,2]]);function Ri(t,e){Ne(new.target),Ee(e,!0,Ri);const r=v(m(()=>{var h;return((h=e.options)==null?void 0:h.mapping)??{}}),"mapping"),o=v(m(()=>{var h;return((h=e.options)==null?void 0:h.size)??"base"}),"size"),i=v(m(()=>{var h;return(h=e.options)==null?void 0:h.color}),"color"),a=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";const h=String(e.value);return n(r)&&h in n(r)?n(r)[h]:h}),"displayValue"),s=v(m(()=>w(n(o),"sm")?"icon-sm":w(n(o),"lg")?"icon-lg":"icon-base"),"sizeClass");var c={...He()},f=Et(),l=mt(f);{var u=h=>{var d=ig();let g;var p=Q(d);J(y=>{Tn(d,1,`cell-icon ${n(s)??""}`,"svelte-weao3c"),N(d,"title",y),g=Ie(d,"",g,{color:n(i)}),Qt(p,n(a))},[()=>String(e.value??"")]),F(h,d)};I(()=>X(l,h=>{n(a)&&h(u)}),"if",Ri,31,0)}return F(t,f),ke(c)}zi[D]="src/components/table/CellBadge.svelte";var ag=q(_t("<span> </span>"),zi[D],[[56,2]]);function zi(t,e){Ne(new.target),Ee(e,!0,zi);const r=v(m(()=>{var d;return((d=e.options)==null?void 0:d.variants)??{}}),"variants"),o=v(m(()=>{var d;return((d=e.options)==null?void 0:d.colors)??{}}),"colors"),i=v(m(()=>{var d;return((d=e.options)==null?void 0:d.size)??"base"}),"size"),a=v(m(()=>w(e.value,void 0)||w(e.value,null)?"":String(e.value)),"displayValue"),s=v(m(()=>{const d=String(e.value??"");if(n(o)&&d in n(o))return n(o)[d];if(n(r)&&d in n(r))switch(n(r)[d]){case"success":return"var(--wf-badge-success, #16a34a)";case"warning":return"var(--wf-badge-warning, #f59e0b)";case"error":return"var(--wf-badge-error, #dc2626)";case"info":return"var(--wf-badge-info, #2563eb)";case"muted":return"var(--wf-badge-muted, var(--wf-muted, #64748b))";default:return"var(--wf-primary, #2563eb)"}return"var(--wf-primary, #2563eb)"}),"badgeColor"),c=v(m(()=>w(n(i),"sm")?"badge-sm":"badge-base"),"sizeClass");var f={...He()},l=Et(),u=mt(l);{var h=d=>{var g=ag();let p;var y=Q(g);J(()=>{Tn(g,1,`cell-badge ${n(c)??""}`,"svelte-16nh7k4"),p=Ie(g,"",p,{"background-color":`color-mix(in srgb, ${n(s)??""} 15%, var(--wf-bg, #fff))`,color:n(s)}),Qt(y,n(a))}),F(d,g)};I(()=>X(u,d=>{n(a)&&d(h)}),"if",zi,55,0)}return F(t,l),ke(f)}So[D]="src/components/table/CellStars.svelte";var sg=q(_t("<span> </span>"),So[D],[[44,6]]),lg=q(_t('<span class="cell-stars svelte-8zr88i"></span>'),So[D],[[42,2]]);function So(t,e){Ne(new.target),Ee(e,!0,So);const r=v(m(()=>{var p;return((p=e.options)==null?void 0:p.maxStars)??5}),"maxStars"),o=v(m(()=>{var p;return((p=e.options)==null?void 0:p.color)??"#f59e0b"}),"filledColor"),i=v(m(()=>{var p;return((p=e.options)==null?void 0:p.emptyColor)??"#d1d5db"}),"emptyColor"),a=v(m(()=>{var p;return((p=e.options)==null?void 0:p.halfStars)??!1}),"halfStars"),s="★",c="☆",f="⯪",l=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";const p=Math.max(0,Math.min(n(r),e.value)),y=[];for(let _=1;_<=n(r);_++)_<=p?y.push({char:s,filled:"full"}):n(a)&&_-.5<=p?y.push({char:f,filled:"half"}):y.push({char:c,filled:"empty"});return y}),"starDisplay");var u={...He()},h=Et(),d=mt(h);{var g=p=>{var y=lg();I(()=>ze(y,21,()=>n(l),wr,(_,x)=>{var C=sg();let W,H;var M=Q(C,!0);J(()=>{W=Tn(C,1,"star svelte-8zr88i",null,W,{filled:w(n(x).filled,"full"),half:w(n(x).filled,"half")}),H=Ie(C,"",H,{color:w(n(x).filled,"empty")?n(i):n(o)}),Qt(M,n(x).char)}),F(_,C)}),"each",So,43,4),J(()=>N(y,"title",`${e.value??""} / ${n(r)??""}`)),F(p,y)};I(()=>X(d,p=>{w(e.value,void 0,!1)&&w(e.value,null,!1)&&p(g)}),"if",So,41,0)}return F(t,h),ke(u)}Eo[D]="src/components/table/CellImg.svelte";var cg=q(_t('<img alt="" loading="lazy"/>'),Eo[D],[[28,2]]),fg=q(_t('<span class="cell-img-fallback svelte-1rifgp8" title="Image not available"> </span>'),Eo[D],[[38,2]]);function Eo(t,e){Ne(new.target),Ee(e,!0,Eo);const r=v(m(()=>{var p;return(p=e.options)==null?void 0:p.height}),"imgHeight"),o=v(m(()=>{var p;return(p=e.options)==null?void 0:p.maxWidth}),"maxWidth"),i=v(m(()=>{var p;return((p=e.options)==null?void 0:p.fallback)??"📷"}),"fallback"),a=v(m(()=>{var p;return((p=e.options)==null?void 0:p.shape)??"square"}),"shape");let s=v(Wt(!1),"hasError");const c=v(m(()=>w(n(a),"circle")?"shape-circle":w(n(a),"rounded")?"shape-rounded":""),"shapeClass");function f(){at(s,!0)}var l={...He()},u=Et(),h=mt(u);{var d=p=>{var y=cg();let _;J(()=>{Tn(y,1,`cell-img ${n(c)??""}`,"svelte-1rifgp8"),N(y,"src",e.value),_=Ie(y,"",_,{height:n(r)?`${n(r)}px`:"calc(var(--wf-row-height, 28px) - 4px)","max-width":n(o)?`${n(o)}px`:"100%"})}),Gn("error",y,f),F(p,y)},g=p=>{var y=Et(),_=mt(y);{var x=C=>{var W=fg(),H=Q(W);J(()=>Qt(H,n(i))),F(C,W)};I(()=>X(_,C=>{n(i)&&C(x)},!0),"if",Eo,37,0)}F(p,y)};I(()=>X(h,p=>{e.value&&!n(s)?p(d):p(g,!1)}),"if",Eo,27,0)}return F(t,u),ke(l)}Br[D]="src/components/table/CellReference.svelte";var ug=q(_t('<span class="reference-icon svelte-186gxpi">↗</span>'),Br[D],[[44,8]]),dg=q(_t('<a class="cell-reference svelte-186gxpi" target="_blank" rel="noopener noreferrer"><span class="reference-text svelte-186gxpi"> </span> <!></a>'),Br[D],[[35,4,[[42,6]]]]),hg=q(_t('<span class="cell-reference svelte-186gxpi"> </span>'),Br[D],[[48,4]]);function Br(t,e){Ne(new.target),Ee(e,!0,Br);const r=v(m(()=>{var g;return((g=e.options)==null?void 0:g.maxChars)??30}),"maxChars"),o=v(m(()=>{var g;return((g=e.options)==null?void 0:g.showIcon)??!0}),"showIcon"),i=v(m(()=>{var g;return(g=e.options)==null?void 0:g.hrefField}),"hrefField"),a=v(m(()=>{if(!n(i))return null;const g=e.metadata[n(i)];return w(typeof g,"string")?g:null}),"href"),s=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";const g=String(e.value);return g.length<=n(r)?g:g.substring(0,n(r))+"..."}),"displayValue"),c=v(m(()=>e.value?String(e.value):""),"fullValue"),f=v(m(()=>n(c).length>n(r)),"isTruncated");var l={...He()},u=Et(),h=mt(u);{var d=g=>{var p=Et(),y=mt(p);{var _=C=>{var W=dg(),H=Q(W),M=Q(H),k=rt(H,2);{var b=S=>{var P=ug();F(S,P)};I(()=>X(k,S=>{n(o)&&S(b)}),"if",Br,43,6)}J(()=>{N(W,"href",n(a)),N(W,"title",n(f)?n(c):void 0),Qt(M,n(s))}),F(C,W)},x=C=>{var W=hg(),H=Q(W);J(()=>{N(W,"title",n(f)?n(c):void 0),Qt(H,n(s))}),F(C,W)};I(()=>X(y,C=>{n(a)?C(_):C(x,!1)}),"if",Br,34,2)}F(g,p)};I(()=>X(h,g=>{e.value&&g(d)}),"if",Br,33,0)}return F(t,u),ke(l)}Ii[D]="src/components/table/CellRange.svelte";var gg=q(_t('<span class="cell-range svelte-jzelx2"> </span>'),Ii[D],[[51,2]]);function Ii(t,e){Ne(new.target),Ee(e,!0,Ii);const r=v(m(()=>{var y;return((y=e.options)==null?void 0:y.separator)??" – "}),"separator"),o=v(m(()=>{var y;return(y=e.options)==null?void 0:y.decimals}),"decimals"),i=v(m(()=>{var y;return((y=e.options)==null?void 0:y.minField)??""}),"minField"),a=v(m(()=>{var y;return((y=e.options)==null?void 0:y.maxField)??""}),"maxField"),s=v(m(()=>{if(!n(i))return null;const y=e.metadata[n(i)];return w(typeof y,"number")?y:null}),"minValue"),c=v(m(()=>{if(!n(a))return null;const y=e.metadata[n(a)];return w(typeof y,"number")?y:null}),"maxValue");function f(y){return w(y,null)?"":w(n(o),null)||w(n(o),void 0)?Number.isInteger(y)?String(y):y.toFixed(1):y.toFixed(n(o))}const l=v(m(()=>w(n(s),null)&&w(n(c),null)?"":w(n(s),null)?f(n(c)):w(n(c),null)?f(n(s)):`${f(n(s))}${n(r)}${f(n(c))}`),"displayValue"),u=v(m(()=>w(n(s),null,!1)||w(n(c),null,!1)),"hasRange");var h={...He()},d=Et(),g=mt(d);{var p=y=>{var _=gg(),x=Q(_);J((C,W)=>{N(_,"title",`${C??""} to ${W??""}`),Qt(x,n(l))},[()=>f(n(s)),()=>f(n(c))]),F(y,_)};I(()=>X(g,y=>{n(u)&&y(p)}),"if",Ii,50,0)}return F(t,d),ke(h)}const pg=["default","minimal","dark","jama","lancet","modern","presentation","cochrane","nature"],Rt={name:"default",colors:{background:"#ffffff",foreground:"#333333",primary:"#0891b2",secondary:"#64748b",accent:"#8b5cf6",muted:"#94a3b8",border:"#e2e8f0",rowBg:"#ffffff",altBg:"#f8fafc",interval:"#0891b2",intervalPositive:"#0891b2",intervalNegative:"#dc2626",intervalNeutral:"#64748b",intervalLine:"#475569",summaryFill:"#0891b2",summaryBorder:"#0e7490"},typography:{fontFamily:"system-ui, -apple-system, sans-serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:600,lineHeight:1.5,headerFontScale:1.05},spacing:{rowHeight:28,headerHeight:36,sectionGap:16,padding:12,containerPadding:0,cellPaddingX:10,cellPaddingY:4,axisGap:12,groupPadding:8},shapes:{pointSize:6,summaryHeight:10,lineWidth:1.5,borderRadius:2},axis:{rangeMin:null,rangeMax:null,tickCount:null,tickValues:null,gridlines:!1,gridlineStyle:"dotted",ciClipFactor:2,includeNull:!0,symmetric:null,nullTick:!0,markerMargin:!0},layout:{plotPosition:"right",tableWidth:"auto",plotWidth:"auto",containerBorder:!1,containerBorderRadius:8,banding:!0},groupHeaders:{level1FontSize:"1rem",level1FontWeight:700,level1Italic:!1,level1Background:null,level1BorderBottom:!1,level2FontSize:"0.9375rem",level2FontWeight:500,level2Italic:!0,level2Background:null,level2BorderBottom:!1,level3FontSize:"0.875rem",level3FontWeight:400,level3Italic:!1,level3Background:null,level3BorderBottom:!1,indentPerLevel:16}},vg={...Rt,name:"minimal",colors:{...Rt.colors,background:"#ffffff",foreground:"#000000",primary:"#000000",secondary:"#333333",accent:"#000000",muted:"#666666",border:"#000000",rowBg:"#ffffff",altBg:"#fafafa",interval:"#000000",intervalPositive:"#000000",intervalNegative:"#000000",intervalNeutral:"#666666",intervalLine:"#000000",summaryFill:"#000000",summaryBorder:"#000000"},typography:{...Rt.typography,fontFamily:"Georgia, 'Times New Roman', serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.4},spacing:{...Rt.spacing,rowHeight:24,headerHeight:30,sectionGap:12,padding:10},shapes:{...Rt.shapes,pointSize:5,summaryHeight:8,lineWidth:1,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},mg={...Rt,name:"dark",colors:{...Rt.colors,background:"#1e1e2e",foreground:"#cdd6f4",primary:"#89b4fa",secondary:"#a6adc8",accent:"#f5c2e7",muted:"#6c7086",border:"#313244",rowBg:"#1e1e2e",altBg:"#232334",interval:"#89b4fa",intervalPositive:"#a6e3a1",intervalNegative:"#f38ba8",intervalNeutral:"#6c7086",intervalLine:"#9399b2",summaryFill:"#89b4fa",summaryBorder:"#74c7ec"},typography:{...Rt.typography,fontFamily:"system-ui, -apple-system, sans-serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:600,lineHeight:1.5},spacing:{...Rt.spacing,rowHeight:30,headerHeight:38,sectionGap:18,padding:14},shapes:{...Rt.shapes,pointSize:6,summaryHeight:10,lineWidth:1.5,borderRadius:4},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:8}},yg={...Rt,name:"jama",colors:{...Rt.colors,background:"#ffffff",foreground:"#000000",primary:"#000000",secondary:"#333333",accent:"#000000",muted:"#555555",border:"#000000",rowBg:"#ffffff",altBg:"#f9fafb",interval:"#000000",intervalPositive:"#000000",intervalNegative:"#000000",intervalNeutral:"#555555",intervalLine:"#000000",summaryFill:"#000000",summaryBorder:"#000000"},typography:{...Rt.typography,fontFamily:"Arial, Helvetica, sans-serif",fontSizeSm:"8pt",fontSizeBase:"9pt",fontSizeLg:"10pt",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.2},spacing:{...Rt.spacing,rowHeight:18,headerHeight:24,sectionGap:8,padding:6,cellPaddingX:8,cellPaddingY:2},shapes:{...Rt.shapes,pointSize:4,summaryHeight:7,lineWidth:1.25,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},_g={...Rt,name:"lancet",colors:{...Rt.colors,background:"#fdfcfb",foreground:"#1e3a5f",primary:"#00407a",secondary:"#3d5a80",accent:"#b8860b",muted:"#6b7c93",border:"#d4dce6",rowBg:"#fdfcfb",altBg:"#f8f7f6",interval:"#00407a",intervalPositive:"#00407a",intervalNegative:"#9d2933",intervalNeutral:"#3d5a80",intervalLine:"#1e3a5f",summaryFill:"#00407a",summaryBorder:"#002d54"},typography:{...Rt.typography,fontFamily:"Georgia, 'Times New Roman', serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.5},spacing:{...Rt.spacing,rowHeight:26,headerHeight:34,sectionGap:16,padding:12,cellPaddingX:12,cellPaddingY:5},shapes:{...Rt.shapes,pointSize:5,summaryHeight:9,lineWidth:1.25,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},xg={...Rt,name:"modern",colors:{...Rt.colors,background:"#fafafa",foreground:"#18181b",primary:"#3b82f6",secondary:"#52525b",accent:"#8b5cf6",muted:"#a1a1aa",border:"#d4d4d8",rowBg:"#fafafa",altBg:"#f4f4f5",interval:"#3b82f6",intervalPositive:"#22c55e",intervalNegative:"#ef4444",intervalNeutral:"#71717a",intervalLine:"#27272a",summaryFill:"#3b82f6",summaryBorder:"#2563eb"},typography:{...Rt.typography,fontFamily:"Inter, system-ui, -apple-system, sans-serif",fontSizeSm:"0.8125rem",fontSizeBase:"0.9375rem",fontSizeLg:"1.0625rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:600,lineHeight:1.5},spacing:{...Rt.spacing,rowHeight:36,headerHeight:44,sectionGap:24,padding:16,cellPaddingX:12,cellPaddingY:6},shapes:{...Rt.shapes,pointSize:8,summaryHeight:12,lineWidth:1.75,borderRadius:8},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:12}},wg={...Rt,name:"presentation",colors:{...Rt.colors,background:"#ffffff",foreground:"#0f172a",primary:"#0369a1",secondary:"#334155",accent:"#ea580c",muted:"#64748b",border:"#94a3b8",rowBg:"#ffffff",altBg:"#f8fafc",interval:"#0369a1",intervalPositive:"#047857",intervalNegative:"#be123c",intervalNeutral:"#334155",intervalLine:"#0f172a",summaryFill:"#0369a1",summaryBorder:"#0c4a6e"},typography:{...Rt.typography,fontFamily:"'Source Sans Pro', 'Segoe UI', Roboto, sans-serif",fontSizeSm:"1rem",fontSizeBase:"1.125rem",fontSizeLg:"1.25rem",fontWeightNormal:400,fontWeightMedium:600,fontWeightBold:700,lineHeight:1.4},spacing:{...Rt.spacing,rowHeight:44,headerHeight:52,sectionGap:28,padding:20,cellPaddingX:14,cellPaddingY:6},shapes:{...Rt.shapes,pointSize:12,summaryHeight:16,lineWidth:2.5,borderRadius:4},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:6}},bg={...Rt,name:"cochrane",colors:{...Rt.colors,background:"#ffffff",foreground:"#2c2c2c",primary:"#0099cc",secondary:"#555555",accent:"#006699",muted:"#888888",border:"#b3b3b3",rowBg:"#ffffff",altBg:"#f5f5f5",interval:"#0099cc",intervalPositive:"#0099cc",intervalNegative:"#cc3333",intervalNeutral:"#555555",intervalLine:"#2c2c2c",summaryFill:"#0099cc",summaryBorder:"#006699"},typography:{...Rt.typography,fontFamily:"Arial, Helvetica, sans-serif",fontSizeSm:"0.6875rem",fontSizeBase:"0.75rem",fontSizeLg:"0.8125rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.25},spacing:{...Rt.spacing,rowHeight:20,headerHeight:26,sectionGap:8,padding:6,cellPaddingX:6,cellPaddingY:2},shapes:{...Rt.shapes,pointSize:4,summaryHeight:7,lineWidth:1,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},Mg={...Rt,name:"nature",colors:{...Rt.colors,background:"#ffffff",foreground:"#1a1a1a",primary:"#1976d2",secondary:"#424242",accent:"#c62828",muted:"#616161",border:"#bdbdbd",rowBg:"#ffffff",altBg:"#fafafa",interval:"#1976d2",intervalPositive:"#1976d2",intervalNegative:"#c62828",intervalNeutral:"#616161",intervalLine:"#1a1a1a",summaryFill:"#1976d2",summaryBorder:"#0d47a1"},typography:{...Rt.typography,fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",fontSizeSm:"0.75rem",fontSizeBase:"0.8125rem",fontSizeLg:"0.9375rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.35},spacing:{...Rt.spacing,rowHeight:24,headerHeight:32,sectionGap:12,padding:10,cellPaddingX:10,cellPaddingY:4},shapes:{...Rt.shapes,pointSize:5,summaryHeight:8,lineWidth:1.25,borderRadius:1},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:2},axis:{...Rt.axis,gridlines:!1,nullTick:!0}},Sg={default:Rt,minimal:vg,dark:mg,jama:yg,lancet:_g,modern:xg,presentation:wg,cochrane:bg,nature:Mg},Ac={default:"Default",minimal:"Minimal",dark:"Dark",jama:"JAMA",lancet:"Lancet",modern:"Modern",presentation:"Presentation",cochrane:"Cochrane",nature:"Nature"};function Eg(t,e,r={}){const{gap:o=4,viewportPadding:i=8,preferredPosition:a="below",align:s="end"}=r,c=window.innerHeight,f=window.innerWidth,l=c-t.bottom-o-i,u=t.top-o-i;let h,d;a==="below"?l>=e.height?h="below":u>=e.height?h="above":(h=l>=u?"below":"above",d=Math.max(h==="below"?l:u,100)):u>=e.height?h="above":l>=e.height?h="below":(h=u>=l?"above":"below",d=Math.max(h==="above"?u:l,100));const g={};return h==="below"?g.top=t.bottom+o:g.bottom=c-t.top+o,s==="end"?t.right-e.width<i?g.left=Math.max(t.left,i):g.right=f-t.right:t.left+e.width>f-i?g.right=Math.max(f-t.right,i):g.left=t.left,d&&(g.maxHeight=d),g}function Gr(t,e){function r(){if(!e.triggerEl)return;const i=e.triggerEl.getBoundingClientRect(),a=t.getBoundingClientRect(),s=Eg(i,{width:a.width,height:a.height},{gap:e.gap??4,align:e.align??"end"});t.style.position="fixed",t.style.top="",t.style.bottom="",t.style.left="",t.style.right="",s.top!==void 0&&(t.style.top=`${s.top}px`),s.bottom!==void 0&&(t.style.bottom=`${s.bottom}px`),s.left!==void 0&&(t.style.left=`${s.left}px`),s.right!==void 0&&(t.style.right=`${s.right}px`),s.maxHeight?(t.style.maxHeight=`${s.maxHeight}px`,t.style.overflowY="auto"):(t.style.maxHeight="",t.style.overflowY="")}function o(i){e=i,requestAnimationFrame(r)}return o(e),{update:o,destroy(){}}}fr[D]="src/components/ui/ThemeSwitcher.svelte";var kg=q(Pt('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-35mgh1"><polyline points="20 6 9 17 4 12"></polyline></svg>'),fr[D],[[93,12,[[94,14]]]]),Cg=q(_t('<span class="spacer svelte-35mgh1"></span>'),fr[D],[[97,12]]),Tg=q(_t("<button><!> <span> </span></button>"),fr[D],[[87,8,[[99,10]]]]),Ng=q(_t('<div class="theme-dropdown svelte-35mgh1"></div>'),fr[D],[[85,4]]),Hg=q(_t('<div class="theme-switcher-wrapper svelte-35mgh1"><button class="theme-btn svelte-35mgh1" aria-label="Switch theme"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></button> <!></div>'),fr[D],[[70,0,[[71,2,[[78,4,[[79,6],[80,6]]]]]]]]);function fr(t,e){Ne(new.target),Ee(e,!0,fr);let r=v(Wt(!1),"dropdownOpen"),o=v(Wt(null),"triggerEl");const i=v(m(()=>{var p,y;return((y=(p=e.store.spec)==null?void 0:p.theme)==null?void 0:y.name)??"default"}),"currentTheme"),a=v(m(()=>w(e.availableThemes,void 0)||w(e.availableThemes,null)?pg.map(p=>[p,Ac[p]]):Object.entries(e.availableThemes).map(([p,y])=>{const _=y.name?Ac[y.name]??y.name:p;return[p,_]})),"themeEntries");function s(){at(r,!1)}function c(p){if(e.onThemeChange)e.onThemeChange(p);else if(e.availableThemes&&p in e.availableThemes){const y=e.availableThemes[p];e.store.spec&&e.store.setSpec({...e.store.spec,theme:y})}else e.store.setTheme(p);s()}function f(p){p.target.closest(".theme-switcher-wrapper")||s()}var l={...He()},u=Hg();Gn("click",$o,f);var h=Q(u);h.__click=()=>at(r,!n(r)),yo(h,p=>at(o,p),()=>n(o));var d=rt(h,2);{var g=p=>{var y=Ng();I(()=>ze(y,21,()=>n(a),wr,(_,x)=>{var C=m(()=>Wa(n(x),2));let W=()=>n(C)[0];W();let H=()=>n(C)[1];H();var M=Tg();let k;M.__click=()=>c(W());var b=Q(M);{var S=A=>{var V=kg();F(A,V)},P=A=>{var V=Cg();F(A,V)};I(()=>X(b,A=>{w(n(i),W())?A(S):A(P,!1)}),"if",fr,92,10)}var T=rt(b,2),R=Q(T,!0);J(()=>{k=Tn(M,1,"dropdown-item svelte-35mgh1",null,k,{active:w(n(i),W())}),Qt(R,H())}),F(_,M)}),"each",fr,86,6),oa(y,(_,x)=>Gr==null?void 0:Gr(_,x),()=>({triggerEl:n(o)})),F(p,y)};I(()=>X(d,p=>{n(r)&&p(g)}),"if",fr,84,2)}return J(()=>N(h,"aria-expanded",n(r))),F(t,u),ke(l)}mo(["click"]),ko[D]="src/components/ui/ViewToggle.svelte";var Ag=q(Pt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="10" y2="6"></line><line x1="3" y1="12" x2="10" y2="12"></line><line x1="3" y1="18" x2="10" y2="18"></line><line x1="14" y1="12" x2="21" y2="12"></line><circle cx="17" cy="12" r="2" fill="currentColor"></circle></svg>'),ko[D],[[21,4,[[23,6],[24,6],[25,6],[27,6],[28,6]]]]),Wg=q(Pt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>'),ko[D],[[32,4,[[33,6],[34,6],[35,6]]]]),Rg=q(_t('<button class="view-toggle-btn svelte-1u54q0q"><!></button>'),ko[D],[[13,0]]);function ko(t,e){Ne(new.target),Ee(e,!0,ko);const r=v(m(()=>{var f,l;return((l=(f=e.store.spec)==null?void 0:f.data)==null?void 0:l.includeForest)??!0}),"includeForest");var o={...He()},i=Rg();i.__click=()=>e.store.toggleForestView();var a=Q(i);{var s=f=>{var l=Ag();F(f,l)},c=f=>{var l=Wg();F(f,l)};I(()=>X(a,f=>{n(r)?f(s):f(c,!1)}),"if",ko,19,2)}return J(()=>{N(i,"aria-label",n(r)?"Show table only":"Show forest plot"),N(i,"title",n(r)?"Show table only":"Show forest plot")}),F(t,i),ke(o)}mo(["click"]);function va(t,e){const r=t.split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),r.join(".")}function _s(t){const e=Math.abs(t),r=t<0?"-":"";if(e>=1e12)throw new Error(`Cannot abbreviate value >= 1 trillion: ${t}`);if(e>=1e9){const o=e/1e9;return r+xs(o)+"B"}if(e>=1e6){const o=e/1e6;return r+xs(o)+"M"}if(e>=1e3){const o=e/1e3;return r+xs(o)+"K"}return r+Math.round(e).toString()}function xs(t){const e=Math.round(t*10)/10;return e===Math.floor(e)?e.toFixed(0):e.toFixed(1)}const zg={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function Ig(t){return t.split("").map(e=>zg[e]??e).join("")}function Qo(t,e){var c,f,l,u,h;if(t==null||Number.isNaN(t))return(e==null?void 0:e.naText)??"";if(e!=null&&e.percent){const{decimals:d,digits:g,multiply:p=!0,symbol:y=!0}=e.percent,_=p?t*100:t,x=g!=null?_.toPrecision(g):_.toFixed(d??1);return y?`${x}%`:x}if(((c=e==null?void 0:e.numeric)==null?void 0:c.abbreviate)&&Math.abs(t)>=1e3)return _s(t);const o=(f=e==null?void 0:e.numeric)==null?void 0:f.digits;if(o!=null){const d=t.toPrecision(o),g=(l=e==null?void 0:e.numeric)==null?void 0:l.thousandsSep;return g&&typeof g=="string"?va(d,g):d}const i=(u=e==null?void 0:e.numeric)==null?void 0:u.decimals,a=(h=e==null?void 0:e.numeric)==null?void 0:h.thousandsSep;let s;return i!==void 0?s=t.toFixed(i):Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?s=Math.round(t).toString():s=t.toFixed(2),a&&typeof a=="string"&&(s=va(s,a)),s}function ws(t,e){const{eventsField:r,nField:o,separator:i="/",showPct:a=!1,thousandsSep:s,abbreviate:c}=e.events,f=t.metadata[r],l=t.metadata[o];if(f==null||l===void 0||l===null)return e.naText??"";const u=Number(f),h=Number(l);let d,g;c&&(u>=1e3||h>=1e3)?(d=u>=1e3?_s(u):String(u),g=h>=1e3?_s(h):String(h)):(d=String(u),g=String(h),s&&typeof s=="string"&&(d=va(d,s),g=va(g,s)));let p=`${d}${i}${g}`;if(a&&h>0){const y=(u/h*100).toFixed(1);p+=` (${y}%)`}return p}function bs(t,e,r,o){var c,f,l;if(t==null||Number.isNaN(t))return"";const i=((c=o==null?void 0:o.interval)==null?void 0:c.decimals)??2,a=((f=o==null?void 0:o.interval)==null?void 0:f.sep)??" ",s=(l=o==null?void 0:o.interval)==null?void 0:l.impreciseThreshold;return e==null||r===void 0||r===null||Number.isNaN(e)||Number.isNaN(r)?t.toFixed(i):s!=null&&e>0&&r/e>s?"—":`${t.toFixed(i)}${a}(${e.toFixed(i)}, ${r.toFixed(i)})`}function Wc(t,e){if(t==null||Number.isNaN(t))return(e==null?void 0:e.naText)??"";const r=e==null?void 0:e.pvalue,o=(r==null?void 0:r.digits)??2,i=(r==null?void 0:r.expThreshold)??.001,a=(r==null?void 0:r.abbrevThreshold)??null,s=(r==null?void 0:r.format)??"auto",c=(r==null?void 0:r.stars)??!1,f=(r==null?void 0:r.thresholds)??[.05,.01,.001];let l="";if(c&&(t<f[2]?l="***":t<f[1]?l="**":t<f[0]&&(l="*")),a!==null&&t<a)return`<${a}${l}`;if(s==="scientific"||s==="auto"&&t<i){const h=Math.floor(Math.log10(t));return`${(t/Math.pow(10,h)).toPrecision(o)}×10${Ig(h.toString())}${l}`}let u;return t>=.1?u=t.toFixed(o):t>=.01?u=t.toFixed(o+1):u=t.toFixed(o+2),`${u}${l}`}function Rc(t,e){var a,s,c,f;const{type:r,field:o,options:i}=e;switch(r){case"interval":{const l=(a=i==null?void 0:i.interval)!=null&&a.point?t.metadata[i.interval.point]:t.point,u=(s=i==null?void 0:i.interval)!=null&&s.lower?t.metadata[i.interval.lower]:t.lower,h=(c=i==null?void 0:i.interval)!=null&&c.upper?t.metadata[i.interval.upper]:t.upper;return bs(l,u,h,i)}case"custom":return i!=null&&i.events?ws(t,i):String(t.metadata[o]??"");case"pvalue":return Wc(t.metadata[o],i);case"numeric":return Qo(t.metadata[o],i);case"percent":return Qo(t.metadata[o],i);case"sparkline":case"icon":case"stars":case"img":case"range":return"";case"badge":{const l=t.metadata[o];return l==null?"":`  ${String(l)}  `}case"bar":{if(((f=i==null?void 0:i.bar)==null?void 0:f.showLabel)===!1)return"";const l=t.metadata[o];return l==null?"":l>=100?l.toFixed(0):l>=10?l.toFixed(1):l.toFixed(2)}case"text":default:return String(t.metadata[o]??"")}}function Rn(t,e){const r="⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻";let o=0;for(const i of t)r.includes(i)?o+=e*.3:"il1.,;:|!()[]{}' ".includes(i)?o+=e*.35:"×−".includes(i)?o+=e*.5:"mwMW@%".includes(i)?o+=e*.85:i>="0"&&i<="9"?o+=e*.6:o+=e*.55;return o}function zc(t){if(!t||t.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const e=t.filter(i=>i!=null&&!Number.isNaN(i)).sort((i,a)=>i-a);if(e.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const r=e.length,o=i=>{if(r===1)return e[0];const a=(r-1)*i,s=Math.floor(a),c=Math.ceil(a);return s===c?e[s]:e[s]+(a-s)*(e[c]-e[s])};return{min:e[0],q1:o(.25),median:o(.5),q3:o(.75),max:e[r-1]}}function Fg(t,e,r){if(!t||t.length===0||Number.isNaN(e)||Number.isNaN(r))return[];const o=r-e,i=e-1.5*o,a=r+1.5*o;return t.filter(s=>s!=null&&!Number.isNaN(s)&&(s<i||s>a))}function ma(t){const e=zc(t),r=Fg(t,e.q1,e.q3);return{...e,outliers:r}}function Pg(t){if(!t||t.length<2)return 1;const e=t.filter(g=>g!=null&&!Number.isNaN(g)).sort((g,p)=>g-p);if(e.length<2)return 1;const r=e.length,o=e.reduce((g,p)=>g+p,0)/r,i=e.reduce((g,p)=>g+(p-o)**2,0)/(r-1),a=Math.sqrt(i),s=Math.floor((r-1)*.25),c=Math.floor((r-1)*.75),f=e[s],u=e[c]-f,d=.9*Math.min(a,u/1.34)*Math.pow(r,-.2);return Math.max(d,.001)}function Lg(t){return Math.exp(-.5*t*t)/Math.sqrt(2*Math.PI)}function Ic(t,e,r=128){if(!t||t.length===0)return{x:[],y:[]};const o=t.filter(g=>g!=null&&!Number.isNaN(g));if(o.length===0)return{x:[],y:[]};const i=e??Pg(o),a=Math.min(...o),s=Math.max(...o),c=3*i,f=a-c,u=(s+c-f)/(r-1),h=[],d=[];for(let g=0;g<r;g++){const p=f+g*u;h.push(p);let y=0;for(const _ of o)y+=Lg((p-_)/i);y/=o.length*i,d.push(y)}return{x:h,y:d}}function Fc(t,e){if(t.y.length===0)return t;const r=Math.max(...t.y);if(r===0)return t;const o=t.y.map(i=>i/r*e);return{x:t.x,y:o}}function Dg(t,e){var l,u;const r=new Map,o=zn(t.theme.typography.fontSizeBase),i=t.theme.typography.headerFontScale??1.05,a=Math.round(o*i*100)/100,s=t.data.rows,c=(t.theme.spacing.cellPaddingX??10)*2,f=(t.theme.spacing.groupPadding??8)*2;for(const h of e){if(h.width!=="auto"&&h.width!==null&&h.width!==void 0)continue;let d=0;h.header&&(d=Math.max(d,Rn(h.header,a)));for(const y of s){if(((l=y.style)==null?void 0:l.type)==="header"||((u=y.style)==null?void 0:u.type)==="spacer")continue;const _=Rc(y,h);_&&(d=Math.max(d,Rn(_,o)))}const g=Zn.VISUAL_MIN[h.type]??Zn.MIN,p=Math.ceil(d+c+Yn.RENDERING_BUFFER);r.set(h.id,Math.min(Zn.MAX,Math.max(g,p)))}return Bg(t.columns,r,a,f,Yn.RENDERING_BUFFER),r}function Bg(t,e,r,o,i){function a(f){return f.isGroup?f.columns.flatMap(a):[f]}function s(f){const l=e.get(f.id);return l!==void 0?l:typeof f.width=="number"?f.width:Zn.MIN}function c(f){if(f.isGroup){for(const l of f.columns)c(l);if(f.header){const l=Rn(f.header,r)+o+i,u=a(f),h=u.reduce((d,g)=>d+s(g),0);if(l>h&&u.length>0){const d=Math.ceil((l-h)/u.length);for(const g of u)e.set(g.id,s(g)+d)}}}}for(const f of t)c(f)}function Pc(t,e,r){let o=r.filter(a=>a.groupId===t).length;const i=e.filter(a=>a.parentId===t);for(const a of i)o+=Pc(a.id,e,r);return o}function Lc(t){var f,l;const e=zn(t.theme.typography.fontSizeBase),r=(t.theme.spacing.cellPaddingX??10)*2;let o=0;const i=new Map,a=Array.isArray(t.data.groups)?t.data.groups:[];for(const u of a)i.set(u.id,u.depth);const s=u=>u?(i.get(u)??0)+1:0;t.data.labelHeader&&(o=Math.max(o,Rn(t.data.labelHeader,e)));for(const u of t.data.rows)if(u.label){const h=s(u.groupId),d=((f=u.style)==null?void 0:f.indent)??0,p=(h+d)*Fe.INDENT_PER_LEVEL;let y=Rn(u.label,e)+p;if((l=u.style)!=null&&l.badge){const _=String(u.style.badge),x=e*Mr.FONT_SCALE,W=Rn(_,x)+Mr.PADDING*2;y+=Mr.GAP+W}o=Math.max(o,y)}for(const u of a)if(u.label){const h=u.depth*Fe.INDENT_PER_LEVEL,d=Rn(u.label,e),p=`(${Pc(u.id,a,t.data.rows)})`,y=e*.75,_=Rn(p,y),x=h+Jr.CHEVRON_WIDTH+Jr.GAP+d+Jr.GAP+_+Jr.SAFETY_MARGIN;o=Math.max(o,x)}const c=Math.ceil(o+r+Yn.RENDERING_BUFFER);return Math.min(Zn.LABEL_MAX,Math.max(Zn.MIN,c))}function Ms(t,e){const r=e.get(t.id);return r!==void 0?r:typeof t.width=="number"?t.width:Sr.DEFAULT_COLUMN_WIDTH}function Gg(t,e,r=0){var Ae,pt,bt,ee,Ge;const o=t.theme,i=o.spacing.rowHeight,a=o.spacing.padding,s=o.spacing.columnGap??8,c=Array.isArray(t.columns)?t.columns:[],f=Bc(c,"left"),l=Bc(c,"right"),u=ya(f)||ya(l)||ya(c),h=u?2:1,d=o.spacing.cellPaddingY??4,y=(o.spacing.headerHeight/h+(u?d*2:0))*h,_=!!((Ae=t.labels)!=null&&Ae.title),x=!!((pt=t.labels)!=null&&pt.subtitle),C=!!((bt=t.labels)!=null&&bt.caption),W=!!((ee=t.labels)!=null&&ee.footnote),H=_?Er.TITLE_HEIGHT:0,M=x?Er.SUBTITLE_HEIGHT:0,k=H+M+(_||x?a:0),b=C?Er.CAPTION_HEIGHT:0,S=W?Er.FOOTNOTE_HEIGHT:0,P=b+S+(C||W?a:0),T=Dc(t),R=!!t.data.overall;let A=0;for(const xt of T){const pe=xt.type==="data"&&((Ge=xt.row.style)==null?void 0:Ge.type)==="spacer";A+=pe?i/2:i}R&&(A+=i*ad.OVERALL_ROW_HEIGHT_MULTIPLIER);const V=ks(c,"left"),Z=ks(c,"right"),ct=Es(c).filter(xt=>xt.position===void 0),gt=[...V,...Z,...ct];let L,it;if(e.columnWidths){L=new Map;for(const[xt,pe]of Object.entries(e.columnWidths))xt!=="__label__"&&L.set(xt,pe);it=e.columnWidths.__label__??Lc(t)}else L=Dg(t,gt),it=Lc(t);const $=it+V.reduce((xt,pe)=>xt+Ms(pe,L),0),ft=Z.reduce((xt,pe)=>xt+Ms(pe,L),0),G=ct.filter(xt=>xt.type!=="forest").reduce((xt,pe)=>xt+Ms(pe,L),0),ot=e.width??Sr.DEFAULT_WIDTH,nt=gt.some(xt=>xt.type==="forest")||t.data.includeForest,Ht=$+ft+G;let kt;if(!nt)kt=0;else if(typeof e.forestWidth=="number")kt=e.forestWidth;else if(typeof t.layout.plotWidth=="number")kt=t.layout.plotWidth;else{const xt=ot-Ht-s*2-a*2;kt=Math.max(xt,Sr.MIN_FOREST_WIDTH)}const ut=a*2+Ht+kt+s*2,Gt=Math.max(e.width??ot,ut);nt&&Gt>ut&&typeof e.forestWidth!="number"&&typeof t.layout.plotWidth!="number"&&(kt=Gt-Ht-a*2-s*2);const ge=(o.spacing.axisGap??12)+Sr.AXIS_HEIGHT+Sr.AXIS_LABEL_HEIGHT,Yt=k+a+y+A+ge+P+Sr.BOTTOM_MARGIN;return{totalWidth:Gt,totalHeight:e.height??Yt,tableWidth:$+ft,forestWidth:kt,headerHeight:y,rowHeight:i,plotHeight:A,axisHeight:Sr.AXIS_HEIGHT,nullValue:r,summaryYPosition:A-i,showOverallSummary:R,headerTextHeight:k,footerTextHeight:P,titleY:a+Er.TITLE_HEIGHT-8,subtitleY:a+H+Er.SUBTITLE_HEIGHT-4,mainY:k+a,footerY:k+a+y+A+ge+8,autoWidths:L,labelWidth:it}}function Dc(t){var h;const e=t.data.rows,r=Array.isArray(t.data.groups)?t.data.groups:[];if(r.length===0)return e.map(d=>({type:"data",row:d,depth:0}));const o=new Map;for(const d of r)o.set(d.id,d);const i=new Map;for(const d of e){const g=d.groupId??null;i.has(g)||i.set(g,[]),i.get(g).push(d)}const a=new Set;for(const d of i.keys()){if(!d)continue;let g=d;for(;g;)a.add(g),g=(h=o.get(g))==null?void 0:h.parentId}function s(d){return r.filter(g=>(g.parentId??null)===d&&a.has(g.id))}function c(d){if(!d)return 0;const g=o.get(d);return g?g.depth+1:0}function f(d){var p;let g=((p=i.get(d))==null?void 0:p.length)??0;for(const y of s(d))g+=f(y.id);return g}const l=[];function u(d){if(d){const p=o.get(d);if(!p)return;const y=f(d);l.push({type:"group_header",groupId:p.id,label:p.label,depth:p.depth,rowCount:y})}for(const p of s(d))u(p.id);const g=i.get(d)??[];for(const p of g)l.push({type:"data",row:p,depth:c(p.groupId)})}return u(null),l}function Ss(t){const e=[];for(const r of t)r.isGroup?e.push(...Ss(r.columns)):e.push(r);return e}function Es(t){const e=[];for(const r of t)r.isGroup?e.push(...Ss(r.columns)):e.push(r);return e}function ks(t,e){if(e===void 0)return Es(t);const r=[];for(const o of t)o.position===e&&(o.isGroup?r.push(...Ss(o.columns)):r.push(o));return r}function Bc(t,e){return t.filter(r=>r.position===e)}function ya(t){return t.some(e=>e.isGroup)}function zn(t){let e;return t.endsWith("rem")?e=parseFloat(t)*Er.REM_BASE:t.endsWith("px")?e=parseFloat(t):t.endsWith("pt")?e=parseFloat(t)*Er.PT_TO_PX:e=Er.DEFAULT_FONT_SIZE,Math.round(e*100)/100}function _a(t,e,r){return r==="right"?{textX:t+e-Fe.TEXT_PADDING,anchor:"end"}:r==="center"?{textX:t+e/2,anchor:"middle"}:{textX:t+Fe.TEXT_PADDING,anchor:"start"}}function on(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Gc(t,e,r,o=0){const i=e-o*2;if(Rn(t,r)<=i)return t;const s="…",c=r*.55;let f=0,l=t.length;for(;f<l;){const u=Math.ceil((f+l)/2),h=t.slice(0,u);Rn(h,r)+c<=i?f=u:l=u-1}return f===0?s:t.slice(0,f)+s}function Vg(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function Fi(t,e){const[r,o]=t,[i,a]=e,s=(a-i)/(o-r),c=f=>i+(f-r)*s;return c.domain=()=>t,c.range=()=>e,c.ticks=f=>{const l=(o-r)/(f-1),u=[];for(let h=0;h<f;h++)u.push(r+l*h);return u},c}function Pi(t,e){const[r,o]=t.map(u=>Math.max(u,.001)),[i,a]=e,s=Math.log10(r),c=Math.log10(o),f=(a-i)/(c-s),l=u=>{const h=Math.log10(Math.max(u,.001));return i+(h-s)*f};return l.domain=()=>[r,o],l.range=()=>e,l.ticks=u=>{const h=[],d=Math.floor(Math.log10(r)),g=Math.ceil(Math.log10(o));for(let p=d;p<=g;p++){const y=Math.pow(10,p);for(const _ of[1,2,5]){const x=y*_;x>=r&&x<=o&&h.push(x)}}return h.length>0?h:[r,o]},l}function Og(t,e,r,o){const i=r.scale==="log",a=Nn,s=Math.max(e-Nn,a+50);if(o!=null&&o.xDomain){const h=o.xDomain,d=o.clipBounds??h,g=Ol(d,t.theme.axis,r.scale,r.nullValue);return i?{scale:Pi([Math.max(h[0],.01),Math.max(h[1],.02)],[a,s]),clipBounds:d,ticks:g}:{scale:Fi(h,[a,s]),clipBounds:d,ticks:g}}const c=Vl({rows:t.data.rows,config:t.theme.axis,scale:r.scale,nullValue:r.nullValue,forestWidth:e,pointSize:t.theme.shapes.pointSize,effects:r.effects,pointCol:r.pointCol,lowerCol:r.lowerCol,upperCol:r.upperCol}),{plotRegion:f,axisLimits:l,ticks:u}=c;return i?{scale:Pi([Math.max(f[0],.01),Math.max(f[1],.02)],[a,s]),clipBounds:l,ticks:u}:{scale:Fi(f,[a,s]),clipBounds:l,ticks:u}}function $g(t,e,r){var a,s;const o=[],i=r.spacing.padding;if((a=t.labels)!=null&&a.title){const c=zn(r.typography.fontSizeLg);o.push(`<text x="${i}" y="${e.titleY}"
      font-family="${r.typography.fontFamily}"
      font-size="${c}px"
      font-weight="${r.typography.fontWeightBold}"
      fill="${r.colors.foreground}">${on(t.labels.title)}</text>`)}if((s=t.labels)!=null&&s.subtitle){const c=zn(r.typography.fontSizeBase);o.push(`<text x="${i}" y="${e.subtitleY}"
      font-family="${r.typography.fontFamily}"
      font-size="${c}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.secondary}">${on(t.labels.subtitle)}</text>`)}return o.join(`
`)}function jg(t,e,r){var c,f,l,u;const o=[],i=r.spacing.padding;let a=e.footerY;if(!!((c=t.labels)!=null&&c.caption)||!!((f=t.labels)!=null&&f.footnote)){const h=e.footerY-8;o.push(`<line x1="${i}" x2="${e.totalWidth-i}"
      y1="${h}" y2="${h}"
      stroke="${r.colors.border}" stroke-width="1"/>`)}if((l=t.labels)!=null&&l.caption){const h=zn(r.typography.fontSizeSm);o.push(`<text x="${i}" y="${a}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.secondary}">${on(t.labels.caption)}</text>`),a+=Er.CAPTION_HEIGHT}if((u=t.labels)!=null&&u.footnote){const h=zn(r.typography.fontSizeSm);o.push(`<text x="${i}" y="${a}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightNormal}"
      font-style="italic"
      fill="${r.colors.muted}">${on(t.labels.footnote)}</text>`)}return o.join(`
`)}function qg(t,e,r,o,i,a,s,c){const f=[],l=e+1,u=c.groupHeaders;let h,d,g,p,y;if(l===1?(h=zn((u==null?void 0:u.level1FontSize)??c.typography.fontSizeBase),d=(u==null?void 0:u.level1FontWeight)??c.typography.fontWeightBold,g=(u==null?void 0:u.level1Italic)??!1,p=(u==null?void 0:u.level1Background)??null,y=(u==null?void 0:u.level1BorderBottom)??!1):l===2?(h=zn((u==null?void 0:u.level2FontSize)??c.typography.fontSizeBase),d=(u==null?void 0:u.level2FontWeight)??c.typography.fontWeightMedium,g=(u==null?void 0:u.level2Italic)??!0,p=(u==null?void 0:u.level2Background)??null,y=(u==null?void 0:u.level2BorderBottom)??!1):(h=zn((u==null?void 0:u.level3FontSize)??c.typography.fontSizeBase),d=(u==null?void 0:u.level3FontWeight)??c.typography.fontWeightNormal,g=(u==null?void 0:u.level3Italic)??!1,p=(u==null?void 0:u.level3Background)??null,y=(u==null?void 0:u.level3BorderBottom)??!1),!p){const H=c.colors.primary,M=l===1?.15:l===2?.1:.06,k=H.replace("#",""),b=parseInt(k.substring(0,2),16),S=parseInt(k.substring(2,4),16),P=parseInt(k.substring(4,6),16);p=`rgba(${b}, ${S}, ${P}, ${M})`}const _=i+a/2,x=e*((u==null?void 0:u.indentPerLevel)??Fe.INDENT_PER_LEVEL);f.push(`<rect x="${o}" y="${i}"
    width="${s}" height="${a}"
    fill="${p}"/>`),y&&f.push(`<line x1="${o}" x2="${o+s}" y1="${i+a}" y2="${i+a}"
      stroke="${c.colors.border}" stroke-width="1" opacity="0.5"/>`);const C=g?' font-style="italic"':"",W=o+Fe.TEXT_PADDING+x;if(f.push(`<text class="cell-text" x="${W}" y="${_}"
    font-family="${c.typography.fontFamily}"
    font-size="${h}px"
    font-weight="${d}"${C}
    fill="${c.colors.foreground}">${on(t)}</text>`),r>0){const H=Rn(t,h),M=W+H+6,k=zn(c.typography.fontSizeSm??"0.75rem");f.push(`<text class="cell-text" x="${M}" y="${_}"
      font-family="${c.typography.fontFamily}"
      font-size="${k}px"
      font-weight="${c.typography.fontWeightNormal}"
      fill="${c.colors.muted}">(${r})</text>`)}return f.join(`
`)}function Xg(t,e){const r=new Map;for(const o of e)if(o.type==="bar"){let i=0;for(const a of t){const s=a.metadata[o.field];typeof s=="number"&&s>i&&(i=s)}r.set(o.field,i>0?i:1)}return r}function Ug(t,e){var o,i,a,s,c,f,l,u,h,d,g,p,y,_,x,C,W,H,M;if(e.type==="interval"){const k=(i=(o=e.options)==null?void 0:o.interval)!=null&&i.point?t.metadata[e.options.interval.point]:t.point,b=(s=(a=e.options)==null?void 0:a.interval)!=null&&s.lower?t.metadata[e.options.interval.lower]:t.lower,S=(f=(c=e.options)==null?void 0:c.interval)!=null&&f.upper?t.metadata[e.options.interval.upper]:t.upper;return bs(k,b,S,e.options)}if(e.type==="numeric"){const k=t.metadata[e.field];return typeof k=="number"?Qo(k,e.options):((l=e.options)==null?void 0:l.naText)??""}if(e.type==="custom"&&((u=e.options)!=null&&u.events))return ws(t,e.options);if(e.type==="pvalue"){const k=t.metadata[e.field];return typeof k!="number"?((h=e.options)==null?void 0:h.naText)??"":Wc(k,e.options)}if(e.type==="icon"){const k=t.metadata[e.field];if(k==null)return"";const b=String(k),S=(g=(d=e.options)==null?void 0:d.icon)==null?void 0:g.mapping;return S&&b in S?S[b]:b}if(e.type==="badge"){const k=t.metadata[e.field];return k!=null?String(k):""}if(e.type==="stars"){const k=t.metadata[e.field];if(typeof k!="number")return"";const b=((y=(p=e.options)==null?void 0:p.stars)==null?void 0:y.maxStars)??5,S=Math.max(0,Math.min(b,k)),P=Math.floor(S),T=b-P;return"★".repeat(P)+"☆".repeat(T)}if(e.type==="img")return((x=(_=e.options)==null?void 0:_.img)==null?void 0:x.fallback)??"[IMG]";if(e.type==="reference"){const k=t.metadata[e.field];if(k==null)return"";const b=String(k),S=((W=(C=e.options)==null?void 0:C.reference)==null?void 0:W.maxChars)??30;return b.length<=S?b:b.substring(0,S)+"..."}if(e.type==="range"){const k=(H=e.options)==null?void 0:H.range;if(!k)return"";const b=t.metadata[k.minField],S=t.metadata[k.maxField],P=k.separator??" – ",T=k.decimals,R=A=>typeof A!="number"?"":T==null?Number.isInteger(A)?String(A):A.toFixed(1):A.toFixed(T);return b===null&&S===null?"":b===null?R(S):S===null?R(b):`${R(b)}${P}${R(S)}`}const r=t.metadata[e.field];return r!=null?String(r):((M=e.options)==null?void 0:M.naText)??""}function Yg(t,e,r,o,i){const a=t.filter(u=>Number.isFinite(u));if(a.length===0)return"";if(a.length===1){const u=e+o/2,h=r+i/2;return`M${u.toFixed(1)},${h.toFixed(1)}`}const s=Math.min(...a),f=Math.max(...a)-s||1;return`M${a.map((u,h)=>{const d=e+h/(a.length-1)*o,g=r+i-(u-s)/f*i;return`${d.toFixed(1)},${g.toFixed(1)}`}).join("L")}`}function Zg(t,e,r,o,i,a=[],s,c=0,f=1/0,l,u=!1){var b;let h;if(a.length===0){const S=!u||t.point!=null&&t.point>0?t.point:null,P=!u||t.lower!=null&&t.lower>0?t.lower:null,T=!u||t.upper!=null&&t.upper>0?t.upper:null;h=[{point:S,lower:P,upper:T,color:null,shape:null,opacity:null}]}else h=a.map(S=>({point:Un(t.metadata,t.point,S.pointCol,"point",u),lower:Un(t.metadata,t.lower,S.lowerCol,"lower",u),upper:Un(t.metadata,t.upper,S.upperCol,"upper",u),color:S.color??null,shape:S.shape??null,opacity:S.opacity??null}));const d=h.filter(S=>S.point!=null&&!Number.isNaN(S.point)&&S.lower!=null&&!Number.isNaN(S.lower)&&S.upper!=null&&!Number.isNaN(S.upper));if(d.length===0)return"";const g=o.shapes.pointSize,p=o.shapes.lineWidth,y=o.colors.intervalLine,_=((b=t.style)==null?void 0:b.type)==="summary",C=o.shapes.summaryHeight/2;function W(S){var T;if(S&&((T=t.markerStyle)==null?void 0:T.size)!=null)return g*t.markerStyle.size;const P=s?t.metadata[s]:void 0;if(P){const R=.5+Math.sqrt(P/100)*1.5;return Math.min(Math.max(g*R,3),g*2.5)}return g}function H(S,P){const T=P===0,R=t.markerStyle,A=o.shapes.effectColors,V=o.shapes.markerShapes,Z=["square","circle","diamond","triangle"];let ct;T&&(R!=null&&R.color)?ct=R.color:S.color?ct=S.color:A&&A.length>0?ct=A[P%A.length]:ct=o.colors.interval??o.colors.primary??"#2563eb";let gt;T&&(R!=null&&R.shape)?gt=R.shape:S.shape?gt=S.shape:V&&V.length>0?gt=V[P%V.length]:gt=Z[P%Z.length];let L;return T&&(R==null?void 0:R.opacity)!=null?L=R.opacity:S.opacity!=null?L=S.opacity:L=1,{color:ct,shape:gt,opacity:L}}function M(S,P,T,R){const{color:A,shape:V,opacity:Z}=R,ct=Z<1?` fill-opacity="${Z}"`:"";switch(V){case"circle":return`<circle cx="${S}" cy="${P}" r="${T}" fill="${A}"${ct}/>`;case"diamond":return`<polygon points="${[`${S},${P-T}`,`${S+T},${P}`,`${S},${P+T}`,`${S-T},${P}`].join(" ")}" fill="${A}"${ct}/>`;case"triangle":return`<polygon points="${[`${S},${P-T}`,`${S+T},${P+T}`,`${S-T},${P+T}`].join(" ")}" fill="${A}"${ct}/>`;default:return`<rect x="${S-T}" y="${P-T}" width="${T*2}" height="${T*2}" fill="${A}"${ct}/>`}}const k=[];return d.forEach((S,P)=>{const T=e+jl(P,d.length),R=r(S.lower),A=r(S.upper),V=r(S.point),Z=H(S,P),ct=W(P===0),gt=y;if(_){const L=Z.opacity<1?` fill-opacity="${Z.opacity}"`:"",it=[`${R},${T}`,`${V},${T-C}`,`${A},${T}`,`${V},${T+C}`].join(" ");k.push(`
        <g class="interval effect-${P} summary">
          <polygon points="${it}"
            fill="${Z.color}"${L} stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else{const L=c+Nn,it=c+f-Nn,$=l?S.lower<l[0]:R<L,ft=l?S.upper>l[1]:A>it;let G,ot;if(l){const ge=Math.max(l[0],Math.min(l[1],S.lower)),Yt=Math.max(l[0],Math.min(l[1],S.upper));G=r(ge),ot=r(Yt)}else G=Math.max(L,Math.min(it,R)),ot=Math.max(L,Math.min(it,A));const tt=Bl(o),nt=tt.height/2,Ht=l?r(l[0]):L,kt=l?r(l[1]):it;let ut="";if($){const ge=tt.opacity<1?` fill-opacity="${tt.opacity}"`:"";ut=`<path d="${ia("left",Ht,T,tt)}" fill="${tt.color}"${ge}/>`}else ut=`<line x1="${G}" x2="${G}" y1="${T-nt}" y2="${T+nt}" stroke="${gt}" stroke-width="${p}"/>`;let Gt="";if(ft){const ge=tt.opacity<1?` fill-opacity="${tt.opacity}"`:"";Gt=`<path d="${ia("right",kt,T,tt)}" fill="${tt.color}"${ge}/>`}else Gt=`<line x1="${ot}" x2="${ot}" y1="${T-nt}" y2="${T+nt}" stroke="${gt}" stroke-width="${p}"/>`;const Be=l?r(Math.max(l[0],Math.min(l[1],S.point))):Math.max(L,Math.min(it,V));k.push(`
        <g class="interval effect-${P}">
          <line x1="${G}" x2="${ot}" y1="${T}" y2="${T}"
            stroke="${gt}" stroke-width="${p}"/>
          ${ut}
          ${Gt}
          ${M(Be,T,ct,Z)}
        </g>`)}}),k.join("")}function Kg(t,e,r,o,i,a,s,c){const l=c.shapes.summaryHeight/2,[u,h]=i.domain().map(M=>i(M)),d=Math.min(u,h),g=Math.max(u,h),p=i(e),y=i(t),_=i(r),x=a+Math.max(d,Math.min(g,p)),C=a+Math.max(d,Math.min(g,y)),W=a+Math.max(d,Math.min(g,_));return`<polygon points="${[`${x},${o}`,`${C},${o-l}`,`${W},${o}`,`${C},${o+l}`].join(" ")}"
    fill="${c.colors.summaryFill}"
    stroke="${c.colors.summaryBorder}"
    stroke-width="1"/>`}function Qg(t,e,r,o,i,a,s,c){const f=[],l=a.effects,u=l.length;if(!l.some(x=>{const C=t.metadata[x.value];return C!=null&&!Number.isNaN(C)}))return"";const d=r*.7,g=u>1?2:0,p=(d-g*(u-1))/u,y=Math.max(4,p),_=c.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"];return l.forEach((x,C)=>{const W=t.metadata[x.value];if(W==null||Number.isNaN(W))return;const H=e-d/2+C*(y+g),M=o+s(Math.min(0,W)),k=Math.abs(s(W)-s(0)),b=x.color??_[C%_.length],S=x.opacity??.85;f.push(`<rect
      x="${M}" y="${H}"
      width="${Math.max(1,k)}" height="${y}"
      fill="${b}" fill-opacity="${S}" rx="2"
      class="viz-bar-segment"/>`)}),f.join(`
`)}function Jg(t,e,r,o,i,a,s,c){const f=[],l=a.effects,u=l.length,h=l.map(C=>{if(C.data){const W=t.metadata[C.data];return!W||!Array.isArray(W)||W.length===0?null:ma(W)}if(C.min&&C.q1&&C.median&&C.q3&&C.max){const W=t.metadata[C.min],H=t.metadata[C.q1],M=t.metadata[C.median],k=t.metadata[C.q3],b=t.metadata[C.max];if([W,H,M,k,b].some(P=>P==null||Number.isNaN(P)))return null;let S=[];if(C.outliers){const P=t.metadata[C.outliers];P&&Array.isArray(P)&&(S=P)}return{min:W,q1:H,median:M,q3:k,max:b,outliers:S}}return null});if(!h.some(C=>C!==null))return"";const g=r*.7,p=u>1?2:0,y=Math.max(8,(g-(u-1)*p)/u),_=c.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],x=c.colors.foreground??"#1a1a1a";return l.forEach((C,W)=>{const H=h[W];if(!H)return;const M=e-g/2+W*(y+p),k=M+y/2,b=C.color??_[W%_.length],S=C.fillOpacity??.7;f.push(`<line
      x1="${o+s(H.min)}" x2="${o+s(H.q1)}"
      y1="${k}" y2="${k}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(H.min)}" x2="${o+s(H.min)}"
      y1="${k-y/4}" y2="${k+y/4}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(H.q3)}" x2="${o+s(H.max)}"
      y1="${k}" y2="${k}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(H.max)}" x2="${o+s(H.max)}"
      y1="${k-y/4}" y2="${k+y/4}"
      stroke="${x}" stroke-width="1"/>`);const P=Math.max(2,s(H.q3)-s(H.q1));if(f.push(`<rect
      x="${o+s(H.q1)}" y="${M}"
      width="${P}" height="${y}"
      fill="${b}" fill-opacity="${S}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(H.median)}" x2="${o+s(H.median)}"
      y1="${M}" y2="${M+y}"
      stroke="${x}" stroke-width="2"/>`),a.showOutliers!==!1&&H.outliers.length>0)for(const T of H.outliers)f.push(`<circle
          cx="${o+s(T)}" cy="${k}"
          r="2.5"
          fill="none" stroke="${b}" stroke-width="1.5"/>`)}),f.join(`
`)}function tp(t,e,r,o,i,a,s,c){const f=[],l=a.effects,u=l.length,h=l.map(H=>{const M=t.metadata[H.data];return!M||!Array.isArray(M)||M.length<2?null:Ic(M,a.bandwidth)}),d=l.map(H=>{const M=t.metadata[H.data];if(!M||!Array.isArray(M)||M.length<2)return null;const k=M.filter(P=>P!=null&&!Number.isNaN(P)).sort((P,T)=>P-T);if(k.length===0)return null;const b=k.length,S=P=>{if(b===1)return k[0];const T=(b-1)*P,R=Math.floor(T),A=Math.ceil(T);return R===A?k[R]:k[R]+(T-R)*(k[A]-k[R])};return{q1:S(.25),median:S(.5),q3:S(.75)}});if(!h.some(H=>H!==null))return"";const p=r*.8,y=u>1?2:0,_=Math.max(10,(p-(u-1)*y)/u),x=_/2,C=c.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],W=c.colors.foreground??"#1a1a1a";return l.forEach((H,M)=>{const k=h[M],b=d[M];if(!k||k.x.length<2)return;const S=e-p/2+_/2+M*(_+y),P=H.color??C[M%C.length],T=H.fillOpacity??.5,R=Fc(k,x),A=[];for(let V=0;V<R.x.length;V++){const Z=o+s(R.x[V]),ct=S-R.y[V];A.push(V===0?`M ${Z} ${ct}`:`L ${Z} ${ct}`)}for(let V=R.x.length-1;V>=0;V--){const Z=o+s(R.x[V]),ct=S+R.y[V];A.push(`L ${Z} ${ct}`)}if(A.push("Z"),f.push(`<path
      d="${A.join(" ")}"
      fill="${P}" fill-opacity="${T}"
      stroke="${W}" stroke-width="0.5"/>`),a.showMedian!==!1&&b){const V=o+s(b.median);f.push(`<line
        x1="${V}" x2="${V}"
        y1="${S-x*.6}" y2="${S+x*.6}"
        stroke="${W}" stroke-width="2"/>`)}if(a.showQuartiles&&b){const V=o+s(b.q1),Z=o+s(b.q3);f.push(`<line
        x1="${V}" x2="${V}"
        y1="${S-x*.4}" y2="${S+x*.4}"
        stroke="${W}" stroke-width="1" stroke-dasharray="2,2"/>`),f.push(`<line
        x1="${Z}" x2="${Z}"
        y1="${S-x*.4}" y2="${S+x*.4}"
        stroke="${W}" stroke-width="1" stroke-dasharray="2,2"/>`)}}),f.join(`
`)}function ep(t,e,r){var c,f;const o=e.scale==="log",i=Nn;let a=(c=e.axisRange)==null?void 0:c[0],s=(f=e.axisRange)==null?void 0:f[1];if(a==null||s==null){const l=[];for(const u of t)for(const h of e.effects){const d=u.metadata[h.value];d!=null&&!Number.isNaN(d)&&l.push(d)}l.length>0?(a=a??Math.min(0,...l),s=s??Math.max(...l)*1.1):(a=a??0,s=s??100)}return o?Pi([Math.max(.01,a),s],[i,r-i]):Fi([a,s],[i,r-i])}function np(t,e,r){var c,f;const o=e.scale==="log",i=Nn;let a=(c=e.axisRange)==null?void 0:c[0],s=(f=e.axisRange)==null?void 0:f[1];if(a==null||s==null){const l=[];for(const u of t)for(const h of e.effects)if(h.data){const d=u.metadata[h.data];if(d&&Array.isArray(d)){const g=ma(d);l.push(g.min,g.max),e.showOutliers!==!1&&l.push(...g.outliers)}}else if(h.min&&h.max){const d=u.metadata[h.min],g=u.metadata[h.max];d!=null&&!Number.isNaN(d)&&l.push(d),g!=null&&!Number.isNaN(g)&&l.push(g)}if(l.length>0){const u=Math.min(...l),h=Math.max(...l),d=h-u;a=a??u-d*.05,s=s??h+d*.05}else a=a??0,s=s??100}return o?Pi([Math.max(.01,a),s],[i,r-i]):Fi([a,s],[i,r-i])}function rp(t,e,r){var c,f;const o=e.scale==="log",i=Nn;let a=(c=e.axisRange)==null?void 0:c[0],s=(f=e.axisRange)==null?void 0:f[1];if(a==null||s==null){const l=[];for(const u of t)for(const h of e.effects){const d=u.metadata[h.data];d&&Array.isArray(d)&&l.push(...d.filter(g=>g!=null&&!Number.isNaN(g)))}if(l.length>0){a=a??Math.min(...l),s=s??Math.max(...l);const u=(s??0)-(a??0);a=(a??0)-u*.1,s=(s??0)+u*.1}else a=a??0,s=s??100}return o?Pi([Math.max(.01,a),s],[i,r-i]):Fi([a,s],[i,r-i])}function Cs(t,e,r,o,i,a,s){const c=[],f=zn(r.typography.fontSizeSm),l=rs.EDGE_THRESHOLD,u=_=>_<l?"start":_>a-l?"end":"middle",h=_=>_<l?2:_>a-l?-2:0;c.push(`<line x1="${i}" x2="${i+a}"
    y1="0" y2="0" stroke="${r.colors.border}" stroke-width="1"/>`);const d=t.domain(),g=5,p=[],y=d[1]-d[0];for(let _=0;_<=g;_++)p.push(d[0]+y*_/g);for(const _ of p){const x=t(_),C=i+x,W=u(x),H=h(x),M=Qo(_);c.push(`<line x1="${C}" x2="${C}" y1="0" y2="4" stroke="${r.colors.border}" stroke-width="1"/>`),c.push(`<text x="${C+H}" y="14"
      text-anchor="${W}"
      font-family="${r.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.foreground}">${M}</text>`)}return o&&c.push(`<text x="${i+a/2}" y="28"
      text-anchor="middle"
      font-family="${r.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${r.typography.fontWeightMedium}"
      fill="${r.colors.foreground}">${on(o)}</text>`),c.join(`
`)}function op(t,e,r,o,i,a,s=1,c){const f=[],l=typeof r.axis.tickCount=="number"?r.axis.tickCount:Fe.DEFAULT_TICK_COUNT,u=sp(t,l,r,s,a,c),h=zn(r.typography.fontSizeSm),d=rs.EDGE_THRESHOLD,g=y=>y<d?"start":y>a-d?"end":"middle",p=y=>y<d?2:y>a-d?-2:0;f.push(`<line x1="${i}" x2="${i+a}"
    y1="0" y2="0" stroke="${r.colors.border}" stroke-width="1"/>`);for(const y of u){const _=t(y),x=i+_,C=g(_),W=p(_);f.push(`<line x1="${x}" x2="${x}" y1="0" y2="4"
      stroke="${r.colors.border}" stroke-width="1"/>`),f.push(`<text x="${x+W}" y="16" text-anchor="${C}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.secondary}">${Vg(y)}</text>`)}return o&&f.push(`<text x="${i+a/2}" y="28"
      text-anchor="middle"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightMedium}"
      fill="${r.colors.secondary}">${on(o)}</text>`),`<g transform="translate(0, ${e.mainY+e.headerHeight+e.plotHeight})">${f.join(`
`)}</g>`}function ip(t,e,r,o,i,a,s,c,f,l){const u=[],h=zn(a.typography.fontSizeBase),d=a.typography.headerFontScale??1.05,g=Math.round(h*d*100)/100,p=a.typography.fontWeightBold,y=a.typography.fontWeightBold,_=ya(t),x=(C,W)=>C+W/2;if(_){const C=i/2,W=i/2;let H=r;u.push(`<text class="cell-text" x="${H+Fe.TEXT_PADDING}" y="${x(o,i)}"
      font-family="${a.typography.fontFamily}"
      font-size="${g}px"
      font-weight="${p}"
      fill="${a.colors.foreground}">${on(s)}</text>`),H+=c;const M=[];for(const k of t)if(k.isGroup){const b=k.columns.reduce((P,T)=>T.isGroup?P+T.columns.reduce((R,A)=>R+l(A),0):P+l(T),0),S=H+b/2;u.push(`<text class="cell-text" x="${S}" y="${x(o,C)}"
          font-family="${a.typography.fontFamily}"
          font-size="${g}px"
          font-weight="${y}"
          text-anchor="middle"
          fill="${a.colors.foreground}">${on(k.header)}</text>`),M.push({x1:H,x2:H+b}),H+=b}else{const b=l(k),S=k.headerAlign??k.align,{textX:P,anchor:T}=_a(H,b,S),R=Gc(k.header,b,g,Fe.TEXT_PADDING);u.push(`<text class="cell-text" x="${P}" y="${x(o,i)}"
          font-family="${a.typography.fontFamily}"
          font-size="${g}px"
          font-weight="${p}"
          text-anchor="${T}"
          fill="${a.colors.foreground}">${on(R)}</text>`),H+=b}for(const k of M)u.push(`<line x1="${k.x1}" x2="${k.x2}"
        y1="${o+C}" y2="${o+C}"
        stroke="${a.colors.border}" stroke-width="1"/>`);H=r+c;for(const k of t)if(k.isGroup){for(const b of k.columns)if(!b.isGroup){const S=l(b),P=b.headerAlign??b.align,{textX:T,anchor:R}=_a(H,S,P);u.push(`<text class="cell-text" x="${T}" y="${x(o+C,W)}"
              font-family="${a.typography.fontFamily}"
              font-size="${g}px"
              font-weight="${p}"
              text-anchor="${R}"
              fill="${a.colors.foreground}">${on(b.header)}</text>`),H+=S}}else H+=l(k)}else{let C=r;u.push(`<text class="cell-text" x="${C+Fe.TEXT_PADDING}" y="${x(o,i)}"
      font-family="${a.typography.fontFamily}"
      font-size="${g}px"
      font-weight="${p}"
      fill="${a.colors.foreground}">${on(s)}</text>`),C+=c;for(const W of e){const H=l(W),M=W.headerAlign??W.align,{textX:k,anchor:b}=_a(C,H,M),S=Gc(W.header,H,g,Fe.TEXT_PADDING);u.push(`<text class="cell-text" x="${k}" y="${x(o,i)}"
        font-family="${a.typography.fontFamily}"
        font-size="${g}px"
        font-weight="${p}"
        text-anchor="${b}"
        fill="${a.colors.foreground}">${on(S)}</text>`),C+=H}}return u.join(`
`)}function ap(t,e,r,o,i,a,s,c,f,l,u,h){var W,H,M,k,b,S,P,T,R,A,V,Z,ct,gt,L,it,$,ft,G,ot,tt,nt,Ht,kt,ut,Gt,Be,ge,Yt;const d=[],g=zn(a.typography.fontSizeBase),p=o+i/2,y=c*Fe.INDENT_PER_LEVEL+(((W=t.style)==null?void 0:W.indent)??0)*Fe.INDENT_PER_LEVEL,_=(H=t.style)!=null&&H.bold||(M=t.style)!=null&&M.emphasis?a.typography.fontWeightBold:a.typography.fontWeightNormal,x=(k=t.style)!=null&&k.italic?"italic":"normal";let C=a.colors.foreground;if((b=t.style)!=null&&b.color?C=t.style.color:(S=t.style)!=null&&S.muted?C=a.colors.muted:(P=t.style)!=null&&P.accent&&(C=a.colors.accent),d.push(`<text class="cell-text" x="${r+Fe.TEXT_PADDING+y}" y="${p}"
    font-family="${a.typography.fontFamily}"
    font-size="${g}px"
    font-weight="${_}"
    font-style="${x}"
    fill="${C}">${on(t.label)}</text>`),(T=t.style)!=null&&T.badge){const Ae=String(t.style.badge),pt=g*Mr.FONT_SCALE,bt=pt+Mr.PADDING*2,ee=Rn(t.label,g),Ge=r+Fe.TEXT_PADDING+y+ee+Mr.GAP,pe=Rn(Ae,pt)+Mr.PADDING*2,Lt=o+(i-bt)/2;d.push(`<rect x="${Ge}" y="${Lt}" width="${pe}" height="${bt}"
      rx="3" fill="${a.colors.primary}" opacity="0.15"/>`),d.push(`<text class="cell-text" x="${Ge+pe/2}" y="${Lt+bt/2}"
      text-anchor="middle"
      font-family="${a.typography.fontFamily}"
      font-size="${pt}px"
      font-weight="${a.typography.fontWeightBold}"
      fill="${a.colors.primary}">${on(Ae)}</text>`)}for(let Ae=0;Ae<e.length;Ae++){const pt=e[Ae],bt=h[Ae],ee=u(pt);if(pt.type==="forest"||pt.type==="viz_bar"||pt.type==="viz_boxplot"||pt.type==="viz_violin")continue;const Ge=Ug(t,pt),{textX:xt,anchor:pe}=_a(bt,ee,pt.align);if(pt.type==="bar"&&typeof t.metadata[pt.field]=="number"){const Lt=t.metadata[pt.field],Dt=f.get(pt.field),Ue=((A=(R=pt.options)==null?void 0:R.bar)==null?void 0:A.maxValue)??Dt??100,qe=((Z=(V=pt.options)==null?void 0:V.bar)==null?void 0:Z.color)??a.colors.primary,Me=a.shapes.pointSize*2,sn=ee-Fe.TEXT_PADDING*2-50,Xt=Math.min(Lt/Ue*sn,sn),At=t.style,We=At!=null&&At.bold||At!=null&&At.emphasis?a.typography.fontWeightBold:a.typography.fontWeightNormal;d.push(`<rect x="${bt+Fe.TEXT_PADDING}" y="${o+i/2-Me/2}"
        width="${Math.max(0,Xt)}" height="${Me}"
        fill="${qe}" opacity="0.7" rx="2"/>`),d.push(`<text class="cell-text" x="${bt+ee-Fe.TEXT_PADDING}" y="${p}"
        font-family="${a.typography.fontFamily}"
        font-size="${g}px"
        font-weight="${We}"
        text-anchor="end"
        fill="${a.colors.foreground}">${Qo(Lt)}</text>`)}else if(pt.type==="sparkline"&&Array.isArray(t.metadata[pt.field])){let Lt=t.metadata[pt.field];Array.isArray(Lt[0])&&(Lt=Lt[0]);const Dt=((gt=(ct=pt.options)==null?void 0:ct.sparkline)==null?void 0:gt.height)??16,Ue=((it=(L=pt.options)==null?void 0:L.sparkline)==null?void 0:it.color)??a.colors.primary,qe=Fe.TEXT_PADDING*2,Me=Yg(Lt,bt+Fe.TEXT_PADDING,o+i/2-Dt/2,ee-qe,Dt);d.push(`<path d="${Me}" fill="none" stroke="${Ue}" stroke-width="1.5"/>`)}else if(pt.type==="badge"){const Lt=t.metadata[pt.field];if(Lt!=null){const Dt=String(Lt),Ue=g*.85,qe=Ue+8,Me=(ft=($=pt.options)==null?void 0:$.badge)==null?void 0:ft.variants,Sn=(ot=(G=pt.options)==null?void 0:G.badge)==null?void 0:ot.colors;let sn=a.colors.primary,Xt=a.colors.primary;if(Sn&&Dt in Sn)sn=Sn[Dt],Xt=Sn[Dt];else if(Me&&Dt in Me){const _n=Me[Dt];sn={default:a.colors.primary,...Ci,muted:a.colors.muted}[_n]??a.colors.primary,Xt=sn}const We=Rn(Dt,Ue)+12,rr=pt.align==="right"?bt+ee-Fe.TEXT_PADDING-We:pt.align==="center"?bt+(ee-We)/2:bt+Fe.TEXT_PADDING,hr=o+(i-qe)/2;d.push(`<rect x="${rr}" y="${hr}" width="${We}" height="${qe}"
          rx="${qe/2}" fill="${sn}" opacity="0.15"/>`),d.push(`<text class="cell-text" x="${rr+We/2}" y="${hr+qe/2}"
          text-anchor="middle"
          font-family="${a.typography.fontFamily}"
          font-size="${Ue}px"
          font-weight="${a.typography.fontWeightBold}"
          fill="${Xt}">${on(Dt)}</text>`)}}else if(pt.type==="stars"){const Lt=t.metadata[pt.field];if(typeof Lt=="number"){const Dt=((nt=(tt=pt.options)==null?void 0:tt.stars)==null?void 0:nt.maxStars)??5,Ue=((kt=(Ht=pt.options)==null?void 0:Ht.stars)==null?void 0:kt.color)??"#f59e0b",qe=((Gt=(ut=pt.options)==null?void 0:ut.stars)==null?void 0:Gt.emptyColor)??"#d1d5db",Me=Math.max(0,Math.min(Dt,Lt)),Sn=Math.floor(Me),sn=((ge=(Be=pt.options)==null?void 0:Be.stars)==null?void 0:ge.halfStars)&&Me-Sn>=.5,Xt=12,At=2,We=Dt*Xt+(Dt-1)*At;let rr=pt.align==="right"?bt+ee-Fe.TEXT_PADDING-We:pt.align==="center"?bt+(ee-We)/2:bt+Fe.TEXT_PADDING;const hr=o+(i-Xt)/2,_n=(Je,En,jr)=>{const xn=jr/2,Ye=xn*.4;let un="";for(let Ln=0;Ln<5;Ln++){const ri=(Ln*72-90)*Math.PI/180,E=(Ln*72+36-90)*Math.PI/180,z=Je+xn*Math.cos(ri),j=En+xn*Math.sin(ri),Y=Je+Ye*Math.cos(E),wt=En+Ye*Math.sin(E);un+=(Ln===0?`M${z},${j}`:`L${z},${j}`)+`L${Y},${wt}`}return un+"Z"};for(let Je=0;Je<Dt;Je++){const En=rr+Xt/2,jr=hr+Xt/2,Ye=Je<Sn||Je===Sn&&sn?Ue:qe;d.push(`<path d="${_n(En,jr,Xt)}" fill="${Ye}"/>`),rr+=Xt+At}}}else{const Lt=(Yt=t.cellStyles)==null?void 0:Yt[pt.field],Dt=t.style;let Ue=a.typography.fontWeightNormal;(Lt!=null&&Lt.bold||Lt!=null&&Lt.emphasis||Dt!=null&&Dt.bold||Dt!=null&&Dt.emphasis)&&(Ue=a.typography.fontWeightBold);let qe="normal";(Lt!=null&&Lt.italic||Dt!=null&&Dt.italic)&&(qe="italic");let Me=a.colors.foreground;Lt!=null&&Lt.color?Me=Lt.color:Lt!=null&&Lt.muted?Me=a.colors.muted:Lt!=null&&Lt.accent?Me=a.colors.accent:Dt!=null&&Dt.color?Me=Dt.color:Dt!=null&&Dt.muted?Me=a.colors.muted:Dt!=null&&Dt.accent&&(Me=a.colors.accent),d.push(`<text class="cell-text" x="${xt}" y="${p}"
        font-family="${a.typography.fontFamily}"
        font-size="${g}px"
        font-weight="${Ue}"
        font-style="${qe}"
        text-anchor="${pe}"
        fill="${Me}">${on(Ge)}</text>`)}}return d.join(`
`)}function sp(t,e,r,o,i,a){if(Array.isArray(r.axis.tickValues)&&r.axis.tickValues.length>0){const[b,S]=t.domain();let P=r.axis.tickValues.filter(A=>A>=b&&A<=S);const T=r.axis.nullTick!==!1,R=o>=b&&o<=S;return T&&R&&!P.includes(o)&&(P=[...P,o].sort((A,V)=>A-V)),P}const[s,c]=t.domain(),f=r.axis.nullTick!==!1,l=o>=s&&o<=c,u=rs.MIN_TICK_SPACING,h=Math.max(2,Math.floor(i/u)),d=Math.min(e,Math.min(7,h)),g=a&&a.length>0?a.filter(b=>b>=s&&b<=c):t.ticks(d);if(g.length===0)return f&&l?[o]:[];const p=t(o),y=g.filter(b=>b<o).reverse(),_=g.filter(b=>b>o),x=g.some(b=>b===o),C=[];let W=p;for(const b of y){const S=t(b);W-S>=u&&(C.unshift(b),W=S)}const H=[];let M=p;for(const b of _){const S=t(b);S-M>=u&&(H.push(b),M=S)}const k=[...C];if((x||f&&l)&&k.push(o),k.push(...H),k.length<2){const b=new Set(k);b.has(s)||k.unshift(s),k.length<2&&!b.has(c)&&k.push(c)}return k}function Ts(t,e,r,o,i,a,s,c=1,f=.6){let u=`<line x1="${t}" x2="${t}" y1="${e}" y2="${r}"
    stroke="${i}" stroke-width="${c}" stroke-opacity="${f}" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;if(s){const h=a.colors.secondary;u+=`<text x="${t}" y="${e-4}" text-anchor="middle"
      font-family="${a.typography.fontFamily}"
      font-size="${a.typography.fontSizeSm}"
      font-weight="${a.typography.fontWeightMedium}"
      fill="${h}">${on(s)}</text>`}return u}class Co extends Error{constructor(e){super(`SVG Generator: ${e}`),this.name="SVGGeneratorError"}}function lp(t){if(!t||typeof t!="object")throw new Co("Invalid spec: expected an object");const e=t;if(!e.data||typeof e.data!="object")throw new Co("Invalid spec: missing or invalid 'data' property");const r=e.data;if(!Array.isArray(r.rows))throw new Co("Invalid spec: 'data.rows' must be an array");if(!e.theme||typeof e.theme!="object")throw new Co("Invalid spec: missing or invalid 'theme' property");const o=e.theme;if(!o.colors||typeof o.colors!="object")throw new Co("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new Co("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new Co("Invalid spec: missing or invalid 'theme.spacing'")}function cp(t){var a;const r=ks(t.columns,void 0).find(s=>s.type==="forest");if(!r||!((a=r.options)!=null&&a.forest))return{scale:"linear",nullValue:0,effects:[],axisLabel:"Effect",pointCol:null,lowerCol:null,upperCol:null};const o=r.options.forest,i=o.scale??"linear";return{scale:i,nullValue:o.nullValue??(i==="log"?1:0),effects:o.effects??[],axisLabel:o.axisLabel??"Effect",pointCol:o.point??null,lowerCol:o.lower??null,upperCol:o.upper??null}}function Vc(t,e={}){var T,R,A,V,Z,ct,gt;lp(t);const r=t.theme,o=r.spacing.padding,i=Array.isArray(t.columns)?t.columns:[],a=Es(i),s=[];for(let L=0;L<a.length;L++)a[L].type==="forest"&&s.push(L);s.length>0;const c=[];for(let L=0;L<a.length;L++){const it=a[L];(it.type==="viz_bar"||it.type==="viz_boxplot"||it.type==="viz_violin")&&c.push({index:L,type:it.type,column:it})}const f=cp(t),l=Gg(t,e,f.nullValue),u=l.autoWidths,h=L=>{var $,ft,G,ot,tt,nt,Ht,kt;if(L.type==="forest"){const ut=u.get(L.id);return ut!==void 0?ut:typeof L.width=="number"?L.width:((ft=($=L.options)==null?void 0:$.forest)==null?void 0:ft.width)??l.forestWidth}if(L.type==="viz_bar"){const ut=u.get(L.id);return ut!==void 0?ut:typeof L.width=="number"?L.width:((ot=(G=L.options)==null?void 0:G.vizBar)==null?void 0:ot.width)??l.forestWidth}if(L.type==="viz_boxplot"){const ut=u.get(L.id);return ut!==void 0?ut:typeof L.width=="number"?L.width:((nt=(tt=L.options)==null?void 0:tt.vizBoxplot)==null?void 0:nt.width)??l.forestWidth}if(L.type==="viz_violin"){const ut=u.get(L.id);return ut!==void 0?ut:typeof L.width=="number"?L.width:((kt=(Ht=L.options)==null?void 0:Ht.vizViolin)==null?void 0:kt.width)??l.forestWidth}const it=u.get(L.id);return it!==void 0?it:typeof L.width=="number"?L.width:Sr.DEFAULT_COLUMN_WIDTH},d=[];let g=o+l.labelWidth;for(const L of a)d.push(g),g+=h(L);const p=[];p.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${l.totalWidth}" height="${l.totalHeight}"
  viewBox="0 0 ${l.totalWidth} ${l.totalHeight}">
<style>
  text {
    font-variant-numeric: tabular-nums;
  }
  /* Use dominant-baseline for cell text to match CSS flex centering */
  .cell-text { dominant-baseline: central; }
</style>`);const y=e.backgroundColor??r.colors.background;if(p.push(`<rect width="100%" height="100%" fill="${y}"/>`),r.layout.containerBorder!==!1){const L=r.layout.containerBorderRadius??8;p.push(`<rect x="0.5" y="0.5"
      width="${l.totalWidth-1}" height="${l.totalHeight-1}"
      fill="none" stroke="${r.colors.border}" stroke-width="1"
      rx="${L}" ry="${L}"/>`)}p.push($g(t,l,r)),(!!((T=t.labels)!=null&&T.title)||!!((R=t.labels)!=null&&R.subtitle))&&p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
      y1="${l.mainY}" y2="${l.mainY}"
      stroke="${r.colors.border}" stroke-width="2"/>`);const x=l.mainY;p.push(ip(i,a,o,x,l.headerHeight,r,t.data.labelHeader??"Study",l.labelWidth,u,h)),p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
    y1="${x+l.headerHeight}" y2="${x+l.headerHeight}"
    stroke="${r.colors.border}" stroke-width="2"/>`);const C=Dc(t),W=[],H=[];let M=0;for(const L of C){const $=L.type==="data"&&((A=L.row.style)==null?void 0:A.type)==="spacer"?l.rowHeight/2:l.rowHeight;W.push(M),H.push($),M+=$}const k=l.mainY+l.headerHeight;C.forEach((L,it)=>{var $,ft,G,ot;if(L.type==="data"){const tt=L.row,nt=k+W[it],Ht=H[it];if(($=tt.style)!=null&&$.bg)p.push(`<rect x="${o}" y="${nt}"
          width="${l.totalWidth-o*2}" height="${Ht}"
          fill="${tt.style.bg}"/>`);else if(((ft=tt.style)==null?void 0:ft.type)==="header")p.push(`<rect x="${o}" y="${nt}"
          width="${l.totalWidth-o*2}" height="${Ht}"
          fill="${r.colors.muted}" fill-opacity="0.1"/>`);else if(r.layout.banding&&!(((G=tt.style)==null?void 0:G.type)==="summary"||((ot=tt.style)==null?void 0:ot.type)==="spacer")){const Gt=it%2===1?r.colors.altBg:r.colors.rowBg;Gt!==r.colors.background&&p.push(`<rect x="${o}" y="${nt}"
              width="${l.totalWidth-o*2}" height="${Ht}"
              fill="${Gt}"/>`)}}});for(const L of s){const it=a[L],$=d[L],ft=h(it),G=(V=it.options)==null?void 0:V.forest,ot=(G==null?void 0:G.scale)??"linear",tt=(G==null?void 0:G.nullValue)??(ot==="log"?1:0),nt=(G==null?void 0:G.axisLabel)??"Effect",Ht=ot==="log";let kt=(G==null?void 0:G.effects)??[];const ut=(G==null?void 0:G.point)??null,Gt=(G==null?void 0:G.lower)??null,Be=(G==null?void 0:G.upper)??null;kt.length===0&&(ut||Gt||Be)&&(kt=[{pointCol:ut,lowerCol:Gt,upperCol:Be}]);const ge={scale:ot,nullValue:tt,effects:kt,pointCol:(G==null?void 0:G.point)??null,lowerCol:(G==null?void 0:G.lower)??null,upperCol:(G==null?void 0:G.upper)??null},{scale:Yt,clipBounds:Ae,ticks:pt}=Og(t,ft,ge,e),bt=$+Yt(tt);p.push(Ts(bt,k,k+l.plotHeight,"dashed",r.colors.muted,r));const ee=(G==null?void 0:G.annotations)??[];for(const xt of ee)if(xt.type==="reference_line"){const pe=$+Yt(xt.x);p.push(Ts(pe,k,k+l.plotHeight,xt.style,xt.color??r.colors.accent,r,xt.label,xt.width??1,xt.opacity??.6))}const Ge=Array.isArray(t.annotations)?t.annotations:[];for(const xt of Ge)if(xt.type==="reference_line"){const pe=$+Yt(xt.x);p.push(Ts(pe,k,k+l.plotHeight,xt.style,xt.color??r.colors.accent,r,xt.label,xt.width??1,xt.opacity??.6))}if(C.forEach((xt,pe)=>{if(xt.type==="data"){const Lt=k+W[pe]+H[pe]/2;p.push(Zg(xt.row,Lt,Dt=>$+Yt(Dt),r,tt,kt,t.data.weightCol,$,ft,Ae,Ht))}}),t.data.overall&&l.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const xt=k+l.summaryYPosition;p.push(Kg(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,xt,Yt,$,ft,r))}p.push(op(Yt,l,r,nt,$,ft,tt,pt))}const b=t.data.rows;for(const L of c){const it=L.column,$=d[L.index],ft=h(it);if(L.type==="viz_bar"){const G=(Z=it.options)==null?void 0:Z.vizBar;if(!G)continue;const ot=ep(b,G,ft);C.forEach((tt,nt)=>{if(tt.type==="data"){const Ht=k+W[nt]+H[nt]/2,kt=H[nt];p.push(Qg(tt.row,Ht,kt,$,ft,G,ot,r))}}),G.showAxis!==!1&&(p.push(`<g transform="translate(0, ${k+l.plotHeight})">`),p.push(Cs(ot,l,r,G.axisLabel,$,ft,G.nullValue)),p.push("</g>"))}else if(L.type==="viz_boxplot"){const G=(ct=it.options)==null?void 0:ct.vizBoxplot;if(!G)continue;const ot=np(b,G,ft);C.forEach((tt,nt)=>{if(tt.type==="data"){const Ht=k+W[nt]+H[nt]/2,kt=H[nt];p.push(Jg(tt.row,Ht,kt,$,ft,G,ot,r))}}),G.showAxis!==!1&&(p.push(`<g transform="translate(0, ${k+l.plotHeight})">`),p.push(Cs(ot,l,r,G.axisLabel,$,ft,G.nullValue)),p.push("</g>"))}else if(L.type==="viz_violin"){const G=(gt=it.options)==null?void 0:gt.vizViolin;if(!G)continue;const ot=rp(b,G,ft);C.forEach((tt,nt)=>{if(tt.type==="data"){const Ht=k+W[nt]+H[nt]/2,kt=H[nt];p.push(tp(tt.row,Ht,kt,$,ft,G,ot,r))}}),G.showAxis!==!1&&(p.push(`<g transform="translate(0, ${k+l.plotHeight})">`),p.push(Cs(ot,l,r,G.axisLabel,$,ft,G.nullValue)),p.push("</g>"))}}const S=l.mainY+l.headerHeight,P=Xg(b,a);return C.forEach((L,it)=>{var G,ot,tt;const $=S+W[it],ft=H[it];if(L.type==="group_header")p.push(qg(L.label,L.depth,L.rowCount,o,$,ft,l.totalWidth-o*2,r));else{const nt=L.row,Ht=L.depth;((G=nt.style)==null?void 0:G.type)==="spacer"||p.push(ap(nt,a,o,$,ft,r,l.labelWidth,Ht,P,u,h,d))}if(L.type==="data"){const nt=L.row,Ht=((ot=nt.style)==null?void 0:ot.type)==="summary",kt=((tt=nt.style)==null?void 0:tt.type)==="spacer";Ht&&p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
          y1="${$}" y2="${$}"
          stroke="${r.colors.border}" stroke-width="2"/>`),kt||p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
          y1="${$+ft}" y2="${$+ft}"
          stroke="${r.colors.border}" stroke-width="1"/>`)}else p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
        y1="${$+ft}" y2="${$+ft}"
        stroke="${r.colors.border}" stroke-width="1"/>`)}),p.push(jg(t,l,r)),p.push("</svg>"),p.join(`
`)}async function fp(t,e=2){return new Promise((r,o)=>{const i=new Image,a=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(a);i.onload=()=>{const c=document.createElement("canvas"),f=c.getContext("2d");if(!f){URL.revokeObjectURL(s),o(new Error("Failed to get canvas context"));return}c.width=i.width*e,c.height=i.height*e,f.scale(e,e),f.drawImage(i,0,0),c.toBlob(l=>{URL.revokeObjectURL(s),l?r(l):o(new Error("Failed to create PNG blob"))},"image/png",1)},i.onerror=()=>{URL.revokeObjectURL(s),o(new Error("Failed to load SVG image"))},i.src=s})}function up(t,e){return Vc(t,e)}async function dp(t,e,r=2){const o=Vc(t,e);return fp(o,r)}function Oc(t,e){const r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}function $c(t){return`forest_plot_${new Date().toISOString().slice(0,19).replace(/[:-]/g,"")}.${t}`}Vr[D]="src/components/ui/DownloadButton.svelte";var hp=q(Pt('<svg width="16" height="16" viewBox="0 0 24 24" class="spin svelte-15gslqv"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="31.4" stroke-dashoffset="10"></circle></svg>'),Vr[D],[[76,6,[[77,8]]]]),gp=q(Pt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Vr[D],[[80,6,[[81,8],[82,8],[83,8]]]]),pp=q(_t('<div class="download-dropdown svelte-15gslqv"><button class="dropdown-item svelte-15gslqv"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-15gslqv"><rect x="3" y="3" width="18" height="18" rx="2"></rect><text x="12" y="15" text-anchor="middle" font-size="8" fill="currentColor" stroke="none">SVG</text></svg> <span>Download SVG</span></button> <button class="dropdown-item svelte-15gslqv"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-15gslqv"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"></circle><path d="M21 15l-5-5L5 21"></path></svg> <span>Download PNG</span></button></div>'),Vr[D],[[89,4,[[90,6,[[91,8,[[92,10],[93,10]]],[95,8]]],[97,6,[[98,8,[[99,10],[100,10],[101,10]]],[103,8]]]]]]),vp=q(_t('<div class="download-button-wrapper svelte-15gslqv"><button class="download-btn svelte-15gslqv" aria-label="Download plot"><!></button> <!></div>'),Vr[D],[[66,0,[[67,2]]]]);function Vr(t,e){Ne(new.target),Ee(e,!0,Vr);let r=v(Wt(!1),"dropdownOpen"),o=v(Wt(!1),"isExporting"),i=v(Wt(null),"triggerEl");function a(){at(r,!1)}async function s(){if(e.store.spec)try{at(o,!0);const x=e.store.getExportDimensions(),C=up(e.store.spec,x),W=new Blob([C],{type:"image/svg+xml;charset=utf-8"});Oc(W,$c("svg"))}catch(x){console.error(...Dl("error","Failed to export SVG:",x))}finally{at(o,!1),a()}}async function c(){if(e.store.spec)try{at(o,!0);const x=e.store.getExportDimensions(),C=(await eu(dp(e.store.spec,x,2)))();Oc(C,$c("png"))}catch(x){console.error(...Dl("error","Failed to export PNG:",x))}finally{at(o,!1),a()}}function f(x){x.target.closest(".download-button-wrapper")||a()}var l={...He()},u=vp();Gn("click",$o,f);var h=Q(u);h.__click=()=>at(r,!n(r));var d=Q(h);{var g=x=>{var C=hp();F(x,C)},p=x=>{var C=gp();F(x,C)};I(()=>X(d,x=>{n(o)?x(g):x(p,!1)}),"if",Vr,75,4)}yo(h,x=>at(i,x),()=>n(i));var y=rt(h,2);{var _=x=>{var C=pp(),W=Q(C);W.__click=s;var H=rt(W,2);H.__click=c,oa(C,(M,k)=>Gr==null?void 0:Gr(M,k),()=>({triggerEl:n(i)})),J(()=>{W.disabled=n(o),H.disabled=n(o)}),F(x,C)};I(()=>X(y,x=>{n(r)&&x(_)}),"if",Vr,88,2)}return J(()=>{N(h,"aria-expanded",n(r)),h.disabled=n(o)}),F(t,u),ke(l)}mo(["click"]),xa[D]="src/components/ui/ResetButton.svelte";var mp=q(_t('<button class="reset-btn svelte-uej7wa" title="Reset view" aria-label="Reset view to default settings"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg></button>'),xa[D],[[15,0,[[21,2,[[22,4],[23,4]]]]]]);function xa(t,e){Ne(new.target),Ee(e,!0,xa);function r(){e.store.resetState()}var o={...He()},i=mp();return i.__click=r,F(t,i),ke(o)}mo(["click"]),In[D]="src/components/ui/ZoomControls.svelte";var yp=q(_t('<div class="clamped-note svelte-19w48ay"> </div>'),In[D],[[140,8]]),_p=q(_t('<button class="action-btn svelte-19w48ay" title="Reset to 100% (Cmd 0)"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-19w48ay"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg> Reset to 100%</button>'),In[D],[[147,8,[[152,10,[[153,12],[154,12]]]]]]),xp=q(_t("<option> </option>"),In[D],[[198,14]]),wp=q(_t("<option> </option>"),In[D],[[212,14]]),bp=q(_t('<div class="zoom-dropdown svelte-19w48ay"><div class="zoom-row svelte-19w48ay"><button class="zoom-btn svelte-19w48ay" title="Zoom out (Cmd -)" aria-label="Zoom out"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg></button> <input type="range" class="zoom-slider svelte-19w48ay" min="50" max="200" step="5" title="Zoom level" aria-label="Zoom level"/> <button class="zoom-btn svelte-19w48ay" title="Zoom in (Cmd +)" aria-label="Zoom in"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button> <span class="zoom-value svelte-19w48ay"> </span></div> <!> <!> <div class="divider svelte-19w48ay"></div> <button class="action-btn svelte-19w48ay" title="Fit to container width (Cmd 1)"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-19w48ay"><path d="M21 12H3M21 12l-4-4m4 4l-4 4M3 12l4-4m-4 4l4 4"></path></svg> Fit to width</button> <label class="checkbox-row svelte-19w48ay"><input type="checkbox" class="svelte-19w48ay"/> <span>Auto-fit</span> <span class="checkbox-hint svelte-19w48ay">Shrink if too large</span></label> <div class="divider svelte-19w48ay"></div> <div class="section-label svelte-19w48ay">Max Size</div> <div class="select-row svelte-19w48ay"><label class="svelte-19w48ay"><span class="select-label svelte-19w48ay">Width</span> <select class="svelte-19w48ay"></select></label></div> <div class="select-row svelte-19w48ay"><label class="svelte-19w48ay"><span class="select-label svelte-19w48ay">Height</span> <select class="svelte-19w48ay"></select></label></div></div>'),In[D],[[97,4,[[99,6,[[100,8,[[106,10,[[107,12]]]]],[111,8],[123,8,[[129,10,[[130,12],[131,12]]]]],[135,8]]],[160,6],[163,6,[[168,8,[[169,10]]]]],[175,6,[[176,8],[181,8],[182,8]]],[185,6],[188,6],[190,6,[[191,8,[[192,10],[193,10]]]]],[204,6,[[205,8,[[206,10],[207,10]]]]]]]]),Mp=q(_t('<div class="zoom-controls-wrapper svelte-19w48ay"><button class="zoom-trigger-btn svelte-19w48ay" aria-label="Zoom and display options"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path><path d="M11 8v6"></path><path d="M8 11h6"></path></svg> <span class="zoom-text svelte-19w48ay"> </span></button> <!></div>'),In[D],[[76,0,[[78,2,[[87,4,[[88,6],[89,6],[90,6],[91,6]]],[93,4]]]]]]);function In(t,e){Ne(new.target),Ee(e,!0,In);let r=v(Wt(!1),"dropdownOpen"),o=v(Wt(null),"triggerEl");const i=v(m(()=>e.store.zoom),"zoom"),a=v(m(()=>e.store.autoFit),"autoFit"),s=v(m(()=>e.store.actualScale),"actualScale"),c=v(m(()=>e.store.isClamped),"isClamped"),f=v(m(()=>e.store.maxWidth),"maxWidth"),l=v(m(()=>e.store.maxHeight),"maxHeight"),u=v(m(()=>Math.round(n(s)*100)),"displayPercent"),h=v(m(()=>Math.round(n(i)*100)),"zoomPercent"),d=[{value:null,label:"None"},{value:600,label:"600px"},{value:800,label:"800px"},{value:1e3,label:"1000px"},{value:1200,label:"1200px"}],g=[{value:null,label:"None"},{value:400,label:"400px"},{value:600,label:"600px"},{value:800,label:"800px"}];function p(){at(r,!1)}function y(T){const R=T.target;e.store.setZoom(parseFloat(R.value)/100)}function _(T){const R=T.target,A=w(R.value,"null")?null:parseInt(R.value);e.store.setMaxWidth(A)}function x(T){const R=T.target,A=w(R.value,"null")?null:parseInt(R.value);e.store.setMaxHeight(A)}function C(T){T.target.closest(".zoom-controls-wrapper")||p()}var W={...He()},H=Mp();Gn("click",$o,C);var M=Q(H);M.__click=()=>at(r,!n(r));var k=rt(Q(M),2),b=Q(k);yo(M,T=>at(o,T),()=>n(o));var S=rt(M,2);{var P=T=>{var R=bp(),A=Q(R),V=Q(A);V.__click=()=>e.store.zoomOut();var Z=rt(V,2);Z.__change=y;var ct=rt(Z,2);ct.__click=()=>e.store.zoomIn();var gt=rt(ct,2),L=Q(gt),it=rt(A,2);{var $=pt=>{var bt=yp(),ee=Q(bt);J(()=>Qt(ee,`Showing ${n(u)??""}% (auto-fit)`)),F(pt,bt)};I(()=>X(it,pt=>{n(c)&&pt($)}),"if",In,139,6)}var ft=rt(it,2);{var G=pt=>{var bt=_p();bt.__click=()=>e.store.resetZoom(),F(pt,bt)};I(()=>X(ft,pt=>{w(n(i),1,!1)&&pt(G)}),"if",In,146,6)}var ot=rt(ft,4);ot.__click=()=>e.store.fitToWidth();var tt=rt(ot,2),nt=Q(tt);nt.__change=pt=>e.store.setAutoFit(pt.target.checked);var Ht=rt(tt,6),kt=Q(Ht),ut=rt(Q(kt),2);ut.__change=_,I(()=>ze(ut,21,()=>d,wr,(pt,bt)=>{var ee=xp(),Ge=Q(ee,!0);var xt={};J(()=>{Qt(Ge,n(bt).label),xt!==(xt=w(n(bt).value,null)?"null":n(bt).value)&&(ee.value=(ee.__value=w(n(bt).value,null)?"null":n(bt).value)??"")}),F(pt,ee)}),"each",In,197,12);var Gt;Il(ut);var Be=rt(Ht,2),ge=Q(Be),Yt=rt(Q(ge),2);Yt.__change=x,I(()=>ze(Yt,21,()=>g,wr,(pt,bt)=>{var ee=wp(),Ge=Q(ee,!0);var xt={};J(()=>{Qt(Ge,n(bt).label),xt!==(xt=w(n(bt).value,null)?"null":n(bt).value)&&(ee.value=(ee.__value=w(n(bt).value,null)?"null":n(bt).value)??"")}),F(pt,ee)}),"each",In,211,12);var Ae;Il(Yt),oa(R,(pt,bt)=>Gr==null?void 0:Gr(pt,bt),()=>({triggerEl:n(o)})),J(()=>{qu(Z,n(h)),Qt(L,`${n(h)??""}%`),Xu(nt,n(a)),Gt!==(Gt=w(n(f),null)?"null":n(f))&&(ut.value=(ut.__value=w(n(f),null)?"null":n(f))??"",es(ut,w(n(f),null)?"null":n(f))),Ae!==(Ae=w(n(l),null)?"null":n(l))&&(Yt.value=(Yt.__value=w(n(l),null)?"null":n(l))??"",es(Yt,w(n(l),null)?"null":n(l)))}),F(T,R)};I(()=>X(S,T=>{n(r)&&T(P)}),"if",In,96,2)}return J(()=>{N(M,"aria-expanded",n(r)),N(M,"title",`Zoom: ${n(u)??""}%`),Qt(b,`${n(u)??""}%`)}),F(t,H),ke(W)}mo(["click","change"]),Fn[D]="src/components/ui/ControlToolbar.svelte";var Sp=q(_t('<div class="control-toolbar svelte-rjvd17"><!> <!> <!> <!> <!></div>'),Fn[D],[[37,0]]);function Fn(t,e){Ne(new.target),Ee(e,!0,Fn);let r=Vn(e,"enableExport",3,!0),o=Vn(e,"enableThemes",3,void 0),i=Vn(e,"enableViewToggle",3,!0),a=Vn(e,"enableZoomControls",3,!0),s=Vn(e,"enableReset",3,!0);const c=v(m(()=>a()&&e.store.showZoomControls),"showZoomControls"),f=v(m(()=>w(o(),null,!1)),"showThemeSwitcher");var l={...He()},u=Sp(),h=Q(u);{var d=M=>{I(()=>In(M,{get store(){return e.store}}),"component",Fn,39,4,{componentTag:"ZoomControls"})};I(()=>X(h,M=>{n(c)&&M(d)}),"if",Fn,38,2)}var g=rt(h,2);{var p=M=>{I(()=>fr(M,{get store(){return e.store},get availableThemes(){return o()},get onThemeChange(){return e.onThemeChange}}),"component",Fn,42,4,{componentTag:"ThemeSwitcher"})};I(()=>X(g,M=>{n(f)&&M(p)}),"if",Fn,41,2)}var y=rt(g,2);{var _=M=>{I(()=>ko(M,{get store(){return e.store}}),"component",Fn,45,4,{componentTag:"ViewToggle"})};I(()=>X(y,M=>{i()&&M(_)}),"if",Fn,44,2)}var x=rt(y,2);{var C=M=>{I(()=>xa(M,{get store(){return e.store}}),"component",Fn,48,4,{componentTag:"ResetButton"})};I(()=>X(x,M=>{s()&&M(C)}),"if",Fn,47,2)}var W=rt(x,2);{var H=M=>{I(()=>Vr(M,{get store(){return e.store}}),"component",Fn,51,4,{componentTag:"DownloadButton"})};I(()=>X(W,M=>{r()&&M(H)}),"if",Fn,50,2)}return F(t,u),ke(l)}eo[D]="src/components/viz/VizBar.svelte";var Ep=q(Pt('<rect rx="2" class="bar-segment svelte-1pgs700"></rect>'),eo[D],[[107,8]]),kp=q(Pt('<g class="viz-bar-row svelte-1pgs700"></g>'),eo[D],[[96,2]]);function eo(t,e){Ne(new.target),Ee(e,!0,eo);const r=v(m(()=>{var _,x,C,W;if(e.sharedScale)return e.sharedScale;const d=w(e.options.scale,"log"),g=((x=(_=e.theme)==null?void 0:_.spacing)==null?void 0:x.padding)??12;let p=((C=e.options.axisRange)==null?void 0:C[0])??0,y=((W=e.options.axisRange)==null?void 0:W[1])??100;if(!e.options.axisRange){const H=[];for(const M of e.options.effects){const k=e.row.metadata[M.value];he(k,null,!1)&&!Number.isNaN(k)&&H.push(k)}H.length>0&&(p=Math.min(0,...H),y=Math.max(...H)*1.1)}return d?Dr().domain([Math.max(.01,p),y]).range([g,e.width-g]):Qn().domain([p,y]).range([g,e.width-g])}),"xScale"),o=v(m(()=>{const d=e.options.effects.length,g=e.rowHeight*.7,p=d>1?2:0,y=(g-p*(d-1))/d;return{barHeight:Math.max(4,y),barGap:p,totalHeight:g}}),"barConfig"),i=v(m(()=>{var d,g;return((g=(d=e.theme)==null?void 0:d.shapes)==null?void 0:g.effectColors)??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"]}),"defaultColors");function a(d,g){return d.color??n(i)[g%n(i).length]}function s(d){return d.opacity??.85}const c=v(m(()=>e.options.effects.some(d=>{const g=e.row.metadata[d.value];return he(g,null,!1)&&!Number.isNaN(g)})),"hasValidData");var f={...He()},l=Et(),u=mt(l);{var h=d=>{var g=kp();I(()=>ze(g,21,()=>e.options.effects,wr,(p,y,_)=>{const x=v(m(()=>e.row.metadata[n(y).value]),"value");n(x);var C=Et(),W=mt(C);{var H=M=>{const k=v(m(()=>e.yPosition-n(o).totalHeight/2+_*(n(o).barHeight+n(o).barGap)),"barY");n(k);const b=v(m(()=>n(r)(Math.min(0,n(x)))),"barX");n(b);const S=v(m(()=>Math.abs(n(r)(n(x))-n(r)(0))),"barWidth");n(S);const P=v(m(()=>a(n(y),_)),"color");n(P);const T=v(m(()=>s(n(y))),"opacity");n(T);var R=Ep();J(A=>{N(R,"x",n(b)),N(R,"y",n(k)),N(R,"width",A),N(R,"height",n(o).barHeight),N(R,"fill",n(P)),N(R,"fill-opacity",n(T))},[()=>Math.max(1,n(S))]),F(M,R)};I(()=>X(W,M=>{he(n(x),null,!1)&&!Number.isNaN(n(x))&&M(H)}),"if",eo,100,6)}F(p,C)}),"each",eo,98,4),F(d,g)};I(()=>X(u,d=>{n(c)&&d(h)}),"if",eo,95,0)}return F(t,l),ke(f)}ur[D]="src/components/viz/VizBoxplot.svelte";var Cp=q(Pt('<circle r="2.5" fill="none" stroke-width="1.5" class="outlier svelte-5apth9"></circle>'),ur[D],[[210,12]]),Tp=q(Pt('<line stroke-width="1"></line><line stroke-width="1"></line><line stroke-width="1"></line><line stroke-width="1"></line><rect stroke-width="1" class="box-rect svelte-5apth9"></rect><line stroke-width="2"></line><!>',1),ur[D],[[147,10],[156,10],[166,10],[175,10],[185,8],[198,8]]),Np=q(Pt('<g class="viz-boxplot-row svelte-5apth9"></g>'),ur[D],[[135,2]]);function ur(t,e){Ne(new.target),Ee(e,!0,ur);const r=v(m(()=>e.options.effects.map(g=>{if(g.data){const p=e.row.metadata[g.data];return!p||!Array.isArray(p)||w(p.length,0)?null:ma(p)}if(g.min&&g.q1&&g.median&&g.q3&&g.max){const p=e.row.metadata[g.min],y=e.row.metadata[g.q1],_=e.row.metadata[g.median],x=e.row.metadata[g.q3],C=e.row.metadata[g.max];if([p,y,_,x,C].some(H=>he(H,null)||Number.isNaN(H)))return null;let W=[];if(g.outliers){const H=e.row.metadata[g.outliers];H&&Array.isArray(H)&&(W=H)}return{min:p,q1:y,median:_,q3:x,max:C,outliers:W}}return null})),"effectStats"),o=v(m(()=>n(r).some(g=>w(g,null,!1))),"hasValidData"),i=v(m(()=>{var x,C,W,H;if(e.sharedScale)return e.sharedScale;const g=w(e.options.scale,"log"),p=((C=(x=e.theme)==null?void 0:x.spacing)==null?void 0:C.padding)??12;let y=(W=e.options.axisRange)==null?void 0:W[0],_=(H=e.options.axisRange)==null?void 0:H[1];if(he(y,null)||he(_,null)){const M=[];for(const k of n(r))k&&(M.push(k.min,k.max),w(e.options.showOutliers,!1,!1)&&M.push(...k.outliers));if(M.length>0){const k=Math.min(...M),b=Math.max(...M),S=b-k;y=y??k-S*.05,_=_??b+S*.05}else y=y??0,_=_??100}return g?Dr().domain([Math.max(.01,y),_]).range([p,e.width-p]):Qn().domain([y,_]).range([p,e.width-p])}),"xScale"),a=v(m(()=>{const g=e.options.effects.length,p=e.rowHeight*.7,y=(p-(g-1)*2)/g;return{boxHeight:Math.max(8,y),boxGap:g>1?2:0,totalHeight:p}}),"boxConfig"),s=v(m(()=>{var g,p;return((p=(g=e.theme)==null?void 0:g.shapes)==null?void 0:p.effectColors)??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"]}),"defaultColors");function c(g,p){return g.color??n(s)[p%n(s).length]}function f(g){return g.fillOpacity??.7}var l={...He()},u=Et(),h=mt(u);{var d=g=>{var p=Np();I(()=>ze(p,21,()=>e.options.effects,wr,(y,_,x)=>{const C=v(m(()=>n(r)[x]),"stats");n(C);var W=Et(),H=mt(W);{var M=k=>{const b=v(m(()=>e.yPosition-n(a).totalHeight/2+x*(n(a).boxHeight+n(a).boxGap)),"boxY");n(b);const S=v(m(()=>n(b)+n(a).boxHeight/2),"boxCenterY");n(S);const P=v(m(()=>c(n(_),x)),"color");n(P);const T=v(m(()=>f(n(_))),"opacity");n(T);const R=v(m(()=>{var G;return((G=e.theme)==null?void 0:G.colors.foreground)??"#1a1a1a"}),"lineColor");n(R);var A=Tp(),V=mt(A),Z=rt(V),ct=rt(Z),gt=rt(ct),L=rt(gt),it=rt(L),$=rt(it);{var ft=G=>{var ot=Et(),tt=mt(ot);I(()=>ze(tt,17,()=>n(C).outliers,wr,(nt,Ht)=>{var kt=Cp();J(ut=>{N(kt,"cx",ut),N(kt,"cy",n(S)),N(kt,"stroke",n(P))},[()=>n(i)(n(Ht))]),F(nt,kt)}),"each",ur,209,10),F(G,ot)};I(()=>X($,G=>{w(e.options.showOutliers,!1,!1)&&n(C).outliers.length>0&&G(ft)}),"if",ur,208,8)}J((G,ot,tt,nt,Ht,kt,ut,Gt,Be,ge,Yt,Ae)=>{N(V,"x1",G),N(V,"x2",ot),N(V,"y1",n(S)),N(V,"y2",n(S)),N(V,"stroke",n(R)),N(Z,"x1",tt),N(Z,"x2",nt),N(Z,"y1",n(S)-n(a).boxHeight/4),N(Z,"y2",n(S)+n(a).boxHeight/4),N(Z,"stroke",n(R)),N(ct,"x1",Ht),N(ct,"x2",kt),N(ct,"y1",n(S)),N(ct,"y2",n(S)),N(ct,"stroke",n(R)),N(gt,"x1",ut),N(gt,"x2",Gt),N(gt,"y1",n(S)-n(a).boxHeight/4),N(gt,"y2",n(S)+n(a).boxHeight/4),N(gt,"stroke",n(R)),N(L,"x",Be),N(L,"y",n(b)),N(L,"width",ge),N(L,"height",n(a).boxHeight),N(L,"fill",n(P)),N(L,"fill-opacity",n(T)),N(L,"stroke",n(R)),N(it,"x1",Yt),N(it,"x2",Ae),N(it,"y1",n(b)),N(it,"y2",n(b)+n(a).boxHeight),N(it,"stroke",n(R))},[()=>n(i)(n(C).min),()=>n(i)(n(C).q1),()=>n(i)(n(C).min),()=>n(i)(n(C).min),()=>n(i)(n(C).q3),()=>n(i)(n(C).max),()=>n(i)(n(C).max),()=>n(i)(n(C).max),()=>n(i)(n(C).q1),()=>Math.max(2,n(i)(n(C).q3)-n(i)(n(C).q1)),()=>n(i)(n(C).median),()=>n(i)(n(C).median)]),F(k,A)};I(()=>X(H,k=>{n(C)&&k(M)}),"if",ur,138,6)}F(y,W)}),"each",ur,136,4),F(g,p)};I(()=>X(h,g=>{n(o)&&g(d)}),"if",ur,134,0)}return F(t,u),ke(l)}Jn[D]="src/components/viz/VizViolin.svelte";var Hp=q(Pt('<line stroke-width="2"></line>'),Jn[D],[[165,10]]),Ap=q(Pt('<line stroke-width="1" stroke-dasharray="2,2"></line><line stroke-width="1" stroke-dasharray="2,2"></line>',1),Jn[D],[[179,10],[188,10]]),Wp=q(Pt('<path stroke-width="0.5" class="violin-path svelte-1ywbnva"></path><!><!>',1),Jn[D],[[153,8]]),Rp=q(Pt('<g class="viz-violin-row svelte-1ywbnva"></g>'),Jn[D],[[140,2]]);function Jn(t,e){Ne(new.target),Ee(e,!0,Jn);const r=v(m(()=>e.options.effects.map(y=>{const _=e.row.metadata[y.data];return!_||!Array.isArray(_)||_.length<2?null:Ic(_,e.options.bandwidth)})),"effectKDEs"),o=v(m(()=>e.options.effects.map(y=>{const _=e.row.metadata[y.data];return!_||!Array.isArray(_)||_.length<2?null:zc(_)})),"effectQuartiles"),i=v(m(()=>n(r).some(y=>w(y,null,!1))),"hasValidData"),a=v(m(()=>{var W,H,M,k;if(e.sharedScale)return e.sharedScale;const y=w(e.options.scale,"log"),_=((H=(W=e.theme)==null?void 0:W.spacing)==null?void 0:H.padding)??12;let x=(M=e.options.axisRange)==null?void 0:M[0],C=(k=e.options.axisRange)==null?void 0:k[1];if(he(x,null)||he(C,null)){const b=[];for(const S of n(r))S&&S.x.length>0&&b.push(...S.x);b.length>0?(x=x??Math.min(...b),C=C??Math.max(...b)):(x=x??0,C=C??100)}return y?Dr().domain([Math.max(.01,x),C]).range([_,e.width-_]):Qn().domain([x,C]).range([_,e.width-_])}),"xScale"),s=v(m(()=>{const y=e.options.effects.length,_=e.rowHeight*.8,x=(_-(y-1)*2)/y;return{maxWidth:x/2,violinHeight:Math.max(10,x),gap:y>1?2:0,totalHeight:_}}),"violinConfig"),c=v(m(()=>{var y,_;return((_=(y=e.theme)==null?void 0:y.shapes)==null?void 0:_.effectColors)??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"]}),"defaultColors");function f(y,_){return y.color??n(c)[_%n(c).length]}function l(y){return y.fillOpacity??.5}function u(y,_,x){if(y.x.length<2)return"";const C=Fc(y,x),W=[];for(let H=0;H<C.x.length;H++){const M=n(a)(C.x[H]),k=_-C.y[H];W.push(w(H,0)?`M ${M} ${k}`:`L ${M} ${k}`)}for(let H=C.x.length-1;H>=0;H--){const M=n(a)(C.x[H]),k=_+C.y[H];W.push(`L ${M} ${k}`)}return W.push("Z"),W.join(" ")}var h={...He()},d=Et(),g=mt(d);{var p=y=>{var _=Rp();I(()=>ze(_,21,()=>e.options.effects,wr,(x,C,W)=>{const H=v(m(()=>n(r)[W]),"kde");n(H);const M=v(m(()=>n(o)[W]),"quartiles");n(M);var k=Et(),b=mt(k);{var S=P=>{const T=v(m(()=>e.yPosition-n(s).totalHeight/2+n(s).violinHeight/2+W*(n(s).violinHeight+n(s).gap)),"violinCenterY");n(T);const R=v(m(()=>f(n(C),W)),"color");n(R);const A=v(m(()=>l(n(C))),"opacity");n(A);const V=v(m(()=>u(n(H),n(T),n(s).maxWidth)),"path");n(V);const Z=v(m(()=>{var G;return((G=e.theme)==null?void 0:G.colors.foreground)??"#1a1a1a"}),"lineColor");n(Z);var ct=Wp(),gt=mt(ct),L=rt(gt);{var it=G=>{const ot=v(m(()=>n(a)(n(M).median)),"medianX");n(ot);var tt=Hp();J(()=>{N(tt,"x1",n(ot)),N(tt,"x2",n(ot)),N(tt,"y1",n(T)-n(s).maxWidth*.6),N(tt,"y2",n(T)+n(s).maxWidth*.6),N(tt,"stroke",n(Z))}),F(G,tt)};I(()=>X(L,G=>{w(e.options.showMedian,!1,!1)&&n(M)&&G(it)}),"if",Jn,163,8)}var $=rt(L);{var ft=G=>{const ot=v(m(()=>n(a)(n(M).q1)),"q1X");n(ot);const tt=v(m(()=>n(a)(n(M).q3)),"q3X");n(tt);var nt=Ap(),Ht=mt(nt),kt=rt(Ht);J(()=>{N(Ht,"x1",n(ot)),N(Ht,"x2",n(ot)),N(Ht,"y1",n(T)-n(s).maxWidth*.4),N(Ht,"y2",n(T)+n(s).maxWidth*.4),N(Ht,"stroke",n(Z)),N(kt,"x1",n(tt)),N(kt,"x2",n(tt)),N(kt,"y1",n(T)-n(s).maxWidth*.4),N(kt,"y2",n(T)+n(s).maxWidth*.4),N(kt,"stroke",n(Z))}),F(G,nt)};I(()=>X($,G=>{e.options.showQuartiles&&n(M)&&G(ft)}),"if",Jn,176,8)}J(()=>{N(gt,"d",n(V)),N(gt,"fill",n(R)),N(gt,"fill-opacity",n(A)),N(gt,"stroke",n(Z))}),F(P,ct)};I(()=>X(b,P=>{n(H)&&n(H).x.length>=2&&P(S)}),"if",Jn,144,6)}F(x,k)}),"each",Jn,141,4),F(y,_)};I(()=>X(g,y=>{n(i)&&y(p)}),"if",Jn,139,0)}return F(t,d),ke(h)}B[D]="src/lib/ForestPlot.svelte";function zp(t,e){var o,i;if((i=(o=e.options)==null?void 0:o.bar)!=null&&i.maxValue)return e.options.bar.maxValue;let r=0;for(const a of t){const s=a.metadata[e.field];w(typeof s,"number")&&s>r&&(r=s)}return r||100}function Ip(t,e,r){const o=[],i=w(t==null?void 0:t.type,"header")||w(t==null?void 0:t.type,"summary")||w(t==null?void 0:t.type,"spacer");return w(t==null?void 0:t.type,"header")&&o.push("row-header"),w(t==null?void 0:t.type,"summary")&&o.push("row-summary"),t!=null&&t.bold&&o.push("row-bold"),t!=null&&t.italic&&o.push("row-italic"),t!=null&&t.emphasis&&o.push("row-emphasis"),t!=null&&t.muted&&o.push("row-muted"),t!=null&&t.accent&&o.push("row-accent"),!i&&r&&w(e,void 0,!1)&&w(e%2,1)&&o.push("row-odd"),o.join(" ")}function Fp(t,e){const r=[];return t!=null&&t.color&&r.push(`color: ${t.color}`),t!=null&&t.bg&&r.push(`background-color: ${t.bg}`),t!=null&&t.indent&&r.push(`--row-indent: ${t.indent}`),!(t!=null&&t.indent)&&e&&e>0&&r.push(`--row-indent: ${e}`),r.join("; ")}function Pp(t,e){var r;if((r=t.cellStyles)!=null&&r[e.field])return t.cellStyles[e.field];if(e.styleMapping){const o={},i=t.metadata;if(e.styleMapping.bold&&i[e.styleMapping.bold]&&(o.bold=!!i[e.styleMapping.bold]),e.styleMapping.italic&&i[e.styleMapping.italic]&&(o.italic=!!i[e.styleMapping.italic]),e.styleMapping.color&&i[e.styleMapping.color]&&(o.color=String(i[e.styleMapping.color])),e.styleMapping.bg&&i[e.styleMapping.bg]&&(o.bg=String(i[e.styleMapping.bg])),e.styleMapping.badge&&i[e.styleMapping.badge]&&(o.badge=String(i[e.styleMapping.badge])),e.styleMapping.icon&&i[e.styleMapping.icon]&&(o.icon=String(i[e.styleMapping.icon])),Object.keys(o).length>0)return o}}var Lp=q(_t('<div class="resize-handle svelte-14l8yxx"></div>'),B[D],[[941,12]]),Dp=q(_t('<div class="grid-cell header-cell column-group-header svelte-14l8yxx"><span class="header-text svelte-14l8yxx"> </span></div>'),B[D],[[952,12,[[957,14]]]]),Bp=q(_t('<span class="header-text svelte-14l8yxx"> </span>'),B[D],[[978,16]]),Gp=q(_t('<div class="resize-handle svelte-14l8yxx"></div>'),B[D],[[982,16]]),Vp=q(_t('<div class="grid-cell header-cell plot-header svelte-14l8yxx"><!> <!></div>'),B[D],[[971,12]]),Op=q(_t('<div class="resize-handle svelte-14l8yxx"></div>'),B[D],[[1e3,16]]),$p=q(_t('<div class="grid-cell header-cell svelte-14l8yxx"><span class="header-text svelte-14l8yxx"> </span> <!></div>'),B[D],[[991,12,[[997,14]]]]),jp=q(_t('<span class="row-icon svelte-14l8yxx"> </span>'),B[D],[[1047,35]]),qp=q(_t('<span class="row-badge svelte-14l8yxx"> </span>'),B[D],[[1049,36]]),Xp=q(_t("<!> <!>",1),B[D],[]),Up=q(_t("<div></div>"),B[D],[[1057,14]]),Yp=q(_t("<div><!></div>"),B[D],[[1072,14]]),Zp=q(_t("<div><!></div> <!>",1),B[D],[[1022,10]]),Kp=q(_t('<div class="grid-cell axis-cell svelte-14l8yxx"></div>'),B[D],[[1100,14]]),Qp=q(_t('<div class="grid-cell axis-spacer svelte-14l8yxx"></div>'),B[D],[[1102,14]]),Jp=q(_t('<!> <div class="grid-cell axis-spacer svelte-14l8yxx"></div>',1),B[D],[[1106,10]]),tv=q(Pt('<text text-anchor="middle" font-size="var(--wf-font-size-sm)" font-weight="500" class="svelte-14l8yxx"> </text>'),B[D],[[1157,18]]),ev=q(Pt('<line class="svelte-14l8yxx"></line><!>',1),B[D],[[1145,16]]),nv=q(Pt('<g class="svelte-14l8yxx"><!></g>'),B[D],[[1218,14]]),rv=q(Pt('<svg class="plot-overlay svelte-14l8yxx"><line stroke="var(--wf-muted)" stroke-width="1" stroke-dasharray="4,4" class="svelte-14l8yxx"></line><!><!><!><!></svg>'),B[D],[[1120,10,[[1129,12]]]]),ov=q(Pt('<g class="svelte-14l8yxx"><!></g>'),B[D],[[1261,16]]),iv=q(Pt('<svg class="plot-overlay svelte-14l8yxx"><!><!></svg>'),B[D],[[1234,12]]),av=q(Pt('<g class="svelte-14l8yxx"><!></g>'),B[D],[[1314,16]]),sv=q(Pt('<svg class="plot-overlay svelte-14l8yxx"><!><!></svg>'),B[D],[[1287,12]]),lv=q(Pt('<g class="svelte-14l8yxx"><!></g>'),B[D],[[1367,16]]),cv=q(Pt('<svg class="plot-overlay svelte-14l8yxx"><!><!></svg>'),B[D],[[1340,12]]),fv=q(_t('<!> <div class="tabviz-scalable svelte-14l8yxx"><!>  <div><div class="grid-cell header-cell label-header svelte-14l8yxx"><span class="header-text svelte-14l8yxx"> </span> <!></div> <!> <!> <!> <!> <!> <!> <!></div> <!></div> <!>',1),B[D],[[855,4,[[930,6,[[933,8,[[938,10]]]]]]]]),uv=q(_t('<div class="tabviz-empty svelte-14l8yxx">No data</div>'),B[D],[[1392,4]]),dv=q(_t("<div><!></div>"),B[D],[[840,0]]);function B(t,e){Ne(new.target),Ee(e,!0,B);const r=v(m(()=>e.store.spec),"spec"),o=v(m(()=>e.store.visibleRows),"visibleRows"),i=v(m(()=>e.store.displayRows),"displayRows"),a=v(m(()=>e.store.layout),"layout"),s=v(m(()=>e.store.xScale),"xScale"),c=v(m(()=>e.store.axisComputation),"axisComputation"),f=v(m(()=>n(c).axisLimits),"clipBounds"),l=v(m(()=>{var E;return(E=n(r))==null?void 0:E.theme}),"theme"),u=v(m(()=>{var E,z;return((z=(E=n(l))==null?void 0:E.layout)==null?void 0:z.banding)??!1}),"bandingEnabled"),h=v(m(()=>e.store.allColumns),"allColumns"),d=v(m(()=>e.store.allColumnDefs),"allColumnDefs"),g=v(m(()=>e.store.forestColumns),"forestColumns");v(m(()=>n(g).length>0),"hasForestColumns");const p=v(m(()=>e.store.vizColumns),"vizColumns"),y=v(m(()=>n(p).length>0),"hasVizColumns"),_=v(m(()=>{var E;return((E=n(r))==null?void 0:E.data.labelHeader)||"Study"}),"labelHeader"),x=v(m(()=>{var E,z,j,Y;return!!((z=(E=n(r))==null?void 0:E.labels)!=null&&z.title)||!!((Y=(j=n(r))==null?void 0:j.labels)!=null&&Y.subtitle)}),"hasPlotHeader");v(m(()=>n(d).some(E=>E.isGroup)),"hasColumnGroups");const C=v(m(()=>e.store.tooltipRow),"tooltipRow"),W=v(m(()=>e.store.tooltipPosition),"tooltipPosition"),H=v(m(()=>e.store.selectedRowIds),"selectedRowIds"),M=v(m(()=>e.store.hoveredRowId),"hoveredRowId"),k=v(m(()=>e.store.zoom),"zoom"),b=v(m(()=>e.store.autoFit),"autoFit"),S=v(m(()=>e.store.actualScale),"actualScale"),P=v(m(()=>e.store.maxWidth),"maxWidth"),T=v(m(()=>e.store.maxHeight),"maxHeight");v(m(()=>e.store.showZoomControls),"showZoomControls");const R=v(m(()=>({...e.store.columnWidths})),"columnWidthsSnapshot");let A=v(Wt(void 0),"containerRef"),V=v(Wt(void 0),"scalableRef"),Z=v(Wt(0),"containerContentWidth"),ct=v(Wt(0),"scalableNaturalWidth"),gt=v(Wt(0),"scalableNaturalHeight");v(m(()=>e.store.naturalContentWidth),"naturalContentWidth");const L=v(m(()=>n(ct)*n(S)),"scaledWidth"),it=v(m(()=>n(gt)*n(S)),"scaledHeight"),$=v(m(()=>{if(!n(b)||n(Z)<=0||n(L)<=0)return 0;const E=(n(Z)-n(L))/2;return Math.max(0,E)}),"centeringMargin");Qi(()=>{if(!n(A)||!n(V))return;n(A).id&&e.store.setContainerElementId(n(A).id);const E=new ResizeObserver(z=>{for(const j of z)w(j.target,n(A))?(at(Z,j.contentRect.width,!0),e.store.setContainerDimensions(j.contentRect.width,j.contentRect.height)):w(j.target,n(V))&&(at(ct,j.contentRect.width,!0),at(gt,j.contentRect.height,!0),e.store.setScalableNaturalDimensions(j.contentRect.width,j.contentRect.height))});return E.observe(n(A)),E.observe(n(V)),()=>{E.disconnect()}});const ft=v(m(()=>{var E,z;return w((z=(E=n(r))==null?void 0:E.interaction)==null?void 0:z.enableExport,!1,!1)}),"enableExport"),G=v(m(()=>{var E,z;return(z=(E=n(r))==null?void 0:E.interaction)==null?void 0:z.enableThemes}),"enableThemes");function ot(E){var z;if(!(!E.metaKey&&!E.ctrlKey)&&!w((z=E.target)==null?void 0:z.tagName,"INPUT"))switch(E.key){case"=":case"+":E.preventDefault(),e.store.zoomIn();break;case"-":E.preventDefault(),e.store.zoomOut();break;case"0":E.preventDefault(),e.store.resetZoom();break;case"1":E.preventDefault(),e.store.fitToWidth();break}}const tt=v(m(()=>{var Y;const E=[],z=[];let j=0;for(const wt of n(i)){const Mt=w(wt.type,"data")&&w((Y=wt.row.style)==null?void 0:Y.type,"spacer")?n(a).rowHeight/2:n(a).rowHeight;E.push(j),z.push(Mt),j+=Mt}return{positions:E,heights:z,totalHeight:j}}),"rowLayout"),nt=v(m(()=>n(tt).totalHeight),"rowsAreaHeight");function Ht(E){const z=E.filter(Mt=>w(Mt.type,"reference_line")&&Mt.label).map(Mt=>({id:Mt.id,x:n(s)(Mt.x),label:Mt.label})).sort((Mt,jt)=>Mt.x-jt.x),j={},Y=120,wt=-18;for(let Mt=0;Mt<z.length;Mt++){const jt=z[Mt];if(j[jt.id]=0,Mt>0){const Nt=z[Mt-1];jt.x-Nt.x<Y&&(j[jt.id]=w(j[Nt.id],0)?wt:0)}}return j}function kt(E){return n(H).has(E)}function ut(E,z){return w(E.type,"group_header")?`group_${E.group.id}`:E.row.id}function Gt(E){return E.isGroup?E.columns.reduce((z,j)=>z+Gt(j),0):1}function Be(E){let z=0;for(const j of E)if(j.isGroup){const Y=1+Be(j.columns);z=Math.max(z,Y)}return z}function ge(E,z){var ie,Xe;const j=z==null?void 0:z.groupHeaders,Y=((ie=z==null?void 0:z.colors)==null?void 0:ie.primary)??"#0891b2",wt=((Xe=z==null?void 0:z.colors)==null?void 0:Xe.background)??"#ffffff";if(w(E,1)&&(j!=null&&j.level1Background))return j.level1Background;if(w(E,2)&&(j!=null&&j.level2Background))return j.level2Background;if(E>=3&&(j!=null&&j.level3Background))return j.level3Background;const jt=[.15,.1,.06][Math.min(E-1,2)],Nt=Jt=>{const Ct=Jt.replace("#","");return{r:parseInt(Ct.substring(0,2),16),g:parseInt(Ct.substring(2,4),16),b:parseInt(Ct.substring(4,6),16)}},Tt=Nt(Y),Ot=Nt(wt),Vt=(Jt,Ct)=>Math.round(Jt*jt+Ct*(1-jt)),Ve=Vt(Tt.r,Ot.r),$t=Vt(Tt.g,Ot.g),xe=Vt(Tt.b,Ot.b);return`rgb(${Ve}, ${$t}, ${xe})`}const Yt=v(m(()=>Math.max(1,1+Be(n(d)))),"headerDepth"),Ae=v(m(()=>{const E=[];let z=2;function j(Y,wt){const Mt=Gt(Y),jt=z;if(Y.isGroup){E.push({col:Y,gridColumnStart:jt,colspan:Mt,rowStart:wt+1,rowSpan:1,isGroupHeader:!0,isForest:!1});for(const Nt of Y.columns)j(Nt,wt+1)}else{const Nt=!Y.isGroup&&bt.includes(Y.type);E.push({col:Y,gridColumnStart:jt,colspan:1,rowStart:wt+1,rowSpan:n(Yt)-wt,isGroupHeader:!1,isForest:Nt}),z++}}for(const Y of n(d))j(Y,0);return E}),"headerCells");function pt(E){const z=n(R)[E.id];return w(typeof z,"number")?`${z}px`:w(typeof E.width,"number")?`${E.width}px`:"max-content"}const bt=["forest","viz_bar","viz_boxplot","viz_violin"],ee=v(m(()=>{var j,Y,wt,Mt,jt,Nt,Tt,Ot;const E=[],z=n(R).__label__;E.push(z?`${z}px`:"max-content");for(const Vt of n(h))if(bt.includes(Vt.type)){const Ve=n(R)[Vt.id];let $t;w(typeof Ve,"number")?$t=Ve:w(typeof Vt.width,"number")?$t=Vt.width:w(Vt.type,"forest")?$t=((Y=(j=Vt.options)==null?void 0:j.forest)==null?void 0:Y.width)??n(a).forestWidth:w(Vt.type,"viz_bar")?$t=((Mt=(wt=Vt.options)==null?void 0:wt.vizBar)==null?void 0:Mt.width)??n(a).forestWidth:w(Vt.type,"viz_boxplot")?$t=((Nt=(jt=Vt.options)==null?void 0:jt.vizBoxplot)==null?void 0:Nt.width)??n(a).forestWidth:w(Vt.type,"viz_violin")?$t=((Ot=(Tt=Vt.options)==null?void 0:Tt.vizViolin)==null?void 0:Ot.width)??n(a).forestWidth:$t=n(a).forestWidth,E.push(`${$t}px`)}else E.push(pt(Vt));return E.join(" ")}),"gridTemplateColumns");v(m(()=>1+n(h).length),"totalColumns");const Ge=v(m(()=>{const E=[];for(let z=0;z<n(h).length;z++)bt.includes(n(h)[z].type)&&E.push({gridCol:2+z,column:n(h)[z]});return E}),"vizColumnGridIndices");n(Ge);let xt=v(Wt(yr(new Map)),"forestColumnRefs"),pe=v(Wt(yr(new Map)),"forestColumnPositions"),Lt=v(Wt(void 0),"labelHeaderRef"),Dt=v(Wt(0),"measuredHeaderHeight");Qi(()=>{n(R),n(a).forestWidth,n(Yt),Su().then(()=>{const E=new Map;for(const[z,j]of n(xt))j&&E.set(z,j.offsetLeft);at(pe,E,!0),n(Lt)&&at(Dt,n(Lt).offsetHeight,!0)})});function Ue(E,z){return n(xt).set(z,E),at(xt,new Map(n(xt)),!0),{destroy(){n(xt).delete(z),at(xt,new Map(n(xt)),!0)}}}const qe=v(m(()=>n(Dt)>0?n(Dt):n(a).headerHeight),"actualHeaderHeight"),Me=v(m(()=>{var j,Y,wt,Mt,jt,Nt,Tt,Ot,Vt;const E=new Map,z=Nn;for(const Ve of n(p)){const $t=Ve.column,xe=z;if(w($t.type,"viz_bar")){const ie=(j=$t.options)==null?void 0:j.vizBar;if(!ie)continue;const Xe=n(R)[$t.id],Jt=w(typeof Xe,"number")?Xe:w(typeof $t.width,"number")?$t.width:ie.width??n(a).forestWidth;let Ct=(Y=ie.axisRange)==null?void 0:Y[0],st=(wt=ie.axisRange)==null?void 0:wt[1];if(he(Ct,null)||he(st,null)){const fe=[];for(const Re of n(i))if(w(Re.type,"data"))for(const Oe of ie.effects){const ue=Re.row.metadata[Oe.value];he(ue,null,!1)&&!Number.isNaN(ue)&&fe.push(ue)}fe.length>0?(Ct=Ct??Math.min(0,...fe),st=st??Math.max(...fe)*1.1):(Ct=Ct??0,st=st??100)}const re=w(ie.scale,"log")?Dr().domain([Math.max(.01,Ct),st]).range([xe,Jt-xe]):Qn().domain([Ct,st]).range([xe,Jt-xe]);E.set($t.id,re)}else if(w($t.type,"viz_boxplot")){const ie=(Mt=$t.options)==null?void 0:Mt.vizBoxplot;if(!ie)continue;const Xe=n(R)[$t.id],Jt=w(typeof Xe,"number")?Xe:w(typeof $t.width,"number")?$t.width:ie.width??n(a).forestWidth;let Ct=(jt=ie.axisRange)==null?void 0:jt[0],st=(Nt=ie.axisRange)==null?void 0:Nt[1];if(he(Ct,null)||he(st,null)){const fe=[];for(const Re of n(i))if(w(Re.type,"data")){for(const Oe of ie.effects)if(Oe.data){const ue=Re.row.metadata[Oe.data];if(ue&&Array.isArray(ue)){const Ut=ma(ue);fe.push(Ut.min,Ut.max),w(ie.showOutliers,!1,!1)&&fe.push(...Ut.outliers)}}else if(Oe.min&&Oe.max){const ue=Re.row.metadata[Oe.min],Ut=Re.row.metadata[Oe.max];he(ue,null,!1)&&!Number.isNaN(ue)&&fe.push(ue),he(Ut,null,!1)&&!Number.isNaN(Ut)&&fe.push(Ut)}}if(fe.length>0){const Re=Math.min(...fe),Oe=Math.max(...fe),ue=Oe-Re;Ct=Ct??Re-ue*.05,st=st??Oe+ue*.05}else Ct=Ct??0,st=st??100}const re=w(ie.scale,"log")?Dr().domain([Math.max(.01,Ct),st]).range([xe,Jt-xe]):Qn().domain([Ct,st]).range([xe,Jt-xe]);E.set($t.id,re)}else if(w($t.type,"viz_violin")){const ie=(Tt=$t.options)==null?void 0:Tt.vizViolin;if(!ie)continue;const Xe=n(R)[$t.id],Jt=w(typeof Xe,"number")?Xe:w(typeof $t.width,"number")?$t.width:ie.width??n(a).forestWidth;let Ct=(Ot=ie.axisRange)==null?void 0:Ot[0],st=(Vt=ie.axisRange)==null?void 0:Vt[1];if(he(Ct,null)||he(st,null)){const fe=[];for(const Re of n(i))if(w(Re.type,"data"))for(const Oe of ie.effects){const ue=Re.row.metadata[Oe.data];ue&&Array.isArray(ue)&&fe.push(...ue.filter(Ut=>he(Ut,null,!1)&&!Number.isNaN(Ut)))}if(fe.length>0){Ct=Ct??Math.min(...fe),st=st??Math.max(...fe);const Re=st-Ct;Ct=Ct-Re*.1,st=st+Re*.1}else Ct=Ct??0,st=st??100}const re=w(ie.scale,"log")?Dr().domain([Math.max(.01,Ct),st]).range([xe,Jt-xe]):Qn().domain([Ct,st]).range([xe,Jt-xe]);E.set($t.id,re)}}return E}),"vizColumnScales"),Sn=v(m(()=>{var j;const E=new Map,z=Nn;for(const Y of n(g)){const wt=Y.column,Mt=(j=wt.options)==null?void 0:j.forest,jt=n(R)[wt.id],Nt=w(typeof jt,"number")?jt:w(typeof wt.width,"number")?wt.width:(Mt==null?void 0:Mt.width)??n(a).forestWidth,Tt=w(Mt==null?void 0:Mt.scale,"log"),Ot=n(c).axisLimits,Vt=z,Ve=Math.max(Nt-z,Vt+50);if(Tt){const $t=[Math.max(Ot[0],.01),Math.max(Ot[1],.02)];E.set(wt.id,Dr().domain($t).range([Vt,Ve]))}else E.set(wt.id,Qn().domain(Ot).range([Vt,Ve]))}return E}),"forestColumnScales");v(Wt(!1),"resizingPlot");let sn=v(Wt(null),"resizingColumn"),Xt=0,At=0;function We(E,z,j){var Y;(Y=n(r))!=null&&Y.interaction.enableResize&&(E.preventDefault(),E.stopPropagation(),at(sn,z,!0),Xt=E.clientX,At=j,document.addEventListener("pointermove",rr),document.addEventListener("pointerup",hr))}function rr(E){if(!n(sn))return;const z=E.clientX-Xt,j=Math.max(40,At+z);e.store.setColumnWidth(n(sn),j)}function hr(){at(sn,null),document.removeEventListener("pointermove",rr),document.removeEventListener("pointerup",hr)}function _n(E,z){e.store.setHovered(E),e.store.setTooltip(E,{x:z.clientX,y:z.clientY})}function Je(){e.store.setHovered(null),e.store.setTooltip(null,null)}const En=v(m(()=>n(l)?`
      --wf-max-width: ${n(P)?`${n(P)}px`:"none"};
      --wf-max-height: ${n(T)?`${n(T)}px`:"none"};
      --wf-bg: ${n(l).colors.background};
      --wf-fg: ${n(l).colors.foreground};
      --wf-primary: ${n(l).colors.primary};
      --wf-secondary: ${n(l).colors.secondary};
      --wf-muted: ${n(l).colors.muted};
      --wf-border: ${n(l).colors.border};
      --wf-row-bg: ${n(l).colors.rowBg};
      --wf-alt-bg: ${n(l).colors.altBg};
      --wf-interval-line: ${n(l).colors.intervalLine};
      --wf-interval-positive: ${n(l).colors.intervalPositive};
      --wf-interval-negative: ${n(l).colors.intervalNegative};
      --wf-summary-fill: ${n(l).colors.summaryFill};
      --wf-summary-border: ${n(l).colors.summaryBorder};
      --wf-accent: ${n(l).colors.accent};
      --wf-badge-success: ${Ci.success};
      --wf-badge-warning: ${Ci.warning};
      --wf-badge-error: ${Ci.error};
      --wf-badge-info: ${Ci.info};
      --wf-badge-muted: ${n(l).colors.muted};
      --wf-font-family: ${n(l).typography.fontFamily};
      --wf-font-size-sm: ${n(l).typography.fontSizeSm};
      --wf-font-size-base: ${n(l).typography.fontSizeBase};
      --wf-font-size-lg: ${n(l).typography.fontSizeLg};
      --wf-font-weight-normal: ${n(l).typography.fontWeightNormal};
      --wf-font-weight-medium: ${n(l).typography.fontWeightMedium};
      --wf-font-weight-bold: ${n(l).typography.fontWeightBold};
      --wf-line-height: ${n(l).typography.lineHeight};
      --wf-header-font-scale: ${n(l).typography.headerFontScale??1.05};
      --wf-row-height: ${n(l).spacing.rowHeight}px;
      --wf-header-height: ${n(l).spacing.headerHeight}px;
      --wf-header-row-height: ${n(l).spacing.headerHeight/n(Yt)}px;
      --wf-header-depth: ${n(Yt)};
      --wf-padding: ${n(l).spacing.padding}px;
      --wf-container-padding: ${n(l).spacing.containerPadding}px;
      --wf-cell-padding-x: ${n(l).spacing.cellPaddingX}px;
      --wf-cell-padding-y: ${n(l).spacing.cellPaddingY}px;
      --wf-axis-gap: ${n(l).spacing.axisGap??Yn.DEFAULT_AXIS_GAP}px;
      --wf-axis-height: ${n(a).axisHeight}px;
      --wf-group-padding: ${n(l).spacing.groupPadding??8}px;
      --wf-column-gap: ${n(l).spacing.columnGap??8}px;
      --wf-plot-width: ${n(a).forestWidth}px;
      --wf-point-size: ${n(l).shapes.pointSize}px;
      --wf-line-width: ${n(l).shapes.lineWidth}px;
      --wf-border-radius: ${n(l).shapes.borderRadius}px;
      --wf-container-border: ${n(l).layout.containerBorder?"1px solid var(--wf-border)":"none"};
      --wf-container-border-radius: ${n(l).layout.containerBorderRadius}px;
      --wf-group-header-opacity: ${nd};
      --wf-row-hover-opacity: ${rd};
      --wf-row-selected-opacity: ${od};
      --wf-row-selected-hover-opacity: ${id};
      --wf-actual-scale: ${n(S)};
      --wf-zoom: ${n(k)};
    `.trim():""),"cssVars");var jr={...He()},xn=dv();Gn("keydown",$o,ot);let Ye;var un=Q(xn);{var Ln=E=>{var z=fv(),j=mt(z);I(()=>Fn(j,{get store(){return e.store},get enableExport(){return n(ft)},get enableThemes(){return n(G)},get onThemeChange(){return e.onThemeChange}}),"component",B,852,4,{componentTag:"ControlToolbar"});var Y=rt(j,2);let wt;{const ue=Fu(B,function(ht,K=Bs,U=Bs){Lu(...arguments);const zt=v(m(()=>Pp(K(),U())),"cellStyle");n(zt);var lt=Et(),Pe=mt(lt);{var se=ve=>{{let Le=m(()=>zp(n(o),U())),we=m(()=>{var yt;return(yt=U().options)==null?void 0:yt.bar});I(()=>xo(ve,{get value(){return K().metadata[U().field]},get maxValue(){return n(Le)},get options(){return n(we)}}),"component",B,865,10,{componentTag:"CellBar"})}},oe=ve=>{var Le=Et(),we=mt(Le);{var yt=Bt=>{{let ae=m(()=>{var Ce;return(Ce=U().options)==null?void 0:Ce.pvalue});I(()=>Uo(Bt,{get value(){return K().metadata[U().field]},get options(){return n(ae)},get cellStyle(){return n(zt)}}),"component",B,871,10,{componentTag:"CellPvalue"})}},St=Bt=>{var ae=Et(),Ce=mt(ae);{var hn=It=>{{let de=m(()=>{var vt;return(vt=U().options)==null?void 0:vt.sparkline});I(()=>Wn(It,{get data(){return K().metadata[U().field]},get options(){return n(de)}}),"component",B,877,10,{componentTag:"CellSparkline"})}},Zt=It=>{var de=Et(),vt=mt(de);{var et=te=>{{let be=m(()=>{var Te;return(Te=U().options)==null?void 0:Te.icon});I(()=>Ri(te,{get value(){return K().metadata[U().field]},get options(){return n(be)}}),"component",B,882,10,{componentTag:"CellIcon"})}},Ft=te=>{var be=Et(),Te=mt(be);{var me=Ze=>{{let gn=m(()=>{var ln;return(ln=U().options)==null?void 0:ln.badge});I(()=>zi(Ze,{get value(){return K().metadata[U().field]},get options(){return n(gn)}}),"component",B,887,10,{componentTag:"CellBadge"})}},Kt=Ze=>{var gn=Et(),ln=mt(gn);{var en=De=>{{let oi=m(()=>{var ii;return(ii=U().options)==null?void 0:ii.stars});I(()=>So(De,{get value(){return K().metadata[U().field]},get options(){return n(oi)}}),"component",B,892,10,{componentTag:"CellStars"})}},ye=De=>{var oi=Et(),ii=mt(oi);{var zo=$n=>{{let si=m(()=>{var li;return(li=U().options)==null?void 0:li.img});I(()=>Eo($n,{get value(){return K().metadata[U().field]},get options(){return n(si)}}),"component",B,897,10,{componentTag:"CellImg"})}},ai=$n=>{var si=Et(),li=mt(si);{var mv=ci=>{{let Sa=m(()=>{var Ea;return(Ea=U().options)==null?void 0:Ea.reference});I(()=>Br(ci,{get value(){return K().metadata[U().field]},get metadata(){return K().metadata},get options(){return n(Sa)}}),"component",B,902,10,{componentTag:"CellReference"})}},yv=ci=>{var Sa=Et(),Ea=mt(Sa);{var _v=fi=>{{let ka=m(()=>{var Ca;return(Ca=U().options)==null?void 0:Ca.range});I(()=>Ii(fi,{get value(){return K().metadata[U().field]},get metadata(){return K().metadata},get options(){return n(ka)}}),"component",B,908,10,{componentTag:"CellRange"})}},xv=fi=>{var ka=Et(),Ca=mt(ka);{var wv=ui=>{{let Ta=m(()=>Qo(K().metadata[U().field],U().options));I(()=>cr(ui,{get value(){return n(Ta)},get cellStyle(){return n(zt)}}),"component",B,914,10,{componentTag:"CellContent"})}},bv=ui=>{var Ta=Et(),Mv=mt(Ta);{var Sv=di=>{{let Io=m(()=>ws(K(),U().options));I(()=>cr(di,{get value(){return n(Io)},get cellStyle(){return n(zt)}}),"component",B,916,10,{componentTag:"CellContent"})}},Ev=di=>{var Io=Et(),kv=mt(Io);{var Cv=hi=>{{let Hs=m(()=>{var Kc,Qc,Jc,tf,ef,nf;return bs((Qc=(Kc=U().options)==null?void 0:Kc.interval)!=null&&Qc.point?K().metadata[U().options.interval.point]:void 0,(tf=(Jc=U().options)==null?void 0:Jc.interval)!=null&&tf.lower?K().metadata[U().options.interval.lower]:void 0,(nf=(ef=U().options)==null?void 0:ef.interval)!=null&&nf.upper?K().metadata[U().options.interval.upper]:void 0,U().options)});I(()=>cr(hi,{get value(){return n(Hs)},get cellStyle(){return n(zt)}}),"component",B,918,10,{componentTag:"CellContent"})}},Tv=hi=>{{let Hs=m(()=>K().metadata[U().field]??"");I(()=>cr(hi,{get value(){return n(Hs)},get cellStyle(){return n(zt)}}),"component",B,925,10,{componentTag:"CellContent"})}};I(()=>X(kv,hi=>{w(U().type,"interval")?hi(Cv):hi(Tv,!1)},!0),"if",B,917,8)}F(di,Io)};I(()=>X(Mv,di=>{var Io;w(U().type,"custom")&&((Io=U().options)!=null&&Io.events)?di(Sv):di(Ev,!1)},!0),"if",B,915,8)}F(ui,Ta)};I(()=>X(Ca,ui=>{w(U().type,"numeric")?ui(wv):ui(bv,!1)},!0),"if",B,913,8)}F(fi,ka)};I(()=>X(Ea,fi=>{w(U().type,"range")?fi(_v):fi(xv,!1)},!0),"if",B,907,8)}F(ci,Sa)};I(()=>X(li,ci=>{w(U().type,"reference")?ci(mv):ci(yv,!1)},!0),"if",B,901,8)}F($n,si)};I(()=>X(ii,$n=>{w(U().type,"img")?$n(zo):$n(ai,!1)},!0),"if",B,896,8)}F(De,oi)};I(()=>X(ln,De=>{w(U().type,"stars")?De(en):De(ye,!1)},!0),"if",B,891,8)}F(Ze,gn)};I(()=>X(Te,Ze=>{w(U().type,"badge")?Ze(me):Ze(Kt,!1)},!0),"if",B,886,8)}F(te,be)};I(()=>X(vt,te=>{w(U().type,"icon")?te(et):te(Ft,!1)},!0),"if",B,881,8)}F(It,de)};I(()=>X(Ce,It=>{w(U().type,"sparkline")?It(hn):It(Zt,!1)},!0),"if",B,876,8)}F(Bt,ae)};I(()=>X(we,Bt=>{w(U().type,"pvalue")?Bt(yt):Bt(St,!1)},!0),"if",B,870,8)}F(ve,Le)};I(()=>X(Pe,ve=>{w(U().type,"bar")?ve(se):ve(oe,!1)}),"if",B,864,8)}F(ht,lt)});var Mt=Q(Y);{var jt=ht=>{{let K=m(()=>{var zt;return(zt=n(r).labels)==null?void 0:zt.title}),U=m(()=>{var zt;return(zt=n(r).labels)==null?void 0:zt.subtitle});I(()=>Kn(ht,{get title(){return n(K)},get subtitle(){return n(U)}}),"component",B,858,8,{componentTag:"PlotHeader"})}};I(()=>X(Mt,ht=>{n(x)&&ht(jt)}),"if",B,857,6)}var Nt=rt(Mt,2);let Ut,dn;var Tt=Q(Nt);let gr;var Ot=Q(Tt),Vt=Q(Ot),Ve=rt(Ot,2);{var $t=ht=>{var K=Lp();K.__pointerdown=U=>We(U,"__label__",n(R).__label__??150),F(ht,K)};I(()=>X(Ve,ht=>{var K;(K=n(r))!=null&&K.interaction.enableResize&&ht($t)}),"if",B,939,10)}yo(Tt,ht=>at(Lt,ht),()=>n(Lt));var xe=rt(Tt,2);yn(()=>n(Ae),ht=>ht.col.id),I(()=>ze(xe,17,()=>n(Ae),ht=>ht.col.id,(ht,K)=>{var U=Et(),zt=mt(U);{var lt=se=>{var oe=Dp();let ve;var Le=Q(oe),we=Q(Le,!0);J(()=>{ve=Ie(oe,"",ve,{"grid-column":`${n(K).gridColumnStart??""} / span ${n(K).colspan??""}`,"grid-row":`${n(K).rowStart??""} / span ${n(K).rowSpan??""}`}),Qt(we,n(K).col.header)}),F(se,oe)},Pe=se=>{var oe=Et(),ve=mt(oe);{var Le=yt=>{const St=v(m(()=>n(K).col),"column");n(St);const Bt=v(m(()=>{var vt,et,Ft,te,be,Te,me,Kt;return w(n(St).type,"forest")?((et=(vt=n(St).options)==null?void 0:vt.forest)==null?void 0:et.width)??n(a).forestWidth:w(n(St).type,"viz_bar")?((te=(Ft=n(St).options)==null?void 0:Ft.vizBar)==null?void 0:te.width)??n(a).forestWidth:w(n(St).type,"viz_boxplot")?((Te=(be=n(St).options)==null?void 0:be.vizBoxplot)==null?void 0:Te.width)??n(a).forestWidth:w(n(St).type,"viz_violin")?((Kt=(me=n(St).options)==null?void 0:me.vizViolin)==null?void 0:Kt.width)??n(a).forestWidth:n(a).forestWidth}),"vizDefaultWidth");n(Bt);var ae=Vp();let Ce;var hn=Q(ae);{var Zt=vt=>{var et=Bp(),Ft=Q(et,!0);J(()=>Qt(Ft,n(St).header)),F(vt,et)};I(()=>X(hn,vt=>{n(St).header&&vt(Zt)}),"if",B,977,14)}var It=rt(hn,2);{var de=vt=>{var et=Gp();et.__pointerdown=Ft=>We(Ft,n(St).id,n(R)[n(St).id]??n(Bt)),F(vt,et)};I(()=>X(It,vt=>{var et;(et=n(r))!=null&&et.interaction.enableResize&&vt(de)}),"if",B,980,14)}oa(ae,(vt,et)=>Ue==null?void 0:Ue(vt,et),()=>n(St).id),J(()=>Ce=Ie(ae,"",Ce,{"grid-column":n(K).gridColumnStart,"grid-row":`${n(K).rowStart??""} / span ${n(K).rowSpan??""}`})),F(yt,ae)},we=yt=>{const St=v(m(()=>n(K).col),"column");n(St);var Bt=$p();let ae;var Ce=Q(Bt),hn=Q(Ce,!0);var Zt=rt(Ce,2);{var It=de=>{var vt=Op();vt.__pointerdown=et=>We(et,n(St).id,n(R)[n(St).id]??(w(typeof n(St).width,"number")?n(St).width:80)),F(de,vt)};I(()=>X(Zt,de=>{var vt;(vt=n(r))!=null&&vt.interaction.enableResize&&de(It)}),"if",B,998,14)}J(()=>{ae=Ie(Bt,"",ae,{"grid-column":n(K).gridColumnStart,"grid-row":`${n(K).rowStart??""} / span ${n(K).rowSpan??""}`,"text-align":n(St).headerAlign??n(St).align}),Qt(hn,n(St).header)}),F(yt,Bt)};I(()=>X(ve,yt=>{n(K).isForest?yt(Le):yt(we,!1)},!0),"if",B,959,10)}F(se,oe)};I(()=>X(zt,se=>{n(K).isGroupHeader?se(lt):se(Pe,!1)}),"if",B,950,10)}F(ht,U)}),"each",B,949,8);var ie=rt(xe,2);yn(()=>n(i),(ht,K)=>ut(ht)),I(()=>ze(ie,19,()=>n(i),(ht,K)=>ut(ht,K),(ht,K,U)=>{const zt=v(m(()=>w(n(K).type,"group_header")),"isGroupHeader");n(zt);const lt=v(m(()=>n(zt)?null:n(K).row),"row");n(lt);const Pe=v(m(()=>n(K).depth),"rowDepth");n(Pe);const se=v(m(()=>n(lt)?kt(n(lt).id):!1),"selected");n(se);const oe=v(m(()=>n(lt)?Ip(n(lt).style,n(U),n(u)):""),"rowClasses");n(oe);const ve=v(m(()=>n(lt)?Fp(n(lt).style,n(Pe)):""),"rowStyles");n(ve);const Le=v(m(()=>{var vt,et;return w((et=(vt=n(lt))==null?void 0:vt.style)==null?void 0:et.type,"spacer")}),"isSpacerRow");n(Le);const we=v(m(()=>n(Yt)+1+n(U)),"gridRow");n(we);const yt=v(m(()=>n(zt)?ge(n(Pe)+1,n(l)):void 0),"groupBg");n(yt);var St=Zp(),Bt=mt(St);let ae,Ce;Bt.__click=function(...vt){sr(()=>n(zt)?()=>e.store.toggleGroup(n(K).group.id):n(lt)?()=>e.store.selectRow(n(lt).id):void 0,this,vt,B,[1034,21])},Bt.__keydown=function(...vt){sr(()=>n(zt)?et=>(w(et.key,"Enter")||w(et.key," "))&&e.store.toggleGroup(n(K).group.id):void 0,this,vt,B,[1035,23])};var hn=Q(Bt);{var Zt=vt=>{{let et=m(()=>n(K).depth+1);I(()=>Xo(vt,{get group(){return n(K).group},get rowCount(){return n(K).rowCount},get level(){return n(et)},get theme(){return n(l)}}),"component",B,1040,14,{componentTag:"GroupHeader"})}},It=vt=>{var et=Et(),Ft=mt(et);{var te=be=>{var Te=Xp(),me=mt(Te);{var Kt=en=>{var ye=jp(),De=Q(ye,!0);J(()=>Qt(De,n(lt).style.icon)),F(en,ye)};I(()=>X(me,en=>{var ye;(ye=n(lt).style)!=null&&ye.icon&&en(Kt)}),"if",B,1047,14)}var Ze=rt(me),gn=rt(Ze);{var ln=en=>{var ye=qp(),De=Q(ye,!0);J(()=>Qt(De,n(lt).style.badge)),F(en,ye)};I(()=>X(gn,en=>{var ye;(ye=n(lt).style)!=null&&ye.badge&&en(ln)}),"if",B,1049,14)}J(()=>Qt(Ze,` ${n(lt).label??""} `)),F(be,Te)};I(()=>X(Ft,be=>{n(lt)&&be(te)},!0),"if",B,1046,12)}F(vt,et)};I(()=>X(hn,vt=>{n(zt)?vt(Zt):vt(It,!1)}),"if",B,1039,12)}var de=rt(Bt,2);yn(()=>n(h),vt=>vt.id),I(()=>ze(de,17,()=>n(h),vt=>vt.id,(vt,et)=>{var Ft=Et(),te=mt(Ft);{var be=me=>{var Kt=Up();let Ze,gn;Kt.__click=function(...ln){sr(()=>n(lt)?()=>e.store.selectRow(n(lt).id):void 0,this,ln,B,[1068,25])},J(()=>{Ze=Tn(Kt,1,`grid-cell data-cell plot-cell ${n(oe)??""}`,"svelte-14l8yxx",Ze,{"group-row":n(zt),selected:n(se),hovered:n(lt)&&w(n(M),n(lt).id),"spacer-row":n(Le)}),gn=Ie(Kt,n(ve)||void 0,gn,{"grid-row":n(we),"background-color":n(yt)})}),Gn("mouseenter",Kt,function(...ln){sr(()=>n(lt)?en=>_n(n(lt).id,en):void 0,this,ln,B,[1066,30])}),Gn("mouseleave",Kt,function(...ln){sr(()=>n(lt)?()=>Je():void 0,this,ln,B,[1067,30])}),F(me,Kt)},Te=me=>{var Kt=Yp();let Ze,gn;Kt.__click=function(...ye){sr(()=>n(lt)?()=>e.store.selectRow(n(lt).id):void 0,this,ye,B,[1085,25])};var ln=Q(Kt);{var en=ye=>{I(()=>ue(ye,()=>n(lt),()=>n(et)),"render",B,1088,18)};I(()=>X(ln,ye=>{n(lt)&&ye(en)}),"if",B,1087,16)}J(()=>{Ze=Tn(Kt,1,`grid-cell data-cell ${n(oe)??""}`,"svelte-14l8yxx",Ze,{"group-row":n(zt),selected:n(se),hovered:n(lt)&&w(n(M),n(lt).id),"spacer-row":n(Le),"wrap-enabled":n(et).wrap}),gn=Ie(Kt,n(ve)||void 0,gn,{"grid-row":n(we),"background-color":n(yt),"text-align":n(et).align})}),Gn("mouseenter",Kt,function(...ye){sr(()=>n(lt)?De=>_n(n(lt).id,De):void 0,this,ye,B,[1083,30])}),Gn("mouseleave",Kt,function(...ye){sr(()=>n(lt)?()=>Je():void 0,this,ye,B,[1084,30])}),F(me,Kt)};I(()=>X(te,me=>{bt.includes(n(et).type)?me(be):me(Te,!1)}),"if",B,1055,12)}F(vt,Ft)}),"each",B,1054,10),J(()=>{var vt,et,Ft,te;ae=Tn(Bt,1,`grid-cell data-cell label-cell ${n(oe)??""}`,"svelte-14l8yxx",ae,{"group-row":n(zt),selected:n(se),hovered:n(lt)&&w(n(M),n(lt).id),"spacer-row":n(Le)}),Ce=Ie(Bt,n(ve)||void 0,Ce,{"grid-row":n(we),"background-color":n(yt),"padding-left":n(zt)?`${n(Pe)*12}px`:((et=(vt=n(lt))==null?void 0:vt.style)==null?void 0:et.indent)??n(Pe)?`${(((te=(Ft=n(lt))==null?void 0:Ft.style)==null?void 0:te.indent)??n(Pe))*12}px`:void 0}),N(Bt,"role",n(zt)?"button":void 0),N(Bt,"tabindex",n(zt)?0:void 0)}),Gn("mouseenter",Bt,function(...vt){sr(()=>n(lt)?et=>_n(n(lt).id,et):void 0,this,vt,B,[1036,26])}),Gn("mouseleave",Bt,function(...vt){sr(()=>n(lt)?()=>Je():void 0,this,vt,B,[1037,26])}),F(ht,St)}),"each",B,1010,8);var Xe=rt(ie,2);{var Jt=ht=>{const K=v(m(()=>n(Yt)+1+n(i).length),"axisRowNum");n(K);var U=Jp(),zt=mt(U);yn(()=>n(h),se=>se.id),I(()=>ze(zt,19,()=>n(h),se=>se.id,(se,oe,ve)=>{var Le=Et(),we=mt(Le);{var yt=Bt=>{var ae=Kp();let Ce;J(()=>Ce=Ie(ae,"",Ce,{"grid-column":2+n(ve),"grid-row":n(K)})),F(Bt,ae)},St=Bt=>{var ae=Qp();let Ce;J(()=>Ce=Ie(ae,"",Ce,{"grid-column":2+n(ve),"grid-row":n(K)})),F(Bt,ae)};I(()=>X(we,Bt=>{bt.includes(n(oe).type)?Bt(yt):Bt(St,!1)}),"if",B,1099,12)}F(se,Le)}),"each",B,1098,10);var lt=rt(zt,2);let Pe;J(()=>Pe=Ie(lt,"",Pe,{"grid-column":"1","grid-row":n(K)})),F(ht,U)};I(()=>X(Xe,ht=>{n(y)&&ht(Jt)}),"if",B,1096,8)}var Ct=rt(Xe,2);yn(()=>n(g),ht=>ht.column.id),I(()=>ze(Ct,17,()=>n(g),ht=>ht.column.id,(ht,K)=>{const U=v(m(()=>{var et;return(et=n(K).column.options)==null?void 0:et.forest}),"forestOpts");n(U);const zt=v(m(()=>n(R)[n(K).column.id]),"dynamicForestWidth");n(zt);const lt=v(m(()=>{var et;return w(typeof n(zt),"number")?n(zt):w(typeof n(K).column.width,"number")?n(K).column.width:((et=n(U))==null?void 0:et.width)??n(a).forestWidth}),"forestWidth");n(lt);const Pe=v(m(()=>n(pe).get(n(K).column.id)??0),"forestLeft");n(Pe);const se=v(m(()=>{var et;return((et=n(l))==null?void 0:et.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(se);const oe=v(m(()=>{var et;return((et=n(U))==null?void 0:et.nullValue)??n(a).nullValue}),"nullValue");n(oe);const ve=v(m(()=>{var et;return((et=n(U))==null?void 0:et.axisLabel)??"Effect"}),"axisLabel");n(ve);const Le=v(m(()=>{var et;return w((et=n(U))==null?void 0:et.scale,"log")}),"isLog");n(Le);const we=v(m(()=>n(Sn).get(n(K).column.id)??n(s)),"colScale");n(we);var yt=rv();let St;var Bt=Q(yt);N(Bt,"y1",0);var ae=rt(Bt);{var Ce=et=>{const Ft=v(m(()=>{var me;return[...n(r).annotations??[],...((me=n(U))==null?void 0:me.annotations)??[]]}),"allAnnotations");n(Ft);const te=v(m(()=>Ht(n(Ft))),"annotationLabelOffsets");n(te);var be=Et(),Te=mt(be);yn(()=>n(Ft),me=>me.id),I(()=>ze(Te,17,()=>n(Ft),me=>me.id,(me,Kt)=>{var Ze=Et(),gn=mt(Ze);{var ln=en=>{var ye=ev(),De=mt(ye);N(De,"y1",0);var oi=rt(De);{var ii=zo=>{const ai=v(m(()=>n(te)[n(Kt).id]??0),"yOffset");n(ai);var $n=tv(),si=Q($n,!0);J(li=>{N($n,"x",li),N($n,"y",-4+n(ai)),N($n,"fill",n(Kt).color??"var(--wf-secondary)"),Qt(si,n(Kt).label)},[()=>n(we)(n(Kt).x)]),F(zo,$n)};I(()=>X(oi,zo=>{n(Kt).label&&zo(ii)}),"if",B,1155,16)}J((zo,ai)=>{N(De,"x1",zo),N(De,"x2",ai),N(De,"y2",n(nt)),N(De,"stroke",n(Kt).color??"var(--wf-accent)"),N(De,"stroke-width",n(Kt).width??1.5),N(De,"stroke-opacity",n(Kt).opacity??.6),N(De,"stroke-dasharray",w(n(Kt).style,"dashed")?"6,4":w(n(Kt).style,"dotted")?"2,2":"none")},[()=>n(we)(n(Kt).x),()=>n(we)(n(Kt).x)]),F(en,ye)};I(()=>X(gn,en=>{w(n(Kt).type,"reference_line")&&en(ln)}),"if",B,1144,14)}F(me,Ze)}),"each",B,1143,14),F(et,be)};I(()=>X(ae,et=>{et(Ce)}),"if",B,1140,12)}var hn=rt(ae);yn(()=>n(i),(et,Ft)=>ut(et,Ft)),I(()=>ze(hn,19,()=>n(i),(et,Ft)=>ut(et,Ft),(et,Ft,te)=>{var be=Et(),Te=mt(be);{var me=Kt=>{const Ze=v(m(()=>n(tt).positions[n(te)]??n(te)*n(a).rowHeight),"rowY");n(Ze);const gn=v(m(()=>n(tt).heights[n(te)]??n(a).rowHeight),"rowH");n(gn);{let ln=m(()=>n(Ze)+n(gn)/2),en=m(()=>({...n(a),forestWidth:n(lt)}));I(()=>$e(Kt,{get row(){return n(Ft).row},get yPosition(){return n(ln)},get xScale(){return n(we)},get layout(){return n(en)},get theme(){return n(l)},get clipBounds(){return n(f)},get isLog(){return n(Le)},get weightCol(){return n(r).data.weightCol},get forestColumnOptions(){return n(U)},onRowClick:()=>e.store.selectRow(n(Ft).row.id),onRowHover:(ye,De)=>{e.store.setHovered(ye?n(Ft).row.id:null),ye&&De?e.store.setTooltip(n(Ft).row.id,{x:De.clientX,y:De.clientY}):e.store.setTooltip(null,null)}}),"component",B,1177,16,{componentTag:"RowInterval"})}};I(()=>X(Te,Kt=>{w(n(Ft).type,"data")&&Kt(me)}),"if",B,1174,14)}F(et,be)}),"each",B,1173,12);var Zt=rt(hn);{var It=et=>{{let Ft=m(()=>n(nt)+n(a).rowHeight/2),te=m(()=>({...n(a),forestWidth:n(lt)}));I(()=>to(et,{get point(){return n(r).data.overall.point},get lower(){return n(r).data.overall.lower},get upper(){return n(r).data.overall.upper},get yPosition(){return n(Ft)},get xScale(){return n(we)},get layout(){return n(te)},get theme(){return n(l)}}),"component",B,1205,14,{componentTag:"SummaryDiamond"})}};I(()=>X(Zt,et=>{n(r).data.overall&&n(a).showOverallSummary&&w(typeof n(r).data.overall.point,"number")&&!Number.isNaN(n(r).data.overall.point)&&w(typeof n(r).data.overall.lower,"number")&&!Number.isNaN(n(r).data.overall.lower)&&w(typeof n(r).data.overall.upper,"number")&&!Number.isNaN(n(r).data.overall.upper)&&et(It)}),"if",B,1201,12)}var de=rt(Zt);{var vt=et=>{var Ft=nv(),te=Q(Ft);{let be=m(()=>({...n(a),forestWidth:n(lt)}));I(()=>Hn(te,{get xScale(){return n(we)},get layout(){return n(be)},get theme(){return n(l)},get axisLabel(){return n(ve)},position:"bottom",get plotHeight(){return n(a).plotHeight},get baseTicks(){return n(c).ticks}}),"component",B,1219,16,{componentTag:"EffectAxis"})}J(()=>N(Ft,"transform",`translate(0, ${n(nt)+n(se)})`)),F(et,Ft)};I(()=>X(de,et=>{var Ft;w((Ft=n(U))==null?void 0:Ft.showAxis,!1,!1)&&et(vt)}),"if",B,1217,12)}J((et,Ft)=>{N(yt,"width",n(lt)),N(yt,"height",n(nt)+n(a).axisHeight),N(yt,"viewBox",`0 0 ${n(lt)??""} ${n(nt)+n(a).axisHeight}`),St=Ie(yt,"",St,{top:`${n(qe)??""}px`,left:`${n(Pe)??""}px`}),N(Bt,"x1",et),N(Bt,"x2",Ft),N(Bt,"y2",n(nt))},[()=>n(we)(n(oe)),()=>n(we)(n(oe))]),F(ht,yt)}),"each",B,1110,8);var st=rt(Ct,2);yn(()=>n(p).filter(ht=>w(ht.column.type,"viz_bar")),ht=>ht.column.id),I(()=>ze(st,17,()=>n(p).filter(ht=>w(ht.column.type,"viz_bar")),ht=>ht.column.id,(ht,K)=>{const U=v(m(()=>{var yt;return(yt=n(K).column.options)==null?void 0:yt.vizBar}),"vizOpts");n(U);const zt=v(m(()=>n(R)[n(K).column.id]),"dynamicVizWidth");n(zt);const lt=v(m(()=>{var yt;return w(typeof n(zt),"number")?n(zt):n(K).column.width??((yt=n(U))==null?void 0:yt.width)??n(a).forestWidth}),"vizWidth");n(lt);const Pe=v(m(()=>n(pe).get(n(K).column.id)??0),"vizLeft");n(Pe);const se=v(m(()=>{var yt;return((yt=n(l))==null?void 0:yt.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(se);const oe=v(m(()=>n(Me).get(n(K).column.id)),"sharedScale");n(oe);var ve=Et(),Le=mt(ve);{var we=yt=>{var St=iv();let Bt;var ae=Q(St);yn(()=>n(i),(Zt,It)=>ut(Zt,It)),I(()=>ze(ae,19,()=>n(i),(Zt,It)=>ut(Zt,It),(Zt,It,de)=>{var vt=Et(),et=mt(vt);{var Ft=te=>{const be=v(m(()=>n(tt).positions[n(de)]??n(de)*n(a).rowHeight),"rowY");n(be);const Te=v(m(()=>n(tt).heights[n(de)]??n(a).rowHeight),"rowH");n(Te);{let me=m(()=>n(be)+n(Te)/2);I(()=>eo(te,{get row(){return n(It).row},get yPosition(){return n(me)},get rowHeight(){return n(Te)},get width(){return n(lt)},get options(){return n(U)},get theme(){return n(l)},get sharedScale(){return n(oe)}}),"component",B,1247,18,{componentTag:"VizBar"})}};I(()=>X(et,te=>{w(n(It).type,"data")&&te(Ft)}),"if",B,1244,16)}F(Zt,vt)}),"each",B,1243,14);var Ce=rt(ae);{var hn=Zt=>{var It=ov(),de=Q(It);{let vt=m(()=>({...n(a),forestWidth:n(lt),nullValue:0})),et=m(()=>n(U).axisLabel??"Value");I(()=>Hn(de,{get xScale(){return n(oe)},get layout(){return n(vt)},get theme(){return n(l)},get axisLabel(){return n(et)},position:"bottom",get plotHeight(){return n(nt)},get baseTicks(){return n(U).axisTicks},get gridlines(){return n(U).axisGridlines}}),"component",B,1262,18,{componentTag:"EffectAxis"})}J(()=>N(It,"transform",`translate(0, ${n(nt)+n(se)})`)),F(Zt,It)};I(()=>X(Ce,Zt=>{w(n(U).showAxis,!1,!1)&&n(oe)&&Zt(hn)}),"if",B,1260,14)}J(()=>{N(St,"width",n(lt)),N(St,"height",n(nt)+n(a).axisHeight),N(St,"viewBox",`0 0 ${n(lt)??""} ${n(nt)+n(a).axisHeight}`),Bt=Ie(St,"",Bt,{top:`${n(qe)??""}px`,left:`${n(Pe)??""}px`})}),F(yt,St)};I(()=>X(Le,yt=>{n(U)&&yt(we)}),"if",B,1233,10)}F(ht,ve)}),"each",B,1226,8);var re=rt(st,2);yn(()=>n(p).filter(ht=>w(ht.column.type,"viz_boxplot")),ht=>ht.column.id),I(()=>ze(re,17,()=>n(p).filter(ht=>w(ht.column.type,"viz_boxplot")),ht=>ht.column.id,(ht,K)=>{const U=v(m(()=>{var yt;return(yt=n(K).column.options)==null?void 0:yt.vizBoxplot}),"vizOpts");n(U);const zt=v(m(()=>n(R)[n(K).column.id]),"dynamicVizWidth");n(zt);const lt=v(m(()=>{var yt;return w(typeof n(zt),"number")?n(zt):n(K).column.width??((yt=n(U))==null?void 0:yt.width)??n(a).forestWidth}),"vizWidth");n(lt);const Pe=v(m(()=>n(pe).get(n(K).column.id)??0),"vizLeft");n(Pe);const se=v(m(()=>{var yt;return((yt=n(l))==null?void 0:yt.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(se);const oe=v(m(()=>n(Me).get(n(K).column.id)),"sharedScale");n(oe);var ve=Et(),Le=mt(ve);{var we=yt=>{var St=sv();let Bt;var ae=Q(St);yn(()=>n(i),(Zt,It)=>ut(Zt,It)),I(()=>ze(ae,19,()=>n(i),(Zt,It)=>ut(Zt,It),(Zt,It,de)=>{var vt=Et(),et=mt(vt);{var Ft=te=>{const be=v(m(()=>n(tt).positions[n(de)]??n(de)*n(a).rowHeight),"rowY");n(be);const Te=v(m(()=>n(tt).heights[n(de)]??n(a).rowHeight),"rowH");n(Te);{let me=m(()=>n(be)+n(Te)/2);I(()=>ur(te,{get row(){return n(It).row},get yPosition(){return n(me)},get rowHeight(){return n(Te)},get width(){return n(lt)},get options(){return n(U)},get theme(){return n(l)},get sharedScale(){return n(oe)}}),"component",B,1300,18,{componentTag:"VizBoxplot"})}};I(()=>X(et,te=>{w(n(It).type,"data")&&te(Ft)}),"if",B,1297,16)}F(Zt,vt)}),"each",B,1296,14);var Ce=rt(ae);{var hn=Zt=>{var It=av(),de=Q(It);{let vt=m(()=>({...n(a),forestWidth:n(lt),nullValue:0})),et=m(()=>n(U).axisLabel??"Value");I(()=>Hn(de,{get xScale(){return n(oe)},get layout(){return n(vt)},get theme(){return n(l)},get axisLabel(){return n(et)},position:"bottom",get plotHeight(){return n(nt)},get baseTicks(){return n(U).axisTicks},get gridlines(){return n(U).axisGridlines}}),"component",B,1315,18,{componentTag:"EffectAxis"})}J(()=>N(It,"transform",`translate(0, ${n(nt)+n(se)})`)),F(Zt,It)};I(()=>X(Ce,Zt=>{w(n(U).showAxis,!1,!1)&&n(oe)&&Zt(hn)}),"if",B,1313,14)}J(()=>{N(St,"width",n(lt)),N(St,"height",n(nt)+n(a).axisHeight),N(St,"viewBox",`0 0 ${n(lt)??""} ${n(nt)+n(a).axisHeight}`),Bt=Ie(St,"",Bt,{top:`${n(qe)??""}px`,left:`${n(Pe)??""}px`})}),F(yt,St)};I(()=>X(Le,yt=>{n(U)&&yt(we)}),"if",B,1286,10)}F(ht,ve)}),"each",B,1279,8);var fe=rt(re,2);yn(()=>n(p).filter(ht=>w(ht.column.type,"viz_violin")),ht=>ht.column.id),I(()=>ze(fe,17,()=>n(p).filter(ht=>w(ht.column.type,"viz_violin")),ht=>ht.column.id,(ht,K)=>{const U=v(m(()=>{var yt;return(yt=n(K).column.options)==null?void 0:yt.vizViolin}),"vizOpts");n(U);const zt=v(m(()=>n(R)[n(K).column.id]),"dynamicVizWidth");n(zt);const lt=v(m(()=>{var yt;return w(typeof n(zt),"number")?n(zt):n(K).column.width??((yt=n(U))==null?void 0:yt.width)??n(a).forestWidth}),"vizWidth");n(lt);const Pe=v(m(()=>n(pe).get(n(K).column.id)??0),"vizLeft");n(Pe);const se=v(m(()=>{var yt;return((yt=n(l))==null?void 0:yt.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(se);const oe=v(m(()=>n(Me).get(n(K).column.id)),"sharedScale");n(oe);var ve=Et(),Le=mt(ve);{var we=yt=>{var St=cv();let Bt;var ae=Q(St);yn(()=>n(i),(Zt,It)=>ut(Zt,It)),I(()=>ze(ae,19,()=>n(i),(Zt,It)=>ut(Zt,It),(Zt,It,de)=>{var vt=Et(),et=mt(vt);{var Ft=te=>{const be=v(m(()=>n(tt).positions[n(de)]??n(de)*n(a).rowHeight),"rowY");n(be);const Te=v(m(()=>n(tt).heights[n(de)]??n(a).rowHeight),"rowH");n(Te);{let me=m(()=>n(be)+n(Te)/2);I(()=>Jn(te,{get row(){return n(It).row},get yPosition(){return n(me)},get rowHeight(){return n(Te)},get width(){return n(lt)},get options(){return n(U)},get theme(){return n(l)},get sharedScale(){return n(oe)}}),"component",B,1353,18,{componentTag:"VizViolin"})}};I(()=>X(et,te=>{w(n(It).type,"data")&&te(Ft)}),"if",B,1350,16)}F(Zt,vt)}),"each",B,1349,14);var Ce=rt(ae);{var hn=Zt=>{var It=lv(),de=Q(It);{let vt=m(()=>({...n(a),forestWidth:n(lt),nullValue:0})),et=m(()=>n(U).axisLabel??"Value");I(()=>Hn(de,{get xScale(){return n(oe)},get layout(){return n(vt)},get theme(){return n(l)},get axisLabel(){return n(et)},position:"bottom",get plotHeight(){return n(nt)},get baseTicks(){return n(U).axisTicks},get gridlines(){return n(U).axisGridlines}}),"component",B,1368,18,{componentTag:"EffectAxis"})}J(()=>N(It,"transform",`translate(0, ${n(nt)+n(se)})`)),F(Zt,It)};I(()=>X(Ce,Zt=>{w(n(U).showAxis,!1,!1)&&n(oe)&&Zt(hn)}),"if",B,1366,14)}J(()=>{N(St,"width",n(lt)),N(St,"height",n(nt)+n(a).axisHeight),N(St,"viewBox",`0 0 ${n(lt)??""} ${n(nt)+n(a).axisHeight}`),Bt=Ie(St,"",Bt,{top:`${n(qe)??""}px`,left:`${n(Pe)??""}px`})}),F(yt,St)};I(()=>X(Le,yt=>{n(U)&&yt(we)}),"if",B,1339,10)}F(ht,ve)}),"each",B,1332,8);var Re=rt(Nt,2);{let ht=m(()=>{var U;return(U=n(r).labels)==null?void 0:U.caption}),K=m(()=>{var U;return(U=n(r).labels)==null?void 0:U.footnote});I(()=>Lr(Re,{get caption(){return n(ht)},get footnote(){return n(K)}}),"component",B,1386,6,{componentTag:"PlotFooter"})}yo(Y,ht=>at(V,ht),()=>n(V)),J(()=>{Ut=Tn(Nt,1,"tabviz-main svelte-14l8yxx",null,Ut,{"has-header":n(x)}),dn=Ie(Nt,"",dn,{"grid-template-columns":n(ee)}),gr=Ie(Tt,"",gr,{"grid-row":`1 / span ${n(Yt)??""}`}),Qt(Vt,n(_))})}var Oe=rt(Y,2);{let ue=m(()=>{var Ut,dn;return(dn=(Ut=n(r))==null?void 0:Ut.interaction)==null?void 0:dn.tooltipFields});I(()=>_o(Oe,{get row(){return n(C)},get position(){return n(W)},get fields(){return n(ue)},get theme(){return n(l)}}),"component",B,1390,4,{componentTag:"Tooltip"})}J(()=>wt=Ie(Y,"",wt,{"margin-left":`${n($)??""}px`})),F(E,z)},ri=E=>{var z=uv();F(E,z)};I(()=>X(un,E=>{n(r)?E(Ln):E(ri,!1)}),"if",B,850,2)}return yo(xn,E=>at(A,E),()=>n(A)),J(E=>{Ye=Tn(xn,1,"tabviz-container svelte-14l8yxx",null,Ye,{"auto-fit":n(b),"has-max-width":w(n(P),null,!1),"has-max-height":w(n(T),null,!1),zoomed:w(n(k),1,!1)}),N(xn,"data-zoom",`${E??""}%`),Ie(xn,`${n(En)??""}; ${n(b)&&n(it)>0?`height: ${n(it)}px`:""}`)},[()=>Math.round(n(S)*100)]),F(t,xn),ke(jr)}mo(["pointerdown","click","keydown"]);function jc(){let t=v(Wt(null),"spec"),e=v(Wt(800),"initialWidth"),r=v(Wt(400),"initialHeight"),o=v(Wt(yr(new Set)),"selectedRowIds"),i=v(Wt(yr(new Set)),"collapsedGroups"),a=v(Wt(null),"sortConfig"),s=v(Wt(null),"filterConfig"),c=v(Wt(null),"hoveredRowId"),f=v(Wt(null),"tooltipRowId"),l=v(Wt(null),"tooltipPosition"),u=v(Wt(yr({})),"columnWidths"),h=v(Wt(null),"plotWidthOverride"),d=v(Wt(1),"zoom"),g=v(Wt(!0),"autoFit"),p=v(Wt(null),"maxWidth"),y=v(Wt(null),"maxHeight"),_=v(Wt(!0),"showZoomControls"),x=v(Wt(0),"containerWidth"),C=v(Wt(0),"containerHeight"),W=v(Wt(0),"scalableNaturalWidth"),H=v(Wt(0),"scalableNaturalHeight"),M=v(Wt(null),"containerElementId");const k=v(m(()=>n(x)>0?n(x):n(e)),"effectiveWidth"),b=v(m(()=>n(C)>0?n(C):n(r)),"effectiveHeight"),S=v(m(()=>{if(!n(t))return[];let E=[...n(t).data.rows];return n(s)&&(E=hv(E,n(s))),n(a)&&(E=gv(E,n(a))),E}),"visibleRows"),P=v(m(()=>{var Ve,$t;if(!n(t))return{axisLimits:[0,1],plotRegion:[0,1],ticks:[0,.5,1]};const E=(Ve=n(Z)[0])==null?void 0:Ve.column,j=n(Z).length>0?n(h)??Math.max(n(k)*.25,200):0,Y=($t=E==null?void 0:E.options)==null?void 0:$t.forest,wt=(Y==null?void 0:Y.scale)??"linear",Mt=(Y==null?void 0:Y.nullValue)??(w(wt,"log")?1:0),jt=(Y==null?void 0:Y.effects)??[],Nt=(Y==null?void 0:Y.point)??null,Tt=(Y==null?void 0:Y.lower)??null,Ot=(Y==null?void 0:Y.upper)??null,Vt={...n(t).theme.axis};return Y!=null&&Y.axisRange&&Array.isArray(Y.axisRange)&&w(Y.axisRange.length,2)&&(Vt.rangeMin=Y.axisRange[0],Vt.rangeMax=Y.axisRange[1]),Y!=null&&Y.axisTicks&&Array.isArray(Y.axisTicks)&&(Vt.tickValues=Y.axisTicks),Vl({rows:n(t).data.rows,config:Vt,scale:wt,nullValue:Mt,forestWidth:j,pointSize:n(t).theme.shapes.pointSize,effects:jt,pointCol:Nt,lowerCol:Tt,upperCol:Ot})}),"axisComputation"),T=v(m(()=>{var Tt,Ot;if(!n(t))return Qn().domain([0,1]).range([0,100]);const E=(Tt=n(Z)[0])==null?void 0:Tt.column,z=(Ot=E==null?void 0:E.options)==null?void 0:Ot.forest,j=w((z==null?void 0:z.scale)??"linear","log"),{plotRegion:Y}=n(P),Mt=n(Z).length>0?n(h)??Math.max(n(k)*.25,200):0,jt=Nn,Nt=Math.max(Mt-Nn,jt+50);if(j){const Vt=[Math.max(Y[0],.01),Math.max(Y[1],.02)];return Dr().domain(Vt).range([jt,Nt])}return Qn().domain(Y).range([jt,Nt])}),"xScale");function R(E){const z=[];for(const j of E)j.isGroup?z.push(...R(j.columns)):z.push(j);return z}const A=v(m(()=>n(t)?R(n(t).columns):[]),"allColumns"),V=v(m(()=>n(t)?n(t).columns:[]),"allColumnDefs"),Z=v(m(()=>{if(!n(t))return[];const E=[],z=n(A);for(let j=0;j<z.length;j++)w(z[j].type,"forest")&&E.push({index:j,column:z[j]});return E}),"forestColumns"),ct=v(m(()=>n(Z).length>0),"hasExplicitForestColumns"),gt=v(m(()=>{if(!n(t))return[];const E=[],z=n(A),j=["forest","viz_bar","viz_boxplot","viz_violin"];for(let Y=0;Y<z.length;Y++)j.includes(z[Y].type)&&E.push({index:Y,column:z[Y]});return E}),"vizColumns"),L=v(m(()=>n(gt).length>0),"hasVizColumns"),it=v(m(()=>{const E=new Map;if(!n(t))return E;for(const z of n(t).data.groups)E.set(z.id,z);return E}),"groupMap"),$=v(m(()=>{const E=new Map;if(!n(t))return E;for(const z of n(t).data.groups)E.set(z.id,z.depth);return E}),"groupDepthMap");function ft(E){return E?(n($).get(E)??0)+1:0}function G(E){if(!E)return!1;let z=E;for(;z;){const j=n(it).get(z);if(!j)break;if(j.parentId&&n(i).has(j.parentId))return!0;z=j.parentId}return!1}const ot=v(m(()=>{var jt;if(!n(t))return[];const E=[],z=new Map;for(const Nt of n(S)){const Tt=Nt.groupId??null;z.has(Tt)||z.set(Tt,[]),z.get(Tt).push(Nt)}const j=new Set;for(const Nt of z.keys()){if(!Nt)continue;let Tt=Nt;for(;Tt;)j.add(Tt),Tt=(jt=n(it).get(Tt))==null?void 0:jt.parentId}function Y(Nt){return n(t).data.groups.filter(Tt=>w(Tt.parentId??null,Nt)&&j.has(Tt.id))}function wt(Nt){var Ot;let Tt=((Ot=z.get(Nt))==null?void 0:Ot.length)??0;for(const Vt of Y(Nt))Tt+=wt(Vt.id);return Tt}function Mt(Nt){if(Nt){const Ot=n(it).get(Nt);if(!Ot||G(Nt))return;const Vt=n(i).has(Ot.id),Ve=wt(Nt);if(E.push({type:"group_header",group:{...Ot,collapsed:Vt},rowCount:Ve,depth:Ot.depth}),Vt)return}for(const Ot of Y(Nt))Mt(Ot.id);const Tt=z.get(Nt)??[];for(const Ot of Tt)E.push({type:"data",row:Ot,depth:ft(Ot.groupId)})}return Mt(null),E}),"displayRows"),tt=v(m(()=>{var Jt,Ct,st;if(!n(t))return{totalWidth:n(k),totalHeight:n(b),tableWidth:300,forestWidth:400,headerHeight:36,rowHeight:28,plotHeight:300,axisHeight:32,nullValue:0,summaryYPosition:0,showOverallSummary:!1,rowPositions:[],rowHeights:[]};const E=n(t).theme.spacing.rowHeight,z=n(t).theme.spacing.headerHeight,Y=(n(t).theme.spacing.axisGap??Yn.DEFAULT_AXIS_GAP)+Sr.AXIS_HEIGHT+Sr.AXIS_LABEL_HEIGHT,Mt=n(Z).length>0?n(h)??Math.max(n(k)*.25,200):0,jt=n(k)-Mt,Nt=!!n(t).data.overall,Tt=[];for(const re of n(ot))w(re.type,"data")&&w((Jt=re.row.style)==null?void 0:Jt.type,"spacer")?Tt.push(E/2):Tt.push(E);const Ot=[];let Vt=0;for(const re of Tt)Ot.push(Vt),Vt+=re;const Ve=Vt+(Nt?E*1.5:0),$t=(Ct=n(Z)[0])==null?void 0:Ct.column,xe=(st=$t==null?void 0:$t.options)==null?void 0:st.forest,ie=(xe==null?void 0:xe.scale)??"linear",Xe=(xe==null?void 0:xe.nullValue)??(w(ie,"log")?1:0);return{totalWidth:n(k),totalHeight:Math.max(n(b),Ve+z+Y+n(t).theme.spacing.padding*2),tableWidth:jt,forestWidth:Mt,headerHeight:z,rowHeight:E,plotHeight:Ve,axisHeight:Y,nullValue:Xe,summaryYPosition:Ve-E,showOverallSummary:Nt,rowPositions:Ot,rowHeights:Tt}}),"layout"),nt=v(m(()=>{if(!n(t))return 800;const E=100,z=150;let j=0;for(const Mt of n(A)){if(w(Mt.type,"forest"))continue;const jt=n(u)[Mt.id]??(w(typeof Mt.width,"number")?Mt.width:null)??E;j+=jt}j+=n(u).__label__??z;const Y=n(tt).forestWidth,wt=n(t).theme.spacing.padding*2;return j+Y+wt}),"naturalContentWidth"),Ht=v(m(()=>{if(n(x)<=0||n(W)<=0)return 1;const E=n(W)*n(d);return E>n(x)?n(x)/E:1}),"fitScale"),kt=v(m(()=>n(g)?Math.max(.5,n(d)*n(Ht)):Math.max(.5,Math.min(2,n(d)))),"actualScale"),ut=v(m(()=>n(g)&&n(Ht)<1),"isClamped");function Gt(E){at(t,{...E},!0),at(i,new Set(E.data.groups.filter(z=>z.collapsed).map(z=>z.id)),!0),Be()}function Be(){if(!n(t)||w(typeof document,"undefined"))return;const E=n(t).theme.typography.fontFamily;let z=n(t).theme.typography.fontSizeBase;if(w(typeof z,"string")&&(z.endsWith("rem")||z.endsWith("em"))){const j=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;z=`${parseFloat(z)*j}px`}ge(z,E),document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>{ge(z,E,!0)})}function ge(E,z,j=!1){var Jt,Ct;if(!n(t))return;const wt=document.createElement("canvas").getContext("2d");if(!wt)return;const Mt=n(t).theme.typography.headerFontScale??1.05;let jt=E;if(w(typeof E,"string")){const st=E.match(/^([\d.]+)(px|rem|em)$/);st&&(jt=`${parseFloat(st[1])*Mt}${st[2]}`)}const Tt=`${n(t).theme.typography.fontWeightBold??600} ${jt} ${z}`,Ot=`${E} ${z}`,Vt=(n(t).theme.spacing.cellPaddingX??10)*2,Ve=(n(t).theme.spacing.groupPadding??8)*2;function $t(st){return st.isGroup?st.columns.flatMap($t):[st]}function xe(st){return w(n(u)[st.id],void 0,!1)?n(u)[st.id]:w(typeof st.width,"number")?st.width:Zn.MIN}function ie(st){var Oe,ue;if(w(typeof st.width,"number")||he(st.width,null,!1)&&w(st.width,"auto",!1))return;let re=0;st.header&&(wt.font=Tt,re=Math.max(re,wt.measureText(st.header).width)),wt.font=Ot;for(const Ut of n(t).data.rows){if(w((Oe=Ut.style)==null?void 0:Oe.type,"header")||w((ue=Ut.style)==null?void 0:ue.type,"spacer"))continue;const dn=Rc(Ut,st);dn&&(re=Math.max(re,wt.measureText(dn).width))}const fe=Zn.VISUAL_MIN[st.type]??Zn.MIN,Re=Math.min(Zn.MAX,Math.max(fe,Math.ceil(re+Vt+Yn.RENDERING_BUFFER)));n(u)[st.id]=Re}function Xe(st){if(st.isGroup){for(const re of st.columns)Xe(re);if(st.header){wt.font=Tt;const re=wt.measureText(st.header).width+Ve+Yn.RENDERING_BUFFER,fe=$t(st),Re=fe.reduce((Oe,ue)=>Oe+xe(ue),0);if(re>Re&&fe.length>0){const Oe=Math.ceil((re-Re)/fe.length);for(const ue of fe)n(u)[ue.id]=xe(ue)+Oe}}return}ie(st)}for(const st of n(t).columns)Xe(st);if(n(t).data.labelCol){let st=function(Ut){let dn=0;for(const gr of n(t).data.rows)w(gr.groupId,Ut)&&dn++;for(const gr of n(t).data.groups)w(gr.parentId,Ut)&&(dn+=st(gr.id));return dn},re=0;const fe=new Map;for(const Ut of n(t).data.groups)fe.set(Ut.id,Ut.depth);const Re=Ut=>Ut?(fe.get(Ut)??0)+1:0;n(t).data.labelHeader&&(wt.font=Tt,re=Math.max(re,wt.measureText(n(t).data.labelHeader).width)),wt.font=Ot;const Oe=parseFloat(E);for(const Ut of n(t).data.rows)if(Ut.label){const dn=Re(Ut.groupId),gr=((Jt=Ut.style)==null?void 0:Jt.indent)??0,K=(dn+gr)*Fe.INDENT_PER_LEVEL;let U=wt.measureText(Ut.label).width+K;if((Ct=Ut.style)!=null&&Ct.badge){const zt=String(Ut.style.badge),lt=Oe*Mr.FONT_SCALE;wt.font=`${lt}px ${z}`;const se=wt.measureText(zt).width+Mr.PADDING*2;U+=Mr.GAP+se,wt.font=Ot}re=Math.max(re,U)}wt.font=Tt;for(const Ut of n(t).data.groups)if(Ut.label){const dn=Ut.depth*Fe.INDENT_PER_LEVEL,gr=wt.measureText(Ut.label).width,K=`(${st(Ut.id)})`,U=Oe*.75;wt.font=`${U}px ${z}`;const zt=wt.measureText(K).width;wt.font=Tt;const lt=dn+Jr.CHEVRON_WIDTH+Jr.GAP+gr+Jr.GAP+zt+Jr.SAFETY_MARGIN;re=Math.max(re,lt)}const ue=Math.min(Zn.LABEL_MAX,Math.max(Zn.MIN,Math.ceil(re+Vt+Yn.RENDERING_BUFFER)));n(u).__label__=ue}}function Yt(E,z){at(e,E,!0),at(r,z,!0)}function Ae(E){const z=new Set(n(o));z.has(E)?z.delete(E):z.add(E),at(o,z,!0)}function pt(E,z){const j=new Set(n(i));z??!j.has(E)?j.add(E):j.delete(E),at(i,j,!0)}function bt(E,z){at(a,w(z,"none")?null:{column:E,direction:z},!0)}function ee(E){at(s,E,!0)}function Ge(E){at(c,E,!0)}function xt(E,z){at(f,E,!0),at(l,z,!0)}function pe(E,z){n(u)[E]=Math.max(40,z)}function Lt(E){return n(u)[E]}function Dt(E){at(h,w(E,null)?null:Math.max(100,E),!0)}function Ue(){return n(h)}function qe(E){const z=Sg[E];!n(t)||!z||at(t,{...n(t),theme:z},!0)}function Me(E){at(d,Math.max(.5,Math.min(2,E)),!0),Ye()}function Sn(){at(d,1),Ye()}function sn(){Me(n(d)*1.1)}function Xt(){Me(n(d)/1.1)}function At(E){at(g,E,!0),Ye()}function We(){!n(x)||!n(W)||(at(d,Math.min(2,Math.max(.5,n(x)/n(W))),!0),Ye())}function rr(E){at(p,E,!0),Ye()}function hr(E){at(y,E,!0),Ye()}function _n(E){at(_,E,!0)}function Je(E,z){at(x,E,!0),at(C,z,!0)}function En(E,z){at(W,E,!0),at(H,z,!0)}function jr(E){at(M,E,!0),E&&un()}function xn(){return n(M)?`tabviz_zoom_${n(M)}`:null}function Ye(){const E=xn();if(E)try{const z={zoom:n(d),autoFit:n(g),maxWidth:n(p),maxHeight:n(y),version:2};localStorage.setItem(E,JSON.stringify(z))}catch{}}function un(){const E=xn();if(E)try{const z=localStorage.getItem(E);if(z){const j=JSON.parse(z);w(j.version,2)&&(at(d,j.zoom??1,!0),at(g,j.autoFit??!0,!0),at(p,j.maxWidth??null,!0),at(y,j.maxHeight??null,!0))}}catch{}}function Ln(){at(o,new Set,!0),at(i,new Set,!0),at(a,null),at(s,null),at(u,{},!0),at(h,null),at(d,1),at(g,!0),at(p,null),at(y,null),at(c,null),at(f,null),at(l,null)}const ri=v(m(()=>!n(f)||!n(t)?null:n(t).data.rows.find(E=>w(E.id,n(f)))??null),"tooltipRow");return{get spec(){return n(t)},get width(){return n(k)},get height(){return n(b)},get visibleRows(){return n(S)},get xScale(){return n(T)},get axisComputation(){return n(P)},get layout(){return n(tt)},get selectedRowIds(){return n(o)},get collapsedGroups(){return n(i)},get hoveredRowId(){return n(c)},get allColumns(){return n(A)},get allColumnDefs(){return n(V)},get forestColumns(){return n(Z)},get hasExplicitForestColumns(){return n(ct)},get vizColumns(){return n(gt)},get hasVizColumns(){return n(L)},get displayRows(){return n(ot)},get tooltipRow(){return n(ri)},get tooltipPosition(){return n(l)},get columnWidths(){return n(u)},get zoom(){return n(d)},get autoFit(){return n(g)},get actualScale(){return n(kt)},get isClamped(){return n(ut)},get maxWidth(){return n(p)},get maxHeight(){return n(y)},get showZoomControls(){return n(_)},get naturalContentWidth(){return n(nt)},getRowDepth:ft,getColumnWidth:Lt,getPlotWidth:Ue,getExportDimensions(){var Ve,$t,xe,ie,Xe;const E=n(T).domain(),z=[],j={},Y={},wt=n(u).__label__??150;Y.__label__=wt;let Mt=wt;for(const Jt of n(A)){z.push(Jt.id),j[Jt.id]=Mt;let Ct;w(Jt.type,"forest")?Ct=n(u)[Jt.id]??(w(typeof Jt.width,"number")?Jt.width:null)??(($t=(Ve=Jt.options)==null?void 0:Ve.forest)==null?void 0:$t.width)??n(tt).forestWidth:Ct=n(u)[Jt.id]??(w(typeof Jt.width,"number")?Jt.width:100),Y[Jt.id]=Ct,Mt+=Ct}const jt=[];for(const Jt of n(Z)){const Ct=Jt.column,st=(xe=Ct.options)==null?void 0:xe.forest,re=Y[Ct.id]??n(tt).forestWidth,fe=(st==null?void 0:st.scale)??"linear",Re=(st==null?void 0:st.nullValue)??(w(fe,"log")?1:0);jt.push({columnId:Ct.id,xPosition:j[Ct.id],width:re,xDomain:E,clipBounds:n(P).axisLimits,ticks:n(P).ticks,scale:fe,nullValue:Re,axisLabel:(st==null?void 0:st.axisLabel)??"Effect"})}const Nt=[],Tt=[];let Ot=0;for(const Jt of n(ot)){const Ct=w(Jt.type,"data")&&w((ie=Jt.row.style)==null?void 0:ie.type,"spacer")?n(tt).rowHeight/2:n(tt).rowHeight;Tt.push(Ot),Nt.push(Ct),Ot+=Ct}const Vt=n(V).some(Jt=>Jt.isGroup)?2:1;return{columnOrder:z,columnWidths:Y,columnPositions:j,forestColumns:jt,rowHeights:Nt,rowPositions:Tt,totalRowsHeight:Ot,headerHeight:n(tt).headerHeight,headerDepth:Vt,width:n(nt)*n(d),height:(n(H)||400)*n(d),naturalWidth:Mt,naturalHeight:Ot+n(tt).headerHeight+n(tt).axisHeight,forestWidth:(((Xe=jt[0])==null?void 0:Xe.width)??n(tt).forestWidth)*n(d),xDomain:E,clipBounds:n(P).axisLimits,scale:n(d)}},setSpec:Gt,setDimensions:Yt,selectRow:Ae,toggleGroup:pt,sortBy:bt,setFilter:ee,setHovered:Ge,setTooltip:xt,setColumnWidth:pe,setPlotWidth:Dt,setTheme:qe,setZoom:Me,resetZoom:Sn,zoomIn:sn,zoomOut:Xt,setAutoFit:At,fitToWidth:We,setMaxWidth:rr,setMaxHeight:hr,setShowZoomControls:_n,setContainerDimensions:Je,setScalableNaturalDimensions:En,setContainerElementId:jr,resetState:Ln}}function hv(t,e){return t.filter(r=>{const o=r.metadata[e.field]??r[e.field];switch(e.operator){case"eq":return w(o,e.value);case"neq":return w(o,e.value,!1);case"gt":return w(typeof o,"number")&&o>e.value;case"lt":return w(typeof o,"number")&&o<e.value;case"contains":return w(typeof o,"string")&&o.toLowerCase().includes(e.value.toLowerCase());default:return!0}})}function gv(t,e){const r=[...t],{column:o,direction:i}=e;return r.sort((a,s)=>{const c=a.metadata[o]??a[o],f=s.metadata[o]??s[o];let l=0;return w(typeof c,"number")&&w(typeof f,"number")?l=c-f:w(typeof c,"string")&&w(typeof f,"string")&&(l=c.localeCompare(f)),w(i,"desc")?-l:l}),r}const qc=new Map,Xc={updateData:(t,e)=>{e.spec&&t.setSpec(e.spec)},toggleGroup:(t,e)=>{t.toggleGroup(e.groupId,e.collapsed)},applyFilter:(t,e)=>{t.setFilter(e.filter)},clearFilter:t=>{t.setFilter(null)},sortBy:(t,e)=>{t.sortBy(e.column,e.direction)}},pv={name:"tabviz",type:"output",factory:(t,e,r)=>{let o=null;const i=jc();return t.id&&qc.set(t.id,i),{renderValue:a=>{i.setSpec(a),i.setDimensions(e,r),w(typeof a.zoom,"number")&&i.setZoom(a.zoom),w(typeof a.autoFit,"boolean")&&i.setAutoFit(a.autoFit),w(a.maxWidth,void 0,!1)&&i.setMaxWidth(a.maxWidth),w(a.maxHeight,void 0,!1)&&i.setMaxHeight(a.maxHeight),w(typeof a.showZoomControls,"boolean")&&i.setShowZoomControls(a.showZoomControls),t.style.height="auto",o&&Ru(o),o=Au(B,{target:t,props:{store:i}}),window.Shiny&&t.id&&vv(t.id,i)},resize:(a,s)=>{i.setDimensions(a,s)}}}};function vv(t,e){mu(()=>{Qi(()=>{var o;const r=e.selectedRowIds;(o=window.Shiny)==null||o.setInputValue(`${t}_selected`,Array.from(r),{priority:"event"})}),Qi(()=>{var o;const r=e.hoveredRowId;(o=window.Shiny)==null||o.setInputValue(`${t}_hover`,r,{priority:"event"})})})}return w(typeof window,"undefined",!1)&&window.HTMLWidgets&&window.HTMLWidgets.widget(pv),w(typeof window,"undefined",!1)&&window.Shiny&&window.Shiny.addCustomMessageHandler("tabviz-proxy",t=>{const e=qc.get(t.id);e&&t.method in Xc&&Xc[t.method](e,t.args)}),Se.ForestPlot=B,Se.createForestStore=jc,Object.defineProperty(Se,Symbol.toStringTag,{value:"Module"}),Se})({});
