var tabviz=(function(Me){"use strict";var Wv=Object.defineProperty;var af=Me=>{throw TypeError(Me)};var Rv=(Me,Xe,rn)=>Xe in Me?Wv(Me,Xe,{enumerable:!0,configurable:!0,writable:!0,value:rn}):Me[Xe]=rn;var Ar=(Me,Xe,rn)=>Rv(Me,typeof Xe!="symbol"?Xe+"":Xe,rn),Rs=(Me,Xe,rn)=>Xe.has(Me)||af("Cannot "+rn);var $=(Me,Xe,rn)=>(Rs(Me,Xe,"read from private field"),rn?rn.call(Me):Xe.get(Me)),ce=(Me,Xe,rn)=>Xe.has(Me)?af("Cannot add the same private member more than once"):Xe instanceof WeakSet?Xe.add(Me):Xe.set(Me,rn),Ut=(Me,Xe,rn,Ra)=>(Rs(Me,Xe,"write to private field"),Ra?Ra.call(Me,rn):Xe.set(Me,rn),rn),Qe=(Me,Xe,rn)=>(Rs(Me,Xe,"access private method"),rn);var Zc,Kc,Jo,ti,To,No,Li,ei,ni,un,Is,Gi,zs,sf,lf,tr,er,As,Cr,Ho,Tr,nr,zn,Nr,Or,no,Ao,ro,Wo,$r,Ma,sn,Iv,zv,Fs,Aa,Wa,Ps,dr,Hr,Vn,Ro,Di,Bi,Sa,Qc;const vn=Symbol(),P=Symbol("filename"),cf="http://www.w3.org/1999/xhtml",Ls=(Kc=(Zc=globalThis.process)==null?void 0:Zc.env)==null?void 0:Kc.NODE_ENV,ft=Ls&&!Ls.toLowerCase().startsWith("prod");var gi=Array.isArray,ff=Array.prototype.indexOf,Vi=Array.from,oo=Object.defineProperty,Fo=Object.getOwnPropertyDescriptor,Ds=Object.getOwnPropertyDescriptors,Bs=Object.prototype,uf=Array.prototype,Oi=Object.getPrototypeOf,Gs=Object.isExtensible;const Vs=()=>{};function df(t){for(var e=0;e<t.length;e++)t[e]()}function Os(){var t,e,r=new Promise((o,a)=>{t=o,e=a});return{promise:r,resolve:t,reject:e}}function Ia(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const o of t)if(r.push(o),r.length===e)break;return r}const fn=2,za=4,Fa=8,hf=1<<24,Wr=16,Rr=32,qr=64,$i=128,rr=512,mn=1024,En=2048,pr=4096,Ln=8192,Xr=16384,Pa=32768,io=65536,ji=1<<17,$s=1<<18,ao=1<<19,gf=1<<20,Ir=1<<25,Ur=32768,La=1<<21,qi=1<<22,Yr=1<<23,vr=Symbol("$state"),pf=Symbol(""),js=Symbol("proxy path"),Po=new class extends Error{constructor(){super(...arguments);Ar(this,"name","StaleReactionError");Ar(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},vf=1,mf=11;function qs(){if(ft){const t=new Error("invalid_snippet_arguments\nA snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\nhttps://svelte.dev/e/invalid_snippet_arguments");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/invalid_snippet_arguments")}function yf(){if(ft){const t=new Error("snippet_without_render_tag\nAttempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\nhttps://svelte.dev/e/snippet_without_render_tag");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/snippet_without_render_tag")}function _f(){if(ft){const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function xf(t,e){if(ft){const r=new Error(`component_api_changed
Calling \`${t}\` on a component instance (of ${e}) is no longer valid in Svelte 5
https://svelte.dev/e/component_api_changed`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/component_api_changed")}function wf(t,e){if(ft){const r=new Error(`component_api_invalid_new
Attempted to instantiate ${t} with \`new ${e}\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \`compatibility.componentApi\` compiler option to \`4\` to keep it working.
https://svelte.dev/e/component_api_invalid_new`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/component_api_invalid_new")}function bf(){if(ft){const t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function Mf(t,e,r){if(ft){const o=new Error(`each_key_duplicate
${r?`Keyed each block has duplicate key \`${r}\` at indexes ${t} and ${e}`:`Keyed each block has duplicate key at indexes ${t} and ${e}`}
https://svelte.dev/e/each_key_duplicate`);throw o.name="Svelte error",o}else throw new Error("https://svelte.dev/e/each_key_duplicate")}function Sf(t){if(ft){const e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ef(){if(ft){const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function kf(t){if(ft){const e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function Cf(){if(ft){const t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Tf(){if(ft){const t=new Error("invalid_snippet\nCould not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\nhttps://svelte.dev/e/invalid_snippet");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/invalid_snippet")}function Nf(t){if(ft){const e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Hf(){if(ft){const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Af(){if(ft){const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wf(){if(ft){const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Rf(){if(ft){const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}var so="font-weight: bold",lo="font-weight: normal";function If(t){ft?console.warn(`%c[svelte] console_log_state
%cYour \`console.${t}\` contained \`$state\` proxies. Consider using \`$inspect(...)\` or \`$state.snapshot(...)\` instead
https://svelte.dev/e/console_log_state`,so,lo):console.warn("https://svelte.dev/e/console_log_state")}function zf(t,e){ft?console.warn(`%c[svelte] event_handler_invalid
%c${t} should be a function. Did you mean to ${e}?
https://svelte.dev/e/event_handler_invalid`,so,lo):console.warn("https://svelte.dev/e/event_handler_invalid")}function Ff(){ft?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,so,lo):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function Pf(){ft?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",so,lo):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function pi(t){ft?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,so,lo):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Lf(){ft?console.warn(`%c[svelte] state_proxy_unmount
%cTried to unmount a state proxy, rather than a component
https://svelte.dev/e/state_proxy_unmount`,so,lo):console.warn("https://svelte.dev/e/state_proxy_unmount")}function Df(){ft?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",so,lo):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Bv(t){}function Xs(t){return t===this.v}function Us(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ys(t){return!Us(t,this.v)}let Bf=!1;var Gf="font-weight: bold",Vf="font-weight: normal";function Zs(t){ft?console.warn(`%c[svelte] state_snapshot_uncloneable
%c${t?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${t}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,Gf,Vf):console.warn("https://svelte.dev/e/state_snapshot_uncloneable")}const Of=[];function $f(t,e=!1,r=!1){if(ft&&!e){const o=[],a=vi(t,new Map,"",o,null,r);if(o.length===1&&o[0]==="")Zs();else if(o.length>0){const i=o.length>10?o.slice(0,7):o.slice(0,10),s=o.length-i.length;let c=i.map(f=>`- <value>${f}`).join(`
`);s>0&&(c+=`
- ...and ${s} more`),Zs(c)}return a}return vi(t,new Map,"",Of,null,r)}function vi(t,e,r,o,a=null,i=!1){if(typeof t=="object"&&t!==null){var s=e.get(t);if(s!==void 0)return s;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(gi(t)){var c=Array(t.length);e.set(t,c),a!==null&&e.set(a,c);for(var f=0;f<t.length;f+=1){var l=t[f];f in t&&(c[f]=vi(l,e,ft?`${r}[${f}]`:r,o,null,i))}return c}if(Oi(t)===Bs){c={},e.set(t,c),a!==null&&e.set(a,c);for(var u in t)c[u]=vi(t[u],e,ft?`${r}.${u}`:r,o,null,i);return c}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!i)return vi(t.toJSON(),e,ft?`${r}.toJSON()`:r,o,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return ft&&o.push(r),t}}function v(t,e){return t.label=e,Ks(t.v,e),t}function Ks(t,e){var r;return(r=t==null?void 0:t[js])==null||r.call(t,e),t}function jf(t){const e=new Error,r=qf();return r.length===0?null:(r.unshift(`
`),oo(e,"stack",{value:r.join(`
`)}),oo(e,"name",{value:t}),e)}function qf(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];const r=e.split(`
`),o=[];for(let a=0;a<r.length;a++){const i=r[a],s=i.replaceAll("\\","/");if(i.trim()!=="Error"){if(i.includes("validate_each_keys"))return[];s.includes("svelte/src/internal")||s.includes("node_modules/.vite")||o.push(i)}}return o}let en=null;function Lo(t){en=t}let zr=null;function Xi(t){zr=t}function I(t,e,r,o,a,i){const s=zr;zr={type:e,file:r[P],line:o,column:a,parent:s,...i};try{return t()}finally{zr=s}}let Do=null;function Ui(t){Do=t}function Se(t,e=!1,r){en={p:en,i:!1,c:null,e:null,s:t,x:null,l:null},ft&&(en.function=r,Do=r)}function Ee(t){var e=en,r=e.e;if(r!==null){e.e=null;for(var o of r)hl(o)}return t!==void 0&&(e.x=t),e.i=!0,en=e.p,ft&&(Do=(en==null?void 0:en.function)??null),t??{}}function Qs(){return!0}let co=[];function Js(){var t=co;co=[],df(t)}function Bo(t){if(co.length===0&&!mi){var e=co;queueMicrotask(()=>{e===co&&Js()})}co.push(t)}function Xf(){for(;co.length>0;)Js()}const Da=new WeakMap;function tl(t){var e=ye;if(e===null)return oe.f|=Yr,t;if(ft&&t instanceof Error&&!Da.has(t)&&Da.set(t,Uf(t,e)),(e.f&Pa)===0){if((e.f&$i)===0)throw ft&&!e.parent&&t instanceof Error&&el(t),t;e.b.error(t)}else Go(t,e)}function Go(t,e){for(;e!==null;){if((e.f&$i)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw ft&&t instanceof Error&&el(t),t}function Uf(t,e){var s,c,f;const r=Fo(t,"message");if(!(r&&!r.configurable)){for(var o=qa?"  ":"	",a=`
${o}in ${((s=e.fn)==null?void 0:s.name)||"<unknown>"}`,i=e.ctx;i!==null;)a+=`
${o}in ${(c=i.function)==null?void 0:c[P].split("/").pop()}`,i=i.p;return{message:t.message+`
${a}
`,stack:(f=t.stack)==null?void 0:f.split(`
`).filter(l=>!l.includes("svelte/src/internal")).join(`
`)}}}function el(t){const e=Da.get(t);e&&(oo(t,"message",{value:e.message}),oo(t,"stack",{value:e.stack}))}const Yi=new Set;let fe=null,Je=null,jn=[],Zi=null,Ba=!1,mi=!1;const ba=class ba{constructor(){ce(this,un);Ar(this,"committed",!1);Ar(this,"current",new Map);Ar(this,"previous",new Map);ce(this,Jo,new Set);ce(this,ti,new Set);ce(this,To,0);ce(this,No,0);ce(this,Li,null);ce(this,ei,new Set);ce(this,ni,new Set);Ar(this,"skipped_effects",new Set);Ar(this,"is_fork",!1)}is_deferred(){return this.is_fork||$(this,No)>0}process(e){var o;jn=[],this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const a of e)Qe(this,un,Is).call(this,a,r);this.is_fork||Qe(this,un,sf).call(this),this.is_deferred()?(Qe(this,un,Gi).call(this,r.effects),Qe(this,un,Gi).call(this,r.render_effects)):(fe=null,rl(r.render_effects),rl(r.effects),(o=$(this,Li))==null||o.resolve()),Je=null}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&Yr)===0&&(this.current.set(e,e.v),Je==null||Je.set(e,e.v))}activate(){fe=this,this.apply()}deactivate(){fe===this&&(fe=null,Je=null)}flush(){if(this.activate(),jn.length>0){if(nl(),fe!==null&&fe!==this)return}else $(this,To)===0&&this.process([]);this.deactivate()}discard(){for(const e of $(this,ti))e(this);$(this,ti).clear()}increment(e){Ut(this,To,$(this,To)+1),e&&Ut(this,No,$(this,No)+1)}decrement(e){Ut(this,To,$(this,To)-1),e&&Ut(this,No,$(this,No)-1),this.revive()}revive(){for(const e of $(this,ei))$(this,ni).delete(e),yn(e,En),fo(e);for(const e of $(this,ni))yn(e,pr),fo(e);this.flush()}oncommit(e){$(this,Jo).add(e)}ondiscard(e){$(this,ti).add(e)}settled(){return($(this,Li)??Ut(this,Li,Os())).promise}static ensure(){if(fe===null){const e=fe=new ba;Yi.add(fe),mi||ba.enqueue(()=>{fe===e&&e.flush()})}return fe}static enqueue(e){Bo(e)}apply(){}};Jo=new WeakMap,ti=new WeakMap,To=new WeakMap,No=new WeakMap,Li=new WeakMap,ei=new WeakMap,ni=new WeakMap,un=new WeakSet,Is=function(e,r){var u;e.f^=mn;for(var o=e.first;o!==null;){var a=o.f,i=(a&(Rr|qr))!==0,s=i&&(a&mn)!==0,c=s||(a&Ln)!==0||this.skipped_effects.has(o);if((o.f&$i)!==0&&((u=o.b)!=null&&u.is_pending())&&(r={parent:r,effect:o,effects:[],render_effects:[]}),!c&&o.fn!==null){i?o.f^=mn:(a&za)!==0?r.effects.push(o):bi(o)&&((o.f&Wr)!==0&&$(this,ei).add(o),Mi(o));var f=o.first;if(f!==null){o=f;continue}}var l=o.parent;for(o=o.next;o===null&&l!==null;)l===r.effect&&(Qe(this,un,Gi).call(this,r.effects),Qe(this,un,Gi).call(this,r.render_effects),r=r.parent),o=l.next,l=l.parent}},Gi=function(e){for(const r of e)(r.f&En)!==0?$(this,ei).add(r):(r.f&pr)!==0&&$(this,ni).add(r),Qe(this,un,zs).call(this,r.deps),yn(r,mn)},zs=function(e){if(e!==null)for(const r of e)(r.f&fn)===0||(r.f&Ur)===0||(r.f^=Ur,Qe(this,un,zs).call(this,r.deps))},sf=function(){if($(this,No)===0){for(const e of $(this,Jo))e();$(this,Jo).clear()}$(this,To)===0&&Qe(this,un,lf).call(this)},lf=function(){var i;if(Yi.size>1){this.previous.clear();var e=Je,r=!0,o={parent:null,effect:null,effects:[],render_effects:[]};for(const s of Yi){if(s===this){r=!1;continue}const c=[];for(const[l,u]of this.current){if(s.current.has(l))if(r&&u!==s.current.get(l))s.current.set(l,u);else continue;c.push(l)}if(c.length===0)continue;const f=[...s.current.keys()].filter(l=>!this.current.has(l));if(f.length>0){var a=jn;jn=[];const l=new Set,u=new Map;for(const h of c)ol(h,f,l,u);if(jn.length>0){fe=s,s.apply();for(const h of jn)Qe(i=s,un,Is).call(i,h,o);s.deactivate()}jn=a}}fe=null,Je=e}this.committed=!0,Yi.delete(this)};let mr=ba;function Yf(t){var e=mi;mi=!0;try{for(var r;;){if(Xf(),jn.length===0&&(fe==null||fe.flush(),jn.length===0))return Zi=null,r;nl()}}finally{mi=e}}function nl(){var t=po;Ba=!0;var e=ft?new Set:null;try{var r=0;for(ea(!0);jn.length>0;){var o=mr.ensure();if(r++>1e3){if(ft){var a=new Map;for(const s of o.current.keys())for(const[c,f]of s.updated??[]){var i=a.get(c);i||(i={error:f.error,count:0},a.set(c,i)),i.count+=f.count}for(const s of a.values())s.error&&console.error(s.error)}Zf()}if(o.process(jn),Zr.clear(),ft)for(const s of o.current.keys())e.add(s)}}finally{if(Ba=!1,ea(t),Zi=null,ft)for(const s of e)s.updated=null}}function Zf(){try{Cf()}catch(t){ft&&oo(t,"stack",{value:""}),Go(t,Zi)}}let or=null;function rl(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var o=t[r++];if((o.f&(Xr|Ln))===0&&bi(o)&&(or=new Set,Mi(o),o.deps===null&&o.first===null&&o.nodes===null&&(o.teardown===null&&o.ac===null?ml(o):o.fn=null),(or==null?void 0:or.size)>0)){Zr.clear();for(const a of or){if((a.f&(Xr|Ln))!==0)continue;const i=[a];let s=a.parent;for(;s!==null;)or.has(s)&&(or.delete(s),i.push(s)),s=s.parent;for(let c=i.length-1;c>=0;c--){const f=i[c];(f.f&(Xr|Ln))===0&&Mi(f)}}or.clear()}}or=null}}function ol(t,e,r,o){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const a of t.reactions){const i=a.f;(i&fn)!==0?ol(a,e,r,o):(i&(qi|Wr))!==0&&(i&En)===0&&il(a,e,o)&&(yn(a,En),fo(a))}}function il(t,e,r){const o=r.get(t);if(o!==void 0)return o;if(t.deps!==null)for(const a of t.deps){if(e.includes(a))return!0;if((a.f&fn)!==0&&il(a,e,r))return r.set(a,!0),!0}return r.set(t,!1),!1}function fo(t){for(var e=Zi=t;e.parent!==null;){e=e.parent;var r=e.f;if(Ba&&e===ye&&(r&Wr)!==0&&(r&$s)===0)return;if((r&(qr|Rr))!==0){if((r&mn)===0)return;e.f^=mn}}jn.push(e)}function Kf(t){let e=0,r=uo(0),o;return ft&&v(r,"createSubscriber version"),()=>{xi()&&(n(r),Ji(()=>(e===0&&(o=ra(()=>t(()=>yi(r)))),e+=1,()=>{Bo(()=>{e-=1,e===0&&(o==null||o(),o=void 0,yi(r))})})))}}var Qf=io|ao|$i;function Jf(t,e,r){new tu(t,e,r)}class tu{constructor(e,r,o){ce(this,sn);Ar(this,"parent");ce(this,tr,!1);ce(this,er);ce(this,As,null);ce(this,Cr);ce(this,Ho);ce(this,Tr);ce(this,nr,null);ce(this,zn,null);ce(this,Nr,null);ce(this,Or,null);ce(this,no,null);ce(this,Ao,0);ce(this,ro,0);ce(this,Wo,!1);ce(this,$r,null);ce(this,Ma,Kf(()=>(Ut(this,$r,uo($(this,Ao))),ft&&v($(this,$r),"$effect.pending()"),()=>{Ut(this,$r,null)})));Ut(this,er,e),Ut(this,Cr,r),Ut(this,Ho,o),this.parent=ye.b,Ut(this,tr,!!$(this,Cr).pending),Ut(this,Tr,ta(()=>{ye.b=this;{var a=Qe(this,sn,Fs).call(this);try{Ut(this,nr,qn(()=>o(a)))}catch(i){this.error(i)}$(this,ro)>0?Qe(this,sn,Wa).call(this):Ut(this,tr,!1)}return()=>{var i;(i=$(this,no))==null||i.remove()}},Qf))}is_pending(){return $(this,tr)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!$(this,Cr).pending}update_pending_count(e){Qe(this,sn,Ps).call(this,e),Ut(this,Ao,$(this,Ao)+e),$(this,$r)&&Oo($(this,$r),$(this,Ao))}get_effect_pending(){return $(this,Ma).call(this),n($(this,$r))}error(e){var r=$(this,Cr).onerror;let o=$(this,Cr).failed;if($(this,Wo)||!r&&!o)throw e;$(this,nr)&&(xn($(this,nr)),Ut(this,nr,null)),$(this,zn)&&(xn($(this,zn)),Ut(this,zn,null)),$(this,Nr)&&(xn($(this,Nr)),Ut(this,Nr,null));var a=!1,i=!1;const s=()=>{if(a){Df();return}a=!0,i&&Rf(),mr.ensure(),Ut(this,Ao,0),$(this,Nr)!==null&&go($(this,Nr),()=>{Ut(this,Nr,null)}),Ut(this,tr,this.has_pending_snippet()),Ut(this,nr,Qe(this,sn,Aa).call(this,()=>(Ut(this,Wo,!1),qn(()=>$(this,Ho).call(this,$(this,er)))))),$(this,ro)>0?Qe(this,sn,Wa).call(this):Ut(this,tr,!1)};var c=oe;try{kn(null),i=!0,r==null||r(e,s),i=!1}catch(f){Go(f,$(this,Tr)&&$(this,Tr).parent)}finally{kn(c)}o&&Bo(()=>{Ut(this,Nr,Qe(this,sn,Aa).call(this,()=>{mr.ensure(),Ut(this,Wo,!0);try{return qn(()=>{o($(this,er),()=>e,()=>s)})}catch(f){return Go(f,$(this,Tr).parent),null}finally{Ut(this,Wo,!1)}}))})}}tr=new WeakMap,er=new WeakMap,As=new WeakMap,Cr=new WeakMap,Ho=new WeakMap,Tr=new WeakMap,nr=new WeakMap,zn=new WeakMap,Nr=new WeakMap,Or=new WeakMap,no=new WeakMap,Ao=new WeakMap,ro=new WeakMap,Wo=new WeakMap,$r=new WeakMap,Ma=new WeakMap,sn=new WeakSet,Iv=function(){try{Ut(this,nr,qn(()=>$(this,Ho).call(this,$(this,er))))}catch(e){this.error(e)}Ut(this,tr,!1)},zv=function(){const e=$(this,Cr).pending;e&&(Ut(this,zn,qn(()=>e($(this,er)))),mr.enqueue(()=>{var r=Qe(this,sn,Fs).call(this);Ut(this,nr,Qe(this,sn,Aa).call(this,()=>(mr.ensure(),qn(()=>$(this,Ho).call(this,r))))),$(this,ro)>0?Qe(this,sn,Wa).call(this):(go($(this,zn),()=>{Ut(this,zn,null)}),Ut(this,tr,!1))}))},Fs=function(){var e=$(this,er);return $(this,tr)&&(Ut(this,no,Kr()),$(this,er).before($(this,no)),e=$(this,no)),e},Aa=function(e){var r=ye,o=oe,a=en;ir($(this,Tr)),kn($(this,Tr)),Lo($(this,Tr).ctx);try{return e()}catch(i){return tl(i),null}finally{ir(r),kn(o),Lo(a)}},Wa=function(){const e=$(this,Cr).pending;$(this,nr)!==null&&(Ut(this,Or,document.createDocumentFragment()),$(this,Or).append($(this,no)),xl($(this,nr),$(this,Or))),$(this,zn)===null&&Ut(this,zn,qn(()=>e($(this,er))))},Ps=function(e){var r;if(!this.has_pending_snippet()){this.parent&&Qe(r=this.parent,sn,Ps).call(r,e);return}Ut(this,ro,$(this,ro)+e),$(this,ro)===0&&(Ut(this,tr,!1),$(this,zn)&&go($(this,zn),()=>{Ut(this,zn,null)}),$(this,Or)&&($(this,er).before($(this,Or)),Ut(this,Or,null)))};function eu(t,e,r,o){const a=Ga;if(r.length===0&&t.length===0){o(e.map(a));return}var i=fe,s=ye,c=nu();function f(){Promise.all(r.map(l=>iu(l))).then(l=>{c();try{o([...e.map(a),...l])}catch(u){(s.f&Xr)===0&&Go(u,s)}i==null||i.deactivate(),Ki()}).catch(l=>{Go(l,s)})}t.length>0?Promise.all(t).then(()=>{c();try{return f()}finally{i==null||i.deactivate(),Ki()}}):f()}function nu(){var t=ye,e=oe,r=en,o=fe;if(ft)var a=zr;return function(s=!0){ir(t),kn(e),Lo(r),s&&(o==null||o.activate()),ft&&Xi(a)}}async function ru(t){var e=await t;return()=>e}function Ki(){ir(null),kn(null),Lo(null),ft&&Xi(null)}const ou=new Set;function Ga(t){var e=fn|En,r=oe!==null&&(oe.f&fn)!==0?oe:null;return ye!==null&&(ye.f|=ao),{ctx:en,deps:null,effects:null,equals:Xs,f:e,fn:t,reactions:null,rv:0,v:vn,wv:0,parent:r??ye,ac:null}}function iu(t,e){let r=ye;r===null&&_f();var o=r.b,a=void 0,i=uo(vn),s=!oe,c=new Map;return wu(()=>{var d;var f=Os();a=f.promise;try{Promise.resolve(t()).then(f.resolve,f.reject).then(()=>{l===fe&&l.committed&&l.deactivate(),Ki()})}catch(g){f.reject(g),Ki()}var l=fe;if(s){var u=!o.is_pending();o.update_pending_count(1),l.increment(u),(d=c.get(l))==null||d.reject(Po),c.delete(l),c.set(l,f)}const h=(g,p=void 0)=>{if(l.activate(),p)p!==Po&&(i.f|=Yr,Oo(i,p));else{(i.f&Yr)!==0&&(i.f^=Yr),Oo(i,g);for(const[y,_]of c){if(c.delete(y),y===l)break;_.reject(Po)}}s&&(o.update_pending_count(-1),l.decrement(u))};f.promise.then(h,g=>h(null,g||"unknown"))}),Ua(()=>{for(const f of c.values())f.reject(Po)}),ft&&(i.f|=qi),new Promise(f=>{function l(u){function h(){u===a?f(i):l(a)}u.then(h,h)}l(a)})}function m(t){const e=Ga(t);return bl(e),e}function au(t){const e=Ga(t);return e.equals=Ys,e}function Va(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)xn(e[r])}}let Oa=[];function su(t){for(var e=t.parent;e!==null;){if((e.f&fn)===0)return(e.f&Xr)===0?e:null;e=e.parent}return null}function $a(t){var e,r=ye;if(ir(su(t)),ft){let o=Vo;sl(new Set);try{Oa.includes(t)&&bf(),Oa.push(t),t.f&=~Ur,Va(t),e=Za(t)}finally{ir(r),sl(o),Oa.pop()}}else try{t.f&=~Ur,Va(t),e=Za(t)}finally{ir(r)}return e}function al(t){var e=$a(t);if(t.equals(e)||(fe!=null&&fe.is_fork||(t.v=e),t.wv=El()),!jo)if(Je!==null)(xi()||fe!=null&&fe.is_fork)&&Je.set(t,e);else{var r=(t.f&rr)===0?pr:mn;yn(t,r)}}let Vo=new Set;const Zr=new Map;function sl(t){Vo=t}let ja=!1;function lu(){ja=!0}function uo(t,e){var r={f:0,v:t,reactions:null,equals:Xs,rv:0,wv:0};return r}function Wt(t,e){const r=uo(t);return bl(r),r}function cu(t,e=!1,r=!0){const o=uo(t);return e||(o.equals=Ys),o}function lt(t,e,r=!1){oe!==null&&(!xr||(oe.f&ji)!==0)&&Qs()&&(oe.f&(fn|Wr|qi|ji))!==0&&!(wn!=null&&wn.includes(t))&&Wf();let o=r?yr(e):e;return ft&&Ks(o,t.label),Oo(t,o)}function Oo(t,e){var a;if(!t.equals(e)){var r=t.v;jo?Zr.set(t,e):Zr.set(t,r),t.v=e;var o=mr.ensure();if(o.capture(t,r),ft){if(ye!==null){t.updated??(t.updated=new Map);const i=(((a=t.updated.get(""))==null?void 0:a.count)??0)+1;if(t.updated.set("",{error:null,count:i}),i>5){const s=jf("updated at");if(s!==null){let c=t.updated.get(s.stack);c||(c={error:s,count:0},t.updated.set(s.stack,c)),c.count++}}}ye!==null&&(t.set_during_effect=!0)}(t.f&fn)!==0&&((t.f&En)!==0&&$a(t),yn(t,(t.f&rr)!==0?mn:pr)),t.wv=El(),cl(t,En),ye!==null&&(ye.f&mn)!==0&&(ye.f&(Rr|qr))===0&&(Xn===null?Su([t]):Xn.push(t)),!o.is_fork&&Vo.size>0&&!ja&&ll()}return e}function ll(){ja=!1;var t=po;ea(!0);const e=Array.from(Vo);try{for(const r of e)(r.f&mn)!==0&&yn(r,pr),bi(r)&&Mi(r)}finally{ea(t)}Vo.clear()}function yi(t){lt(t,t.v+1)}function cl(t,e){var r=t.reactions;if(r!==null)for(var o=r.length,a=0;a<o;a++){var i=r[a],s=i.f;if(ft&&(s&ji)!==0){Vo.add(i);continue}var c=(s&En)===0;if(c&&yn(i,e),(s&fn)!==0){var f=i;Je==null||Je.delete(f),(s&Ur)===0&&(s&rr&&(i.f|=Ur),cl(f,pr))}else c&&((s&Wr)!==0&&or!==null&&or.add(i),fo(i))}}const fu=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function yr(t){if(typeof t!="object"||t===null||vr in t)return t;const e=Oi(t);if(e!==Bs&&e!==uf)return t;var r=new Map,o=gi(t),a=Wt(0),i=vo,s=u=>{if(vo===i)return u();var h=oe,d=vo;kn(null),Sl(i);var g=u();return kn(h),Sl(d),g};o&&(r.set("length",Wt(t.length)),ft&&(t=hu(t)));var c="";let f=!1;function l(u){if(!f){f=!0,c=u,v(a,`${c} version`);for(const[h,d]of r)v(d,ho(c,h));f=!1}}return new Proxy(t,{defineProperty(u,h,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Hf();var g=r.get(h);return g===void 0?g=s(()=>{var p=Wt(d.value);return r.set(h,p),ft&&typeof h=="string"&&v(p,ho(c,h)),p}):lt(g,d.value,!0),!0},deleteProperty(u,h){var d=r.get(h);if(d===void 0){if(h in u){const g=s(()=>Wt(vn));r.set(h,g),yi(a),ft&&v(g,ho(c,h))}}else lt(d,vn),yi(a);return!0},get(u,h,d){var _;if(h===vr)return t;if(ft&&h===js)return l;var g=r.get(h),p=h in u;if(g===void 0&&(!p||(_=Fo(u,h))!=null&&_.writable)&&(g=s(()=>{var x=yr(p?u[h]:vn),k=Wt(x);return ft&&v(k,ho(c,h)),k}),r.set(h,g)),g!==void 0){var y=n(g);return y===vn?void 0:y}return Reflect.get(u,h,d)},getOwnPropertyDescriptor(u,h){var d=Reflect.getOwnPropertyDescriptor(u,h);if(d&&"value"in d){var g=r.get(h);g&&(d.value=n(g))}else if(d===void 0){var p=r.get(h),y=p==null?void 0:p.v;if(p!==void 0&&y!==vn)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return d},has(u,h){var y;if(h===vr)return!0;var d=r.get(h),g=d!==void 0&&d.v!==vn||Reflect.has(u,h);if(d!==void 0||ye!==null&&(!g||(y=Fo(u,h))!=null&&y.writable)){d===void 0&&(d=s(()=>{var _=g?yr(u[h]):vn,x=Wt(_);return ft&&v(x,ho(c,h)),x}),r.set(h,d));var p=n(d);if(p===vn)return!1}return g},set(u,h,d,g){var E;var p=r.get(h),y=h in u;if(o&&h==="length")for(var _=d;_<p.v;_+=1){var x=r.get(_+"");x!==void 0?lt(x,vn):_ in u&&(x=s(()=>Wt(vn)),r.set(_+"",x),ft&&v(x,ho(c,_)))}if(p===void 0)(!y||(E=Fo(u,h))!=null&&E.writable)&&(p=s(()=>Wt(void 0)),ft&&v(p,ho(c,h)),lt(p,yr(d)),r.set(h,p));else{y=p.v!==vn;var k=s(()=>yr(d));lt(p,k)}var W=Reflect.getOwnPropertyDescriptor(u,h);if(W!=null&&W.set&&W.set.call(g,d),!y){if(o&&typeof h=="string"){var A=r.get("length"),M=Number(h);Number.isInteger(M)&&M>=A.v&&lt(A,M+1)}yi(a)}return!0},ownKeys(u){n(a);var h=Reflect.ownKeys(u).filter(p=>{var y=r.get(p);return y===void 0||y.v!==vn});for(var[d,g]of r)g.v!==vn&&!(d in u)&&h.push(d);return h},setPrototypeOf(){Af()}})}function ho(t,e){return typeof e=="symbol"?`${t}[Symbol(${e.description??""})]`:fu.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Fr(t){try{if(t!==null&&typeof t=="object"&&vr in t)return t[vr]}catch{}return t}function uu(t,e){return Object.is(Fr(t),Fr(e))}const du=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function hu(t){return new Proxy(t,{get(e,r,o){var a=Reflect.get(e,r,o);return du.has(r)?function(...i){lu();var s=a.apply(this,i);return ll(),s}:a}})}function gu(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:r,lastIndexOf:o,includes:a}=t;t.indexOf=function(i,s){const c=r.call(this,i,s);if(c===-1){for(let f=s??0;f<this.length;f+=1)if(Fr(this[f])===i){pi("array.indexOf(...)");break}}return c},t.lastIndexOf=function(i,s){const c=o.call(this,i,s??this.length-1);if(c===-1){for(let f=0;f<=(s??this.length-1);f+=1)if(Fr(this[f])===i){pi("array.lastIndexOf(...)");break}}return c},t.includes=function(i,s){const c=a.call(this,i,s);if(!c){for(let f=0;f<this.length;f+=1)if(Fr(this[f])===i){pi("array.includes(...)");break}}return c},Array.__svelte_cleanup=()=>{t.indexOf=r,t.lastIndexOf=o,t.includes=a}}function w(t,e,r=!0){try{t===e!=(Fr(t)===Fr(e))&&pi(r?"===":"!==")}catch{}return t===e===r}function he(t,e,r=!0){return t==e!=(Fr(t)==Fr(e))&&pi(r?"==":"!="),t==e===r}var $o,qa,fl,ul;function pu(){if($o===void 0){$o=window,qa=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;fl=Fo(e,"firstChild").get,ul=Fo(e,"nextSibling").get,Gs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Gs(r)&&(r.__t=void 0),ft&&(t.__svelte_meta=null,gu())}}function Kr(t=""){return document.createTextNode(t)}function Pr(t){return fl.call(t)}function _i(t){return ul.call(t)}function J(t,e){return Pr(t)}function yt(t,e=!1){{var r=Pr(t);return r instanceof Comment&&r.data===""?_i(r):r}}function at(t,e=1,r=!1){let o=t;for(;e--;)o=_i(o);return o}function vu(t){t.textContent=""}function dl(){return!1}function Xa(t){var e=oe,r=ye;kn(null),ir(null);try{return t()}finally{kn(e),ir(r)}}function mu(t){ye===null&&(oe===null&&kf(t),Ef()),jo&&Sf(t)}function yu(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function _r(t,e,r){var o=ye;if(ft)for(;o!==null&&(o.f&ji)!==0;)o=o.parent;o!==null&&(o.f&Ln)!==0&&(t|=Ln);var a={ctx:en,deps:null,nodes:null,f:t|En|rr,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,wv:0,ac:null};if(ft&&(a.component_function=Do),r)try{Mi(a),a.f|=Pa}catch(c){throw xn(a),c}else e!==null&&fo(a);var i=a;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&ao)===0&&(i=i.first,(t&Wr)!==0&&(t&io)!==0&&i!==null&&(i.f|=io)),i!==null&&(i.parent=o,o!==null&&yu(i,o),oe!==null&&(oe.f&fn)!==0&&(t&qr)===0)){var s=oe;(s.effects??(s.effects=[])).push(i)}return a}function xi(){return oe!==null&&!xr}function Ua(t){const e=_r(Fa,null,!1);return yn(e,mn),e.teardown=t,e}function Qi(t){mu("$effect"),ft&&oo(t,"name",{value:"$effect"});var e=ye.f,r=!oe&&(e&Rr)!==0&&(e&Pa)===0;if(r){var o=en;(o.e??(o.e=[])).push(t)}else return hl(t)}function hl(t){return _r(za|gf,t,!1)}function _u(t){mr.ensure();const e=_r(qr|ao,t,!0);return()=>{xn(e)}}function xu(t){mr.ensure();const e=_r(qr|ao,t,!0);return(r={})=>new Promise(o=>{r.outro?go(e,()=>{xn(e),o(void 0)}):(xn(e),o(void 0))})}function gl(t){return _r(za,t,!1)}function wu(t){return _r(qi|ao,t,!0)}function Ji(t,e=0){return _r(Fa|e,t,!0)}function tt(t,e=[],r=[],o=[]){eu(o,e,r,a=>{_r(Fa,()=>t(...a.map(n)),!0)})}function ta(t,e=0){var r=_r(Wr|e,t,!0);return ft&&(r.dev_stack=zr),r}function qn(t){return _r(Rr|ao,t,!0)}function pl(t){var e=t.teardown;if(e!==null){const r=jo,o=oe;wl(!0),kn(null);try{e.call(null)}finally{wl(r),kn(o)}}}function vl(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const a=r.ac;a!==null&&Xa(()=>{a.abort(Po)});var o=r.next;(r.f&qr)!==0?r.parent=null:xn(r,e),r=o}}function bu(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Rr)===0&&xn(e),e=r}}function xn(t,e=!0){var r=!1;(e||(t.f&$s)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Mu(t.nodes.start,t.nodes.end),r=!0),vl(t,e&&!r),na(t,0),yn(t,Xr);var o=t.nodes&&t.nodes.t;if(o!==null)for(const i of o)i.stop();pl(t);var a=t.parent;a!==null&&a.first!==null&&ml(t),ft&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Mu(t,e){for(;t!==null;){var r=t===e?null:_i(t);t.remove(),t=r}}function ml(t){var e=t.parent,r=t.prev,o=t.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),e!==null&&(e.first===t&&(e.first=o),e.last===t&&(e.last=r))}function go(t,e,r=!0){var o=[];yl(t,o,!0);var a=()=>{r&&xn(t),e&&e()},i=o.length;if(i>0){var s=()=>--i||a();for(var c of o)c.out(s)}else a()}function yl(t,e,r){if((t.f&Ln)===0){t.f^=Ln;var o=t.nodes&&t.nodes.t;if(o!==null)for(const c of o)(c.is_global||r)&&e.push(c);for(var a=t.first;a!==null;){var i=a.next,s=(a.f&io)!==0||(a.f&Rr)!==0&&(t.f&Wr)!==0;yl(a,e,s?r:!1),a=i}}}function Ya(t){_l(t,!0)}function _l(t,e){if((t.f&Ln)!==0){t.f^=Ln,(t.f&mn)===0&&(yn(t,En),fo(t));for(var r=t.first;r!==null;){var o=r.next,a=(r.f&io)!==0||(r.f&Rr)!==0;_l(r,a?e:!1),r=o}var i=t.nodes&&t.nodes.t;if(i!==null)for(const s of i)(s.is_global||e)&&s.in()}}function xl(t,e){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end;r!==null;){var a=r===o?null:_i(r);e.append(r),r=a}}let po=!1;function ea(t){po=t}let jo=!1;function wl(t){jo=t}let oe=null,xr=!1;function kn(t){oe=t}let ye=null;function ir(t){ye=t}let wn=null;function bl(t){oe!==null&&(wn===null?wn=[t]:wn.push(t))}let bn=null,Dn=0,Xn=null;function Su(t){Xn=t}let Ml=1,wi=0,vo=wi;function Sl(t){vo=t}function El(){return++Ml}function bi(t){var e=t.f;if((e&En)!==0)return!0;if(e&fn&&(t.f&=~Ur),(e&pr)!==0){var r=t.deps;if(r!==null)for(var o=r.length,a=0;a<o;a++){var i=r[a];if(bi(i)&&al(i),i.wv>t.wv)return!0}(e&rr)!==0&&Je===null&&yn(t,mn)}return!1}function kl(t,e,r=!0){var o=t.reactions;if(o!==null&&!(wn!=null&&wn.includes(t)))for(var a=0;a<o.length;a++){var i=o[a];(i.f&fn)!==0?kl(i,e,!1):e===i&&(r?yn(i,En):(i.f&mn)!==0&&yn(i,pr),fo(i))}}function Za(t){var p;var e=bn,r=Dn,o=Xn,a=oe,i=wn,s=en,c=xr,f=vo,l=t.f;bn=null,Dn=0,Xn=null,oe=(l&(Rr|qr))===0?t:null,wn=null,Lo(t.ctx),xr=!1,vo=++wi,t.ac!==null&&(Xa(()=>{t.ac.abort(Po)}),t.ac=null);try{t.f|=La;var u=t.fn,h=u(),d=t.deps;if(bn!==null){var g;if(na(t,Dn),d!==null&&Dn>0)for(d.length=Dn+bn.length,g=0;g<bn.length;g++)d[Dn+g]=bn[g];else t.deps=d=bn;if(xi()&&(t.f&rr)!==0)for(g=Dn;g<d.length;g++)((p=d[g]).reactions??(p.reactions=[])).push(t)}else d!==null&&Dn<d.length&&(na(t,Dn),d.length=Dn);if(Qs()&&Xn!==null&&!xr&&d!==null&&(t.f&(fn|pr|En))===0)for(g=0;g<Xn.length;g++)kl(Xn[g],t);return a!==null&&a!==t&&(wi++,Xn!==null&&(o===null?o=Xn:o.push(...Xn))),(t.f&Yr)!==0&&(t.f^=Yr),h}catch(y){return tl(y)}finally{t.f^=La,bn=e,Dn=r,Xn=o,oe=a,wn=i,Lo(s),xr=c,vo=f}}function Eu(t,e){let r=e.reactions;if(r!==null){var o=ff.call(r,t);if(o!==-1){var a=r.length-1;a===0?r=e.reactions=null:(r[o]=r[a],r.pop())}}r===null&&(e.f&fn)!==0&&(bn===null||!bn.includes(e))&&(yn(e,pr),(e.f&rr)!==0&&(e.f^=rr,e.f&=~Ur),Va(e),na(e,0))}function na(t,e){var r=t.deps;if(r!==null)for(var o=e;o<r.length;o++)Eu(t,r[o])}function Mi(t){var e=t.f;if((e&Xr)===0){yn(t,mn);var r=ye,o=po;if(ye=t,po=!0,ft){var a=Do;Ui(t.component_function);var i=zr;Xi(t.dev_stack??zr)}try{(e&(Wr|hf))!==0?bu(t):vl(t),pl(t);var s=Za(t);t.teardown=typeof s=="function"?s:null,t.wv=Ml;var c;ft&&Bf&&(t.f&En)!==0&&t.deps}finally{po=o,ye=r,ft&&(Ui(a),Xi(i))}}}async function ku(){await Promise.resolve(),Yf()}function n(t){var e=t.f,r=(e&fn)!==0;if(oe!==null&&!xr){var o=ye!==null&&(ye.f&Xr)!==0;if(!o&&!(wn!=null&&wn.includes(t))){var a=oe.deps;if((oe.f&La)!==0)t.rv<wi&&(t.rv=wi,bn===null&&a!==null&&a[Dn]===t?Dn++:bn===null?bn=[t]:bn.includes(t)||bn.push(t));else{(oe.deps??(oe.deps=[])).push(t);var i=t.reactions;i===null?t.reactions=[oe]:i.includes(oe)||i.push(oe)}}}if(ft&&ou.delete(t),jo){if(Zr.has(t))return Zr.get(t);if(r){var s=t,c=s.v;return((s.f&mn)===0&&s.reactions!==null||Tl(s))&&(c=$a(s)),Zr.set(s,c),c}}else r&&(!(Je!=null&&Je.has(t))||fe!=null&&fe.is_fork&&!xi())&&(s=t,bi(s)&&al(s),po&&xi()&&(s.f&rr)===0&&Cl(s));if(Je!=null&&Je.has(t))return Je.get(t);if((t.f&Yr)!==0)throw t.v;return t.v}function Cl(t){if(t.deps!==null){t.f^=rr;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&fn)!==0&&(e.f&rr)===0&&Cl(e)}}function Tl(t){if(t.v===vn)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Zr.has(e)||(e.f&fn)!==0&&Tl(e))return!0;return!1}function ra(t){var e=xr;try{return xr=!0,t()}finally{xr=e}}const Cu=-7169;function yn(t,e){t.f=t.f&Cu|e}function Tu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(vr in t)Ka(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&vr in r&&Ka(r)}}}function Ka(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{Ka(t[o],e)}catch{}const r=Oi(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=Ds(r);for(let a in o){const i=o[a].get;if(i)try{i.call(t)}catch{}}}}}const Nl=new Set,Qa=new Set;function Nu(t,e,r,o={}){function a(i){if(o.capture||Si.call(e,i),!i.cancelBubble)return Xa(()=>r==null?void 0:r.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Bo(()=>{e.addEventListener(t,a,o)}):e.addEventListener(t,a,o),a}function Bn(t,e,r,o,a){var i={capture:o,passive:a},s=Nu(t,e,r,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ua(()=>{e.removeEventListener(t,s,i)})}function mo(t){for(var e=0;e<t.length;e++)Nl.add(t[e]);for(var r of Qa)r(t)}let Hl=null;function Si(t){var _;var e=this,r=e.ownerDocument,o=t.type,a=((_=t.composedPath)==null?void 0:_.call(t))||[],i=a[0]||t.target;Hl=t;var s=0,c=Hl===t&&t.__root;if(c){var f=a.indexOf(c);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var l=a.indexOf(e);if(l===-1)return;f<=l&&(s=f)}if(i=a[s]||t.target,i!==e){oo(t,"currentTarget",{configurable:!0,get(){return i||r}});var u=oe,h=ye;kn(null),ir(null);try{for(var d,g=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+o];y!=null&&(!i.disabled||t.target===i)&&y.call(i,t)}catch(x){d?g.push(x):d=x}if(t.cancelBubble||p===e||p===null)break;i=p}if(d){for(let x of g)queueMicrotask(()=>{throw x});throw d}}finally{t.__root=e,delete t.currentTarget,kn(u),ir(h)}}}function ar(t,e,r,o,a,i=!1,s=!1){var l,u;let c,f;try{c=t()}catch(h){f=h}if(typeof c!="function"&&(i||c!=null||f)){const h=o==null?void 0:o[P],d=a?` at ${h}:${a[0]}:${a[1]}`:` in ${h}`,g=((l=r[0])==null?void 0:l.eventPhase)<Event.BUBBLING_PHASE?"capture":"",y=`\`${((u=r[0])==null?void 0:u.type)+g}\` handler${d}`;if(zf(y,s?"remove the trailing `()`":"add a leading `() =>`"),f)throw f}c==null||c.apply(e,r)}function Al(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ei(t,e){var r=ye;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function xt(t,e){var r=(e&1)!==0,o=(e&2)!==0,a,i=!t.startsWith("<!>");return()=>{a===void 0&&(a=Al(i?t:"<!>"+t),r||(a=Pr(a)));var s=o||qa?document.importNode(a,!0):a.cloneNode(!0);if(r){var c=Pr(s),f=s.lastChild;Ei(c,f)}else Ei(s,s);return s}}function Hu(t,e,r="svg"){var o=!t.startsWith("<!>"),a=(e&1)!==0,i=`<${r}>${o?t:"<!>"+t}</${r}>`,s;return()=>{if(!s){var c=Al(i),f=Pr(c);if(a)for(s=document.createDocumentFragment();Pr(f);)s.appendChild(Pr(f));else s=Pr(f)}var l=s.cloneNode(!0);if(a){var u=Pr(l),h=l.lastChild;Ei(u,h)}else Ei(l,l);return l}}function Lt(t,e){return Hu(t,e,"svg")}function kt(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Kr();return t.append(e,r),Ei(e,r),t}function z(t,e){t!==null&&t.before(e)}const Au=["touchstart","touchmove"];function Wu(t){return Au.includes(t)}function Jt(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Ru(t,e){return Iu(t,e)}const qo=new Map;function Iu(t,{target:e,anchor:r,props:o={},events:a,context:i,intro:s=!0}){pu();var c=new Set,f=h=>{for(var d=0;d<h.length;d++){var g=h[d];if(!c.has(g)){c.add(g);var p=Wu(g);e.addEventListener(g,Si,{passive:p});var y=qo.get(g);y===void 0?(document.addEventListener(g,Si,{passive:p}),qo.set(g,1)):qo.set(g,y+1)}}};f(Vi(Nl)),Qa.add(f);var l=void 0,u=xu(()=>{var h=r??e.appendChild(Kr());return Jf(h,{pending:()=>{}},d=>{if(i){Se({});var g=en;g.c=i}a&&(o.$$events=a),l=t(d,o)||{},i&&Ee()}),()=>{var p;for(var d of c){e.removeEventListener(d,Si);var g=qo.get(d);--g===0?(document.removeEventListener(d,Si),qo.delete(d)):qo.set(d,g)}Qa.delete(f),h!==r&&((p=h.parentNode)==null||p.removeChild(h))}});return Ja.set(l,u),l}let Ja=new WeakMap;function zu(t,e){const r=Ja.get(t);return r?(Ja.delete(t),r(e)):(ft&&(vr in t?Lf():Ff()),Promise.resolve())}function Fu(t){return t.toString=()=>(yf(),""),t}class Wl{constructor(e,r=!0){Ar(this,"anchor");ce(this,dr,new Map);ce(this,Hr,new Map);ce(this,Vn,new Map);ce(this,Ro,new Set);ce(this,Di,!0);ce(this,Bi,()=>{var e=fe;if($(this,dr).has(e)){var r=$(this,dr).get(e),o=$(this,Hr).get(r);if(o)Ya(o),$(this,Ro).delete(r);else{var a=$(this,Vn).get(r);a&&($(this,Hr).set(r,a.effect),$(this,Vn).delete(r),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),o=a.effect)}for(const[i,s]of $(this,dr)){if($(this,dr).delete(i),i===e)break;const c=$(this,Vn).get(s);c&&(xn(c.effect),$(this,Vn).delete(s))}for(const[i,s]of $(this,Hr)){if(i===r||$(this,Ro).has(i))continue;const c=()=>{if(Array.from($(this,dr).values()).includes(i)){var l=document.createDocumentFragment();xl(s,l),l.append(Kr()),$(this,Vn).set(i,{effect:s,fragment:l})}else xn(s);$(this,Ro).delete(i),$(this,Hr).delete(i)};$(this,Di)||!o?($(this,Ro).add(i),go(s,c,!1)):c()}}});ce(this,Sa,e=>{$(this,dr).delete(e);const r=Array.from($(this,dr).values());for(const[o,a]of $(this,Vn))r.includes(o)||(xn(a.effect),$(this,Vn).delete(o))});this.anchor=e,Ut(this,Di,r)}ensure(e,r){var o=fe,a=dl();if(r&&!$(this,Hr).has(e)&&!$(this,Vn).has(e))if(a){var i=document.createDocumentFragment(),s=Kr();i.append(s),$(this,Vn).set(e,{effect:qn(()=>r(s)),fragment:i})}else $(this,Hr).set(e,qn(()=>r(this.anchor)));if($(this,dr).set(o,e),a){for(const[c,f]of $(this,Hr))c===e?o.skipped_effects.delete(f):o.skipped_effects.add(f);for(const[c,f]of $(this,Vn))c===e?o.skipped_effects.delete(f.effect):o.skipped_effects.add(f.effect);o.oncommit($(this,Bi)),o.ondiscard($(this,Sa))}else $(this,Bi).call(this)}}dr=new WeakMap,Hr=new WeakMap,Vn=new WeakMap,Ro=new WeakMap,Di=new WeakMap,Bi=new WeakMap,Sa=new WeakMap;function Pu(t,e,...r){var o=new Wl(t);ta(()=>{const a=e()??null;ft&&a==null&&Tf(),o.ensure(a,a&&(i=>a(i,...r)))},io)}function Lu(t,e){const r=(o,...a)=>{var i=Do;Ui(t);try{return e(o,...a)}finally{Ui(i)}};return Fu(r),r}if(ft){let t=function(e){if(!(e in globalThis)){let r;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(r!==void 0)return r;Nf(e)},set:o=>{r=o}})}};t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function j(t,e,r){return(...o)=>{const a=t(...o);var i=a.nodeType===mf?a.firstChild:a;return Rl(i,e,r),a}}function Du(t,e,r){t.__svelte_meta={parent:zr,loc:{file:e,line:r[0],column:r[1]}},r[2]&&Rl(t.firstChild,e,r[2])}function Rl(t,e,r){for(var o=0;t&&o<r.length;)t.nodeType===vf&&Du(t,e,r[o++]),t=t.nextSibling}function We(t){t&&wf(t[P]??"a component",t.name)}function Re(){const t=en==null?void 0:en.function;function e(r){xf(r,t[P])}return{$destroy:()=>e("$destroy()"),$on:()=>e("$on(...)"),$set:()=>e("$set(...)")}}function Bu(t,...e){(typeof t!="object"||!(t instanceof Node))&&qs();for(let r of e)typeof r!="function"&&qs()}function Y(t,e,r=!1){var o=new Wl(t),a=r?io:0;function i(s,c){o.ensure(s,c)}ta(()=>{var s=!1;e((c,f=!0)=>{s=!0,i(f,c)}),s||i(!1,null)},a)}function wr(t,e){return e}function Gu(t,e,r){for(var o=[],a=e.length,i,s=e.length,c=0;c<a;c++){let h=e[c];go(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var d=t.outrogroups;ts(Vi(i.done)),d.delete(i),d.size===0&&(t.outrogroups=null)}}else s-=1},!1)}if(s===0){var f=o.length===0&&r!==null;if(f){var l=r,u=l.parentNode;vu(u),u.append(l),t.items.clear()}ts(e,!f)}else i={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(i)}function ts(t,e=!0){for(var r=0;r<t.length;r++)xn(t[r],e)}var Il;function ze(t,e,r,o,a,i=null){var s=t,c=new Map,f=(e&4)!==0;if(f){var l=t;s=l.appendChild(Kr())}var u=null,h=au(()=>{var x=r();return gi(x)?x:x==null?[]:Vi(x)}),d,g=!0;function p(){_.fallback=u,Vu(_,d,s,e,o),u!==null&&(d.length===0?(u.f&Ir)===0?Ya(u):(u.f^=Ir,ki(u,null,s)):go(u,()=>{u=null}))}var y=ta(()=>{d=n(h);for(var x=d.length,k=new Set,W=fe,A=dl(),M=0;M<x;M+=1){var E=d[M],b=o(E,M),S=g?null:c.get(b);S?(S.v&&Oo(S.v,E),S.i&&Oo(S.i,M),A&&W.skipped_effects.delete(S.e)):(S=Ou(c,g?s:Il??(Il=Kr()),E,b,M,a,e,r),g||(S.e.f|=Ir),c.set(b,S)),k.add(b)}if(x===0&&i&&!u&&(g?u=qn(()=>i(s)):(u=qn(()=>i(Il??(Il=Kr()))),u.f|=Ir)),!g)if(A){for(const[F,N]of c)k.has(F)||W.skipped_effects.add(N.e);W.oncommit(p),W.ondiscard(()=>{})}else p();n(h)}),_={effect:y,items:c,outrogroups:null,fallback:u};g=!1}function Vu(t,e,r,o,a){var N,R,T,G,K,ct,B,q,nt;var i=(o&8)!==0,s=e.length,c=t.items,f=t.effect.first,l,u=null,h,d=[],g=[],p,y,_,x;if(i)for(x=0;x<s;x+=1)p=e[x],y=a(p,x),_=c.get(y).e,(_.f&Ir)===0&&((R=(N=_.nodes)==null?void 0:N.a)==null||R.measure(),(h??(h=new Set)).add(_));for(x=0;x<s;x+=1){if(p=e[x],y=a(p,x),_=c.get(y).e,t.outrogroups!==null)for(const U of t.outrogroups)U.pending.delete(_),U.done.delete(_);if((_.f&Ir)!==0)if(_.f^=Ir,_===f)ki(_,null,r);else{var k=u?u.next:f;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Qr(t,u,_),Qr(t,_,k),ki(_,k,r),u=_,d=[],g=[],f=u.next;continue}if((_.f&Ln)!==0&&(Ya(_),i&&((G=(T=_.nodes)==null?void 0:T.a)==null||G.unfix(),(h??(h=new Set)).delete(_))),_!==f){if(l!==void 0&&l.has(_)){if(d.length<g.length){var W=g[0],A;u=W.prev;var M=d[0],E=d[d.length-1];for(A=0;A<d.length;A+=1)ki(d[A],W,r);for(A=0;A<g.length;A+=1)l.delete(g[A]);Qr(t,M.prev,E.next),Qr(t,u,M),Qr(t,E,W),f=W,u=E,x-=1,d=[],g=[]}else l.delete(_),ki(_,f,r),Qr(t,_.prev,_.next),Qr(t,_,u===null?t.effect.first:u.next),Qr(t,u,_),u=_;continue}for(d=[],g=[];f!==null&&f!==_;)(l??(l=new Set)).add(f),g.push(f),f=f.next;if(f===null)continue}(_.f&Ir)===0&&d.push(_),u=_,f=_.next}if(t.outrogroups!==null){for(const U of t.outrogroups)U.pending.size===0&&(ts(Vi(U.done)),(K=t.outrogroups)==null||K.delete(U));t.outrogroups.size===0&&(t.outrogroups=null)}if(f!==null||l!==void 0){var b=[];if(l!==void 0)for(_ of l)(_.f&Ln)===0&&b.push(_);for(;f!==null;)(f.f&Ln)===0&&f!==t.fallback&&b.push(f),f=f.next;var S=b.length;if(S>0){var F=(o&4)!==0&&s===0?r:null;if(i){for(x=0;x<S;x+=1)(B=(ct=b[x].nodes)==null?void 0:ct.a)==null||B.measure();for(x=0;x<S;x+=1)(nt=(q=b[x].nodes)==null?void 0:q.a)==null||nt.fix()}Gu(t,b,F)}}i&&Bo(()=>{var U,X;if(h!==void 0)for(_ of h)(X=(U=_.nodes)==null?void 0:U.a)==null||X.apply()})}function Ou(t,e,r,o,a,i,s,c){var f=(s&1)!==0?(s&16)===0?cu(r,!1,!1):uo(r):null,l=(s&2)!==0?uo(a):null;return ft&&f&&(f.trace=()=>{c()[(l==null?void 0:l.v)??a]}),{v:f,i:l,e:qn(()=>(i(e,f??r,l??a,c),()=>{t.delete(o)}))}}function ki(t,e,r){if(t.nodes)for(var o=t.nodes.start,a=t.nodes.end,i=e&&(e.f&Ir)===0?e.nodes.start:r;o!==null;){var s=_i(o);if(i.before(o),o===a)return;o=s}}function Qr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function oa(t,e,r){gl(()=>{var o=ra(()=>e(t,r==null?void 0:r())||{});if(r&&(o!=null&&o.update)){var a=!1,i={};Ji(()=>{var s=r();Tu(s),a&&Us(i,s)&&(i=s,o.update(s))}),a=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}const zl=[...` 	
\r\f \v\uFEFF`];function $u(t,e,r){var o=t==null?"":""+t;if(e&&(o=o?o+" "+e:e),r){for(var a in r)if(r[a])o=o?o+" "+a:a;else if(o.length)for(var i=a.length,s=0;(s=o.indexOf(a,s))>=0;){var c=s+i;(s===0||zl.includes(o[s-1]))&&(c===o.length||zl.includes(o[c]))?o=(s===0?"":o.substring(0,s))+o.substring(c+1):s=c}}return o===""?null:o}function Fl(t,e=!1){var r=e?" !important;":";",o="";for(var a in t){var i=t[a];i!=null&&i!==""&&(o+=" "+a+": "+i+r)}return o}function es(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function ju(t,e){if(e){var r="",o,a;if(Array.isArray(e)?(o=e[0],a=e[1]):o=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,s=0,c=!1,f=[];o&&f.push(...Object.keys(o).map(es)),a&&f.push(...Object.keys(a).map(es));var l=0,u=-1;const y=t.length;for(var h=0;h<y;h++){var d=t[h];if(c?d==="/"&&t[h-1]==="*"&&(c=!1):i?i===d&&(i=!1):d==="/"&&t[h+1]==="*"?c=!0:d==='"'||d==="'"?i=d:d==="("?s++:d===")"&&s--,!c&&i===!1&&s===0){if(d===":"&&u===-1)u=h;else if(d===";"||h===y-1){if(u!==-1){var g=es(t.substring(l,u).trim());if(!f.includes(g)){d!==";"&&h++;var p=t.substring(l,h).trim();r+=" "+p+";"}}l=h+1,u=-1}}}}return o&&(r+=Fl(o)),a&&(r+=Fl(a,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function Cn(t,e,r,o,a,i){var s=t.__className;if(s!==r||s===void 0){var c=$u(r,o,i);c==null?t.removeAttribute("class"):t.className=c,t.__className=r}else if(i&&a!==i)for(var f in i){var l=!!i[f];(a==null||l!==!!a[f])&&t.classList.toggle(f,l)}return i}function ns(t,e={},r,o){for(var a in r){var i=r[a];e[a]!==i&&(r[a]==null?t.style.removeProperty(a):t.style.setProperty(a,i,o))}}function Fe(t,e,r,o){var a=t.__style;if(a!==e){var i=ju(e,o);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}else o&&(Array.isArray(o)?(ns(t,r==null?void 0:r[0],o[0]),ns(t,r==null?void 0:r[1],o[1],"important")):ns(t,r,o));return o}function rs(t,e,r=!1){if(t.multiple){if(e==null)return;if(!gi(e))return Pf();for(var o of t.options)o.selected=e.includes(Ll(o));return}for(o of t.options){var a=Ll(o);if(uu(a,e)){o.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Pl(t){var e=new MutationObserver(()=>{rs(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ua(()=>{e.disconnect()})}function Ll(t){return"__value"in t?t.__value:t.value}const qu=Symbol("is custom element"),Xu=Symbol("is html");function Uu(t,e){var r=os(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Yu(t,e){var r=os(t);r.checked!==(r.checked=e??void 0)&&(t.checked=e)}function H(t,e,r,o){var a=os(t);a[e]!==(a[e]=r)&&(e==="loading"&&(t[pf]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Zu(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function os(t){return t.__attributes??(t.__attributes={[qu]:t.nodeName.includes("-"),[Xu]:t.namespaceURI===cf})}var Dl=new Map;function Zu(t){var e=t.getAttribute("is")||t.nodeName,r=Dl.get(e);if(r)return r;Dl.set(e,r=[]);for(var o,a=t,i=Element.prototype;i!==a;){o=Ds(a);for(var s in o)o[s].set&&r.push(s);a=Oi(a)}return r}function Bl(t,e){return t===e||(t==null?void 0:t[vr])===e}function yo(t={},e,r,o){return gl(()=>{var a,i;return Ji(()=>{a=i,i=[],ra(()=>{t!==r(...i)&&(e(t,...i),a&&Bl(r(...a),t)&&e(null,...a))})}),()=>{Bo(()=>{i&&Bl(r(...i),t)&&e(null,...i)})}}),t}function Gn(t,e,r,o){var a=o,i=!0,s=()=>(i&&(i=!1,a=o),a),c;c=t[e],c===void 0&&o!==void 0&&(c=s());var f;return f=()=>{var l=t[e];return l===void 0?s():(i=!0,l)},f}function _n(t,e){Ji(()=>{const r=new Map,o=t(),a=gi(o)?o:o==null?[]:Array.from(o),i=a.length;for(let s=0;s<i;s++){const c=e(a[s],s);if(r.has(c)){const f=String(r.get(c)),l=String(s);let u=String(c);u.startsWith("[object ")&&(u=null),Mf(f,l,u)}r.set(c,s)}})}function Gl(t,...e){return ra(()=>{try{let r=!1;const o=[];for(const a of e)a&&typeof a=="object"&&vr in a?(o.push($f(a,!0)),r=!0):o.push(a);r&&(If(t),console.log("%c[snapshot]","color: grey",...o))}catch{}}),e}const Ku="5";typeof window<"u"&&((Qc=window.__svelte??(window.__svelte={})).v??(Qc.v=new Set)).add(Ku);function Vl(t){var o,a;const e=((o=t==null?void 0:t.shapes)==null?void 0:o.lineWidth)??1.5,r=((a=t==null?void 0:t.colors)==null?void 0:a.intervalLine)??"#475569";return{width:Math.max(4,Math.round(e*3)),height:Math.max(6,Math.round(e*4)),color:r,opacity:1}}function ia(t,e,r,o){const{width:a,height:i}=o,s=i/2;return t==="left"?`M ${e} ${r} L ${e+a} ${r-s} L ${e+a} ${r+s} Z`:`M ${e} ${r} L ${e-a} ${r-s} L ${e-a} ${r+s} Z`}const Ol=[1,5,2,2.5,4,3],br=[.001,.002,.005,.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,300,500,750,1e3];function aa(t,e){return e?Qu(t):Ju(t)}function Qu(t){if(t[0]<=0||t[1]<=0)return[.1,10];if(t[0]>=t[1])return t;let e=br[0];for(const o of br)if(o<=t[0])e=o;else break;t[0]<br[0]&&(e=Math.pow(10,Math.floor(Math.log10(t[0]))));let r=br[br.length-1];for(let o=br.length-1;o>=0&&br[o]>=t[1];o--)r=br[o];return t[1]>br[br.length-1]&&(r=Math.pow(10,Math.ceil(Math.log10(t[1])))),[e,r]}function Ju(t){const e=t[1]-t[0];if(e===0)return t;if(e<0)return[t[1],t[0]];const r=Math.pow(10,Math.floor(Math.log10(e)));let o=r,a=1/0;for(const c of Ol)for(const f of[.1,1,10]){const l=c*r*f;if(l<=0)continue;const u=Math.floor(t[0]/l)*l,g=(Math.ceil(t[1]/l)*l-u)/e-1;g>=0&&g<a&&(a=g,o=l)}const i=Math.floor(t[0]/o)*o,s=Math.ceil(t[1]/o)*o;return[Math.round(i*1e10)/1e10,Math.round(s*1e10)/1e10]}function Un(t,e,r,o,a=!1){if(t&&r in t){const i=t[r];if(typeof i=="number"&&Number.isFinite(i)&&(!a||i>0))return i}return r===o&&e!=null&&Number.isFinite(e)&&(!a||e>0)?e:null}const Tn=12;function $l(t){const{rows:e,config:r,scale:o,nullValue:a,forestWidth:i,pointSize:s,effects:c=[],pointCol:f,lowerCol:l,upperCol:u}=t,h=td(e,r,o,a,c,f,l,u),d=ed(h,r,o,i,s),g=jl(h,r,o,a);return{axisLimits:h,plotRegion:d,ticks:g}}function td(t,e,r,o,a=[],i,s,c){const f=e.rangeMin!=null,l=e.rangeMax!=null;if(f&&l)return[e.rangeMin,e.rangeMax];const u=[],h=r==="log",d=i||"point";for(const U of t){const X=Un(U.metadata,void 0,d,"point",h);X!=null&&u.push(X);for(const st of a){const rt=Un(U.metadata,void 0,st.pointCol,"point",h);rt!=null&&u.push(rt)}}if(u.length===0)return r==="log"?[.1,10]:[-1,1];let g=Math.min(...u),p=Math.max(...u);(e.includeNull??!0)&&(g=Math.min(g,o),p=Math.max(p,o));const _=g,x=p;let k;if(h){const U=Math.max(g,.001),X=Math.max(p,.001);k=Math.log(X)-Math.log(U)}else k=p-g;if(k===0||!Number.isFinite(k)){const U=u[0];if(h)return aa([U/2,U*2],!0);{const X=Math.max(1,Math.abs(U)*.1);return aa([U-X,U+X],!1)}}const[W,A]=aa([g,p],h),M=e.ciClipFactor??2;let E=W,b=A;const S=[],F=[],N=s||"lower",R=c||"upper";for(const U of t){const X=Un(U.metadata,void 0,N,"lower",h);X!=null&&S.push(X);const st=Un(U.metadata,void 0,R,"upper",h);st!=null&&F.push(st);for(const rt of a){const ot=Un(U.metadata,void 0,rt.lowerCol,"lower",h);ot!=null&&S.push(ot);const pt=Un(U.metadata,void 0,rt.upperCol,"upper",h);pt!=null&&F.push(pt)}}let T,G;if(h)T=E/M,G=b*M;else{const U=b-E;T=E-U*M,G=b+U*M}let K=!1,ct=!1;for(const U of S)U>=T?E=Math.min(E,U):K=!0;for(const U of F)U<=G?b=Math.max(b,U):ct=!0;if(K&&(E=Math.min(E,T)),ct&&(b=Math.max(b,G)),e.symmetric===!0&&!f&&!l)if(r==="log"){const U=Math.log(o),X=Math.max(Math.abs(Math.log(Math.max(_,.001))-U),Math.abs(Math.log(x)-U));E=Math.exp(U-X),b=Math.exp(U+X)}else{const U=Math.max(Math.abs(_-o),Math.abs(x-o));E=o-U,b=o+U}let q=f?e.rangeMin:E,nt=l?e.rangeMax:b;return aa([q,nt],r==="log")}function ed(t,e,r,o,a){if(!(e.markerMargin??!0)||o<=0)return t;const s=o-2*Tn;if(s<=0)return t;if(r==="log"){const l=Math.log(Math.max(t[0],.001)),u=Math.log(Math.max(t[1],.001)),h=u-l,d=a/2*(h/s),g=Math.min(d,.5);return[Math.exp(l-g),Math.exp(u+g)]}const c=t[1]-t[0],f=a/2*(c/s);return[t[0]-f,t[1]+f]}function jl(t,e,r,o){const[a,i]=t,s=o>=a&&o<=i,c=(e.nullTick??!0)&&s;if(e.tickValues&&e.tickValues.length>0){let u=e.tickValues.filter(h=>h>=a&&h<=i);return c&&!u.includes(o)&&(u=[...u,o].sort((h,d)=>h-d)),u}const f=e.tickCount??5;let l=r==="log"?rd(t,f):nd(t,f);return c&&!l.includes(o)&&(l=[...l,o].sort((u,h)=>u-h)),l}function nd(t,e){const[r,o]=t,a=o-r;if(a===0)return[r];const i=a/Math.max(e-1,1),s=Math.pow(10,Math.floor(Math.log10(i)));let c=s,f=1/0;for(const h of Ol){const d=h*s,g=Math.floor(a/d)+1,p=Math.abs(g-e);p<f&&(f=p,c=d);const y=h*s/10;if(y>0){const _=Math.floor(a/y)+1,x=Math.abs(_-e);x<f&&(f=x,c=y)}}const l=Math.ceil(r/c)*c,u=[];for(let h=l;h<=o+c*.001;h+=c){const d=Math.round(h*1e10)/1e10;d>=r&&d<=o&&u.push(d)}return u.length<2&&(u.includes(r)||u.unshift(r),u.includes(o)||u.push(o)),u}function rd(t,e){const[r,o]=t,i=[.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,500,1e3].filter(f=>f>=r&&f<=o);if(i.length<=e)return i;const s=[1,.1,10,100,.5,2,5,.2,.25,1.5,3,4,20,50],c=[];for(const f of s)i.includes(f)&&c.length<e&&c.push(f);if(c.length<e){const f=i.filter(u=>!c.includes(u)),l=Math.max(1,Math.floor(f.length/(e-c.length)));for(let u=0;u<f.length&&c.length<e;u+=l)c.push(f[u])}return c.sort((f,l)=>f-l)}const od=.05,id=.12,ad=.16,sd=.22,Yn={RENDERING_BUFFER:4,DEFAULT_AXIS_GAP:12},Mr={FONT_SCALE:.8,PADDING:4,GAP:6},Sr={DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:32,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800},Er={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,PT_TO_PX:96/72},Pe={INDENT_PER_LEVEL:12,TEXT_PADDING:10,DEFAULT_TICK_COUNT:5},ld={OVERALL_ROW_HEIGHT_MULTIPLIER:1.5},Zn={MIN:60,MAX:600,LABEL_MAX:400,VISUAL_MIN:{sparkline:92,bar:100,stars:84,range:84,badge:74,forest:200,viz_bar:150,viz_boxplot:150,viz_violin:150}},Jr={CHEVRON_WIDTH:12,GAP:6,SAFETY_MARGIN:8},ql={SPACING:6},is={EDGE_THRESHOLD:35,MIN_TICK_SPACING:50},Ci={success:"#16a34a",warning:"#d97706",error:"#dc2626",info:"#2563eb"};function Xl(t,e){return e<=1?0:-((e-1)*ql.SPACING)/2+t*ql.SPACING}Oe[P]="src/components/forest/RowInterval.svelte";var cd=j(Lt('<polygon stroke-width="1" class="point-estimate svelte-1wct561"></polygon>'),Oe[P],[[251,10]]),fd=j(Lt("<path></path>"),Oe[P],[[276,12]]),ud=j(Lt("<line></line>"),Oe[P],[[282,12]]),dd=j(Lt("<path></path>"),Oe[P],[[293,12]]),hd=j(Lt("<line></line>"),Oe[P],[[299,12]]),gd=j(Lt('<circle class="point-estimate svelte-1wct561"></circle>'),Oe[P],[[314,12]]),pd=j(Lt('<polygon class="point-estimate svelte-1wct561"></polygon>'),Oe[P],[[329,12]]),vd=j(Lt('<polygon class="point-estimate svelte-1wct561"></polygon>'),Oe[P],[[341,12]]),md=j(Lt('<rect class="point-estimate svelte-1wct561"></rect>'),Oe[P],[[349,12]]),yd=j(Lt("<line></line><!><!><!>",1),Oe[P],[[266,10]]),_d=j(Lt('<g class="interval-row svelte-1wct561" role="button" tabindex="0"></g>'),Oe[P],[[218,2]]);function Oe(t,e){We(new.target),Se(e,!0,Oe);let r=Gn(e,"weightCol",3,null),o=Gn(e,"isLog",3,!1),a=Gn(e,"forestColumnOptions",3,null);const i=v(m(()=>Vl(e.theme)),"arrowConfig"),s=v(m(()=>{if(!a())return[];const b=w(a().scale,"log")||o();if(a().point&&a().lower&&a().upper){const S=e.row.metadata[a().point],F=e.row.metadata[a().lower],N=e.row.metadata[a().upper],R=!b||he(S,null,!1)&&S>0?S:null,T=!b||he(F,null,!1)&&F>0?F:null,G=!b||he(N,null,!1)&&N>0?N:null;return[{id:"inline",pointCol:a().point,lowerCol:a().lower,upperCol:a().upper,label:null,color:null,shape:null,opacity:null,point:R,lower:T,upper:G}]}return a().effects&&a().effects.length>0?a().effects.map(S=>({...S,point:Un(e.row.metadata,null,S.pointCol,"point",b),lower:Un(e.row.metadata,null,S.lowerCol,"lower",b),upper:Un(e.row.metadata,null,S.upperCol,"upper",b)})):[]}),"effectsToRender"),c=v(m(()=>n(s).some(b=>he(b.point,null,!1)&&!Number.isNaN(b.point)&&he(b.lower,null,!1)&&!Number.isNaN(b.lower)&&he(b.upper,null,!1)&&!Number.isNaN(b.upper))),"hasAnyValidValues"),f=v(m(()=>{var b;return w((b=e.row.style)==null?void 0:b.type,"summary")}),"isSummaryRow");function l(b){return e.clipBounds?b<e.clipBounds[0]:e.xScale(b)<0}function u(b){return e.clipBounds?b>e.clipBounds[1]:e.xScale(b)>e.layout.forestWidth}function h(b){if(!e.clipBounds)return Math.max(0,Math.min(e.layout.forestWidth,e.xScale(b)));const S=Math.max(e.clipBounds[0],Math.min(e.clipBounds[1],b));return e.xScale(S)}const d=v(m(()=>e.clipBounds?e.xScale(e.clipBounds[0]):Tn),"leftArrowX"),g=v(m(()=>e.clipBounds?e.xScale(e.clipBounds[1]):e.layout.forestWidth-Tn),"rightArrowX"),p=v(m(()=>{var b;return((b=e.theme)==null?void 0:b.shapes.summaryHeight)??10}),"diamondHeight"),y=v(m(()=>n(p)/2),"halfDiamondHeight"),_=v(m(()=>{var b;return((b=e.theme)==null?void 0:b.shapes.pointSize)??6}),"basePointSize");function x(b){var F;if(b&&he((F=e.row.markerStyle)==null?void 0:F.size,null,!1))return n(_)*e.row.markerStyle.size;const S=r()?e.row.metadata[r()]:void 0;if(S){const N=.5+Math.sqrt(S/100)*1.5;return Math.min(Math.max(n(_)*N,3),n(_)*2.5)}return n(_)}function k(b,S){var q,nt,U,X;const F=w(S,0),N=e.row.markerStyle,R=(q=e.theme)==null?void 0:q.shapes.effectColors,T=(nt=e.theme)==null?void 0:nt.shapes.markerShapes,G=["square","circle","diamond","triangle"];let K;F&&(N!=null&&N.color)?K=N.color:b.color?K=b.color:R&&R.length>0?K=R[S%R.length]:K=((U=e.theme)==null?void 0:U.colors.interval)??((X=e.theme)==null?void 0:X.colors.primary)??"#2563eb";let ct;F&&(N!=null&&N.shape)?ct=N.shape:b.shape?ct=b.shape:T&&T.length>0?ct=T[S%T.length]:ct=G[S%G.length];let B;return F&&he(N==null?void 0:N.opacity,null,!1)?B=N.opacity:he(b.opacity,null,!1)?B=b.opacity:B=1,{color:K,shape:ct,opacity:B}}var W={...Re()},A=kt(),M=yt(A);{var E=b=>{var S=_d();S.__click=function(...F){ar(()=>e.onRowClick,this,F,Oe,[222,13])},S.__keydown=F=>{var N;return w(F.key,"Enter")&&((N=e.onRowClick)==null?void 0:N.call(e))},I(()=>ze(S,21,()=>n(s),wr,(F,N,R)=>{const T=v(m(()=>he(n(N).point,null,!1)&&!Number.isNaN(n(N).point)&&he(n(N).lower,null,!1)&&!Number.isNaN(n(N).lower)&&he(n(N).upper,null,!1)&&!Number.isNaN(n(N).upper)),"hasValidEffect");n(T);var G=kt(),K=yt(G);{var ct=B=>{const q=v(m(()=>e.yPosition+Xl(R,n(s).length)),"effectY");n(q);const nt=v(m(()=>e.xScale(n(N).lower)),"x1");n(nt);const U=v(m(()=>e.xScale(n(N).upper)),"x2");n(U);const X=v(m(()=>e.xScale(n(N).point)),"cx");n(X);const st=v(m(()=>k(n(N),R)),"style");n(st);const rt=v(m(()=>x(w(R,0))),"pointSize");n(rt);const ot=v(m(()=>{var Nt;return((Nt=e.theme)==null?void 0:Nt.colors.intervalLine)??"#475569"}),"lineColor");n(ot);var pt=kt(),vt=yt(pt);{var Tt=Nt=>{const $e=v(m(()=>[`${n(nt)},${n(q)}`,`${n(X)},${n(q)-n(y)}`,`${n(U)},${n(q)}`,`${n(X)},${n(q)+n(y)}`].join(" ")),"summaryDiamondPoints");n($e);var ne=cd();tt(()=>{var be;H(ne,"points",n($e)),H(ne,"fill",n(st).color),H(ne,"fill-opacity",n(st).opacity),H(ne,"stroke",((be=e.theme)==null?void 0:be.colors.summaryBorder)??"#1d4ed8")}),z(Nt,ne)},Et=Nt=>{const $e=v(m(()=>l(n(N).lower)),"clippedL");n($e);const ne=v(m(()=>u(n(N).upper)),"clippedR");n(ne);const be=v(m(()=>h(n(N).lower)),"clampedX1");n(be);const ue=v(m(()=>h(n(N).upper)),"clampedX2");n(ue);const gt=v(m(()=>n(i).height/2),"whiskerHalfHeight");n(gt);const Ct=v(m(()=>h(n(N).point)),"clampedCx");n(Ct);var Yt=yd(),jt=yt(Yt),Xt=at(jt);{var ke=qt=>{var At=fd();tt(Le=>{H(At,"d",Le),H(At,"fill",n(i).color),H(At,"fill-opacity",n(i).opacity)},[()=>ia("left",n(d),n(q),n(i))]),z(qt,At)},Ft=qt=>{var At=ud();tt(()=>{var Le;H(At,"x1",n(be)),H(At,"x2",n(be)),H(At,"y1",n(q)-n(gt)),H(At,"y2",n(q)+n(gt)),H(At,"stroke",n(ot)),H(At,"stroke-width",((Le=e.theme)==null?void 0:Le.shapes.lineWidth)??1.5)}),z(qt,At)};I(()=>Y(Xt,qt=>{n($e)?qt(ke):qt(Ft,!1)}),"if",Oe,275,10)}var Gt=at(Xt);{var Ye=qt=>{var At=dd();tt(Le=>{H(At,"d",Le),H(At,"fill",n(i).color),H(At,"fill-opacity",n(i).opacity)},[()=>ia("right",n(g),n(q),n(i))]),z(qt,At)},Ue=qt=>{var At=hd();tt(()=>{var Le;H(At,"x1",n(ue)),H(At,"x2",n(ue)),H(At,"y1",n(q)-n(gt)),H(At,"y2",n(q)+n(gt)),H(At,"stroke",n(ot)),H(At,"stroke-width",((Le=e.theme)==null?void 0:Le.shapes.lineWidth)??1.5)}),z(qt,At)};I(()=>Y(Gt,qt=>{n(ne)?qt(Ye):qt(Ue,!1)}),"if",Oe,292,10)}var _e=at(Gt);{var dn=qt=>{var At=gd();tt(()=>{H(At,"cx",n(Ct)),H(At,"cy",n(q)),H(At,"r",n(rt)),H(At,"fill",n(st).color),H(At,"fill-opacity",n(st).opacity)}),z(qt,At)},Mn=qt=>{var At=kt(),Le=yt(At);{var On=Sn=>{const tn=v(m(()=>[`${n(Ct)},${n(q)-n(rt)}`,`${n(Ct)+n(rt)},${n(q)}`,`${n(Ct)},${n(q)+n(rt)}`,`${n(Ct)-n(rt)},${n(q)}`].join(" ")),"diamondPts");n(tn);var hn=pd();tt(()=>{H(hn,"points",n(tn)),H(hn,"fill",n(st).color),H(hn,"fill-opacity",n(st).opacity)}),z(Sn,hn)},hr=Sn=>{var tn=kt(),hn=yt(tn);{var jr=Ge=>{const ln=v(m(()=>[`${n(Ct)},${n(q)-n(rt)}`,`${n(Ct)+n(rt)},${n(q)+n(rt)}`,`${n(Ct)-n(rt)},${n(q)+n(rt)}`].join(" ")),"trianglePts");n(ln);var Fn=vd();tt(()=>{H(Fn,"points",n(ln)),H(Fn,"fill",n(st).color),H(Fn,"fill-opacity",n(st).opacity)}),z(Ge,Fn)},gr=Ge=>{var ln=md();tt(()=>{H(ln,"x",n(Ct)-n(rt)),H(ln,"y",n(q)-n(rt)),H(ln,"width",n(rt)*2),H(ln,"height",n(rt)*2),H(ln,"fill",n(st).color),H(ln,"fill-opacity",n(st).opacity)}),z(Ge,ln)};I(()=>Y(hn,Ge=>{w(n(st).shape,"triangle")?Ge(jr):Ge(gr,!1)},!0),"if",Oe,335,10)}z(Sn,tn)};I(()=>Y(Le,Sn=>{w(n(st).shape,"diamond")?Sn(On):Sn(hr,!1)},!0),"if",Oe,322,10)}z(qt,At)};I(()=>Y(_e,qt=>{w(n(st).shape,"circle")?qt(dn):qt(Mn,!1)}),"if",Oe,313,10)}tt(()=>{var qt;H(jt,"x1",n(be)),H(jt,"x2",n(ue)),H(jt,"y1",n(q)),H(jt,"y2",n(q)),H(jt,"stroke",n(ot)),H(jt,"stroke-width",((qt=e.theme)==null?void 0:qt.shapes.lineWidth)??1.5)}),z(Nt,Yt)};I(()=>Y(vt,Nt=>{n(f)?Nt(Tt):Nt(Et,!1)}),"if",Oe,240,8)}z(B,pt)};I(()=>Y(K,B=>{n(T)&&B(ct)}),"if",Oe,231,6)}z(F,G)}),"each",Oe,227,4),Bn("mouseenter",S,F=>{var N;return(N=e.onRowHover)==null?void 0:N.call(e,!0,F)}),Bn("mouseleave",S,F=>{var N;return(N=e.onRowHover)==null?void 0:N.call(e,!1,F)}),z(b,S)};I(()=>Y(M,b=>{n(c)&&b(E)}),"if",Oe,217,0)}return z(t,A),Ee(W)}mo(["click","keydown"]),Nn[P]="src/components/forest/EffectAxis.svelte";function xd(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}var wd=j(Lt('<line stroke="var(--wf-border, #e2e8f0)" stroke-width="1" opacity="0.5"></line>'),Nn[P],[[171,6]]),bd=j(Lt('<g><line stroke="var(--wf-border, #e2e8f0)" stroke-width="1"></line><text fill="var(--wf-secondary, #64748b)" font-size="var(--wf-font-size-sm, 0.75rem)" class="svelte-hf6bj6"> </text></g>'),Nn[P],[[187,4,[[188,6],[194,6]]]]),Md=j(Lt('<text text-anchor="middle" fill="var(--wf-secondary, #64748b)" font-size="var(--wf-font-size-sm, 0.75rem)" font-weight="500" class="svelte-hf6bj6"> </text>'),Nn[P],[[208,4]]),Sd=j(Lt('<g class="effect-axis svelte-hf6bj6"><line stroke="var(--wf-border, #e2e8f0)" stroke-width="1"></line><!><!><!></g>'),Nn[P],[[157,0,[[159,2]]]]);function Nn(t,e){We(new.target),Se(e,!0,Nn);let r=Gn(e,"position",3,"bottom"),o=Gn(e,"plotHeight",3,0);const a=v(m(()=>{var b;return(b=e.theme)==null?void 0:b.axis}),"axisConfig"),i=v(m(()=>{var b;return e.gridlines??((b=n(a))==null?void 0:b.gridlines)??!1}),"showGridlines"),s=v(m(()=>{var b;return((b=n(a))==null?void 0:b.gridlineStyle)??"dotted"}),"gridlineStyle"),c=35,f=v(m(()=>{var b;return((b=n(a))==null?void 0:b.nullTick)??!0}),"shouldIncludeNullTick"),l=v(m(()=>{var vt,Tt;const[b,S]=e.xScale.domain(),F=e.layout.nullValue,N=F>=b&&F<=S;if((vt=n(a))!=null&&vt.tickValues&&n(a).tickValues.length>0){let Et=n(a).tickValues.filter(Nt=>Nt>=b&&Nt<=S);return n(f)&&N&&!Et.includes(F)&&(Et=[...Et,F].sort((Nt,$e)=>Nt-$e)),Et}const R=50,T=Math.max(2,Math.floor(e.layout.forestWidth/R)),K=((Tt=n(a))==null?void 0:Tt.tickCount)??null??Math.min(7,T),ct=e.baseTicks&&e.baseTicks.length>0?e.baseTicks.filter(Et=>Et>=b&&Et<=S):e.xScale.ticks(K);if(w(ct.length,0))return n(f)&&N?[F]:[];const B=e.xScale(F),q=ct.filter(Et=>Et<F).reverse(),nt=ct.filter(Et=>Et>F),U=ct.some(Et=>w(Et,F)),X=[];let st=B;for(const Et of q){const Nt=e.xScale(Et);st-Nt>=R&&(X.unshift(Et),st=Nt)}const rt=[];let ot=B;for(const Et of nt){const Nt=e.xScale(Et);Nt-ot>=R&&(rt.push(Et),ot=Nt)}const pt=[...X];if((U||n(f)&&N)&&pt.push(F),pt.push(...rt),pt.length<2){const Et=new Set(pt);Et.has(b)||pt.unshift(b),pt.length<2&&!Et.has(S)&&pt.push(S)}return pt}),"ticks"),u=v(m(()=>w(r(),"bottom")?0:e.layout.headerHeight-8),"axisY"),h=v(m(()=>w(r(),"bottom")),"isBottom"),d=v(m(()=>w(n(s),"dashed")?"4,4":w(n(s),"dotted")?"2,2":"none"),"gridlineDashArray");function g(b){return b<c?"start":b>e.layout.forestWidth-c?"end":"middle"}function p(b){return b<c?2:b>e.layout.forestWidth-c?-2:0}var y={...Re()},_=Sd(),x=J(_),k=at(x);{var W=b=>{var S=kt(),F=yt(S);_n(()=>n(l),N=>N),I(()=>ze(F,16,()=>n(l),N=>N,(N,R)=>{var T=wd();tt((G,K)=>{H(T,"x1",G),H(T,"x2",K),H(T,"y1",(n(h),n(u))),H(T,"y2",n(h)?-o():o()),H(T,"stroke-dasharray",n(d))},[()=>e.xScale(R),()=>e.xScale(R)]),z(N,T)}),"each",Nn,170,4),z(b,S)};I(()=>Y(k,b=>{n(i)&&o()>0&&b(W)}),"if",Nn,169,2)}var A=at(k);_n(()=>n(l),b=>b),I(()=>ze(A,16,()=>n(l),b=>b,(b,S)=>{const F=v(m(()=>e.xScale(S)),"tickX");n(F);var N=bd(),R=J(N),T=at(R),G=J(T,!0);tt((K,ct,B)=>{H(N,"transform",`translate(${n(F)??""}, 0)`),H(R,"y1",n(h)?n(u):n(u)-4),H(R,"y2",n(h)?n(u)+4:n(u)),H(T,"x",K),H(T,"y",n(h)?n(u)+16:n(u)-8),H(T,"text-anchor",ct),Jt(G,B)},[()=>p(n(F)),()=>g(n(F)),()=>xd(S)]),z(b,N)}),"each",Nn,185,2);var M=at(A);{var E=b=>{var S=Md(),F=J(S);tt(()=>{H(S,"x",e.layout.forestWidth/2),H(S,"y",n(h)?n(u)+28:n(u)-24),Jt(F,e.axisLabel)}),z(b,S)};I(()=>Y(M,b=>{e.axisLabel&&b(E)}),"if",Nn,207,2)}return tt((b,S)=>{H(x,"x1",b),H(x,"x2",S),H(x,"y1",n(u)),H(x,"y2",n(u))},[()=>e.xScale.range()[0],()=>e.xScale.range()[1]]),z(t,_),Ee(y)}to[P]="src/components/forest/SummaryDiamond.svelte";var Ed=j(Lt('<path fill="var(--wf-summary-fill, #2563eb)"></path>'),to[P],[[58,4]]),kd=j(Lt('<path fill="var(--wf-summary-fill, #2563eb)"></path>'),to[P],[[66,4]]),Cd=j(Lt('<g class="summary-diamond svelte-1g0hzau"><polygon fill="var(--wf-summary-fill, #2563eb)" stroke="var(--wf-summary-border, #1d4ed8)" stroke-width="1" class="svelte-1g0hzau"></polygon><!><!></g>'),to[P],[[47,0,[[49,2]]]]);function to(t,e){We(new.target),Se(e,!0,to);const r=v(m(()=>{var p;return((p=e.theme)==null?void 0:p.shapes.summaryHeight)??10}),"diamondHeight"),o=v(m(()=>n(r)/2),"halfHeight"),a=v(m(()=>{const p=e.xScale(e.lower),y=e.xScale(e.point),_=e.xScale(e.upper),x=0,k=e.layout.forestWidth,W=Math.max(x,p),A=Math.min(k,_);return[[W,e.yPosition].join(","),[y,e.yPosition-n(o)].join(","),[A,e.yPosition].join(","),[y,e.yPosition+n(o)].join(",")].join(" ")}),"points"),i=v(m(()=>e.xScale(e.lower)<0),"clippedLeft"),s=v(m(()=>e.xScale(e.upper)>e.layout.forestWidth),"clippedRight");var c={...Re()},f=Cd(),l=J(f),u=at(l);{var h=p=>{var y=Ed();tt(()=>H(y,"d",`M 4 ${e.yPosition??""} L 10 ${e.yPosition-4} L 10 ${e.yPosition+4} Z`)),z(p,y)};I(()=>Y(u,p=>{n(i)&&p(h)}),"if",to,57,2)}var d=at(u);{var g=p=>{var y=kd();tt(()=>H(y,"d",`M ${e.layout.forestWidth-4} ${e.yPosition??""} L ${e.layout.forestWidth-10} ${e.yPosition-4} L ${e.layout.forestWidth-10} ${e.yPosition+4} Z`)),z(p,y)};I(()=>Y(d,p=>{n(s)&&p(g)}),"if",to,65,2)}return tt(()=>H(l,"points",n(a))),z(t,f),Ee(c)}Kn[P]="src/components/forest/PlotHeader.svelte";var Td=j(xt('<h2 class="plot-title svelte-xpghc"> </h2>'),Kn[P],[[17,8]]),Nd=j(xt('<p class="plot-subtitle svelte-xpghc"> </p>'),Kn[P],[[20,8]]),Hd=j(xt('<div class="controls-area svelte-xpghc"><!></div>'),Kn[P],[[24,6]]),Ad=j(xt('<div class="header-area svelte-xpghc"><div class="title-area svelte-xpghc"><!> <!></div> <!></div>'),Kn[P],[[14,2,[[15,4]]]]);function Kn(t,e){We(new.target),Se(e,!0,Kn);var r={...Re()},o=kt(),a=yt(o);{var i=s=>{var c=Ad(),f=J(c),l=J(f);{var u=y=>{var _=Td(),x=J(_);tt(()=>Jt(x,e.title)),z(y,_)};I(()=>Y(l,y=>{e.title&&y(u)}),"if",Kn,16,6)}var h=at(l,2);{var d=y=>{var _=Nd(),x=J(_);tt(()=>Jt(x,e.subtitle)),z(y,_)};I(()=>Y(h,y=>{e.subtitle&&y(d)}),"if",Kn,19,6)}var g=at(f,2);{var p=y=>{var _=Hd(),x=J(_);I(()=>Pu(x,()=>e.controls),"render",Kn,25,8),z(y,_)};I(()=>Y(g,y=>{e.controls&&y(p)}),"if",Kn,23,4)}z(s,c)};I(()=>Y(a,s=>{(e.title||e.subtitle)&&s(i)}),"if",Kn,13,0)}return z(t,o),Ee(r)}Lr[P]="src/components/forest/PlotFooter.svelte";var Wd=j(xt('<p class="plot-caption svelte-7xjsde"> </p>'),Lr[P],[[13,6]]),Rd=j(xt('<p class="plot-footnote svelte-7xjsde"> </p>'),Lr[P],[[16,6]]),Id=j(xt('<div class="plot-footer svelte-7xjsde"><!> <!></div>'),Lr[P],[[11,2]]);function Lr(t,e){We(new.target),Se(e,!0,Lr);var r={...Re()},o=kt(),a=yt(o);{var i=s=>{var c=Id(),f=J(c);{var l=d=>{var g=Wd(),p=J(g);tt(()=>Jt(p,e.caption)),z(d,g)};I(()=>Y(f,d=>{e.caption&&d(l)}),"if",Lr,12,4)}var u=at(f,2);{var h=d=>{var g=Rd(),p=J(g);tt(()=>Jt(p,e.footnote)),z(d,g)};I(()=>Y(u,d=>{e.footnote&&d(h)}),"if",Lr,15,4)}z(s,c)};I(()=>Y(a,s=>{(e.caption||e.footnote)&&s(i)}),"if",Lr,10,0)}return z(t,o),Ee(r)}Xo[P]="src/components/forest/GroupHeader.svelte";var zd=j(xt('<span class="group-count svelte-16smacw"> </span>'),Xo[P],[[64,4]]),Fd=j(xt('<div><span><svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="1.5" fill="none"></path></svg></span> <span class="group-label svelte-16smacw"> </span> <!></div>'),Xo[P],[[49,0,[[57,2,[[58,4,[[59,6]]]]],[62,2]]]]);function Xo(t,e){We(new.target),Se(e,!0,Xo);let r=Gn(e,"level",3,1);function o(y,_){const x=_==null?void 0:_.groupHeaders;return x?w(y,1)?{fontSize:x.level1FontSize,fontWeight:x.level1FontWeight,italic:x.level1Italic,borderBottom:x.level1BorderBottom}:w(y,2)?{fontSize:x.level2FontSize,fontWeight:x.level2FontWeight,italic:x.level2Italic,borderBottom:x.level2BorderBottom}:{fontSize:x.level3FontSize,fontWeight:x.level3FontWeight,italic:x.level3Italic,borderBottom:x.level3BorderBottom}:{fontSize:void 0,fontWeight:void 0,italic:!1,borderBottom:!1}}const a=v(m(()=>o(r(),e.theme)),"levelStyles");var i={...Re()},s=Fd();let c,f;var l=J(s);let u;var h=at(l,2),d=J(h),g=at(h,2);{var p=y=>{var _=zd(),x=J(_);tt(()=>Jt(x,`(${e.rowCount??""})`)),z(y,_)};I(()=>Y(g,y=>{w(e.rowCount,void 0,!1)&&y(p)}),"if",Xo,63,2)}return tt(()=>{c=Cn(s,1,"group-header svelte-16smacw",null,c,{"has-border":n(a).borderBottom,italic:n(a).italic}),H(s,"aria-expanded",!e.group.collapsed),f=Fe(s,"",f,{"font-size":n(a).fontSize,"font-weight":n(a).fontWeight}),u=Cn(l,1,"group-chevron svelte-16smacw",null,u,{collapsed:e.group.collapsed}),Jt(d,e.group.label)}),z(t,s),Ee(i)}_o[P]="src/components/ui/Tooltip.svelte";var Pd=j(xt('<div class="tooltip-row svelte-c43bsi"><span class="tooltip-label svelte-c43bsi"> </span> <span class="tooltip-value svelte-c43bsi"> </span></div>'),_o[P],[[77,8,[[78,10],[79,10]]]]),Ld=j(xt('<div class="tabviz-tooltip svelte-c43bsi"><div class="tooltip-header svelte-c43bsi"> </div> <div class="tooltip-body svelte-c43bsi"><div class="tooltip-row tooltip-estimate svelte-c43bsi"><span class="tooltip-label svelte-c43bsi">Estimate</span> <span class="tooltip-value svelte-c43bsi"> </span></div> <!></div></div>'),_o[P],[[67,2,[[68,4],[69,4,[[70,6,[[71,8],[72,8]]]]]]]]);function _o(t,e){We(new.target),Se(e,!0,_o);let r=Gn(e,"fields",3,null),o=v(Wt(void 0),"tooltipEl");function a(d){return w(d,null)||w(d,void 0)?"—":w(typeof d,"number")?Number.isInteger(d)?d.toString():d.toFixed(3):String(d)}const i=v(m(()=>!e.row||!r()||w(r().length,0)?[]:Object.entries(e.row.metadata).filter(([g])=>r().includes(g))),"displayFields"),s=v(m(()=>{if(!e.position)return"";const d=220,g=100,p=10;let y=e.position.x+p,_=e.position.y-p;const x=w(typeof window,"undefined",!1)?window.innerWidth:1e3;return w(typeof window,"undefined",!1)&&window.innerHeight,y+d>x-p&&(y=e.position.x-d-p),_-g<p?(_=e.position.y+p,`left: ${y}px; top: ${_}px; transform: none;`):`left: ${y}px; top: ${_}px;`}),"positionStyle"),c=v(m(()=>e.row&&e.position&&r()&&r().length>0),"shouldShow");var f={...Re()},l=kt(),u=yt(l);{var h=d=>{var g=Ld(),p=J(g),y=J(p),_=at(p,2),x=J(_),k=at(J(x),2),W=J(k),A=at(x,2);_n(()=>n(i),([M,E])=>M),I(()=>ze(A,17,()=>n(i),([M,E])=>M,(M,E)=>{var b=m(()=>Ia(n(E),2));let S=()=>n(b)[0];S();let F=()=>n(b)[1];F();var N=Pd(),R=J(N),T=J(R,!0);var G=at(R,2),K=J(G,!0);tt(ct=>{Jt(T,S()),Jt(K,ct)},[()=>a(F())]),z(M,N)}),"each",_o,76,6),yo(g,M=>lt(o,M),()=>n(o)),tt((M,E,b)=>{Fe(g,n(s)),Jt(y,e.row.label),Jt(W,`${M??""} (${E??""}, ${b??""})`)},[()=>a(e.row.point),()=>a(e.row.lower),()=>a(e.row.upper)]),z(d,g)};I(()=>Y(u,d=>{n(c)&&d(h)}),"if",_o,66,0)}return z(t,l),Ee(f)}xo[P]="src/components/table/CellBar.svelte";var Dd=j(xt('<span class="bar-label svelte-1l4k3z2"> </span>'),xo[P],[[39,6]]),Bd=j(xt('<div class="cell-bar svelte-1l4k3z2"><div class="bar-track svelte-1l4k3z2"><div class="bar-fill svelte-1l4k3z2"></div></div> <!></div>'),xo[P],[[30,2,[[31,4,[[32,6]]]]]]);function xo(t,e){We(new.target),Se(e,!0,xo);let r=Gn(e,"maxValue",3,100);const o=v(m(()=>{var d;return((d=e.options)==null?void 0:d.maxValue)??r()}),"effectiveMax"),a=v(m(()=>{var d;return((d=e.options)==null?void 0:d.showLabel)??!0}),"showLabel"),i=v(m(()=>{var d;return((d=e.options)==null?void 0:d.color)??"var(--wf-primary, #2563eb)"}),"barColor"),s=v(m(()=>()=>w(e.value,void 0)||w(e.value,null)||n(o)<=0?0:Math.min(100,Math.max(0,e.value/n(o)*100))),"percentage"),c=v(m(()=>()=>w(e.value,void 0)||w(e.value,null)?"":e.value>=100?e.value.toFixed(0):e.value>=10?e.value.toFixed(1):e.value.toFixed(2)),"formattedValue");var f={...Re()},l=kt(),u=yt(l);{var h=d=>{var g=Bd(),p=J(g),y=J(p);let _;var x=at(p,2);{var k=W=>{var A=Dd(),M=J(A);tt(E=>Jt(M,E),[()=>n(c)()]),z(W,A)};I(()=>Y(x,W=>{n(a)&&W(k)}),"if",xo,38,4)}tt(W=>_=Fe(y,"",_,W),[()=>({width:`${n(s)()??""}%`,"background-color":n(i)})]),z(d,g)};I(()=>Y(u,d=>{w(e.value,void 0,!1)&&w(e.value,null,!1)&&d(h)}),"if",xo,29,0)}return z(t,l),Ee(f)}Uo[P]="src/components/table/CellPvalue.svelte";var Gd=j(xt('<span class="pvalue-stars svelte-1hymfkc"> </span>'),Uo[P],[[99,4]]),Vd=j(xt('<span><span class="pvalue-number svelte-1hymfkc"> </span> <!></span>'),Uo[P],[[86,0,[[97,2]]]]);function Uo(t,e){We(new.target),Se(e,!0,Uo);const r=v(m(()=>{var T;return((T=e.cellStyle)==null?void 0:T.bold)??!1}),"isBold"),o=v(m(()=>{var T;return((T=e.cellStyle)==null?void 0:T.italic)??!1}),"isItalic"),a=v(m(()=>{var T;return((T=e.cellStyle)==null?void 0:T.color)??null}),"textColor"),i=v(m(()=>{var T;return((T=e.cellStyle)==null?void 0:T.bg)??null}),"bgColor"),s=v(m(()=>{var T;return((T=e.cellStyle)==null?void 0:T.emphasis)??!1}),"isEmphasis"),c=v(m(()=>{var T;return((T=e.cellStyle)==null?void 0:T.muted)??!1}),"isMuted"),f=v(m(()=>{var T;return((T=e.cellStyle)==null?void 0:T.accent)??!1}),"isAccent"),l={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function u(T){return T.split("").map(G=>l[G]??G).join("")}const h=v(m(()=>{var T;return((T=e.options)==null?void 0:T.stars)??!1}),"showStars"),d=v(m(()=>{var T;return((T=e.options)==null?void 0:T.thresholds)??[.05,.01,.001]}),"thresholds"),g=v(m(()=>{var T;return((T=e.options)==null?void 0:T.format)??"auto"}),"format"),p=v(m(()=>{var T;return((T=e.options)==null?void 0:T.digits)??2}),"digits"),y=v(m(()=>{var T;return((T=e.options)==null?void 0:T.expThreshold)??.001}),"expThreshold"),_=v(m(()=>{var T;return((T=e.options)==null?void 0:T.abbrevThreshold)??null}),"abbrevThreshold"),x=v(m(()=>{if(!n(h)||w(e.value,void 0)||w(e.value,null))return"";const[T,G,K]=n(d);return e.value<K?"***":e.value<G?"**":e.value<T?"*":""}),"stars"),k=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";if(w(n(_),null,!1)&&e.value<n(_))return`<${n(_)}`;if(w(n(g),"scientific")||w(n(g),"auto")&&e.value<n(y)){const T=Math.floor(Math.log10(e.value));return`${(e.value/Math.pow(10,T)).toPrecision(n(p))}×10${u(T.toString())}`}return e.value>=.1?e.value.toFixed(n(p)):e.value>=.01?e.value.toFixed(n(p)+1):e.value.toFixed(n(p)+2)}),"formattedValue"),W=v(m(()=>n(x).length>0),"isSignificant");var A={...Re()},M=Vd();let E,b;var S=J(M),F=J(S),N=at(S,2);{var R=T=>{var G=Gd(),K=J(G);tt(()=>Jt(K,n(x))),z(T,G)};I(()=>Y(N,T=>{n(x)&&T(R)}),"if",Uo,98,2)}return tt(()=>{E=Cn(M,1,"cell-pvalue svelte-1hymfkc",null,E,{significant:n(W),"cell-bold":n(r),"cell-italic":n(o),"cell-emphasis":n(s),"cell-muted":n(c),"cell-accent":n(f)}),b=Fe(M,"",b,{color:n(a),"background-color":n(i)}),Jt(F,n(k))}),z(t,M),Ee(A)}function sa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Od(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ul(t){let e,r,o;t.length!==2?(e=sa,r=(c,f)=>sa(t(c),f),o=(c,f)=>t(c)-f):(e=t===sa||t===Od?t:$d,r=t,o=t);function a(c,f,l=0,u=c.length){if(l<u){if(e(f,f)!==0)return u;do{const h=l+u>>>1;r(c[h],f)<0?l=h+1:u=h}while(l<u)}return l}function i(c,f,l=0,u=c.length){if(l<u){if(e(f,f)!==0)return u;do{const h=l+u>>>1;r(c[h],f)<=0?l=h+1:u=h}while(l<u)}return l}function s(c,f,l=0,u=c.length){const h=a(c,f,l,u-1);return h>l&&o(c[h-1],f)>-o(c[h],f)?h-1:h}return{left:a,center:s,right:i}}function $d(){return 0}function jd(t){return t===null?NaN:+t}const qd=Ul(sa).right;Ul(jd).center;const Xd=Math.sqrt(50),Ud=Math.sqrt(10),Yd=Math.sqrt(2);function la(t,e,r){const o=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(o)),i=o/Math.pow(10,a),s=i>=Xd?10:i>=Ud?5:i>=Yd?2:1;let c,f,l;return a<0?(l=Math.pow(10,-a)/s,c=Math.round(t*l),f=Math.round(e*l),c/l<t&&++c,f/l>e&&--f,l=-l):(l=Math.pow(10,a)*s,c=Math.round(t/l),f=Math.round(e/l),c*l<t&&++c,f*l>e&&--f),f<c&&.5<=r&&r<2?la(t,e,r*2):[c,f,l]}function as(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const o=e<t,[a,i,s]=o?la(e,t,r):la(t,e,r);if(!(i>=a))return[];const c=i-a+1,f=new Array(c);if(o)if(s<0)for(let l=0;l<c;++l)f[l]=(i-l)/-s;else for(let l=0;l<c;++l)f[l]=(i-l)*s;else if(s<0)for(let l=0;l<c;++l)f[l]=(a+l)/-s;else for(let l=0;l<c;++l)f[l]=(a+l)*s;return f}function ss(t,e,r){return e=+e,t=+t,r=+r,la(t,e,r)[2]}function Zd(t,e,r){e=+e,t=+t,r=+r;const o=e<t,a=o?ss(e,t,r):ss(t,e,r);return(o?-1:1)*(a<0?1/-a:a)}function Yl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ls(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Zl(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}function Ti(){}var Ni=.7,ca=1/Ni,Yo="\\s*([+-]?\\d+)\\s*",Hi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kd=/^#([0-9a-f]{3,8})$/,Qd=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),Jd=new RegExp(`^rgb\\(${kr},${kr},${kr}\\)$`),th=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${Hi}\\)$`),eh=new RegExp(`^rgba\\(${kr},${kr},${kr},${Hi}\\)$`),nh=new RegExp(`^hsl\\(${Hi},${kr},${kr}\\)$`),rh=new RegExp(`^hsla\\(${Hi},${kr},${kr},${Hi}\\)$`),Kl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ls(Ti,Ai,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ql,formatHex:Ql,formatHex8:oh,formatHsl:ih,formatRgb:Jl,toString:Jl});function Ql(){return this.rgb().formatHex()}function oh(){return this.rgb().formatHex8()}function ih(){return oc(this).formatHsl()}function Jl(){return this.rgb().formatRgb()}function Ai(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Kd.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?tc(e):r===3?new Hn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?fa(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?fa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qd.exec(t))?new Hn(e[1],e[2],e[3],1):(e=Jd.exec(t))?new Hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=th.exec(t))?fa(e[1],e[2],e[3],e[4]):(e=eh.exec(t))?fa(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=nh.exec(t))?rc(e[1],e[2]/100,e[3]/100,1):(e=rh.exec(t))?rc(e[1],e[2]/100,e[3]/100,e[4]):Kl.hasOwnProperty(t)?tc(Kl[t]):t==="transparent"?new Hn(NaN,NaN,NaN,0):null}function tc(t){return new Hn(t>>16&255,t>>8&255,t&255,1)}function fa(t,e,r,o){return o<=0&&(t=e=r=NaN),new Hn(t,e,r,o)}function ah(t){return t instanceof Ti||(t=Ai(t)),t?(t=t.rgb(),new Hn(t.r,t.g,t.b,t.opacity)):new Hn}function cs(t,e,r,o){return arguments.length===1?ah(t):new Hn(t,e,r,o??1)}function Hn(t,e,r,o){this.r=+t,this.g=+e,this.b=+r,this.opacity=+o}ls(Hn,cs,Zl(Ti,{brighter(t){return t=t==null?ca:Math.pow(ca,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ni:Math.pow(Ni,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Hn(wo(this.r),wo(this.g),wo(this.b),ua(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ec,formatHex:ec,formatHex8:sh,formatRgb:nc,toString:nc}));function ec(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}`}function sh(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}${bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function nc(){const t=ua(this.opacity);return`${t===1?"rgb(":"rgba("}${wo(this.r)}, ${wo(this.g)}, ${wo(this.b)}${t===1?")":`, ${t})`}`}function ua(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bo(t){return t=wo(t),(t<16?"0":"")+t.toString(16)}function rc(t,e,r,o){return o<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new sr(t,e,r,o)}function oc(t){if(t instanceof sr)return new sr(t.h,t.s,t.l,t.opacity);if(t instanceof Ti||(t=Ai(t)),!t)return new sr;if(t instanceof sr)return t;t=t.rgb();var e=t.r/255,r=t.g/255,o=t.b/255,a=Math.min(e,r,o),i=Math.max(e,r,o),s=NaN,c=i-a,f=(i+a)/2;return c?(e===i?s=(r-o)/c+(r<o)*6:r===i?s=(o-e)/c+2:s=(e-r)/c+4,c/=f<.5?i+a:2-i-a,s*=60):c=f>0&&f<1?0:s,new sr(s,c,f,t.opacity)}function lh(t,e,r,o){return arguments.length===1?oc(t):new sr(t,e,r,o??1)}function sr(t,e,r,o){this.h=+t,this.s=+e,this.l=+r,this.opacity=+o}ls(sr,lh,Zl(Ti,{brighter(t){return t=t==null?ca:Math.pow(ca,t),new sr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ni:Math.pow(Ni,t),new sr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*e,a=2*r-o;return new Hn(fs(t>=240?t-240:t+120,a,o),fs(t,a,o),fs(t<120?t+240:t-120,a,o),this.opacity)},clamp(){return new sr(ic(this.h),da(this.s),da(this.l),ua(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ua(this.opacity);return`${t===1?"hsl(":"hsla("}${ic(this.h)}, ${da(this.s)*100}%, ${da(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ic(t){return t=(t||0)%360,t<0?t+360:t}function da(t){return Math.max(0,Math.min(1,t||0))}function fs(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const us=t=>()=>t;function ch(t,e){return function(r){return t+r*e}}function fh(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(o){return Math.pow(t+o*e,r)}}function uh(t){return(t=+t)==1?ac:function(e,r){return r-e?fh(e,r,t):us(isNaN(e)?r:e)}}function ac(t,e){var r=e-t;return r?ch(t,r):us(isNaN(t)?e:t)}const sc=(function t(e){var r=uh(e);function o(a,i){var s=r((a=cs(a)).r,(i=cs(i)).r),c=r(a.g,i.g),f=r(a.b,i.b),l=ac(a.opacity,i.opacity);return function(u){return a.r=s(u),a.g=c(u),a.b=f(u),a.opacity=l(u),a+""}}return o.gamma=t,o})(1);function dh(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,o=e.slice(),a;return function(i){for(a=0;a<r;++a)o[a]=t[a]*(1-i)+e[a]*i;return o}}function hh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gh(t,e){var r=e?e.length:0,o=t?Math.min(r,t.length):0,a=new Array(o),i=new Array(r),s;for(s=0;s<o;++s)a[s]=gs(t[s],e[s]);for(;s<r;++s)i[s]=e[s];return function(c){for(s=0;s<o;++s)i[s]=a[s](c);return i}}function ph(t,e){var r=new Date;return t=+t,e=+e,function(o){return r.setTime(t*(1-o)+e*o),r}}function ha(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function vh(t,e){var r={},o={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=gs(t[a],e[a]):o[a]=e[a];return function(i){for(a in r)o[a]=r[a](i);return o}}var ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hs=new RegExp(ds.source,"g");function mh(t){return function(){return t}}function yh(t){return function(e){return t(e)+""}}function _h(t,e){var r=ds.lastIndex=hs.lastIndex=0,o,a,i,s=-1,c=[],f=[];for(t=t+"",e=e+"";(o=ds.exec(t))&&(a=hs.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[s]?c[s]+=i:c[++s]=i),(o=o[0])===(a=a[0])?c[s]?c[s]+=a:c[++s]=a:(c[++s]=null,f.push({i:s,x:ha(o,a)})),r=hs.lastIndex;return r<e.length&&(i=e.slice(r),c[s]?c[s]+=i:c[++s]=i),c.length<2?f[0]?yh(f[0].x):mh(e):(e=f.length,function(l){for(var u=0,h;u<e;++u)c[(h=f[u]).i]=h.x(l);return c.join("")})}function gs(t,e){var r=typeof e,o;return e==null||r==="boolean"?us(e):(r==="number"?ha:r==="string"?(o=Ai(e))?(e=o,sc):_h:e instanceof Ai?sc:e instanceof Date?ph:hh(e)?dh:Array.isArray(e)?gh:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vh:ha)(t,e)}function xh(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function wh(t){return function(){return t}}function bh(t){return+t}var lc=[0,1];function Zo(t){return t}function ps(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:wh(isNaN(e)?NaN:.5)}function Mh(t,e){var r;return t>e&&(r=t,t=e,e=r),function(o){return Math.max(t,Math.min(e,o))}}function Sh(t,e,r){var o=t[0],a=t[1],i=e[0],s=e[1];return a<o?(o=ps(a,o),i=r(s,i)):(o=ps(o,a),i=r(i,s)),function(c){return i(o(c))}}function Eh(t,e,r){var o=Math.min(t.length,e.length)-1,a=new Array(o),i=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<o;)a[s]=ps(t[s],t[s+1]),i[s]=r(e[s],e[s+1]);return function(c){var f=qd(t,c,1,o)-1;return i[f](a[f](c))}}function cc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fc(){var t=lc,e=lc,r=gs,o,a,i,s=Zo,c,f,l;function u(){var d=Math.min(t.length,e.length);return s!==Zo&&(s=Mh(t[0],t[d-1])),c=d>2?Eh:Sh,f=l=null,h}function h(d){return d==null||isNaN(d=+d)?i:(f||(f=c(t.map(o),e,r)))(o(s(d)))}return h.invert=function(d){return s(a((l||(l=c(e,t.map(o),ha)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,bh),u()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),r=xh,u()},h.clamp=function(d){return arguments.length?(s=d?!0:Zo,u()):s!==Zo},h.interpolate=function(d){return arguments.length?(r=d,u()):r},h.unknown=function(d){return arguments.length?(i=d,h):i},function(d,g){return o=d,a=g,u()}}function kh(){return fc()(Zo,Zo)}function Ch(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ga(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,o=t.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+t.slice(r+1)]}function Ko(t){return t=ga(Math.abs(t)),t?t[1]:NaN}function Th(t,e){return function(r,o){for(var a=r.length,i=[],s=0,c=t[0],f=0;a>0&&c>0&&(f+c+1>o&&(c=Math.max(1,o-f)),i.push(r.substring(a-=c,a+c)),!((f+=c+1)>o));)c=t[s=(s+1)%t.length];return i.reverse().join(e)}}function Nh(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Hh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wi(t){if(!(e=Hh.exec(t)))throw new Error("invalid format: "+t);var e;return new vs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Wi.prototype=vs.prototype;function vs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}vs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ah(t){t:for(var e=t.length,r=1,o=-1,a;r<e;++r)switch(t[r]){case".":o=a=r;break;case"0":o===0&&(o=r),a=r;break;default:if(!+t[r])break t;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(a+1):t}var uc;function Wh(t,e){var r=ga(t,e);if(!r)return t+"";var o=r[0],a=r[1],i=a-(uc=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=o.length;return i===s?o:i>s?o+new Array(i-s+1).join("0"):i>0?o.slice(0,i)+"."+o.slice(i):"0."+new Array(1-i).join("0")+ga(t,Math.max(0,e+i-1))[0]}function dc(t,e){var r=ga(t,e);if(!r)return t+"";var o=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+o:o.length>a+1?o.slice(0,a+1)+"."+o.slice(a+1):o+new Array(a-o.length+2).join("0")}const hc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ch,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>dc(t*100,e),r:dc,s:Wh,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gc(t){return t}var pc=Array.prototype.map,vc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Rh(t){var e=t.grouping===void 0||t.thousands===void 0?gc:Th(pc.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?gc:Nh(pc.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function l(h){h=Wi(h);var d=h.fill,g=h.align,p=h.sign,y=h.symbol,_=h.zero,x=h.width,k=h.comma,W=h.precision,A=h.trim,M=h.type;M==="n"?(k=!0,M="g"):hc[M]||(W===void 0&&(W=12),A=!0,M="g"),(_||d==="0"&&g==="=")&&(_=!0,d="0",g="=");var E=y==="$"?r:y==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",b=y==="$"?o:/[%p]/.test(M)?s:"",S=hc[M],F=/[defgprs%]/.test(M);W=W===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,W)):Math.max(0,Math.min(20,W));function N(R){var T=E,G=b,K,ct,B;if(M==="c")G=S(R)+G,R="";else{R=+R;var q=R<0||1/R<0;if(R=isNaN(R)?f:S(Math.abs(R),W),A&&(R=Ah(R)),q&&+R==0&&p!=="+"&&(q=!1),T=(q?p==="("?p:c:p==="-"||p==="("?"":p)+T,G=(M==="s"?vc[8+uc/3]:"")+G+(q&&p==="("?")":""),F){for(K=-1,ct=R.length;++K<ct;)if(B=R.charCodeAt(K),48>B||B>57){G=(B===46?a+R.slice(K+1):R.slice(K))+G,R=R.slice(0,K);break}}}k&&!_&&(R=e(R,1/0));var nt=T.length+R.length+G.length,U=nt<x?new Array(x-nt+1).join(d):"";switch(k&&_&&(R=e(U+R,U.length?x-G.length:1/0),U=""),g){case"<":R=T+R+G+U;break;case"=":R=T+U+R+G;break;case"^":R=U.slice(0,nt=U.length>>1)+T+R+G+U.slice(nt);break;default:R=U+T+R+G;break}return i(R)}return N.toString=function(){return h+""},N}function u(h,d){var g=l((h=Wi(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Ko(d)/3)))*3,y=Math.pow(10,-p),_=vc[8+p/3];return function(x){return g(y*x)+_}}return{format:l,formatPrefix:u}}var pa,ms,mc;Ih({thousands:",",grouping:[3],currency:["$",""]});function Ih(t){return pa=Rh(t),ms=pa.format,mc=pa.formatPrefix,pa}function zh(t){return Math.max(0,-Ko(Math.abs(t)))}function Fh(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ko(e)/3)))*3-Ko(Math.abs(t)))}function Ph(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ko(e)-Ko(t))+1}function Lh(t,e,r,o){var a=Zd(t,e,r),i;switch(o=Wi(o??",f"),o.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return o.precision==null&&!isNaN(i=Fh(a,s))&&(o.precision=i),mc(o,s)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(i=Ph(a,Math.max(Math.abs(t),Math.abs(e))))&&(o.precision=i-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(i=zh(a))&&(o.precision=i-(o.type==="%")*2);break}}return ms(o)}function Dh(t){var e=t.domain;return t.ticks=function(r){var o=e();return as(o[0],o[o.length-1],r??10)},t.tickFormat=function(r,o){var a=e();return Lh(a[0],a[a.length-1],r??10,o)},t.nice=function(r){r==null&&(r=10);var o=e(),a=0,i=o.length-1,s=o[a],c=o[i],f,l,u=10;for(c<s&&(l=s,s=c,c=l,l=a,a=i,i=l);u-- >0;){if(l=ss(s,c,r),l===f)return o[a]=s,o[i]=c,e(o);if(l>0)s=Math.floor(s/l)*l,c=Math.ceil(c/l)*l;else if(l<0)s=Math.ceil(s*l)/l,c=Math.floor(c*l)/l;else break;f=l}return t},t}function Qn(){var t=kh();return t.copy=function(){return cc(t,Qn())},Yl.apply(t,arguments),Dh(t)}function Bh(t,e){t=t.slice();var r=0,o=t.length-1,a=t[r],i=t[o],s;return i<a&&(s=r,r=o,o=s,s=a,a=i,i=s),t[r]=e.floor(a),t[o]=e.ceil(i),t}function yc(t){return Math.log(t)}function _c(t){return Math.exp(t)}function Gh(t){return-Math.log(-t)}function Vh(t){return-Math.exp(-t)}function Oh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function $h(t){return t===10?Oh:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jh(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function xc(t){return(e,r)=>-t(-e,r)}function qh(t){const e=t(yc,_c),r=e.domain;let o=10,a,i;function s(){return a=jh(o),i=$h(o),r()[0]<0?(a=xc(a),i=xc(i),t(Gh,Vh)):t(yc,_c),e}return e.base=function(c){return arguments.length?(o=+c,s()):o},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const f=r();let l=f[0],u=f[f.length-1];const h=u<l;h&&([l,u]=[u,l]);let d=a(l),g=a(u),p,y;const _=c==null?10:+c;let x=[];if(!(o%1)&&g-d<_){if(d=Math.floor(d),g=Math.ceil(g),l>0){for(;d<=g;++d)for(p=1;p<o;++p)if(y=d<0?p/i(-d):p*i(d),!(y<l)){if(y>u)break;x.push(y)}}else for(;d<=g;++d)for(p=o-1;p>=1;--p)if(y=d>0?p/i(-d):p*i(d),!(y<l)){if(y>u)break;x.push(y)}x.length*2<_&&(x=as(l,u,_))}else x=as(d,g,Math.min(g-d,_)).map(i);return h?x.reverse():x},e.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=o===10?"s":","),typeof f!="function"&&(!(o%1)&&(f=Wi(f)).precision==null&&(f.trim=!0),f=ms(f)),c===1/0)return f;const l=Math.max(1,o*c/e.ticks().length);return u=>{let h=u/i(Math.round(a(u)));return h*o<o-.5&&(h*=o),h<=l?f(u):""}},e.nice=()=>r(Bh(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function Dr(){const t=qh(fc()).domain([1,10]);return t.copy=()=>cc(t,Dr()).base(t.base()),Yl.apply(t,arguments),t}function on(t){return function(){return t}}const wc=1e-12,ys=Math.PI,_s=2*ys,Mo=1e-6,Xh=_s-Mo;function bc(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Uh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bc;const r=10**e;return function(o){this._+=o[0];for(let a=1,i=o.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+o[a]}}class Yh{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bc:Uh(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,o,a){this._append`Q${+e},${+r},${this._x1=+o},${this._y1=+a}`}bezierCurveTo(e,r,o,a,i,s){this._append`C${+e},${+r},${+o},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(e,r,o,a,i){if(e=+e,r=+r,o=+o,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,c=this._y1,f=o-e,l=a-r,u=s-e,h=c-r,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>Mo)if(!(Math.abs(h*f-l*u)>Mo)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let g=o-s,p=a-c,y=f*f+l*l,_=g*g+p*p,x=Math.sqrt(y),k=Math.sqrt(d),W=i*Math.tan((ys-Math.acos((y+d-_)/(2*x*k)))/2),A=W/k,M=W/x;Math.abs(A-1)>Mo&&this._append`L${e+A*u},${r+A*h}`,this._append`A${i},${i},0,0,${+(h*g>u*p)},${this._x1=e+M*f},${this._y1=r+M*l}`}}arc(e,r,o,a,i,s){if(e=+e,r=+r,o=+o,s=!!s,o<0)throw new Error(`negative radius: ${o}`);let c=o*Math.cos(a),f=o*Math.sin(a),l=e+c,u=r+f,h=1^s,d=s?a-i:i-a;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Mo||Math.abs(this._y1-u)>Mo)&&this._append`L${l},${u}`,o&&(d<0&&(d=d%_s+_s),d>Xh?this._append`A${o},${o},0,1,${h},${e-c},${r-f}A${o},${o},0,1,${h},${this._x1=l},${this._y1=u}`:d>Mo&&this._append`A${o},${o},0,${+(d>=ys)},${h},${this._x1=e+o*Math.cos(i)},${this._y1=r+o*Math.sin(i)}`)}rect(e,r,o,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${o=+o}v${+a}h${-o}Z`}toString(){return this._}}function Mc(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const o=Math.floor(r);if(!(o>=0))throw new RangeError(`invalid digits: ${r}`);e=o}return t},()=>new Yh(e)}function Sc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ec(t){this._context=t}Ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function kc(t){return new Ec(t)}function Cc(t){return t[0]}function Tc(t){return t[1]}function Nc(t,e){var r=on(!0),o=null,a=kc,i=null,s=Mc(c);t=typeof t=="function"?t:t===void 0?Cc:on(t),e=typeof e=="function"?e:e===void 0?Tc:on(e);function c(f){var l,u=(f=Sc(f)).length,h,d=!1,g;for(o==null&&(i=a(g=s())),l=0;l<=u;++l)!(l<u&&r(h=f[l],l,f))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(h,l,f),+e(h,l,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:on(+f),c):t},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:on(+f),c):e},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:on(!!f),c):r},c.curve=function(f){return arguments.length?(a=f,o!=null&&(i=a(o)),c):a},c.context=function(f){return arguments.length?(f==null?o=i=null:i=a(o=f),c):o},c}function Zh(t,e,r){var o=null,a=on(!0),i=null,s=kc,c=null,f=Mc(l);t=typeof t=="function"?t:t===void 0?Cc:on(+t),e=typeof e=="function"?e:on(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Tc:on(+r);function l(h){var d,g,p,y=(h=Sc(h)).length,_,x=!1,k,W=new Array(y),A=new Array(y);for(i==null&&(c=s(k=f())),d=0;d<=y;++d){if(!(d<y&&a(_=h[d],d,h))===x)if(x=!x)g=d,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),p=d-1;p>=g;--p)c.point(W[p],A[p]);c.lineEnd(),c.areaEnd()}x&&(W[d]=+t(_,d,h),A[d]=+e(_,d,h),c.point(o?+o(_,d,h):W[d],r?+r(_,d,h):A[d]))}if(k)return c=null,k+""||null}function u(){return Nc().defined(a).curve(s).context(i)}return l.x=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),o=null,l):t},l.x0=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),l):t},l.x1=function(h){return arguments.length?(o=h==null?null:typeof h=="function"?h:on(+h),l):o},l.y=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),r=null,l):e},l.y0=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),l):e},l.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:on(+h),l):r},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(r)},l.lineX1=function(){return u().x(o).y(e)},l.defined=function(h){return arguments.length?(a=typeof h=="function"?h:on(!!h),l):a},l.curve=function(h){return arguments.length?(s=h,i!=null&&(c=s(i)),l):s},l.context=function(h){return arguments.length?(h==null?i=c=null:c=s(i=h),l):i},l}function Hc(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function xs(t,e){this._context=t,this._k=(1-e)/6}xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Hc(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Hc(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},(function t(e){function r(o){return new xs(o,e)}return r.tension=function(o){return t(+o)},r})(0);function Kh(t,e,r){var o=t._x1,a=t._y1,i=t._x2,s=t._y2;if(t._l01_a>wc){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,a=(a*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>wc){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);i=(i*l+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*l+t._y1*t._l23_2a-r*t._l12_2a)/u}t._context.bezierCurveTo(o,a,i,s,t._x2,t._y2)}function Ac(t,e){this._context=t,this._alpha=e}Ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,o=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Kh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Wc=(function t(e){function r(o){return e?new Ac(o,e):new xs(o,0)}return r.alpha=function(o){return t(+o)},r})(.5);An[P]="src/components/table/CellSparkline.svelte";var Qh=j(Lt('<rect opacity="0.8"></rect>'),An[P],[[72,8]]),Jh=j(Lt('<path opacity="0.3"></path><path fill="none" stroke-width="1.5"></path>',1),An[P],[[82,6],[83,6]]),tg=j(Lt('<circle r="2"></circle>'),An[P],[[89,8]]),eg=j(Lt('<path fill="none" stroke-width="1.5"></path><!>',1),An[P],[[85,6]]),ng=j(Lt('<text text-anchor="middle" dominant-baseline="middle" fill="var(--wf-muted, #94a3b8)" font-size="8">--</text>'),An[P],[[93,4]]),rg=j(Lt('<svg class="cell-sparkline svelte-hfafss"><!></svg>'),An[P],[[68,0]]);function An(t,e){We(new.target),Se(e,!0,An);const r=v(m(()=>{var _;return((_=e.options)==null?void 0:_.type)??"line"}),"chartType"),o=v(m(()=>{var _;return((_=e.options)==null?void 0:_.height)??20}),"chartHeight"),a=v(m(()=>{var _;return((_=e.options)==null?void 0:_.color)??"var(--wf-primary, #2563eb)"}),"chartColor"),i=60,s=v(m(()=>!e.data||!Array.isArray(e.data)||w(e.data.length,0)?[]:Array.isArray(e.data[0])?e.data[0]:e.data),"normalizedData"),c=v(m(()=>{if(w(n(s).length,0))return[];const _=Math.min(...n(s)),x=Math.max(...n(s)),k=(x-_)*.1||1,W=Qn().domain([0,n(s).length-1]).range([2,i-2]),A=Qn().domain([_-k,x+k]).range([n(o)-2,2]);return n(s).map((M,E)=>[W(E),A(M)])}),"points"),f=v(m(()=>w(n(c).length,0)?"":Nc().x(x=>x[0]).y(x=>x[1]).curve(Wc.alpha(.5))(n(c))??""),"linePath"),l=v(m(()=>w(n(c).length,0)?"":Zh().x(x=>x[0]).y0(n(o)-2).y1(x=>x[1]).curve(Wc.alpha(.5))(n(c))??""),"areaPath"),u=v(m(()=>n(c).length>0?(i-8)/n(c).length-1:0),"barWidth");var h={...Re()},d=rg();H(d,"width",i);var g=J(d);{var p=_=>{var x=kt(),k=yt(x);{var W=M=>{var E=kt(),b=yt(E);I(()=>ze(b,17,()=>n(c),wr,(S,F)=>{var N=m(()=>Ia(n(F),2));let R=()=>n(N)[0];R();let T=()=>n(N)[1];T();var G=Qh();tt(()=>{H(G,"x",R()-n(u)/2),H(G,"y",T()),H(G,"width",n(u)),H(G,"height",n(o)-2-T()),H(G,"fill",n(a))}),z(S,G)}),"each",An,71,6),z(M,E)},A=M=>{var E=kt(),b=yt(E);{var S=N=>{var R=Jh(),T=yt(R),G=at(T);tt(()=>{H(T,"d",n(l)),H(T,"fill",n(a)),H(G,"d",n(f)),H(G,"stroke",n(a))}),z(N,R)},F=N=>{var R=eg(),T=yt(R),G=at(T);{var K=ct=>{const B=v(m(()=>n(c)[n(c).length-1]),"lastPoint");n(B);var q=tg();tt(()=>{H(q,"cx",n(B)[0]),H(q,"cy",n(B)[1]),H(q,"fill",n(a))}),z(ct,q)};I(()=>Y(G,ct=>{n(c).length>0&&ct(K)}),"if",An,87,6)}tt(()=>{H(T,"d",n(f)),H(T,"stroke",n(a))}),z(N,R)};I(()=>Y(b,N=>{w(n(r),"area")?N(S):N(F,!1)},!0),"if",An,81,4)}z(M,E)};I(()=>Y(k,M=>{w(n(r),"bar")?M(W):M(A,!1)}),"if",An,70,4)}z(_,x)},y=_=>{var x=ng();H(x,"x",i/2),tt(()=>H(x,"y",n(o)/2)),z(_,x)};I(()=>Y(g,_=>{n(c).length>0?_(p):_(y,!1)}),"if",An,69,2)}return tt(()=>{H(d,"height",n(o)),H(d,"viewBox",`0 0 60 ${n(o)??""}`)}),z(t,d),Ee(h)}lr[P]="src/components/table/CellContent.svelte";var og=j(xt('<span class="cell-icon svelte-mxyczy"> </span>'),lr[P],[[34,15]]),ig=j(xt('<span class="cell-badge svelte-mxyczy"> </span>'),lr[P],[[36,16]]),ag=j(xt('<span><!> <span class="cell-value"> </span> <!></span>'),lr[P],[[23,0,[[35,2]]]]);function lr(t,e){We(new.target),Se(e,!0,lr);const r=v(m(()=>{var M;return!!((M=e.cellStyle)!=null&&M.badge)}),"hasBadge"),o=v(m(()=>{var M;return!!((M=e.cellStyle)!=null&&M.icon)}),"hasIcon"),a=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.bold)??!1}),"isBold"),i=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.italic)??!1}),"isItalic"),s=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.color)??null}),"textColor"),c=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.bg)??null}),"bgColor"),f=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.emphasis)??!1}),"isEmphasis"),l=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.muted)??!1}),"isMuted"),u=v(m(()=>{var M;return((M=e.cellStyle)==null?void 0:M.accent)??!1}),"isAccent");var h={...Re()},d=ag();let g,p;var y=J(d);{var _=M=>{var E=og(),b=J(E);tt(()=>{var S;return Jt(b,(S=e.cellStyle)==null?void 0:S.icon)}),z(M,E)};I(()=>Y(y,M=>{n(o)&&M(_)}),"if",lr,34,2)}var x=at(y,2),k=J(x),W=at(x,2);{var A=M=>{var E=ig(),b=J(E);tt(()=>{var S;return Jt(b,(S=e.cellStyle)==null?void 0:S.badge)}),z(M,E)};I(()=>Y(W,M=>{n(r)&&M(A)}),"if",lr,36,2)}return tt(M=>{g=Cn(d,1,"cell-content svelte-mxyczy",null,g,{"cell-bold":n(a),"cell-italic":n(i),"cell-emphasis":n(f),"cell-muted":n(l),"cell-accent":n(u)}),H(d,"title",M),p=Fe(d,"",p,{color:n(s),"background-color":n(c)}),Jt(k,e.value??"")},[()=>String(e.value??"")]),z(t,d),Ee(h)}Ri[P]="src/components/table/CellIcon.svelte";var sg=j(xt("<span> </span>"),Ri[P],[[32,2]]);function Ri(t,e){We(new.target),Se(e,!0,Ri);const r=v(m(()=>{var h;return((h=e.options)==null?void 0:h.mapping)??{}}),"mapping"),o=v(m(()=>{var h;return((h=e.options)==null?void 0:h.size)??"base"}),"size"),a=v(m(()=>{var h;return(h=e.options)==null?void 0:h.color}),"color"),i=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";const h=String(e.value);return n(r)&&h in n(r)?n(r)[h]:h}),"displayValue"),s=v(m(()=>w(n(o),"sm")?"icon-sm":w(n(o),"lg")?"icon-lg":"icon-base"),"sizeClass");var c={...Re()},f=kt(),l=yt(f);{var u=h=>{var d=sg();let g;var p=J(d);tt(y=>{Cn(d,1,`cell-icon ${n(s)??""}`,"svelte-weao3c"),H(d,"title",y),g=Fe(d,"",g,{color:n(a)}),Jt(p,n(i))},[()=>String(e.value??"")]),z(h,d)};I(()=>Y(l,h=>{n(i)&&h(u)}),"if",Ri,31,0)}return z(t,f),Ee(c)}Ii[P]="src/components/table/CellBadge.svelte";var lg=j(xt("<span> </span>"),Ii[P],[[56,2]]);function Ii(t,e){We(new.target),Se(e,!0,Ii);const r=v(m(()=>{var d;return((d=e.options)==null?void 0:d.variants)??{}}),"variants"),o=v(m(()=>{var d;return((d=e.options)==null?void 0:d.colors)??{}}),"colors"),a=v(m(()=>{var d;return((d=e.options)==null?void 0:d.size)??"base"}),"size"),i=v(m(()=>w(e.value,void 0)||w(e.value,null)?"":String(e.value)),"displayValue"),s=v(m(()=>{const d=String(e.value??"");if(n(o)&&d in n(o))return n(o)[d];if(n(r)&&d in n(r))switch(n(r)[d]){case"success":return"var(--wf-badge-success, #16a34a)";case"warning":return"var(--wf-badge-warning, #f59e0b)";case"error":return"var(--wf-badge-error, #dc2626)";case"info":return"var(--wf-badge-info, #2563eb)";case"muted":return"var(--wf-badge-muted, var(--wf-muted, #64748b))";default:return"var(--wf-primary, #2563eb)"}return"var(--wf-primary, #2563eb)"}),"badgeColor"),c=v(m(()=>w(n(a),"sm")?"badge-sm":"badge-base"),"sizeClass");var f={...Re()},l=kt(),u=yt(l);{var h=d=>{var g=lg();let p;var y=J(g);tt(()=>{Cn(g,1,`cell-badge ${n(c)??""}`,"svelte-16nh7k4"),p=Fe(g,"",p,{"background-color":`color-mix(in srgb, ${n(s)??""} 15%, var(--wf-bg, #fff))`,color:n(s)}),Jt(y,n(i))}),z(d,g)};I(()=>Y(u,d=>{n(i)&&d(h)}),"if",Ii,55,0)}return z(t,l),Ee(f)}So[P]="src/components/table/CellStars.svelte";var cg=j(xt("<span> </span>"),So[P],[[44,6]]),fg=j(xt('<span class="cell-stars svelte-8zr88i"></span>'),So[P],[[42,2]]);function So(t,e){We(new.target),Se(e,!0,So);const r=v(m(()=>{var p;return((p=e.options)==null?void 0:p.maxStars)??5}),"maxStars"),o=v(m(()=>{var p;return((p=e.options)==null?void 0:p.color)??"#f59e0b"}),"filledColor"),a=v(m(()=>{var p;return((p=e.options)==null?void 0:p.emptyColor)??"#d1d5db"}),"emptyColor"),i=v(m(()=>{var p;return((p=e.options)==null?void 0:p.halfStars)??!1}),"halfStars"),s="★",c="☆",f="⯪",l=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";const p=Math.max(0,Math.min(n(r),e.value)),y=[];for(let _=1;_<=n(r);_++)_<=p?y.push({char:s,filled:"full"}):n(i)&&_-.5<=p?y.push({char:f,filled:"half"}):y.push({char:c,filled:"empty"});return y}),"starDisplay");var u={...Re()},h=kt(),d=yt(h);{var g=p=>{var y=fg();I(()=>ze(y,21,()=>n(l),wr,(_,x)=>{var k=cg();let W,A;var M=J(k,!0);tt(()=>{W=Cn(k,1,"star svelte-8zr88i",null,W,{filled:w(n(x).filled,"full"),half:w(n(x).filled,"half")}),A=Fe(k,"",A,{color:w(n(x).filled,"empty")?n(a):n(o)}),Jt(M,n(x).char)}),z(_,k)}),"each",So,43,4),tt(()=>H(y,"title",`${e.value??""} / ${n(r)??""}`)),z(p,y)};I(()=>Y(d,p=>{w(e.value,void 0,!1)&&w(e.value,null,!1)&&p(g)}),"if",So,41,0)}return z(t,h),Ee(u)}Eo[P]="src/components/table/CellImg.svelte";var ug=j(xt('<img alt="" loading="lazy"/>'),Eo[P],[[28,2]]),dg=j(xt('<span class="cell-img-fallback svelte-1rifgp8" title="Image not available"> </span>'),Eo[P],[[38,2]]);function Eo(t,e){We(new.target),Se(e,!0,Eo);const r=v(m(()=>{var p;return(p=e.options)==null?void 0:p.height}),"imgHeight"),o=v(m(()=>{var p;return(p=e.options)==null?void 0:p.maxWidth}),"maxWidth"),a=v(m(()=>{var p;return((p=e.options)==null?void 0:p.fallback)??"📷"}),"fallback"),i=v(m(()=>{var p;return((p=e.options)==null?void 0:p.shape)??"square"}),"shape");let s=v(Wt(!1),"hasError");const c=v(m(()=>w(n(i),"circle")?"shape-circle":w(n(i),"rounded")?"shape-rounded":""),"shapeClass");function f(){lt(s,!0)}var l={...Re()},u=kt(),h=yt(u);{var d=p=>{var y=ug();let _;tt(()=>{Cn(y,1,`cell-img ${n(c)??""}`,"svelte-1rifgp8"),H(y,"src",e.value),_=Fe(y,"",_,{height:n(r)?`${n(r)}px`:"calc(var(--wf-row-height, 28px) - 4px)","max-width":n(o)?`${n(o)}px`:"100%"})}),Bn("error",y,f),z(p,y)},g=p=>{var y=kt(),_=yt(y);{var x=k=>{var W=dg(),A=J(W);tt(()=>Jt(A,n(a))),z(k,W)};I(()=>Y(_,k=>{n(a)&&k(x)},!0),"if",Eo,37,0)}z(p,y)};I(()=>Y(h,p=>{e.value&&!n(s)?p(d):p(g,!1)}),"if",Eo,27,0)}return z(t,u),Ee(l)}Br[P]="src/components/table/CellReference.svelte";var hg=j(xt('<span class="reference-icon svelte-186gxpi">↗</span>'),Br[P],[[44,8]]),gg=j(xt('<a class="cell-reference svelte-186gxpi" target="_blank" rel="noopener noreferrer"><span class="reference-text svelte-186gxpi"> </span> <!></a>'),Br[P],[[35,4,[[42,6]]]]),pg=j(xt('<span class="cell-reference svelte-186gxpi"> </span>'),Br[P],[[48,4]]);function Br(t,e){We(new.target),Se(e,!0,Br);const r=v(m(()=>{var g;return((g=e.options)==null?void 0:g.maxChars)??30}),"maxChars"),o=v(m(()=>{var g;return((g=e.options)==null?void 0:g.showIcon)??!0}),"showIcon"),a=v(m(()=>{var g;return(g=e.options)==null?void 0:g.hrefField}),"hrefField"),i=v(m(()=>{if(!n(a))return null;const g=e.metadata[n(a)];return w(typeof g,"string")?g:null}),"href"),s=v(m(()=>{if(w(e.value,void 0)||w(e.value,null))return"";const g=String(e.value);return g.length<=n(r)?g:g.substring(0,n(r))+"..."}),"displayValue"),c=v(m(()=>e.value?String(e.value):""),"fullValue"),f=v(m(()=>n(c).length>n(r)),"isTruncated");var l={...Re()},u=kt(),h=yt(u);{var d=g=>{var p=kt(),y=yt(p);{var _=k=>{var W=gg(),A=J(W),M=J(A),E=at(A,2);{var b=S=>{var F=hg();z(S,F)};I(()=>Y(E,S=>{n(o)&&S(b)}),"if",Br,43,6)}tt(()=>{H(W,"href",n(i)),H(W,"title",n(f)?n(c):void 0),Jt(M,n(s))}),z(k,W)},x=k=>{var W=pg(),A=J(W);tt(()=>{H(W,"title",n(f)?n(c):void 0),Jt(A,n(s))}),z(k,W)};I(()=>Y(y,k=>{n(i)?k(_):k(x,!1)}),"if",Br,34,2)}z(g,p)};I(()=>Y(h,g=>{e.value&&g(d)}),"if",Br,33,0)}return z(t,u),Ee(l)}zi[P]="src/components/table/CellRange.svelte";var vg=j(xt('<span class="cell-range svelte-jzelx2"> </span>'),zi[P],[[51,2]]);function zi(t,e){We(new.target),Se(e,!0,zi);const r=v(m(()=>{var y;return((y=e.options)==null?void 0:y.separator)??" – "}),"separator"),o=v(m(()=>{var y;return(y=e.options)==null?void 0:y.decimals}),"decimals"),a=v(m(()=>{var y;return((y=e.options)==null?void 0:y.minField)??""}),"minField"),i=v(m(()=>{var y;return((y=e.options)==null?void 0:y.maxField)??""}),"maxField"),s=v(m(()=>{if(!n(a))return null;const y=e.metadata[n(a)];return w(typeof y,"number")?y:null}),"minValue"),c=v(m(()=>{if(!n(i))return null;const y=e.metadata[n(i)];return w(typeof y,"number")?y:null}),"maxValue");function f(y){return w(y,null)?"":w(n(o),null)||w(n(o),void 0)?Number.isInteger(y)?String(y):y.toFixed(1):y.toFixed(n(o))}const l=v(m(()=>w(n(s),null)&&w(n(c),null)?"":w(n(s),null)?f(n(c)):w(n(c),null)?f(n(s)):`${f(n(s))}${n(r)}${f(n(c))}`),"displayValue"),u=v(m(()=>w(n(s),null,!1)||w(n(c),null,!1)),"hasRange");var h={...Re()},d=kt(),g=yt(d);{var p=y=>{var _=vg(),x=J(_);tt((k,W)=>{H(_,"title",`${k??""} to ${W??""}`),Jt(x,n(l))},[()=>f(n(s)),()=>f(n(c))]),z(y,_)};I(()=>Y(g,y=>{n(u)&&y(p)}),"if",zi,50,0)}return z(t,d),Ee(h)}const mg=["default","minimal","dark","jama","lancet","modern","presentation","cochrane","nature"],Rt={name:"default",colors:{background:"#ffffff",foreground:"#333333",primary:"#0891b2",secondary:"#64748b",accent:"#8b5cf6",muted:"#94a3b8",border:"#e2e8f0",rowBg:"#ffffff",altBg:"#f8fafc",interval:"#0891b2",intervalPositive:"#0891b2",intervalNegative:"#dc2626",intervalNeutral:"#64748b",intervalLine:"#475569",summaryFill:"#0891b2",summaryBorder:"#0e7490"},typography:{fontFamily:"system-ui, -apple-system, sans-serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:600,lineHeight:1.5,headerFontScale:1.05},spacing:{rowHeight:28,headerHeight:36,sectionGap:16,padding:12,containerPadding:0,cellPaddingX:10,cellPaddingY:4,axisGap:12,groupPadding:8},shapes:{pointSize:6,summaryHeight:10,lineWidth:1.5,borderRadius:2},axis:{rangeMin:null,rangeMax:null,tickCount:null,tickValues:null,gridlines:!1,gridlineStyle:"dotted",ciClipFactor:2,includeNull:!0,symmetric:null,nullTick:!0,markerMargin:!0},layout:{plotPosition:"right",tableWidth:"auto",plotWidth:"auto",containerBorder:!1,containerBorderRadius:8,banding:!0},groupHeaders:{level1FontSize:"1rem",level1FontWeight:700,level1Italic:!1,level1Background:null,level1BorderBottom:!1,level2FontSize:"0.9375rem",level2FontWeight:500,level2Italic:!0,level2Background:null,level2BorderBottom:!1,level3FontSize:"0.875rem",level3FontWeight:400,level3Italic:!1,level3Background:null,level3BorderBottom:!1,indentPerLevel:16}},yg={...Rt,name:"minimal",colors:{...Rt.colors,background:"#ffffff",foreground:"#000000",primary:"#000000",secondary:"#333333",accent:"#000000",muted:"#666666",border:"#000000",rowBg:"#ffffff",altBg:"#fafafa",interval:"#000000",intervalPositive:"#000000",intervalNegative:"#000000",intervalNeutral:"#666666",intervalLine:"#000000",summaryFill:"#000000",summaryBorder:"#000000"},typography:{...Rt.typography,fontFamily:"Georgia, 'Times New Roman', serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.4},spacing:{...Rt.spacing,rowHeight:24,headerHeight:30,sectionGap:12,padding:10},shapes:{...Rt.shapes,pointSize:5,summaryHeight:8,lineWidth:1,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},_g={...Rt,name:"dark",colors:{...Rt.colors,background:"#1e1e2e",foreground:"#cdd6f4",primary:"#89b4fa",secondary:"#a6adc8",accent:"#f5c2e7",muted:"#6c7086",border:"#313244",rowBg:"#1e1e2e",altBg:"#232334",interval:"#89b4fa",intervalPositive:"#a6e3a1",intervalNegative:"#f38ba8",intervalNeutral:"#6c7086",intervalLine:"#9399b2",summaryFill:"#89b4fa",summaryBorder:"#74c7ec"},typography:{...Rt.typography,fontFamily:"system-ui, -apple-system, sans-serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:600,lineHeight:1.5},spacing:{...Rt.spacing,rowHeight:30,headerHeight:38,sectionGap:18,padding:14},shapes:{...Rt.shapes,pointSize:6,summaryHeight:10,lineWidth:1.5,borderRadius:4},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:8}},xg={...Rt,name:"jama",colors:{...Rt.colors,background:"#ffffff",foreground:"#000000",primary:"#000000",secondary:"#333333",accent:"#000000",muted:"#555555",border:"#000000",rowBg:"#ffffff",altBg:"#f9fafb",interval:"#000000",intervalPositive:"#000000",intervalNegative:"#000000",intervalNeutral:"#555555",intervalLine:"#000000",summaryFill:"#000000",summaryBorder:"#000000"},typography:{...Rt.typography,fontFamily:"Arial, Helvetica, sans-serif",fontSizeSm:"8pt",fontSizeBase:"9pt",fontSizeLg:"10pt",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.2},spacing:{...Rt.spacing,rowHeight:18,headerHeight:24,sectionGap:8,padding:6,cellPaddingX:8,cellPaddingY:2},shapes:{...Rt.shapes,pointSize:4,summaryHeight:7,lineWidth:1.25,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},wg={...Rt,name:"lancet",colors:{...Rt.colors,background:"#fdfcfb",foreground:"#1e3a5f",primary:"#00407a",secondary:"#3d5a80",accent:"#b8860b",muted:"#6b7c93",border:"#d4dce6",rowBg:"#fdfcfb",altBg:"#f8f7f6",interval:"#00407a",intervalPositive:"#00407a",intervalNegative:"#9d2933",intervalNeutral:"#3d5a80",intervalLine:"#1e3a5f",summaryFill:"#00407a",summaryBorder:"#002d54"},typography:{...Rt.typography,fontFamily:"Georgia, 'Times New Roman', serif",fontSizeSm:"0.75rem",fontSizeBase:"0.875rem",fontSizeLg:"1rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.5},spacing:{...Rt.spacing,rowHeight:26,headerHeight:34,sectionGap:16,padding:12,cellPaddingX:12,cellPaddingY:5},shapes:{...Rt.shapes,pointSize:5,summaryHeight:9,lineWidth:1.25,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},bg={...Rt,name:"modern",colors:{...Rt.colors,background:"#fafafa",foreground:"#18181b",primary:"#3b82f6",secondary:"#52525b",accent:"#8b5cf6",muted:"#a1a1aa",border:"#d4d4d8",rowBg:"#fafafa",altBg:"#f4f4f5",interval:"#3b82f6",intervalPositive:"#22c55e",intervalNegative:"#ef4444",intervalNeutral:"#71717a",intervalLine:"#27272a",summaryFill:"#3b82f6",summaryBorder:"#2563eb"},typography:{...Rt.typography,fontFamily:"Inter, system-ui, -apple-system, sans-serif",fontSizeSm:"0.8125rem",fontSizeBase:"0.9375rem",fontSizeLg:"1.0625rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:600,lineHeight:1.5},spacing:{...Rt.spacing,rowHeight:36,headerHeight:44,sectionGap:24,padding:16,cellPaddingX:12,cellPaddingY:6},shapes:{...Rt.shapes,pointSize:8,summaryHeight:12,lineWidth:1.75,borderRadius:8},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:12}},Mg={...Rt,name:"presentation",colors:{...Rt.colors,background:"#ffffff",foreground:"#0f172a",primary:"#0369a1",secondary:"#334155",accent:"#ea580c",muted:"#64748b",border:"#94a3b8",rowBg:"#ffffff",altBg:"#f8fafc",interval:"#0369a1",intervalPositive:"#047857",intervalNegative:"#be123c",intervalNeutral:"#334155",intervalLine:"#0f172a",summaryFill:"#0369a1",summaryBorder:"#0c4a6e"},typography:{...Rt.typography,fontFamily:"'Source Sans Pro', 'Segoe UI', Roboto, sans-serif",fontSizeSm:"1rem",fontSizeBase:"1.125rem",fontSizeLg:"1.25rem",fontWeightNormal:400,fontWeightMedium:600,fontWeightBold:700,lineHeight:1.4},spacing:{...Rt.spacing,rowHeight:44,headerHeight:52,sectionGap:28,padding:20,cellPaddingX:14,cellPaddingY:6},shapes:{...Rt.shapes,pointSize:12,summaryHeight:16,lineWidth:2.5,borderRadius:4},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:6}},Sg={...Rt,name:"cochrane",colors:{...Rt.colors,background:"#ffffff",foreground:"#2c2c2c",primary:"#0099cc",secondary:"#555555",accent:"#006699",muted:"#888888",border:"#b3b3b3",rowBg:"#ffffff",altBg:"#f5f5f5",interval:"#0099cc",intervalPositive:"#0099cc",intervalNegative:"#cc3333",intervalNeutral:"#555555",intervalLine:"#2c2c2c",summaryFill:"#0099cc",summaryBorder:"#006699"},typography:{...Rt.typography,fontFamily:"Arial, Helvetica, sans-serif",fontSizeSm:"0.6875rem",fontSizeBase:"0.75rem",fontSizeLg:"0.8125rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.25},spacing:{...Rt.spacing,rowHeight:20,headerHeight:26,sectionGap:8,padding:6,cellPaddingX:6,cellPaddingY:2},shapes:{...Rt.shapes,pointSize:4,summaryHeight:7,lineWidth:1,borderRadius:0},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:0}},Eg={...Rt,name:"nature",colors:{...Rt.colors,background:"#ffffff",foreground:"#1a1a1a",primary:"#1976d2",secondary:"#424242",accent:"#c62828",muted:"#616161",border:"#bdbdbd",rowBg:"#ffffff",altBg:"#fafafa",interval:"#1976d2",intervalPositive:"#1976d2",intervalNegative:"#c62828",intervalNeutral:"#616161",intervalLine:"#1a1a1a",summaryFill:"#1976d2",summaryBorder:"#0d47a1"},typography:{...Rt.typography,fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",fontSizeSm:"0.75rem",fontSizeBase:"0.8125rem",fontSizeLg:"0.9375rem",fontWeightNormal:400,fontWeightMedium:500,fontWeightBold:700,lineHeight:1.35},spacing:{...Rt.spacing,rowHeight:24,headerHeight:32,sectionGap:12,padding:10,cellPaddingX:10,cellPaddingY:4},shapes:{...Rt.shapes,pointSize:5,summaryHeight:8,lineWidth:1.25,borderRadius:1},layout:{...Rt.layout,containerBorder:!1,containerBorderRadius:2},axis:{...Rt.axis,gridlines:!1,nullTick:!0}},kg={default:Rt,minimal:yg,dark:_g,jama:xg,lancet:wg,modern:bg,presentation:Mg,cochrane:Sg,nature:Eg},Rc={default:"Default",minimal:"Minimal",dark:"Dark",jama:"JAMA",lancet:"Lancet",modern:"Modern",presentation:"Presentation",cochrane:"Cochrane",nature:"Nature"};function Cg(t,e,r={}){const{gap:o=4,viewportPadding:a=8,preferredPosition:i="below",align:s="end"}=r,c=window.innerHeight,f=window.innerWidth,l=c-t.bottom-o-a,u=t.top-o-a;let h,d;i==="below"?l>=e.height?h="below":u>=e.height?h="above":(h=l>=u?"below":"above",d=Math.max(h==="below"?l:u,100)):u>=e.height?h="above":l>=e.height?h="below":(h=u>=l?"above":"below",d=Math.max(h==="above"?u:l,100));const g={};return h==="below"?g.top=t.bottom+o:g.bottom=c-t.top+o,s==="end"?t.right-e.width<a?g.left=Math.max(t.left,a):g.right=f-t.right:t.left+e.width>f-a?g.right=Math.max(f-t.right,a):g.left=t.left,d&&(g.maxHeight=d),g}function Gr(t,e){function r(){if(!e.triggerEl)return;const a=e.triggerEl.getBoundingClientRect(),i=t.getBoundingClientRect(),s=Cg(a,{width:i.width,height:i.height},{gap:e.gap??4,align:e.align??"end"});t.style.position="fixed",t.style.top="",t.style.bottom="",t.style.left="",t.style.right="",s.top!==void 0&&(t.style.top=`${s.top}px`),s.bottom!==void 0&&(t.style.bottom=`${s.bottom}px`),s.left!==void 0&&(t.style.left=`${s.left}px`),s.right!==void 0&&(t.style.right=`${s.right}px`),s.maxHeight?(t.style.maxHeight=`${s.maxHeight}px`,t.style.overflowY="auto"):(t.style.maxHeight="",t.style.overflowY="")}function o(a){e=a,requestAnimationFrame(r)}return o(e),{update:o,destroy(){}}}cr[P]="src/components/ui/ThemeSwitcher.svelte";var Tg=j(Lt('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-35mgh1"><polyline points="20 6 9 17 4 12"></polyline></svg>'),cr[P],[[93,12,[[94,14]]]]),Ng=j(xt('<span class="spacer svelte-35mgh1"></span>'),cr[P],[[97,12]]),Hg=j(xt("<button><!> <span> </span></button>"),cr[P],[[87,8,[[99,10]]]]),Ag=j(xt('<div class="theme-dropdown svelte-35mgh1"></div>'),cr[P],[[85,4]]),Wg=j(xt('<div class="theme-switcher-wrapper svelte-35mgh1"><button class="theme-btn svelte-35mgh1" aria-label="Switch theme"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></button> <!></div>'),cr[P],[[70,0,[[71,2,[[78,4,[[79,6],[80,6]]]]]]]]);function cr(t,e){We(new.target),Se(e,!0,cr);let r=v(Wt(!1),"dropdownOpen"),o=v(Wt(null),"triggerEl");const a=v(m(()=>{var p,y;return((y=(p=e.store.spec)==null?void 0:p.theme)==null?void 0:y.name)??"default"}),"currentTheme"),i=v(m(()=>w(e.availableThemes,void 0)||w(e.availableThemes,null)?mg.map(p=>[p,Rc[p]]):Object.entries(e.availableThemes).map(([p,y])=>{const _=y.name?Rc[y.name]??y.name:p;return[p,_]})),"themeEntries");function s(){lt(r,!1)}function c(p){if(e.onThemeChange)e.onThemeChange(p);else if(e.availableThemes&&p in e.availableThemes){const y=e.availableThemes[p];e.store.spec&&e.store.setSpec({...e.store.spec,theme:y})}else e.store.setTheme(p);s()}function f(p){p.target.closest(".theme-switcher-wrapper")||s()}var l={...Re()},u=Wg();Bn("click",$o,f);var h=J(u);h.__click=()=>lt(r,!n(r)),yo(h,p=>lt(o,p),()=>n(o));var d=at(h,2);{var g=p=>{var y=Ag();I(()=>ze(y,21,()=>n(i),wr,(_,x)=>{var k=m(()=>Ia(n(x),2));let W=()=>n(k)[0];W();let A=()=>n(k)[1];A();var M=Hg();let E;M.__click=()=>c(W());var b=J(M);{var S=T=>{var G=Tg();z(T,G)},F=T=>{var G=Ng();z(T,G)};I(()=>Y(b,T=>{w(n(a),W())?T(S):T(F,!1)}),"if",cr,92,10)}var N=at(b,2),R=J(N,!0);tt(()=>{E=Cn(M,1,"dropdown-item svelte-35mgh1",null,E,{active:w(n(a),W())}),Jt(R,A())}),z(_,M)}),"each",cr,86,6),oa(y,(_,x)=>Gr==null?void 0:Gr(_,x),()=>({triggerEl:n(o)})),z(p,y)};I(()=>Y(d,p=>{n(r)&&p(g)}),"if",cr,84,2)}return tt(()=>H(h,"aria-expanded",n(r))),z(t,u),Ee(l)}mo(["click"]),ko[P]="src/components/ui/ViewToggle.svelte";var Rg=j(Lt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="10" y2="6"></line><line x1="3" y1="12" x2="10" y2="12"></line><line x1="3" y1="18" x2="10" y2="18"></line><line x1="14" y1="12" x2="21" y2="12"></line><circle cx="17" cy="12" r="2" fill="currentColor"></circle></svg>'),ko[P],[[21,4,[[23,6],[24,6],[25,6],[27,6],[28,6]]]]),Ig=j(Lt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>'),ko[P],[[32,4,[[33,6],[34,6],[35,6]]]]),zg=j(xt('<button class="view-toggle-btn svelte-1u54q0q"><!></button>'),ko[P],[[13,0]]);function ko(t,e){We(new.target),Se(e,!0,ko);const r=v(m(()=>{var f,l;return((l=(f=e.store.spec)==null?void 0:f.data)==null?void 0:l.includeForest)??!0}),"includeForest");var o={...Re()},a=zg();a.__click=()=>e.store.toggleForestView();var i=J(a);{var s=f=>{var l=Rg();z(f,l)},c=f=>{var l=Ig();z(f,l)};I(()=>Y(i,f=>{n(r)?f(s):f(c,!1)}),"if",ko,19,2)}return tt(()=>{H(a,"aria-label",n(r)?"Show table only":"Show forest plot"),H(a,"title",n(r)?"Show table only":"Show forest plot")}),z(t,a),Ee(o)}mo(["click"]);function va(t,e){const r=t.split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),r.join(".")}function ws(t){const e=Math.abs(t),r=t<0?"-":"";if(e>=1e12)throw new Error(`Cannot abbreviate value >= 1 trillion: ${t}`);if(e>=1e9){const o=e/1e9;return r+bs(o)+"B"}if(e>=1e6){const o=e/1e6;return r+bs(o)+"M"}if(e>=1e3){const o=e/1e3;return r+bs(o)+"K"}return r+Math.round(e).toString()}function bs(t){const e=Math.round(t*10)/10;return e===Math.floor(e)?e.toFixed(0):e.toFixed(1)}const Fg={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function Pg(t){return t.split("").map(e=>Fg[e]??e).join("")}function Qo(t,e){var c,f,l,u,h;if(t==null||Number.isNaN(t))return(e==null?void 0:e.naText)??"";if(e!=null&&e.percent){const{decimals:d,digits:g,multiply:p=!0,symbol:y=!0}=e.percent,_=p?t*100:t,x=g!=null?_.toPrecision(g):_.toFixed(d??1);return y?`${x}%`:x}if(((c=e==null?void 0:e.numeric)==null?void 0:c.abbreviate)&&Math.abs(t)>=1e3)return ws(t);const o=(f=e==null?void 0:e.numeric)==null?void 0:f.digits;if(o!=null){const d=t.toPrecision(o),g=(l=e==null?void 0:e.numeric)==null?void 0:l.thousandsSep;return g&&typeof g=="string"?va(d,g):d}const a=(u=e==null?void 0:e.numeric)==null?void 0:u.decimals,i=(h=e==null?void 0:e.numeric)==null?void 0:h.thousandsSep;let s;return a!==void 0?s=t.toFixed(a):Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?s=Math.round(t).toString():s=t.toFixed(2),i&&typeof i=="string"&&(s=va(s,i)),s}function Ms(t,e){const{eventsField:r,nField:o,separator:a="/",showPct:i=!1,thousandsSep:s,abbreviate:c}=e.events,f=t.metadata[r],l=t.metadata[o];if(f==null||l===void 0||l===null)return e.naText??"";const u=Number(f),h=Number(l);let d,g;c&&(u>=1e3||h>=1e3)?(d=u>=1e3?ws(u):String(u),g=h>=1e3?ws(h):String(h)):(d=String(u),g=String(h),s&&typeof s=="string"&&(d=va(d,s),g=va(g,s)));let p=`${d}${a}${g}`;if(i&&h>0){const y=(u/h*100).toFixed(1);p+=` (${y}%)`}return p}function Ss(t,e,r,o){var c,f,l;if(t==null||Number.isNaN(t))return"";const a=((c=o==null?void 0:o.interval)==null?void 0:c.decimals)??2,i=((f=o==null?void 0:o.interval)==null?void 0:f.sep)??" ",s=(l=o==null?void 0:o.interval)==null?void 0:l.impreciseThreshold;return e==null||r===void 0||r===null||Number.isNaN(e)||Number.isNaN(r)?t.toFixed(a):s!=null&&e>0&&r/e>s?"—":`${t.toFixed(a)}${i}(${e.toFixed(a)}, ${r.toFixed(a)})`}function Ic(t,e){if(t==null||Number.isNaN(t))return(e==null?void 0:e.naText)??"";const r=e==null?void 0:e.pvalue,o=(r==null?void 0:r.digits)??2,a=(r==null?void 0:r.expThreshold)??.001,i=(r==null?void 0:r.abbrevThreshold)??null,s=(r==null?void 0:r.format)??"auto",c=(r==null?void 0:r.stars)??!1,f=(r==null?void 0:r.thresholds)??[.05,.01,.001];let l="";if(c&&(t<f[2]?l="***":t<f[1]?l="**":t<f[0]&&(l="*")),i!==null&&t<i)return`<${i}${l}`;if(s==="scientific"||s==="auto"&&t<a){const h=Math.floor(Math.log10(t));return`${(t/Math.pow(10,h)).toPrecision(o)}×10${Pg(h.toString())}${l}`}let u;return t>=.1?u=t.toFixed(o):t>=.01?u=t.toFixed(o+1):u=t.toFixed(o+2),`${u}${l}`}function zc(t,e){var i,s,c,f;const{type:r,field:o,options:a}=e;switch(r){case"interval":{const l=(i=a==null?void 0:a.interval)!=null&&i.point?t.metadata[a.interval.point]:t.point,u=(s=a==null?void 0:a.interval)!=null&&s.lower?t.metadata[a.interval.lower]:t.lower,h=(c=a==null?void 0:a.interval)!=null&&c.upper?t.metadata[a.interval.upper]:t.upper;return Ss(l,u,h,a)}case"custom":return a!=null&&a.events?Ms(t,a):String(t.metadata[o]??"");case"pvalue":return Ic(t.metadata[o],a);case"numeric":return Qo(t.metadata[o],a);case"percent":return Qo(t.metadata[o],a);case"sparkline":case"icon":case"stars":case"img":case"range":return"";case"badge":{const l=t.metadata[o];return l==null?"":`  ${String(l)}  `}case"bar":{if(((f=a==null?void 0:a.bar)==null?void 0:f.showLabel)===!1)return"";const l=t.metadata[o];return l==null?"":l>=100?l.toFixed(0):l>=10?l.toFixed(1):l.toFixed(2)}case"text":default:return String(t.metadata[o]??"")}}function fr(t,e){const r="⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻",o="ilI1.,;:|!()[]{}' -",a="mwMW@%",i="ABCDEFGHJKLNOPQRSTUVXYZ";let s=0;for(const c of t)r.includes(c)?s+=e*.3:o.includes(c)?s+=e*.35:"×−".includes(c)?s+=e*.5:a.includes(c)?s+=e*.85:c>="0"&&c<="9"?s+=e*.6:i.includes(c)?s+=e*.68:s+=e*.55;return s}function Lg(t,e,r,o=400){if(typeof document>"u")return null;const i=document.createElement("canvas").getContext("2d");return i?(i.font=`${o} ${e} ${r}`,i.measureText(t).width):null}function Fc(t){if(!t||t.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const e=t.filter(a=>a!=null&&!Number.isNaN(a)).sort((a,i)=>a-i);if(e.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const r=e.length,o=a=>{if(r===1)return e[0];const i=(r-1)*a,s=Math.floor(i),c=Math.ceil(i);return s===c?e[s]:e[s]+(i-s)*(e[c]-e[s])};return{min:e[0],q1:o(.25),median:o(.5),q3:o(.75),max:e[r-1]}}function Dg(t,e,r){if(!t||t.length===0||Number.isNaN(e)||Number.isNaN(r))return[];const o=r-e,a=e-1.5*o,i=r+1.5*o;return t.filter(s=>s!=null&&!Number.isNaN(s)&&(s<a||s>i))}function ma(t){const e=Fc(t),r=Dg(t,e.q1,e.q3);return{...e,outliers:r}}function Bg(t){if(!t||t.length<2)return 1;const e=t.filter(g=>g!=null&&!Number.isNaN(g)).sort((g,p)=>g-p);if(e.length<2)return 1;const r=e.length,o=e.reduce((g,p)=>g+p,0)/r,a=e.reduce((g,p)=>g+(p-o)**2,0)/(r-1),i=Math.sqrt(a),s=Math.floor((r-1)*.25),c=Math.floor((r-1)*.75),f=e[s],u=e[c]-f,d=.9*Math.min(i,u/1.34)*Math.pow(r,-.2);return Math.max(d,.001)}function Gg(t){return Math.exp(-.5*t*t)/Math.sqrt(2*Math.PI)}function Pc(t,e,r=128){if(!t||t.length===0)return{x:[],y:[]};const o=t.filter(g=>g!=null&&!Number.isNaN(g));if(o.length===0)return{x:[],y:[]};const a=e??Bg(o),i=Math.min(...o),s=Math.max(...o),c=3*a,f=i-c,u=(s+c-f)/(r-1),h=[],d=[];for(let g=0;g<r;g++){const p=f+g*u;h.push(p);let y=0;for(const _ of o)y+=Gg((p-_)/a);y/=o.length*a,d.push(y)}return{x:h,y:d}}function Lc(t,e){if(t.y.length===0)return t;const r=Math.max(...t.y);if(r===0)return t;const o=t.y.map(a=>a/r*e);return{x:t.x,y:o}}function ya(t,e,r,o=400){const a=Lg(t,`${e}px`,r,o);if(a!==null)return a;const i=1+Math.max(0,(o-400)/100)*.02;return fr(t,e)*i}function Vg(t,e){var l,u;const r=new Map,o=Wn(t.theme.typography.fontSizeBase),a=t.theme.typography.headerFontScale??1.05,i=Math.round(o*a*100)/100,s=t.data.rows,c=(t.theme.spacing.cellPaddingX??10)*2,f=(t.theme.spacing.groupPadding??8)*2;for(const h of e){if(h.width!=="auto"&&h.width!==null&&h.width!==void 0)continue;let d=0;h.header&&(d=Math.max(d,fr(h.header,i)));for(const y of s){if(((l=y.style)==null?void 0:l.type)==="header"||((u=y.style)==null?void 0:u.type)==="spacer")continue;const _=zc(y,h);_&&(d=Math.max(d,fr(_,o)))}const g=Zn.VISUAL_MIN[h.type]??Zn.MIN,p=Math.ceil(d+c+Yn.RENDERING_BUFFER);r.set(h.id,Math.min(Zn.MAX,Math.max(g,p)))}return Og(t.columns,r,i,f,Yn.RENDERING_BUFFER),r}function Og(t,e,r,o,a){function i(f){return f.isGroup?f.columns.flatMap(i):[f]}function s(f){const l=e.get(f.id);return l!==void 0?l:typeof f.width=="number"?f.width:Zn.MIN}function c(f){if(f.isGroup){for(const l of f.columns)c(l);if(f.header){const l=fr(f.header,r)+o+a,u=i(f),h=u.reduce((d,g)=>d+s(g),0);if(l>h&&u.length>0){const d=Math.ceil((l-h)/u.length);for(const g of u)e.set(g.id,s(g)+d)}}}}for(const f of t)c(f)}function Dc(t,e,r){let o=r.filter(i=>i.groupId===t).length;const a=e.filter(i=>i.parentId===t);for(const i of a)o+=Dc(i.id,e,r);return o}function Bc(t){var f,l;const e=Wn(t.theme.typography.fontSizeBase),r=(t.theme.spacing.cellPaddingX??10)*2;let o=0;const a=new Map,i=Array.isArray(t.data.groups)?t.data.groups:[];for(const u of i)a.set(u.id,u.depth);const s=u=>u?(a.get(u)??0)+1:0;t.data.labelHeader&&(o=Math.max(o,fr(t.data.labelHeader,e)));for(const u of t.data.rows)if(u.label){const h=s(u.groupId),d=((f=u.style)==null?void 0:f.indent)??0,p=(h+d)*Pe.INDENT_PER_LEVEL;let y=fr(u.label,e)+p;if((l=u.style)!=null&&l.badge){const _=String(u.style.badge),x=e*Mr.FONT_SCALE,W=fr(_,x)+Mr.PADDING*2;y+=Mr.GAP+W}o=Math.max(o,y)}for(const u of i)if(u.label){const h=u.depth*Pe.INDENT_PER_LEVEL,d=fr(u.label,e),p=`(${Dc(u.id,i,t.data.rows)})`,y=e*.75,_=fr(p,y),x=h+Jr.CHEVRON_WIDTH+Jr.GAP+d+Jr.GAP+_+Jr.SAFETY_MARGIN;o=Math.max(o,x)}const c=Math.ceil(o+r+Yn.RENDERING_BUFFER);return Math.min(Zn.LABEL_MAX,Math.max(Zn.MIN,c))}function Es(t,e){const r=e.get(t.id);return r!==void 0?r:typeof t.width=="number"?t.width:Sr.DEFAULT_COLUMN_WIDTH}function $g(t,e,r=0){var ue,gt,Ct,Yt,jt;const o=t.theme,a=o.spacing.rowHeight,i=o.spacing.padding,s=o.spacing.columnGap??8,c=Array.isArray(t.columns)?t.columns:[],f=Vc(c,"left"),l=Vc(c,"right"),u=_a(f)||_a(l)||_a(c),h=u?2:1,d=o.spacing.cellPaddingY??4,y=(o.spacing.headerHeight/h+(u?d*2:0))*h,_=!!((ue=t.labels)!=null&&ue.title),x=!!((gt=t.labels)!=null&&gt.subtitle),k=!!((Ct=t.labels)!=null&&Ct.caption),W=!!((Yt=t.labels)!=null&&Yt.footnote),A=_?Er.TITLE_HEIGHT:0,M=x?Er.SUBTITLE_HEIGHT:0,E=A+M+(_||x?i:0),b=k?Er.CAPTION_HEIGHT:0,S=W?Er.FOOTNOTE_HEIGHT:0,F=b+S+(k||W?i:0),N=Gc(t),R=!!t.data.overall;let T=0;for(const Xt of N){const ke=Xt.type==="data"&&((jt=Xt.row.style)==null?void 0:jt.type)==="spacer";T+=ke?a/2:a}R&&(T+=a*ld.OVERALL_ROW_HEIGHT_MULTIPLIER);const G=Ts(c,"left"),K=Ts(c,"right"),ct=Cs(c).filter(Xt=>Xt.position===void 0),B=[...G,...K,...ct];let q,nt;if(e.columnWidths){q=new Map;for(const[Xt,ke]of Object.entries(e.columnWidths))Xt!=="__label__"&&q.set(Xt,ke);nt=e.columnWidths.__label__??Bc(t)}else q=Vg(t,B),nt=Bc(t);const U=nt+G.reduce((Xt,ke)=>Xt+Es(ke,q),0),X=K.reduce((Xt,ke)=>Xt+Es(ke,q),0),st=ct.filter(Xt=>Xt.type!=="forest").reduce((Xt,ke)=>Xt+Es(ke,q),0),rt=e.width??Sr.DEFAULT_WIDTH,pt=B.some(Xt=>Xt.type==="forest")||t.data.includeForest,vt=U+X+st;let Tt;if(!pt)Tt=0;else if(typeof e.forestWidth=="number")Tt=e.forestWidth;else if(typeof t.layout.plotWidth=="number")Tt=t.layout.plotWidth;else{const Xt=rt-vt-s*2-i*2;Tt=Math.max(Xt,Sr.MIN_FOREST_WIDTH)}const Et=i*2+vt+Tt+s*2,Nt=Math.max(e.width??rt,Et);pt&&Nt>Et&&typeof e.forestWidth!="number"&&typeof t.layout.plotWidth!="number"&&(Tt=Nt-vt-i*2-s*2);const ne=(o.spacing.axisGap??12)+Sr.AXIS_HEIGHT+Sr.AXIS_LABEL_HEIGHT,be=E+i+y+T+ne+F+Sr.BOTTOM_MARGIN;return{totalWidth:Nt,totalHeight:e.height??be,tableWidth:U+X,forestWidth:Tt,headerHeight:y,rowHeight:a,plotHeight:T,axisHeight:Sr.AXIS_HEIGHT,nullValue:r,summaryYPosition:T-a,showOverallSummary:R,headerTextHeight:E,footerTextHeight:F,titleY:i+Er.TITLE_HEIGHT-4,subtitleY:i+A+Er.SUBTITLE_HEIGHT-4,mainY:E+i,footerY:E+i+y+T+ne+8,autoWidths:q,labelWidth:nt}}function Gc(t){var h;const e=t.data.rows,r=Array.isArray(t.data.groups)?t.data.groups:[];if(r.length===0)return e.map(d=>({type:"data",row:d,depth:0}));const o=new Map;for(const d of r)o.set(d.id,d);const a=new Map;for(const d of e){const g=d.groupId??null;a.has(g)||a.set(g,[]),a.get(g).push(d)}const i=new Set;for(const d of a.keys()){if(!d)continue;let g=d;for(;g;)i.add(g),g=(h=o.get(g))==null?void 0:h.parentId}function s(d){return r.filter(g=>(g.parentId??null)===d&&i.has(g.id))}function c(d){if(!d)return 0;const g=o.get(d);return g?g.depth+1:0}function f(d){var p;let g=((p=a.get(d))==null?void 0:p.length)??0;for(const y of s(d))g+=f(y.id);return g}const l=[];function u(d){if(d){const p=o.get(d);if(!p)return;const y=f(d);l.push({type:"group_header",groupId:p.id,label:p.label,depth:p.depth,rowCount:y})}for(const p of s(d))u(p.id);const g=a.get(d)??[];for(const p of g)l.push({type:"data",row:p,depth:c(p.groupId)})}return u(null),l}function ks(t){const e=[];for(const r of t)r.isGroup?e.push(...ks(r.columns)):e.push(r);return e}function Cs(t){const e=[];for(const r of t)r.isGroup?e.push(...ks(r.columns)):e.push(r);return e}function Ts(t,e){if(e===void 0)return Cs(t);const r=[];for(const o of t)o.position===e&&(o.isGroup?r.push(...ks(o.columns)):r.push(o));return r}function Vc(t,e){return t.filter(r=>r.position===e)}function _a(t){return t.some(e=>e.isGroup)}function Wn(t){let e;return t.endsWith("rem")?e=parseFloat(t)*Er.REM_BASE:t.endsWith("px")?e=parseFloat(t):t.endsWith("pt")?e=parseFloat(t)*Er.PT_TO_PX:e=Er.DEFAULT_FONT_SIZE,Math.round(e*100)/100}function xa(t,e,r){return r==="right"?{textX:t+e-Pe.TEXT_PADDING,anchor:"end"}:r==="center"?{textX:t+e/2,anchor:"middle"}:{textX:t+Pe.TEXT_PADDING,anchor:"start"}}function an(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Oc(t,e,r,o=0){const a=e-o*2;if(fr(t,r)<=a)return t;const s="…",c=r*.55;let f=0,l=t.length;for(;f<l;){const u=Math.ceil((f+l)/2),h=t.slice(0,u);fr(h,r)+c<=a?f=u:l=u-1}return f===0?s:t.slice(0,f)+s}function jg(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function Fi(t,e){const[r,o]=t,[a,i]=e,s=(i-a)/(o-r),c=f=>a+(f-r)*s;return c.domain=()=>t,c.range=()=>e,c.ticks=f=>{const l=(o-r)/(f-1),u=[];for(let h=0;h<f;h++)u.push(r+l*h);return u},c}function Pi(t,e){const[r,o]=t.map(u=>Math.max(u,.001)),[a,i]=e,s=Math.log10(r),c=Math.log10(o),f=(i-a)/(c-s),l=u=>{const h=Math.log10(Math.max(u,.001));return a+(h-s)*f};return l.domain=()=>[r,o],l.range=()=>e,l.ticks=u=>{const h=[],d=Math.floor(Math.log10(r)),g=Math.ceil(Math.log10(o));for(let p=d;p<=g;p++){const y=Math.pow(10,p);for(const _ of[1,2,5]){const x=y*_;x>=r&&x<=o&&h.push(x)}}return h.length>0?h:[r,o]},l}function qg(t,e,r,o){const a=r.scale==="log",i=Tn,s=Math.max(e-Tn,i+50);if(o!=null&&o.xDomain){const h=o.xDomain,d=o.clipBounds??h,g=jl(d,t.theme.axis,r.scale,r.nullValue);return a?{scale:Pi([Math.max(h[0],.01),Math.max(h[1],.02)],[i,s]),clipBounds:d,ticks:g}:{scale:Fi(h,[i,s]),clipBounds:d,ticks:g}}const c=$l({rows:t.data.rows,config:t.theme.axis,scale:r.scale,nullValue:r.nullValue,forestWidth:e,pointSize:t.theme.shapes.pointSize,effects:r.effects,pointCol:r.pointCol,lowerCol:r.lowerCol,upperCol:r.upperCol}),{plotRegion:f,axisLimits:l,ticks:u}=c;return a?{scale:Pi([Math.max(f[0],.01),Math.max(f[1],.02)],[i,s]),clipBounds:l,ticks:u}:{scale:Fi(f,[i,s]),clipBounds:l,ticks:u}}function Xg(t,e,r){var i,s;const o=[],a=r.spacing.padding;if((i=t.labels)!=null&&i.title){const c=Wn(r.typography.fontSizeLg);o.push(`<text x="${a}" y="${e.titleY}"
      font-family="${r.typography.fontFamily}"
      font-size="${c}px"
      font-weight="${r.typography.fontWeightBold}"
      fill="${r.colors.foreground}">${an(t.labels.title)}</text>`)}if((s=t.labels)!=null&&s.subtitle){const c=Wn(r.typography.fontSizeBase);o.push(`<text x="${a}" y="${e.subtitleY}"
      font-family="${r.typography.fontFamily}"
      font-size="${c}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.secondary}">${an(t.labels.subtitle)}</text>`)}return o.join(`
`)}function Ug(t,e,r){var c,f,l,u;const o=[],a=r.spacing.padding;let i=e.footerY;if(!!((c=t.labels)!=null&&c.caption)||!!((f=t.labels)!=null&&f.footnote)){const h=e.footerY-8;o.push(`<line x1="${a}" x2="${e.totalWidth-a}"
      y1="${h}" y2="${h}"
      stroke="${r.colors.border}" stroke-width="1"/>`)}if((l=t.labels)!=null&&l.caption){const h=Wn(r.typography.fontSizeSm);o.push(`<text x="${a}" y="${i}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.secondary}">${an(t.labels.caption)}</text>`),i+=Er.CAPTION_HEIGHT}if((u=t.labels)!=null&&u.footnote){const h=Wn(r.typography.fontSizeSm);o.push(`<text x="${a}" y="${i}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightNormal}"
      font-style="italic"
      fill="${r.colors.muted}">${an(t.labels.footnote)}</text>`)}return o.join(`
`)}function Yg(t,e,r,o,a,i,s,c){const f=[],l=e+1,u=c.groupHeaders;let h,d,g,p,y;if(l===1?(h=Wn((u==null?void 0:u.level1FontSize)??c.typography.fontSizeBase),d=(u==null?void 0:u.level1FontWeight)??c.typography.fontWeightBold,g=(u==null?void 0:u.level1Italic)??!1,p=(u==null?void 0:u.level1Background)??null,y=(u==null?void 0:u.level1BorderBottom)??!1):l===2?(h=Wn((u==null?void 0:u.level2FontSize)??c.typography.fontSizeBase),d=(u==null?void 0:u.level2FontWeight)??c.typography.fontWeightMedium,g=(u==null?void 0:u.level2Italic)??!0,p=(u==null?void 0:u.level2Background)??null,y=(u==null?void 0:u.level2BorderBottom)??!1):(h=Wn((u==null?void 0:u.level3FontSize)??c.typography.fontSizeBase),d=(u==null?void 0:u.level3FontWeight)??c.typography.fontWeightNormal,g=(u==null?void 0:u.level3Italic)??!1,p=(u==null?void 0:u.level3Background)??null,y=(u==null?void 0:u.level3BorderBottom)??!1),!p){const A=c.colors.primary,M=l===1?.15:l===2?.1:.06,E=A.replace("#",""),b=parseInt(E.substring(0,2),16),S=parseInt(E.substring(2,4),16),F=parseInt(E.substring(4,6),16);p=`rgba(${b}, ${S}, ${F}, ${M})`}const _=a+i/2,x=e*((u==null?void 0:u.indentPerLevel)??Pe.INDENT_PER_LEVEL);f.push(`<rect x="${o}" y="${a}"
    width="${s}" height="${i}"
    fill="${p}"/>`),y&&f.push(`<line x1="${o}" x2="${o+s}" y1="${a+i}" y2="${a+i}"
      stroke="${c.colors.border}" stroke-width="1" opacity="0.5"/>`);const k=g?' font-style="italic"':"",W=o+Pe.TEXT_PADDING+x;if(f.push(`<text class="cell-text" x="${W}" y="${_}"
    font-family="${c.typography.fontFamily}"
    font-size="${h}px"
    font-weight="${d}"${k}
    fill="${c.colors.foreground}">${an(t)}</text>`),r>0){const A=ya(t,h,c.typography.fontFamily,d),M=W+A+6,E=Wn(c.typography.fontSizeSm??"0.75rem");f.push(`<text class="cell-text" x="${M}" y="${_}"
      font-family="${c.typography.fontFamily}"
      font-size="${E}px"
      font-weight="${c.typography.fontWeightNormal}"
      fill="${c.colors.muted}">(${r})</text>`)}return f.join(`
`)}function Zg(t,e){const r=new Map;for(const o of e)if(o.type==="bar"){let a=0;for(const i of t){const s=i.metadata[o.field];typeof s=="number"&&s>a&&(a=s)}r.set(o.field,a>0?a:1)}return r}function Kg(t,e){var o,a,i,s,c,f,l,u,h,d,g,p,y,_,x,k,W,A,M;if(e.type==="interval"){const E=(a=(o=e.options)==null?void 0:o.interval)!=null&&a.point?t.metadata[e.options.interval.point]:t.point,b=(s=(i=e.options)==null?void 0:i.interval)!=null&&s.lower?t.metadata[e.options.interval.lower]:t.lower,S=(f=(c=e.options)==null?void 0:c.interval)!=null&&f.upper?t.metadata[e.options.interval.upper]:t.upper;return Ss(E,b,S,e.options)}if(e.type==="numeric"){const E=t.metadata[e.field];return typeof E=="number"?Qo(E,e.options):((l=e.options)==null?void 0:l.naText)??""}if(e.type==="custom"&&((u=e.options)!=null&&u.events))return Ms(t,e.options);if(e.type==="pvalue"){const E=t.metadata[e.field];return typeof E!="number"?((h=e.options)==null?void 0:h.naText)??"":Ic(E,e.options)}if(e.type==="icon"){const E=t.metadata[e.field];if(E==null)return"";const b=String(E),S=(g=(d=e.options)==null?void 0:d.icon)==null?void 0:g.mapping;return S&&b in S?S[b]:b}if(e.type==="badge"){const E=t.metadata[e.field];return E!=null?String(E):""}if(e.type==="stars"){const E=t.metadata[e.field];if(typeof E!="number")return"";const b=((y=(p=e.options)==null?void 0:p.stars)==null?void 0:y.maxStars)??5,S=Math.max(0,Math.min(b,E)),F=Math.floor(S),N=b-F;return"★".repeat(F)+"☆".repeat(N)}if(e.type==="img")return((x=(_=e.options)==null?void 0:_.img)==null?void 0:x.fallback)??"[IMG]";if(e.type==="reference"){const E=t.metadata[e.field];if(E==null)return"";const b=String(E),S=((W=(k=e.options)==null?void 0:k.reference)==null?void 0:W.maxChars)??30;return b.length<=S?b:b.substring(0,S)+"..."}if(e.type==="range"){const E=(A=e.options)==null?void 0:A.range;if(!E)return"";const b=t.metadata[E.minField],S=t.metadata[E.maxField],F=E.separator??" – ",N=E.decimals,R=T=>typeof T!="number"?"":N==null?Number.isInteger(T)?String(T):T.toFixed(1):T.toFixed(N);return b===null&&S===null?"":b===null?R(S):S===null?R(b):`${R(b)}${F}${R(S)}`}const r=t.metadata[e.field];return r!=null?String(r):((M=e.options)==null?void 0:M.naText)??""}function Qg(t,e,r,o,a){const i=t.filter(u=>Number.isFinite(u));if(i.length===0)return"";if(i.length===1){const u=e+o/2,h=r+a/2;return`M${u.toFixed(1)},${h.toFixed(1)}`}const s=Math.min(...i),f=Math.max(...i)-s||1;return`M${i.map((u,h)=>{const d=e+h/(i.length-1)*o,g=r+a-(u-s)/f*a;return`${d.toFixed(1)},${g.toFixed(1)}`}).join("L")}`}function Jg(t,e,r,o,a,i=[],s,c=0,f=1/0,l,u=!1){var b;let h;if(i.length===0){const S=!u||t.point!=null&&t.point>0?t.point:null,F=!u||t.lower!=null&&t.lower>0?t.lower:null,N=!u||t.upper!=null&&t.upper>0?t.upper:null;h=[{point:S,lower:F,upper:N,color:null,shape:null,opacity:null}]}else h=i.map(S=>({point:Un(t.metadata,t.point,S.pointCol,"point",u),lower:Un(t.metadata,t.lower,S.lowerCol,"lower",u),upper:Un(t.metadata,t.upper,S.upperCol,"upper",u),color:S.color??null,shape:S.shape??null,opacity:S.opacity??null}));const d=h.filter(S=>S.point!=null&&!Number.isNaN(S.point)&&S.lower!=null&&!Number.isNaN(S.lower)&&S.upper!=null&&!Number.isNaN(S.upper));if(d.length===0)return"";const g=o.shapes.pointSize,p=o.shapes.lineWidth,y=o.colors.intervalLine,_=((b=t.style)==null?void 0:b.type)==="summary",k=o.shapes.summaryHeight/2;function W(S){var N;if(S&&((N=t.markerStyle)==null?void 0:N.size)!=null)return g*t.markerStyle.size;const F=s?t.metadata[s]:void 0;if(F){const R=.5+Math.sqrt(F/100)*1.5;return Math.min(Math.max(g*R,3),g*2.5)}return g}function A(S,F){const N=F===0,R=t.markerStyle,T=o.shapes.effectColors,G=o.shapes.markerShapes,K=["square","circle","diamond","triangle"];let ct;N&&(R!=null&&R.color)?ct=R.color:S.color?ct=S.color:T&&T.length>0?ct=T[F%T.length]:ct=o.colors.interval??o.colors.primary??"#2563eb";let B;N&&(R!=null&&R.shape)?B=R.shape:S.shape?B=S.shape:G&&G.length>0?B=G[F%G.length]:B=K[F%K.length];let q;return N&&(R==null?void 0:R.opacity)!=null?q=R.opacity:S.opacity!=null?q=S.opacity:q=1,{color:ct,shape:B,opacity:q}}function M(S,F,N,R){const{color:T,shape:G,opacity:K}=R,ct=K<1?` fill-opacity="${K}"`:"";switch(G){case"circle":return`<circle cx="${S}" cy="${F}" r="${N}" fill="${T}"${ct}/>`;case"diamond":return`<polygon points="${[`${S},${F-N}`,`${S+N},${F}`,`${S},${F+N}`,`${S-N},${F}`].join(" ")}" fill="${T}"${ct}/>`;case"triangle":return`<polygon points="${[`${S},${F-N}`,`${S+N},${F+N}`,`${S-N},${F+N}`].join(" ")}" fill="${T}"${ct}/>`;default:return`<rect x="${S-N}" y="${F-N}" width="${N*2}" height="${N*2}" fill="${T}"${ct}/>`}}const E=[];return d.forEach((S,F)=>{const N=e+Xl(F,d.length),R=r(S.lower),T=r(S.upper),G=r(S.point),K=A(S,F),ct=W(F===0),B=y;if(_){const q=K.opacity<1?` fill-opacity="${K.opacity}"`:"",nt=[`${R},${N}`,`${G},${N-k}`,`${T},${N}`,`${G},${N+k}`].join(" ");E.push(`
        <g class="interval effect-${F} summary">
          <polygon points="${nt}"
            fill="${K.color}"${q} stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else{const q=c+Tn,nt=c+f-Tn,U=l?S.lower<l[0]:R<q,X=l?S.upper>l[1]:T>nt;let st,rt;if(l){const ne=Math.max(l[0],Math.min(l[1],S.lower)),be=Math.max(l[0],Math.min(l[1],S.upper));st=r(ne),rt=r(be)}else st=Math.max(q,Math.min(nt,R)),rt=Math.max(q,Math.min(nt,T));const ot=Vl(o),pt=ot.height/2,vt=l?r(l[0]):q,Tt=l?r(l[1]):nt;let Et="";if(U){const ne=ot.opacity<1?` fill-opacity="${ot.opacity}"`:"";Et=`<path d="${ia("left",vt,N,ot)}" fill="${ot.color}"${ne}/>`}else Et=`<line x1="${st}" x2="${st}" y1="${N-pt}" y2="${N+pt}" stroke="${B}" stroke-width="${p}"/>`;let Nt="";if(X){const ne=ot.opacity<1?` fill-opacity="${ot.opacity}"`:"";Nt=`<path d="${ia("right",Tt,N,ot)}" fill="${ot.color}"${ne}/>`}else Nt=`<line x1="${rt}" x2="${rt}" y1="${N-pt}" y2="${N+pt}" stroke="${B}" stroke-width="${p}"/>`;const $e=l?r(Math.max(l[0],Math.min(l[1],S.point))):Math.max(q,Math.min(nt,G));E.push(`
        <g class="interval effect-${F}">
          <line x1="${st}" x2="${rt}" y1="${N}" y2="${N}"
            stroke="${B}" stroke-width="${p}"/>
          ${Et}
          ${Nt}
          ${M($e,N,ct,K)}
        </g>`)}}),E.join("")}function tp(t,e,r,o,a,i,s,c){const l=c.shapes.summaryHeight/2,[u,h]=a.domain().map(M=>a(M)),d=Math.min(u,h),g=Math.max(u,h),p=a(e),y=a(t),_=a(r),x=i+Math.max(d,Math.min(g,p)),k=i+Math.max(d,Math.min(g,y)),W=i+Math.max(d,Math.min(g,_));return`<polygon points="${[`${x},${o}`,`${k},${o-l}`,`${W},${o}`,`${k},${o+l}`].join(" ")}"
    fill="${c.colors.summaryFill}"
    stroke="${c.colors.summaryBorder}"
    stroke-width="1"/>`}function ep(t,e,r,o,a,i,s,c){const f=[],l=i.effects,u=l.length;if(!l.some(x=>{const k=t.metadata[x.value];return k!=null&&!Number.isNaN(k)}))return"";const d=r*.7,g=u>1?2:0,p=(d-g*(u-1))/u,y=Math.max(4,p),_=c.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"];return l.forEach((x,k)=>{const W=t.metadata[x.value];if(W==null||Number.isNaN(W))return;const A=e-d/2+k*(y+g),M=o+s(Math.min(0,W)),E=Math.abs(s(W)-s(0)),b=x.color??_[k%_.length],S=x.opacity??.85;f.push(`<rect
      x="${M}" y="${A}"
      width="${Math.max(1,E)}" height="${y}"
      fill="${b}" fill-opacity="${S}" rx="2"
      class="viz-bar-segment"/>`)}),f.join(`
`)}function np(t,e,r,o,a,i,s,c){const f=[],l=i.effects,u=l.length,h=l.map(k=>{if(k.data){const W=t.metadata[k.data];return!W||!Array.isArray(W)||W.length===0?null:ma(W)}if(k.min&&k.q1&&k.median&&k.q3&&k.max){const W=t.metadata[k.min],A=t.metadata[k.q1],M=t.metadata[k.median],E=t.metadata[k.q3],b=t.metadata[k.max];if([W,A,M,E,b].some(F=>F==null||Number.isNaN(F)))return null;let S=[];if(k.outliers){const F=t.metadata[k.outliers];F&&Array.isArray(F)&&(S=F)}return{min:W,q1:A,median:M,q3:E,max:b,outliers:S}}return null});if(!h.some(k=>k!==null))return"";const g=r*.7,p=u>1?2:0,y=Math.max(8,(g-(u-1)*p)/u),_=c.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],x=c.colors.foreground??"#1a1a1a";return l.forEach((k,W)=>{const A=h[W];if(!A)return;const M=e-g/2+W*(y+p),E=M+y/2,b=k.color??_[W%_.length],S=k.fillOpacity??.7;f.push(`<line
      x1="${o+s(A.min)}" x2="${o+s(A.q1)}"
      y1="${E}" y2="${E}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(A.min)}" x2="${o+s(A.min)}"
      y1="${E-y/4}" y2="${E+y/4}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(A.q3)}" x2="${o+s(A.max)}"
      y1="${E}" y2="${E}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(A.max)}" x2="${o+s(A.max)}"
      y1="${E-y/4}" y2="${E+y/4}"
      stroke="${x}" stroke-width="1"/>`);const F=Math.max(2,s(A.q3)-s(A.q1));if(f.push(`<rect
      x="${o+s(A.q1)}" y="${M}"
      width="${F}" height="${y}"
      fill="${b}" fill-opacity="${S}"
      stroke="${x}" stroke-width="1"/>`),f.push(`<line
      x1="${o+s(A.median)}" x2="${o+s(A.median)}"
      y1="${M}" y2="${M+y}"
      stroke="${x}" stroke-width="2"/>`),i.showOutliers!==!1&&A.outliers.length>0)for(const N of A.outliers)f.push(`<circle
          cx="${o+s(N)}" cy="${E}"
          r="2.5"
          fill="none" stroke="${b}" stroke-width="1.5"/>`)}),f.join(`
`)}function rp(t,e,r,o,a,i,s,c){const f=[],l=i.effects,u=l.length,h=l.map(A=>{const M=t.metadata[A.data];return!M||!Array.isArray(M)||M.length<2?null:Pc(M,i.bandwidth)}),d=l.map(A=>{const M=t.metadata[A.data];if(!M||!Array.isArray(M)||M.length<2)return null;const E=M.filter(F=>F!=null&&!Number.isNaN(F)).sort((F,N)=>F-N);if(E.length===0)return null;const b=E.length,S=F=>{if(b===1)return E[0];const N=(b-1)*F,R=Math.floor(N),T=Math.ceil(N);return R===T?E[R]:E[R]+(N-R)*(E[T]-E[R])};return{q1:S(.25),median:S(.5),q3:S(.75)}});if(!h.some(A=>A!==null))return"";const p=r*.8,y=u>1?2:0,_=Math.max(10,(p-(u-1)*y)/u),x=_/2,k=c.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],W=c.colors.foreground??"#1a1a1a";return l.forEach((A,M)=>{const E=h[M],b=d[M];if(!E||E.x.length<2)return;const S=e-p/2+_/2+M*(_+y),F=A.color??k[M%k.length],N=A.fillOpacity??.5,R=Lc(E,x),T=[];for(let G=0;G<R.x.length;G++){const K=o+s(R.x[G]),ct=S-R.y[G];T.push(G===0?`M ${K} ${ct}`:`L ${K} ${ct}`)}for(let G=R.x.length-1;G>=0;G--){const K=o+s(R.x[G]),ct=S+R.y[G];T.push(`L ${K} ${ct}`)}if(T.push("Z"),f.push(`<path
      d="${T.join(" ")}"
      fill="${F}" fill-opacity="${N}"
      stroke="${W}" stroke-width="0.5"/>`),i.showMedian!==!1&&b){const G=o+s(b.median);f.push(`<line
        x1="${G}" x2="${G}"
        y1="${S-x*.6}" y2="${S+x*.6}"
        stroke="${W}" stroke-width="2"/>`)}if(i.showQuartiles&&b){const G=o+s(b.q1),K=o+s(b.q3);f.push(`<line
        x1="${G}" x2="${G}"
        y1="${S-x*.4}" y2="${S+x*.4}"
        stroke="${W}" stroke-width="1" stroke-dasharray="2,2"/>`),f.push(`<line
        x1="${K}" x2="${K}"
        y1="${S-x*.4}" y2="${S+x*.4}"
        stroke="${W}" stroke-width="1" stroke-dasharray="2,2"/>`)}}),f.join(`
`)}function op(t,e,r){var c,f;const o=e.scale==="log",a=Tn;let i=(c=e.axisRange)==null?void 0:c[0],s=(f=e.axisRange)==null?void 0:f[1];if(i==null||s==null){const l=[];for(const u of t)for(const h of e.effects){const d=u.metadata[h.value];d!=null&&!Number.isNaN(d)&&l.push(d)}l.length>0?(i=i??Math.min(0,...l),s=s??Math.max(...l)*1.1):(i=i??0,s=s??100)}return o?Pi([Math.max(.01,i),s],[a,r-a]):Fi([i,s],[a,r-a])}function ip(t,e,r){var c,f;const o=e.scale==="log",a=Tn;let i=(c=e.axisRange)==null?void 0:c[0],s=(f=e.axisRange)==null?void 0:f[1];if(i==null||s==null){const l=[];for(const u of t)for(const h of e.effects)if(h.data){const d=u.metadata[h.data];if(d&&Array.isArray(d)){const g=ma(d);l.push(g.min,g.max),e.showOutliers!==!1&&l.push(...g.outliers)}}else if(h.min&&h.max){const d=u.metadata[h.min],g=u.metadata[h.max];d!=null&&!Number.isNaN(d)&&l.push(d),g!=null&&!Number.isNaN(g)&&l.push(g)}if(l.length>0){const u=Math.min(...l),h=Math.max(...l),d=h-u;i=i??u-d*.05,s=s??h+d*.05}else i=i??0,s=s??100}return o?Pi([Math.max(.01,i),s],[a,r-a]):Fi([i,s],[a,r-a])}function ap(t,e,r){var c,f;const o=e.scale==="log",a=Tn;let i=(c=e.axisRange)==null?void 0:c[0],s=(f=e.axisRange)==null?void 0:f[1];if(i==null||s==null){const l=[];for(const u of t)for(const h of e.effects){const d=u.metadata[h.data];d&&Array.isArray(d)&&l.push(...d.filter(g=>g!=null&&!Number.isNaN(g)))}if(l.length>0){i=i??Math.min(...l),s=s??Math.max(...l);const u=(s??0)-(i??0);i=(i??0)-u*.1,s=(s??0)+u*.1}else i=i??0,s=s??100}return o?Pi([Math.max(.01,i),s],[a,r-a]):Fi([i,s],[a,r-a])}function Ns(t,e,r,o,a,i,s){const c=[],f=Wn(r.typography.fontSizeSm),l=is.EDGE_THRESHOLD,u=_=>_<l?"start":_>i-l?"end":"middle",h=_=>_<l?2:_>i-l?-2:0;c.push(`<line x1="${a}" x2="${a+i}"
    y1="0" y2="0" stroke="${r.colors.border}" stroke-width="1"/>`);const d=t.domain(),g=5,p=[],y=d[1]-d[0];for(let _=0;_<=g;_++)p.push(d[0]+y*_/g);for(const _ of p){const x=t(_),k=a+x,W=u(x),A=h(x),M=Qo(_);c.push(`<line x1="${k}" x2="${k}" y1="0" y2="4" stroke="${r.colors.border}" stroke-width="1"/>`),c.push(`<text x="${k+A}" y="14"
      text-anchor="${W}"
      font-family="${r.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.foreground}">${M}</text>`)}return o&&c.push(`<text x="${a+i/2}" y="28"
      text-anchor="middle"
      font-family="${r.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${r.typography.fontWeightMedium}"
      fill="${r.colors.foreground}">${an(o)}</text>`),c.join(`
`)}function sp(t,e,r,o,a,i,s=1,c){const f=[],l=typeof r.axis.tickCount=="number"?r.axis.tickCount:Pe.DEFAULT_TICK_COUNT,u=fp(t,l,r,s,i,c),h=Wn(r.typography.fontSizeSm),d=is.EDGE_THRESHOLD,g=y=>y<d?"start":y>i-d?"end":"middle",p=y=>y<d?2:y>i-d?-2:0;f.push(`<line x1="${a}" x2="${a+i}"
    y1="0" y2="0" stroke="${r.colors.border}" stroke-width="1"/>`);for(const y of u){const _=t(y),x=a+_,k=g(_),W=p(_);f.push(`<line x1="${x}" x2="${x}" y1="0" y2="4"
      stroke="${r.colors.border}" stroke-width="1"/>`),f.push(`<text x="${x+W}" y="16" text-anchor="${k}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightNormal}"
      fill="${r.colors.secondary}">${jg(y)}</text>`)}return o&&f.push(`<text x="${a+i/2}" y="28"
      text-anchor="middle"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${r.typography.fontWeightMedium}"
      fill="${r.colors.secondary}">${an(o)}</text>`),`<g transform="translate(0, ${e.mainY+e.headerHeight+e.plotHeight})">${f.join(`
`)}</g>`}function lp(t,e,r,o,a,i,s,c,f,l){const u=[],h=Wn(i.typography.fontSizeBase),d=i.typography.headerFontScale??1.05,g=Math.round(h*d*100)/100,p=i.typography.fontWeightBold,y=i.typography.fontWeightBold,_=_a(t),x=(k,W)=>k+W/2;if(_){const k=a/2,W=a/2;let A=r;u.push(`<text class="cell-text" x="${A+Pe.TEXT_PADDING}" y="${x(o,a)}"
      font-family="${i.typography.fontFamily}"
      font-size="${g}px"
      font-weight="${p}"
      fill="${i.colors.foreground}">${an(s)}</text>`),A+=c;const M=[];for(const E of t)if(E.isGroup){const b=E.columns.reduce((F,N)=>N.isGroup?F+N.columns.reduce((R,T)=>R+l(T),0):F+l(N),0),S=A+b/2;u.push(`<text class="cell-text" x="${S}" y="${x(o,k)}"
          font-family="${i.typography.fontFamily}"
          font-size="${g}px"
          font-weight="${y}"
          text-anchor="middle"
          fill="${i.colors.foreground}">${an(E.header)}</text>`),M.push({x1:A,x2:A+b}),A+=b}else{const b=l(E),S=E.headerAlign??E.align,{textX:F,anchor:N}=xa(A,b,S),R=Oc(E.header,b,g,Pe.TEXT_PADDING);u.push(`<text class="cell-text" x="${F}" y="${x(o,a)}"
          font-family="${i.typography.fontFamily}"
          font-size="${g}px"
          font-weight="${p}"
          text-anchor="${N}"
          fill="${i.colors.foreground}">${an(R)}</text>`),A+=b}for(const E of M)u.push(`<line x1="${E.x1}" x2="${E.x2}"
        y1="${o+k}" y2="${o+k}"
        stroke="${i.colors.border}" stroke-width="1"/>`);A=r+c;for(const E of t)if(E.isGroup){for(const b of E.columns)if(!b.isGroup){const S=l(b),F=b.headerAlign??b.align,{textX:N,anchor:R}=xa(A,S,F);u.push(`<text class="cell-text" x="${N}" y="${x(o+k,W)}"
              font-family="${i.typography.fontFamily}"
              font-size="${g}px"
              font-weight="${p}"
              text-anchor="${R}"
              fill="${i.colors.foreground}">${an(b.header)}</text>`),A+=S}}else A+=l(E)}else{let k=r;u.push(`<text class="cell-text" x="${k+Pe.TEXT_PADDING}" y="${x(o,a)}"
      font-family="${i.typography.fontFamily}"
      font-size="${g}px"
      font-weight="${p}"
      fill="${i.colors.foreground}">${an(s)}</text>`),k+=c;for(const W of e){const A=l(W),M=W.headerAlign??W.align,{textX:E,anchor:b}=xa(k,A,M),S=Oc(W.header,A,g,Pe.TEXT_PADDING);u.push(`<text class="cell-text" x="${E}" y="${x(o,a)}"
        font-family="${i.typography.fontFamily}"
        font-size="${g}px"
        font-weight="${p}"
        text-anchor="${b}"
        fill="${i.colors.foreground}">${an(S)}</text>`),k+=A}}return u.join(`
`)}function cp(t,e,r,o,a,i,s,c,f,l,u,h){var W,A,M,E,b,S,F,N,R,T,G,K,ct,B,q,nt,U,X,st,rt,ot,pt,vt,Tt,Et,Nt,$e,ne,be;const d=[],g=Wn(i.typography.fontSizeBase),p=o+a/2,y=c*Pe.INDENT_PER_LEVEL+(((W=t.style)==null?void 0:W.indent)??0)*Pe.INDENT_PER_LEVEL,_=(A=t.style)!=null&&A.bold||(M=t.style)!=null&&M.emphasis?i.typography.fontWeightBold:i.typography.fontWeightNormal,x=(E=t.style)!=null&&E.italic?"italic":"normal";let k=i.colors.foreground;if((b=t.style)!=null&&b.color?k=t.style.color:(S=t.style)!=null&&S.muted?k=i.colors.muted:(F=t.style)!=null&&F.accent&&(k=i.colors.accent),d.push(`<text class="cell-text" x="${r+Pe.TEXT_PADDING+y}" y="${p}"
    font-family="${i.typography.fontFamily}"
    font-size="${g}px"
    font-weight="${_}"
    font-style="${x}"
    fill="${k}">${an(t.label)}</text>`),(N=t.style)!=null&&N.badge){const ue=String(t.style.badge),gt=g*Mr.FONT_SCALE,Ct=gt+Mr.PADDING*2,Yt=ya(t.label,g,i.typography.fontFamily,_),jt=r+Pe.TEXT_PADDING+y+Yt+Mr.GAP,ke=ya(ue,gt,i.typography.fontFamily,i.typography.fontWeightBold)+Mr.PADDING*2,Ft=o+(a-Ct)/2;d.push(`<rect x="${jt}" y="${Ft}" width="${ke}" height="${Ct}"
      rx="3" fill="${i.colors.primary}" opacity="0.15"/>`),d.push(`<text class="cell-text" x="${jt+ke/2}" y="${Ft+Ct/2}"
      text-anchor="middle"
      font-family="${i.typography.fontFamily}"
      font-size="${gt}px"
      font-weight="${i.typography.fontWeightBold}"
      fill="${i.colors.primary}">${an(ue)}</text>`)}for(let ue=0;ue<e.length;ue++){const gt=e[ue],Ct=h[ue],Yt=u(gt);if(gt.type==="forest"||gt.type==="viz_bar"||gt.type==="viz_boxplot"||gt.type==="viz_violin")continue;const jt=Kg(t,gt),{textX:Xt,anchor:ke}=xa(Ct,Yt,gt.align);if(gt.type==="bar"&&typeof t.metadata[gt.field]=="number"){const Ft=t.metadata[gt.field],Gt=f.get(gt.field),Ye=((T=(R=gt.options)==null?void 0:R.bar)==null?void 0:T.maxValue)??Gt??100,Ue=((K=(G=gt.options)==null?void 0:G.bar)==null?void 0:K.color)??i.colors.primary,_e=i.shapes.pointSize*2,Mn=Yt-Pe.TEXT_PADDING*2-50,qt=Math.min(Ft/Ye*Mn,Mn),At=t.style,Le=At!=null&&At.bold||At!=null&&At.emphasis?i.typography.fontWeightBold:i.typography.fontWeightNormal;d.push(`<rect x="${Ct+Pe.TEXT_PADDING}" y="${o+a/2-_e/2}"
        width="${Math.max(0,qt)}" height="${_e}"
        fill="${Ue}" opacity="0.7" rx="2"/>`),d.push(`<text class="cell-text" x="${Ct+Yt-Pe.TEXT_PADDING}" y="${p}"
        font-family="${i.typography.fontFamily}"
        font-size="${g}px"
        font-weight="${Le}"
        text-anchor="end"
        fill="${i.colors.foreground}">${Qo(Ft)}</text>`)}else if(gt.type==="sparkline"&&Array.isArray(t.metadata[gt.field])){let Ft=t.metadata[gt.field];Array.isArray(Ft[0])&&(Ft=Ft[0]);const Gt=((B=(ct=gt.options)==null?void 0:ct.sparkline)==null?void 0:B.height)??16,Ye=((nt=(q=gt.options)==null?void 0:q.sparkline)==null?void 0:nt.color)??i.colors.primary,Ue=Pe.TEXT_PADDING*2,_e=Qg(Ft,Ct+Pe.TEXT_PADDING,o+a/2-Gt/2,Yt-Ue,Gt);d.push(`<path d="${_e}" fill="none" stroke="${Ye}" stroke-width="1.5"/>`)}else if(gt.type==="badge"){const Ft=t.metadata[gt.field];if(Ft!=null){const Gt=String(Ft),Ye=g*.85,Ue=Ye+8,_e=(X=(U=gt.options)==null?void 0:U.badge)==null?void 0:X.variants,dn=(rt=(st=gt.options)==null?void 0:st.badge)==null?void 0:rt.colors;let Mn=i.colors.primary,qt=i.colors.primary;if(dn&&Gt in dn)Mn=dn[Gt],qt=dn[Gt];else if(_e&&Gt in _e){const Sn=_e[Gt];Mn={default:i.colors.primary,...Ci,muted:i.colors.muted}[Sn]??i.colors.primary,qt=Mn}const Le=ya(Gt,Ye,i.typography.fontFamily,i.typography.fontWeightBold)+12,On=gt.align==="right"?Ct+Yt-Pe.TEXT_PADDING-Le:gt.align==="center"?Ct+(Yt-Le)/2:Ct+Pe.TEXT_PADDING,hr=o+(a-Ue)/2;d.push(`<rect x="${On}" y="${hr}" width="${Le}" height="${Ue}"
          rx="${Ue/2}" fill="${Mn}" opacity="0.15"/>`),d.push(`<text class="cell-text" x="${On+Le/2}" y="${hr+Ue/2}"
          text-anchor="middle"
          font-family="${i.typography.fontFamily}"
          font-size="${Ye}px"
          font-weight="${i.typography.fontWeightBold}"
          fill="${qt}">${an(Gt)}</text>`)}}else if(gt.type==="stars"){const Ft=t.metadata[gt.field];if(typeof Ft=="number"){const Gt=((pt=(ot=gt.options)==null?void 0:ot.stars)==null?void 0:pt.maxStars)??5,Ye=((Tt=(vt=gt.options)==null?void 0:vt.stars)==null?void 0:Tt.color)??"#f59e0b",Ue=((Nt=(Et=gt.options)==null?void 0:Et.stars)==null?void 0:Nt.emptyColor)??"#d1d5db",_e=Math.max(0,Math.min(Gt,Ft)),dn=Math.floor(_e),Mn=((ne=($e=gt.options)==null?void 0:$e.stars)==null?void 0:ne.halfStars)&&_e-dn>=.5,qt=12,At=2,Le=Gt*qt+(Gt-1)*At;let On=gt.align==="right"?Ct+Yt-Pe.TEXT_PADDING-Le:gt.align==="center"?Ct+(Yt-Le)/2:Ct+Pe.TEXT_PADDING;const hr=o+(a-qt)/2,Sn=(tn,hn,jr)=>{const gr=jr/2,Ge=gr*.4;let ln="";for(let Fn=0;Fn<5;Fn++){const ri=(Fn*72-90)*Math.PI/180,V=(Fn*72+36-90)*Math.PI/180,C=tn+gr*Math.cos(ri),L=hn+gr*Math.sin(ri),O=tn+Ge*Math.cos(V),ut=hn+Ge*Math.sin(V);ln+=(Fn===0?`M${C},${L}`:`L${C},${L}`)+`L${O},${ut}`}return ln+"Z"};for(let tn=0;tn<Gt;tn++){const hn=On+qt/2,jr=hr+qt/2,Ge=tn<dn||tn===dn&&Mn?Ye:Ue;d.push(`<path d="${Sn(hn,jr,qt)}" fill="${Ge}"/>`),On+=qt+At}}}else{const Ft=(be=t.cellStyles)==null?void 0:be[gt.field],Gt=t.style;let Ye=i.typography.fontWeightNormal;(Ft!=null&&Ft.bold||Ft!=null&&Ft.emphasis||Gt!=null&&Gt.bold||Gt!=null&&Gt.emphasis)&&(Ye=i.typography.fontWeightBold);let Ue="normal";(Ft!=null&&Ft.italic||Gt!=null&&Gt.italic)&&(Ue="italic");let _e=i.colors.foreground;Ft!=null&&Ft.color?_e=Ft.color:Ft!=null&&Ft.muted?_e=i.colors.muted:Ft!=null&&Ft.accent?_e=i.colors.accent:Gt!=null&&Gt.color?_e=Gt.color:Gt!=null&&Gt.muted?_e=i.colors.muted:Gt!=null&&Gt.accent&&(_e=i.colors.accent),d.push(`<text class="cell-text" x="${Xt}" y="${p}"
        font-family="${i.typography.fontFamily}"
        font-size="${g}px"
        font-weight="${Ye}"
        font-style="${Ue}"
        text-anchor="${ke}"
        fill="${_e}">${an(jt)}</text>`)}}return d.join(`
`)}function fp(t,e,r,o,a,i){if(Array.isArray(r.axis.tickValues)&&r.axis.tickValues.length>0){const[b,S]=t.domain();let F=r.axis.tickValues.filter(T=>T>=b&&T<=S);const N=r.axis.nullTick!==!1,R=o>=b&&o<=S;return N&&R&&!F.includes(o)&&(F=[...F,o].sort((T,G)=>T-G)),F}const[s,c]=t.domain(),f=r.axis.nullTick!==!1,l=o>=s&&o<=c,u=is.MIN_TICK_SPACING,h=Math.max(2,Math.floor(a/u)),d=Math.min(e,Math.min(7,h)),g=i&&i.length>0?i.filter(b=>b>=s&&b<=c):t.ticks(d);if(g.length===0)return f&&l?[o]:[];const p=t(o),y=g.filter(b=>b<o).reverse(),_=g.filter(b=>b>o),x=g.some(b=>b===o),k=[];let W=p;for(const b of y){const S=t(b);W-S>=u&&(k.unshift(b),W=S)}const A=[];let M=p;for(const b of _){const S=t(b);S-M>=u&&(A.push(b),M=S)}const E=[...k];if((x||f&&l)&&E.push(o),E.push(...A),E.length<2){const b=new Set(E);b.has(s)||E.unshift(s),E.length<2&&!b.has(c)&&E.push(c)}return E}function Hs(t,e,r,o,a,i,s,c=1,f=.6){let u=`<line x1="${t}" x2="${t}" y1="${e}" y2="${r}"
    stroke="${a}" stroke-width="${c}" stroke-opacity="${f}" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;if(s){const h=i.colors.secondary;u+=`<text x="${t}" y="${e-4}" text-anchor="middle"
      font-family="${i.typography.fontFamily}"
      font-size="${i.typography.fontSizeSm}"
      font-weight="${i.typography.fontWeightMedium}"
      fill="${h}">${an(s)}</text>`}return u}class Co extends Error{constructor(e){super(`SVG Generator: ${e}`),this.name="SVGGeneratorError"}}function up(t){if(!t||typeof t!="object")throw new Co("Invalid spec: expected an object");const e=t;if(!e.data||typeof e.data!="object")throw new Co("Invalid spec: missing or invalid 'data' property");const r=e.data;if(!Array.isArray(r.rows))throw new Co("Invalid spec: 'data.rows' must be an array");if(!e.theme||typeof e.theme!="object")throw new Co("Invalid spec: missing or invalid 'theme' property");const o=e.theme;if(!o.colors||typeof o.colors!="object")throw new Co("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new Co("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new Co("Invalid spec: missing or invalid 'theme.spacing'")}function dp(t){var i;const r=Ts(t.columns,void 0).find(s=>s.type==="forest");if(!r||!((i=r.options)!=null&&i.forest))return{scale:"linear",nullValue:0,effects:[],axisLabel:"Effect",pointCol:null,lowerCol:null,upperCol:null};const o=r.options.forest,a=o.scale??"linear";return{scale:a,nullValue:o.nullValue??(a==="log"?1:0),effects:o.effects??[],axisLabel:o.axisLabel??"Effect",pointCol:o.point??null,lowerCol:o.lower??null,upperCol:o.upper??null}}function $c(t,e={}){var N,R,T,G,K,ct;up(t);const r=t.theme,o=r.spacing.padding,a=Array.isArray(t.columns)?t.columns:[],i=Cs(a),s=[];for(let B=0;B<i.length;B++)i[B].type==="forest"&&s.push(B);s.length>0;const c=[];for(let B=0;B<i.length;B++){const q=i[B];(q.type==="viz_bar"||q.type==="viz_boxplot"||q.type==="viz_violin")&&c.push({index:B,type:q.type,column:q})}const f=dp(t),l=$g(t,e,f.nullValue),u=l.autoWidths,h=B=>{var nt,U,X,st,rt,ot,pt,vt;if(B.type==="forest"){const Tt=u.get(B.id);return Tt!==void 0?Tt:typeof B.width=="number"?B.width:((U=(nt=B.options)==null?void 0:nt.forest)==null?void 0:U.width)??l.forestWidth}if(B.type==="viz_bar"){const Tt=u.get(B.id);return Tt!==void 0?Tt:typeof B.width=="number"?B.width:((st=(X=B.options)==null?void 0:X.vizBar)==null?void 0:st.width)??l.forestWidth}if(B.type==="viz_boxplot"){const Tt=u.get(B.id);return Tt!==void 0?Tt:typeof B.width=="number"?B.width:((ot=(rt=B.options)==null?void 0:rt.vizBoxplot)==null?void 0:ot.width)??l.forestWidth}if(B.type==="viz_violin"){const Tt=u.get(B.id);return Tt!==void 0?Tt:typeof B.width=="number"?B.width:((vt=(pt=B.options)==null?void 0:pt.vizViolin)==null?void 0:vt.width)??l.forestWidth}const q=u.get(B.id);return q!==void 0?q:typeof B.width=="number"?B.width:Sr.DEFAULT_COLUMN_WIDTH},d=[];let g=o+l.labelWidth;for(const B of i)d.push(g),g+=h(B);const p=[];p.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${l.totalWidth}" height="${l.totalHeight}"
  viewBox="0 0 ${l.totalWidth} ${l.totalHeight}">
<style>
  text {
    font-variant-numeric: tabular-nums;
  }
  /* Use dominant-baseline for cell text to match CSS flex centering */
  .cell-text { dominant-baseline: central; }
</style>`);const y=e.backgroundColor??r.colors.background;if(p.push(`<rect width="100%" height="100%" fill="${y}"/>`),r.layout.containerBorder!==!1){const B=r.layout.containerBorderRadius??8;p.push(`<rect x="0.5" y="0.5"
      width="${l.totalWidth-1}" height="${l.totalHeight-1}"
      fill="none" stroke="${r.colors.border}" stroke-width="1"
      rx="${B}" ry="${B}"/>`)}p.push(Xg(t,l,r)),!!((N=t.labels)!=null&&N.subtitle)&&p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
      y1="${l.mainY}" y2="${l.mainY}"
      stroke="${r.colors.border}" stroke-width="2"/>`);const x=l.mainY;p.push(lp(a,i,o,x,l.headerHeight,r,t.data.labelHeader??"Study",l.labelWidth,u,h)),p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
    y1="${x+l.headerHeight}" y2="${x+l.headerHeight}"
    stroke="${r.colors.border}" stroke-width="2"/>`);const k=Gc(t),W=[],A=[];let M=0;for(const B of k){const nt=B.type==="data"&&((R=B.row.style)==null?void 0:R.type)==="spacer"?l.rowHeight/2:l.rowHeight;W.push(M),A.push(nt),M+=nt}const E=l.mainY+l.headerHeight;k.forEach((B,q)=>{var nt,U,X,st;if(B.type==="data"){const rt=B.row,ot=E+W[q],pt=A[q];if((nt=rt.style)!=null&&nt.bg)p.push(`<rect x="${o}" y="${ot}"
          width="${l.totalWidth-o*2}" height="${pt}"
          fill="${rt.style.bg}"/>`);else if(((U=rt.style)==null?void 0:U.type)==="header")p.push(`<rect x="${o}" y="${ot}"
          width="${l.totalWidth-o*2}" height="${pt}"
          fill="${r.colors.muted}" fill-opacity="0.1"/>`);else if(r.layout.banding&&!(((X=rt.style)==null?void 0:X.type)==="summary"||((st=rt.style)==null?void 0:st.type)==="spacer")){const Et=q%2===1?r.colors.altBg:r.colors.rowBg;Et!==r.colors.background&&p.push(`<rect x="${o}" y="${ot}"
              width="${l.totalWidth-o*2}" height="${pt}"
              fill="${Et}"/>`)}}});for(const B of s){const q=i[B],nt=d[B],U=h(q),X=(T=q.options)==null?void 0:T.forest,st=(X==null?void 0:X.scale)??"linear",rt=(X==null?void 0:X.nullValue)??(st==="log"?1:0),ot=(X==null?void 0:X.axisLabel)??"Effect",pt=st==="log";let vt=(X==null?void 0:X.effects)??[];const Tt=(X==null?void 0:X.point)??null,Et=(X==null?void 0:X.lower)??null,Nt=(X==null?void 0:X.upper)??null;vt.length===0&&(Tt||Et||Nt)&&(vt=[{pointCol:Tt,lowerCol:Et,upperCol:Nt}]);const $e={scale:st,nullValue:rt,effects:vt,pointCol:(X==null?void 0:X.point)??null,lowerCol:(X==null?void 0:X.lower)??null,upperCol:(X==null?void 0:X.upper)??null},{scale:ne,clipBounds:be,ticks:ue}=qg(t,U,$e,e),gt=nt+ne(rt);p.push(Hs(gt,E,E+l.plotHeight,"dashed",r.colors.muted,r));const Ct=(X==null?void 0:X.annotations)??[];for(const jt of Ct)if(jt.type==="reference_line"){const Xt=nt+ne(jt.x);p.push(Hs(Xt,E,E+l.plotHeight,jt.style,jt.color??r.colors.accent,r,jt.label,jt.width??1,jt.opacity??.6))}const Yt=Array.isArray(t.annotations)?t.annotations:[];for(const jt of Yt)if(jt.type==="reference_line"){const Xt=nt+ne(jt.x);p.push(Hs(Xt,E,E+l.plotHeight,jt.style,jt.color??r.colors.accent,r,jt.label,jt.width??1,jt.opacity??.6))}if(k.forEach((jt,Xt)=>{if(jt.type==="data"){const ke=E+W[Xt]+A[Xt]/2;p.push(Jg(jt.row,ke,Ft=>nt+ne(Ft),r,rt,vt,t.data.weightCol,nt,U,be,pt))}}),t.data.overall&&l.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const jt=E+l.summaryYPosition;p.push(tp(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,jt,ne,nt,U,r))}p.push(sp(ne,l,r,ot,nt,U,rt,ue))}const b=t.data.rows;for(const B of c){const q=B.column,nt=d[B.index],U=h(q);if(B.type==="viz_bar"){const X=(G=q.options)==null?void 0:G.vizBar;if(!X)continue;const st=op(b,X,U);k.forEach((rt,ot)=>{if(rt.type==="data"){const pt=E+W[ot]+A[ot]/2,vt=A[ot];p.push(ep(rt.row,pt,vt,nt,U,X,st,r))}}),X.showAxis!==!1&&(p.push(`<g transform="translate(0, ${E+l.plotHeight})">`),p.push(Ns(st,l,r,X.axisLabel,nt,U,X.nullValue)),p.push("</g>"))}else if(B.type==="viz_boxplot"){const X=(K=q.options)==null?void 0:K.vizBoxplot;if(!X)continue;const st=ip(b,X,U);k.forEach((rt,ot)=>{if(rt.type==="data"){const pt=E+W[ot]+A[ot]/2,vt=A[ot];p.push(np(rt.row,pt,vt,nt,U,X,st,r))}}),X.showAxis!==!1&&(p.push(`<g transform="translate(0, ${E+l.plotHeight})">`),p.push(Ns(st,l,r,X.axisLabel,nt,U,X.nullValue)),p.push("</g>"))}else if(B.type==="viz_violin"){const X=(ct=q.options)==null?void 0:ct.vizViolin;if(!X)continue;const st=ap(b,X,U);k.forEach((rt,ot)=>{if(rt.type==="data"){const pt=E+W[ot]+A[ot]/2,vt=A[ot];p.push(rp(rt.row,pt,vt,nt,U,X,st,r))}}),X.showAxis!==!1&&(p.push(`<g transform="translate(0, ${E+l.plotHeight})">`),p.push(Ns(st,l,r,X.axisLabel,nt,U,X.nullValue)),p.push("</g>"))}}const S=l.mainY+l.headerHeight,F=Zg(b,i);return k.forEach((B,q)=>{var X,st,rt;const nt=S+W[q],U=A[q];if(B.type==="group_header")p.push(Yg(B.label,B.depth,B.rowCount,o,nt,U,l.totalWidth-o*2,r));else{const ot=B.row,pt=B.depth;((X=ot.style)==null?void 0:X.type)==="spacer"||p.push(cp(ot,i,o,nt,U,r,l.labelWidth,pt,F,u,h,d))}if(B.type==="data"){const ot=B.row,pt=((st=ot.style)==null?void 0:st.type)==="summary",vt=((rt=ot.style)==null?void 0:rt.type)==="spacer";pt&&p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
          y1="${nt}" y2="${nt}"
          stroke="${r.colors.border}" stroke-width="2"/>`),vt||p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
          y1="${nt+U}" y2="${nt+U}"
          stroke="${r.colors.border}" stroke-width="1"/>`)}else p.push(`<line x1="${o}" x2="${l.totalWidth-o}"
        y1="${nt+U}" y2="${nt+U}"
        stroke="${r.colors.border}" stroke-width="1"/>`)}),p.push(Ug(t,l,r)),p.push("</svg>"),p.join(`
`)}async function hp(t,e=2){return new Promise((r,o)=>{const a=new Image,i=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(i);a.onload=()=>{const c=document.createElement("canvas"),f=c.getContext("2d");if(!f){URL.revokeObjectURL(s),o(new Error("Failed to get canvas context"));return}c.width=a.width*e,c.height=a.height*e,f.scale(e,e),f.drawImage(a,0,0),c.toBlob(l=>{URL.revokeObjectURL(s),l?r(l):o(new Error("Failed to create PNG blob"))},"image/png",1)},a.onerror=()=>{URL.revokeObjectURL(s),o(new Error("Failed to load SVG image"))},a.src=s})}function gp(t,e){return $c(t,e)}async function pp(t,e,r=2){const o=$c(t,e);return hp(o,r)}function jc(t,e){const r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}function qc(t){return`forest_plot_${new Date().toISOString().slice(0,19).replace(/[:-]/g,"")}.${t}`}Vr[P]="src/components/ui/DownloadButton.svelte";var vp=j(Lt('<svg width="16" height="16" viewBox="0 0 24 24" class="spin svelte-15gslqv"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="31.4" stroke-dashoffset="10"></circle></svg>'),Vr[P],[[76,6,[[77,8]]]]),mp=j(Lt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Vr[P],[[80,6,[[81,8],[82,8],[83,8]]]]),yp=j(xt('<div class="download-dropdown svelte-15gslqv"><button class="dropdown-item svelte-15gslqv"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-15gslqv"><rect x="3" y="3" width="18" height="18" rx="2"></rect><text x="12" y="15" text-anchor="middle" font-size="8" fill="currentColor" stroke="none">SVG</text></svg> <span>Download SVG</span></button> <button class="dropdown-item svelte-15gslqv"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-15gslqv"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"></circle><path d="M21 15l-5-5L5 21"></path></svg> <span>Download PNG</span></button></div>'),Vr[P],[[89,4,[[90,6,[[91,8,[[92,10],[93,10]]],[95,8]]],[97,6,[[98,8,[[99,10],[100,10],[101,10]]],[103,8]]]]]]),_p=j(xt('<div class="download-button-wrapper svelte-15gslqv"><button class="download-btn svelte-15gslqv" aria-label="Download plot"><!></button> <!></div>'),Vr[P],[[66,0,[[67,2]]]]);function Vr(t,e){We(new.target),Se(e,!0,Vr);let r=v(Wt(!1),"dropdownOpen"),o=v(Wt(!1),"isExporting"),a=v(Wt(null),"triggerEl");function i(){lt(r,!1)}async function s(){if(e.store.spec)try{lt(o,!0);const x=e.store.getExportDimensions(),k=gp(e.store.spec,x),W=new Blob([k],{type:"image/svg+xml;charset=utf-8"});jc(W,qc("svg"))}catch(x){console.error(...Gl("error","Failed to export SVG:",x))}finally{lt(o,!1),i()}}async function c(){if(e.store.spec)try{lt(o,!0);const x=e.store.getExportDimensions(),k=(await ru(pp(e.store.spec,x,2)))();jc(k,qc("png"))}catch(x){console.error(...Gl("error","Failed to export PNG:",x))}finally{lt(o,!1),i()}}function f(x){x.target.closest(".download-button-wrapper")||i()}var l={...Re()},u=_p();Bn("click",$o,f);var h=J(u);h.__click=()=>lt(r,!n(r));var d=J(h);{var g=x=>{var k=vp();z(x,k)},p=x=>{var k=mp();z(x,k)};I(()=>Y(d,x=>{n(o)?x(g):x(p,!1)}),"if",Vr,75,4)}yo(h,x=>lt(a,x),()=>n(a));var y=at(h,2);{var _=x=>{var k=yp(),W=J(k);W.__click=s;var A=at(W,2);A.__click=c,oa(k,(M,E)=>Gr==null?void 0:Gr(M,E),()=>({triggerEl:n(a)})),tt(()=>{W.disabled=n(o),A.disabled=n(o)}),z(x,k)};I(()=>Y(y,x=>{n(r)&&x(_)}),"if",Vr,88,2)}return tt(()=>{H(h,"aria-expanded",n(r)),h.disabled=n(o)}),z(t,u),Ee(l)}mo(["click"]),wa[P]="src/components/ui/ResetButton.svelte";var xp=j(xt('<button class="reset-btn svelte-uej7wa" title="Reset view" aria-label="Reset view to default settings"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg></button>'),wa[P],[[15,0,[[21,2,[[22,4],[23,4]]]]]]);function wa(t,e){We(new.target),Se(e,!0,wa);function r(){e.store.resetState()}var o={...Re()},a=xp();return a.__click=r,z(t,a),Ee(o)}mo(["click"]),Rn[P]="src/components/ui/ZoomControls.svelte";var wp=j(xt('<div class="clamped-note svelte-19w48ay"> </div>'),Rn[P],[[140,8]]),bp=j(xt('<button class="action-btn svelte-19w48ay" title="Reset to 100% (Cmd 0)"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-19w48ay"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg> Reset to 100%</button>'),Rn[P],[[147,8,[[152,10,[[153,12],[154,12]]]]]]),Mp=j(xt("<option> </option>"),Rn[P],[[198,14]]),Sp=j(xt("<option> </option>"),Rn[P],[[212,14]]),Ep=j(xt('<div class="zoom-dropdown svelte-19w48ay"><div class="zoom-row svelte-19w48ay"><button class="zoom-btn svelte-19w48ay" title="Zoom out (Cmd -)" aria-label="Zoom out"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg></button> <input type="range" class="zoom-slider svelte-19w48ay" min="50" max="200" step="5" title="Zoom level" aria-label="Zoom level"/> <button class="zoom-btn svelte-19w48ay" title="Zoom in (Cmd +)" aria-label="Zoom in"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button> <span class="zoom-value svelte-19w48ay"> </span></div> <!> <!> <div class="divider svelte-19w48ay"></div> <button class="action-btn svelte-19w48ay" title="Fit to container width (Cmd 1)"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-19w48ay"><path d="M21 12H3M21 12l-4-4m4 4l-4 4M3 12l4-4m-4 4l4 4"></path></svg> Fit to width</button> <label class="checkbox-row svelte-19w48ay"><input type="checkbox" class="svelte-19w48ay"/> <span>Auto-fit</span> <span class="checkbox-hint svelte-19w48ay">Shrink if too large</span></label> <div class="divider svelte-19w48ay"></div> <div class="section-label svelte-19w48ay">Max Size</div> <div class="select-row svelte-19w48ay"><label class="svelte-19w48ay"><span class="select-label svelte-19w48ay">Width</span> <select class="svelte-19w48ay"></select></label></div> <div class="select-row svelte-19w48ay"><label class="svelte-19w48ay"><span class="select-label svelte-19w48ay">Height</span> <select class="svelte-19w48ay"></select></label></div></div>'),Rn[P],[[97,4,[[99,6,[[100,8,[[106,10,[[107,12]]]]],[111,8],[123,8,[[129,10,[[130,12],[131,12]]]]],[135,8]]],[160,6],[163,6,[[168,8,[[169,10]]]]],[175,6,[[176,8],[181,8],[182,8]]],[185,6],[188,6],[190,6,[[191,8,[[192,10],[193,10]]]]],[204,6,[[205,8,[[206,10],[207,10]]]]]]]]),kp=j(xt('<div class="zoom-controls-wrapper svelte-19w48ay"><button class="zoom-trigger-btn svelte-19w48ay" aria-label="Zoom and display options"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path><path d="M11 8v6"></path><path d="M8 11h6"></path></svg> <span class="zoom-text svelte-19w48ay"> </span></button> <!></div>'),Rn[P],[[76,0,[[78,2,[[87,4,[[88,6],[89,6],[90,6],[91,6]]],[93,4]]]]]]);function Rn(t,e){We(new.target),Se(e,!0,Rn);let r=v(Wt(!1),"dropdownOpen"),o=v(Wt(null),"triggerEl");const a=v(m(()=>e.store.zoom),"zoom"),i=v(m(()=>e.store.autoFit),"autoFit"),s=v(m(()=>e.store.actualScale),"actualScale"),c=v(m(()=>e.store.isClamped),"isClamped"),f=v(m(()=>e.store.maxWidth),"maxWidth"),l=v(m(()=>e.store.maxHeight),"maxHeight"),u=v(m(()=>Math.round(n(s)*100)),"displayPercent"),h=v(m(()=>Math.round(n(a)*100)),"zoomPercent"),d=[{value:null,label:"None"},{value:600,label:"600px"},{value:800,label:"800px"},{value:1e3,label:"1000px"},{value:1200,label:"1200px"}],g=[{value:null,label:"None"},{value:400,label:"400px"},{value:600,label:"600px"},{value:800,label:"800px"}];function p(){lt(r,!1)}function y(N){const R=N.target;e.store.setZoom(parseFloat(R.value)/100)}function _(N){const R=N.target,T=w(R.value,"null")?null:parseInt(R.value);e.store.setMaxWidth(T)}function x(N){const R=N.target,T=w(R.value,"null")?null:parseInt(R.value);e.store.setMaxHeight(T)}function k(N){N.target.closest(".zoom-controls-wrapper")||p()}var W={...Re()},A=kp();Bn("click",$o,k);var M=J(A);M.__click=()=>lt(r,!n(r));var E=at(J(M),2),b=J(E);yo(M,N=>lt(o,N),()=>n(o));var S=at(M,2);{var F=N=>{var R=Ep(),T=J(R),G=J(T);G.__click=()=>e.store.zoomOut();var K=at(G,2);K.__change=y;var ct=at(K,2);ct.__click=()=>e.store.zoomIn();var B=at(ct,2),q=J(B),nt=at(T,2);{var U=gt=>{var Ct=wp(),Yt=J(Ct);tt(()=>Jt(Yt,`Showing ${n(u)??""}% (auto-fit)`)),z(gt,Ct)};I(()=>Y(nt,gt=>{n(c)&&gt(U)}),"if",Rn,139,6)}var X=at(nt,2);{var st=gt=>{var Ct=bp();Ct.__click=()=>e.store.resetZoom(),z(gt,Ct)};I(()=>Y(X,gt=>{w(n(a),1,!1)&&gt(st)}),"if",Rn,146,6)}var rt=at(X,4);rt.__click=()=>e.store.fitToWidth();var ot=at(rt,2),pt=J(ot);pt.__change=gt=>e.store.setAutoFit(gt.target.checked);var vt=at(ot,6),Tt=J(vt),Et=at(J(Tt),2);Et.__change=_,I(()=>ze(Et,21,()=>d,wr,(gt,Ct)=>{var Yt=Mp(),jt=J(Yt,!0);var Xt={};tt(()=>{Jt(jt,n(Ct).label),Xt!==(Xt=w(n(Ct).value,null)?"null":n(Ct).value)&&(Yt.value=(Yt.__value=w(n(Ct).value,null)?"null":n(Ct).value)??"")}),z(gt,Yt)}),"each",Rn,197,12);var Nt;Pl(Et);var $e=at(vt,2),ne=J($e),be=at(J(ne),2);be.__change=x,I(()=>ze(be,21,()=>g,wr,(gt,Ct)=>{var Yt=Sp(),jt=J(Yt,!0);var Xt={};tt(()=>{Jt(jt,n(Ct).label),Xt!==(Xt=w(n(Ct).value,null)?"null":n(Ct).value)&&(Yt.value=(Yt.__value=w(n(Ct).value,null)?"null":n(Ct).value)??"")}),z(gt,Yt)}),"each",Rn,211,12);var ue;Pl(be),oa(R,(gt,Ct)=>Gr==null?void 0:Gr(gt,Ct),()=>({triggerEl:n(o)})),tt(()=>{Uu(K,n(h)),Jt(q,`${n(h)??""}%`),Yu(pt,n(i)),Nt!==(Nt=w(n(f),null)?"null":n(f))&&(Et.value=(Et.__value=w(n(f),null)?"null":n(f))??"",rs(Et,w(n(f),null)?"null":n(f))),ue!==(ue=w(n(l),null)?"null":n(l))&&(be.value=(be.__value=w(n(l),null)?"null":n(l))??"",rs(be,w(n(l),null)?"null":n(l)))}),z(N,R)};I(()=>Y(S,N=>{n(r)&&N(F)}),"if",Rn,96,2)}return tt(()=>{H(M,"aria-expanded",n(r)),H(M,"title",`Zoom: ${n(u)??""}%`),Jt(b,`${n(u)??""}%`)}),z(t,A),Ee(W)}mo(["click","change"]),In[P]="src/components/ui/ControlToolbar.svelte";var Cp=j(xt('<div class="control-toolbar svelte-rjvd17"><!> <!> <!> <!> <!></div>'),In[P],[[37,0]]);function In(t,e){We(new.target),Se(e,!0,In);let r=Gn(e,"enableExport",3,!0),o=Gn(e,"enableThemes",3,void 0),a=Gn(e,"enableViewToggle",3,!0),i=Gn(e,"enableZoomControls",3,!0),s=Gn(e,"enableReset",3,!0);const c=v(m(()=>i()&&e.store.showZoomControls),"showZoomControls"),f=v(m(()=>w(o(),null,!1)),"showThemeSwitcher");var l={...Re()},u=Cp(),h=J(u);{var d=M=>{I(()=>Rn(M,{get store(){return e.store}}),"component",In,39,4,{componentTag:"ZoomControls"})};I(()=>Y(h,M=>{n(c)&&M(d)}),"if",In,38,2)}var g=at(h,2);{var p=M=>{I(()=>cr(M,{get store(){return e.store},get availableThemes(){return o()},get onThemeChange(){return e.onThemeChange}}),"component",In,42,4,{componentTag:"ThemeSwitcher"})};I(()=>Y(g,M=>{n(f)&&M(p)}),"if",In,41,2)}var y=at(g,2);{var _=M=>{I(()=>ko(M,{get store(){return e.store}}),"component",In,45,4,{componentTag:"ViewToggle"})};I(()=>Y(y,M=>{a()&&M(_)}),"if",In,44,2)}var x=at(y,2);{var k=M=>{I(()=>wa(M,{get store(){return e.store}}),"component",In,48,4,{componentTag:"ResetButton"})};I(()=>Y(x,M=>{s()&&M(k)}),"if",In,47,2)}var W=at(x,2);{var A=M=>{I(()=>Vr(M,{get store(){return e.store}}),"component",In,51,4,{componentTag:"DownloadButton"})};I(()=>Y(W,M=>{r()&&M(A)}),"if",In,50,2)}return z(t,u),Ee(l)}eo[P]="src/components/viz/VizBar.svelte";var Tp=j(Lt('<rect rx="2" class="bar-segment svelte-1pgs700"></rect>'),eo[P],[[107,8]]),Np=j(Lt('<g class="viz-bar-row svelte-1pgs700"></g>'),eo[P],[[96,2]]);function eo(t,e){We(new.target),Se(e,!0,eo);const r=v(m(()=>{var _,x,k,W;if(e.sharedScale)return e.sharedScale;const d=w(e.options.scale,"log"),g=((x=(_=e.theme)==null?void 0:_.spacing)==null?void 0:x.padding)??12;let p=((k=e.options.axisRange)==null?void 0:k[0])??0,y=((W=e.options.axisRange)==null?void 0:W[1])??100;if(!e.options.axisRange){const A=[];for(const M of e.options.effects){const E=e.row.metadata[M.value];he(E,null,!1)&&!Number.isNaN(E)&&A.push(E)}A.length>0&&(p=Math.min(0,...A),y=Math.max(...A)*1.1)}return d?Dr().domain([Math.max(.01,p),y]).range([g,e.width-g]):Qn().domain([p,y]).range([g,e.width-g])}),"xScale"),o=v(m(()=>{const d=e.options.effects.length,g=e.rowHeight*.7,p=d>1?2:0,y=(g-p*(d-1))/d;return{barHeight:Math.max(4,y),barGap:p,totalHeight:g}}),"barConfig"),a=v(m(()=>{var d,g;return((g=(d=e.theme)==null?void 0:d.shapes)==null?void 0:g.effectColors)??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"]}),"defaultColors");function i(d,g){return d.color??n(a)[g%n(a).length]}function s(d){return d.opacity??.85}const c=v(m(()=>e.options.effects.some(d=>{const g=e.row.metadata[d.value];return he(g,null,!1)&&!Number.isNaN(g)})),"hasValidData");var f={...Re()},l=kt(),u=yt(l);{var h=d=>{var g=Np();I(()=>ze(g,21,()=>e.options.effects,wr,(p,y,_)=>{const x=v(m(()=>e.row.metadata[n(y).value]),"value");n(x);var k=kt(),W=yt(k);{var A=M=>{const E=v(m(()=>e.yPosition-n(o).totalHeight/2+_*(n(o).barHeight+n(o).barGap)),"barY");n(E);const b=v(m(()=>n(r)(Math.min(0,n(x)))),"barX");n(b);const S=v(m(()=>Math.abs(n(r)(n(x))-n(r)(0))),"barWidth");n(S);const F=v(m(()=>i(n(y),_)),"color");n(F);const N=v(m(()=>s(n(y))),"opacity");n(N);var R=Tp();tt(T=>{H(R,"x",n(b)),H(R,"y",n(E)),H(R,"width",T),H(R,"height",n(o).barHeight),H(R,"fill",n(F)),H(R,"fill-opacity",n(N))},[()=>Math.max(1,n(S))]),z(M,R)};I(()=>Y(W,M=>{he(n(x),null,!1)&&!Number.isNaN(n(x))&&M(A)}),"if",eo,100,6)}z(p,k)}),"each",eo,98,4),z(d,g)};I(()=>Y(u,d=>{n(c)&&d(h)}),"if",eo,95,0)}return z(t,l),Ee(f)}ur[P]="src/components/viz/VizBoxplot.svelte";var Hp=j(Lt('<circle r="2.5" fill="none" stroke-width="1.5" class="outlier svelte-5apth9"></circle>'),ur[P],[[210,12]]),Ap=j(Lt('<line stroke-width="1"></line><line stroke-width="1"></line><line stroke-width="1"></line><line stroke-width="1"></line><rect stroke-width="1" class="box-rect svelte-5apth9"></rect><line stroke-width="2"></line><!>',1),ur[P],[[147,10],[156,10],[166,10],[175,10],[185,8],[198,8]]),Wp=j(Lt('<g class="viz-boxplot-row svelte-5apth9"></g>'),ur[P],[[135,2]]);function ur(t,e){We(new.target),Se(e,!0,ur);const r=v(m(()=>e.options.effects.map(g=>{if(g.data){const p=e.row.metadata[g.data];return!p||!Array.isArray(p)||w(p.length,0)?null:ma(p)}if(g.min&&g.q1&&g.median&&g.q3&&g.max){const p=e.row.metadata[g.min],y=e.row.metadata[g.q1],_=e.row.metadata[g.median],x=e.row.metadata[g.q3],k=e.row.metadata[g.max];if([p,y,_,x,k].some(A=>he(A,null)||Number.isNaN(A)))return null;let W=[];if(g.outliers){const A=e.row.metadata[g.outliers];A&&Array.isArray(A)&&(W=A)}return{min:p,q1:y,median:_,q3:x,max:k,outliers:W}}return null})),"effectStats"),o=v(m(()=>n(r).some(g=>w(g,null,!1))),"hasValidData"),a=v(m(()=>{var x,k,W,A;if(e.sharedScale)return e.sharedScale;const g=w(e.options.scale,"log"),p=((k=(x=e.theme)==null?void 0:x.spacing)==null?void 0:k.padding)??12;let y=(W=e.options.axisRange)==null?void 0:W[0],_=(A=e.options.axisRange)==null?void 0:A[1];if(he(y,null)||he(_,null)){const M=[];for(const E of n(r))E&&(M.push(E.min,E.max),w(e.options.showOutliers,!1,!1)&&M.push(...E.outliers));if(M.length>0){const E=Math.min(...M),b=Math.max(...M),S=b-E;y=y??E-S*.05,_=_??b+S*.05}else y=y??0,_=_??100}return g?Dr().domain([Math.max(.01,y),_]).range([p,e.width-p]):Qn().domain([y,_]).range([p,e.width-p])}),"xScale"),i=v(m(()=>{const g=e.options.effects.length,p=e.rowHeight*.7,y=(p-(g-1)*2)/g;return{boxHeight:Math.max(8,y),boxGap:g>1?2:0,totalHeight:p}}),"boxConfig"),s=v(m(()=>{var g,p;return((p=(g=e.theme)==null?void 0:g.shapes)==null?void 0:p.effectColors)??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"]}),"defaultColors");function c(g,p){return g.color??n(s)[p%n(s).length]}function f(g){return g.fillOpacity??.7}var l={...Re()},u=kt(),h=yt(u);{var d=g=>{var p=Wp();I(()=>ze(p,21,()=>e.options.effects,wr,(y,_,x)=>{const k=v(m(()=>n(r)[x]),"stats");n(k);var W=kt(),A=yt(W);{var M=E=>{const b=v(m(()=>e.yPosition-n(i).totalHeight/2+x*(n(i).boxHeight+n(i).boxGap)),"boxY");n(b);const S=v(m(()=>n(b)+n(i).boxHeight/2),"boxCenterY");n(S);const F=v(m(()=>c(n(_),x)),"color");n(F);const N=v(m(()=>f(n(_))),"opacity");n(N);const R=v(m(()=>{var st;return((st=e.theme)==null?void 0:st.colors.foreground)??"#1a1a1a"}),"lineColor");n(R);var T=Ap(),G=yt(T),K=at(G),ct=at(K),B=at(ct),q=at(B),nt=at(q),U=at(nt);{var X=st=>{var rt=kt(),ot=yt(rt);I(()=>ze(ot,17,()=>n(k).outliers,wr,(pt,vt)=>{var Tt=Hp();tt(Et=>{H(Tt,"cx",Et),H(Tt,"cy",n(S)),H(Tt,"stroke",n(F))},[()=>n(a)(n(vt))]),z(pt,Tt)}),"each",ur,209,10),z(st,rt)};I(()=>Y(U,st=>{w(e.options.showOutliers,!1,!1)&&n(k).outliers.length>0&&st(X)}),"if",ur,208,8)}tt((st,rt,ot,pt,vt,Tt,Et,Nt,$e,ne,be,ue)=>{H(G,"x1",st),H(G,"x2",rt),H(G,"y1",n(S)),H(G,"y2",n(S)),H(G,"stroke",n(R)),H(K,"x1",ot),H(K,"x2",pt),H(K,"y1",n(S)-n(i).boxHeight/4),H(K,"y2",n(S)+n(i).boxHeight/4),H(K,"stroke",n(R)),H(ct,"x1",vt),H(ct,"x2",Tt),H(ct,"y1",n(S)),H(ct,"y2",n(S)),H(ct,"stroke",n(R)),H(B,"x1",Et),H(B,"x2",Nt),H(B,"y1",n(S)-n(i).boxHeight/4),H(B,"y2",n(S)+n(i).boxHeight/4),H(B,"stroke",n(R)),H(q,"x",$e),H(q,"y",n(b)),H(q,"width",ne),H(q,"height",n(i).boxHeight),H(q,"fill",n(F)),H(q,"fill-opacity",n(N)),H(q,"stroke",n(R)),H(nt,"x1",be),H(nt,"x2",ue),H(nt,"y1",n(b)),H(nt,"y2",n(b)+n(i).boxHeight),H(nt,"stroke",n(R))},[()=>n(a)(n(k).min),()=>n(a)(n(k).q1),()=>n(a)(n(k).min),()=>n(a)(n(k).min),()=>n(a)(n(k).q3),()=>n(a)(n(k).max),()=>n(a)(n(k).max),()=>n(a)(n(k).max),()=>n(a)(n(k).q1),()=>Math.max(2,n(a)(n(k).q3)-n(a)(n(k).q1)),()=>n(a)(n(k).median),()=>n(a)(n(k).median)]),z(E,T)};I(()=>Y(A,E=>{n(k)&&E(M)}),"if",ur,138,6)}z(y,W)}),"each",ur,136,4),z(g,p)};I(()=>Y(h,g=>{n(o)&&g(d)}),"if",ur,134,0)}return z(t,u),Ee(l)}Jn[P]="src/components/viz/VizViolin.svelte";var Rp=j(Lt('<line stroke-width="2"></line>'),Jn[P],[[165,10]]),Ip=j(Lt('<line stroke-width="1" stroke-dasharray="2,2"></line><line stroke-width="1" stroke-dasharray="2,2"></line>',1),Jn[P],[[179,10],[188,10]]),zp=j(Lt('<path stroke-width="0.5" class="violin-path svelte-1ywbnva"></path><!><!>',1),Jn[P],[[153,8]]),Fp=j(Lt('<g class="viz-violin-row svelte-1ywbnva"></g>'),Jn[P],[[140,2]]);function Jn(t,e){We(new.target),Se(e,!0,Jn);const r=v(m(()=>e.options.effects.map(y=>{const _=e.row.metadata[y.data];return!_||!Array.isArray(_)||_.length<2?null:Pc(_,e.options.bandwidth)})),"effectKDEs"),o=v(m(()=>e.options.effects.map(y=>{const _=e.row.metadata[y.data];return!_||!Array.isArray(_)||_.length<2?null:Fc(_)})),"effectQuartiles"),a=v(m(()=>n(r).some(y=>w(y,null,!1))),"hasValidData"),i=v(m(()=>{var W,A,M,E;if(e.sharedScale)return e.sharedScale;const y=w(e.options.scale,"log"),_=((A=(W=e.theme)==null?void 0:W.spacing)==null?void 0:A.padding)??12;let x=(M=e.options.axisRange)==null?void 0:M[0],k=(E=e.options.axisRange)==null?void 0:E[1];if(he(x,null)||he(k,null)){const b=[];for(const S of n(r))S&&S.x.length>0&&b.push(...S.x);b.length>0?(x=x??Math.min(...b),k=k??Math.max(...b)):(x=x??0,k=k??100)}return y?Dr().domain([Math.max(.01,x),k]).range([_,e.width-_]):Qn().domain([x,k]).range([_,e.width-_])}),"xScale"),s=v(m(()=>{const y=e.options.effects.length,_=e.rowHeight*.8,x=(_-(y-1)*2)/y;return{maxWidth:x/2,violinHeight:Math.max(10,x),gap:y>1?2:0,totalHeight:_}}),"violinConfig"),c=v(m(()=>{var y,_;return((_=(y=e.theme)==null?void 0:y.shapes)==null?void 0:_.effectColors)??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"]}),"defaultColors");function f(y,_){return y.color??n(c)[_%n(c).length]}function l(y){return y.fillOpacity??.5}function u(y,_,x){if(y.x.length<2)return"";const k=Lc(y,x),W=[];for(let A=0;A<k.x.length;A++){const M=n(i)(k.x[A]),E=_-k.y[A];W.push(w(A,0)?`M ${M} ${E}`:`L ${M} ${E}`)}for(let A=k.x.length-1;A>=0;A--){const M=n(i)(k.x[A]),E=_+k.y[A];W.push(`L ${M} ${E}`)}return W.push("Z"),W.join(" ")}var h={...Re()},d=kt(),g=yt(d);{var p=y=>{var _=Fp();I(()=>ze(_,21,()=>e.options.effects,wr,(x,k,W)=>{const A=v(m(()=>n(r)[W]),"kde");n(A);const M=v(m(()=>n(o)[W]),"quartiles");n(M);var E=kt(),b=yt(E);{var S=F=>{const N=v(m(()=>e.yPosition-n(s).totalHeight/2+n(s).violinHeight/2+W*(n(s).violinHeight+n(s).gap)),"violinCenterY");n(N);const R=v(m(()=>f(n(k),W)),"color");n(R);const T=v(m(()=>l(n(k))),"opacity");n(T);const G=v(m(()=>u(n(A),n(N),n(s).maxWidth)),"path");n(G);const K=v(m(()=>{var st;return((st=e.theme)==null?void 0:st.colors.foreground)??"#1a1a1a"}),"lineColor");n(K);var ct=zp(),B=yt(ct),q=at(B);{var nt=st=>{const rt=v(m(()=>n(i)(n(M).median)),"medianX");n(rt);var ot=Rp();tt(()=>{H(ot,"x1",n(rt)),H(ot,"x2",n(rt)),H(ot,"y1",n(N)-n(s).maxWidth*.6),H(ot,"y2",n(N)+n(s).maxWidth*.6),H(ot,"stroke",n(K))}),z(st,ot)};I(()=>Y(q,st=>{w(e.options.showMedian,!1,!1)&&n(M)&&st(nt)}),"if",Jn,163,8)}var U=at(q);{var X=st=>{const rt=v(m(()=>n(i)(n(M).q1)),"q1X");n(rt);const ot=v(m(()=>n(i)(n(M).q3)),"q3X");n(ot);var pt=Ip(),vt=yt(pt),Tt=at(vt);tt(()=>{H(vt,"x1",n(rt)),H(vt,"x2",n(rt)),H(vt,"y1",n(N)-n(s).maxWidth*.4),H(vt,"y2",n(N)+n(s).maxWidth*.4),H(vt,"stroke",n(K)),H(Tt,"x1",n(ot)),H(Tt,"x2",n(ot)),H(Tt,"y1",n(N)-n(s).maxWidth*.4),H(Tt,"y2",n(N)+n(s).maxWidth*.4),H(Tt,"stroke",n(K))}),z(st,pt)};I(()=>Y(U,st=>{e.options.showQuartiles&&n(M)&&st(X)}),"if",Jn,176,8)}tt(()=>{H(B,"d",n(G)),H(B,"fill",n(R)),H(B,"fill-opacity",n(T)),H(B,"stroke",n(K))}),z(F,ct)};I(()=>Y(b,F=>{n(A)&&n(A).x.length>=2&&F(S)}),"if",Jn,144,6)}z(x,E)}),"each",Jn,141,4),z(y,_)};I(()=>Y(g,y=>{n(a)&&y(p)}),"if",Jn,139,0)}return z(t,d),Ee(h)}D[P]="src/lib/ForestPlot.svelte";function Pp(t,e){var o,a;if((a=(o=e.options)==null?void 0:o.bar)!=null&&a.maxValue)return e.options.bar.maxValue;let r=0;for(const i of t){const s=i.metadata[e.field];w(typeof s,"number")&&s>r&&(r=s)}return r||100}function Lp(t,e,r){const o=[],a=w(t==null?void 0:t.type,"header")||w(t==null?void 0:t.type,"summary")||w(t==null?void 0:t.type,"spacer");return w(t==null?void 0:t.type,"header")&&o.push("row-header"),w(t==null?void 0:t.type,"summary")&&o.push("row-summary"),t!=null&&t.bold&&o.push("row-bold"),t!=null&&t.italic&&o.push("row-italic"),t!=null&&t.emphasis&&o.push("row-emphasis"),t!=null&&t.muted&&o.push("row-muted"),t!=null&&t.accent&&o.push("row-accent"),!a&&r&&w(e,void 0,!1)&&w(e%2,1)&&o.push("row-odd"),o.join(" ")}function Dp(t,e){const r=[];return t!=null&&t.color&&r.push(`color: ${t.color}`),t!=null&&t.bg&&r.push(`background-color: ${t.bg}`),t!=null&&t.indent&&r.push(`--row-indent: ${t.indent}`),!(t!=null&&t.indent)&&e&&e>0&&r.push(`--row-indent: ${e}`),r.join("; ")}function Bp(t,e){var r;if((r=t.cellStyles)!=null&&r[e.field])return t.cellStyles[e.field];if(e.styleMapping){const o={},a=t.metadata;if(e.styleMapping.bold&&a[e.styleMapping.bold]&&(o.bold=!!a[e.styleMapping.bold]),e.styleMapping.italic&&a[e.styleMapping.italic]&&(o.italic=!!a[e.styleMapping.italic]),e.styleMapping.color&&a[e.styleMapping.color]&&(o.color=String(a[e.styleMapping.color])),e.styleMapping.bg&&a[e.styleMapping.bg]&&(o.bg=String(a[e.styleMapping.bg])),e.styleMapping.badge&&a[e.styleMapping.badge]&&(o.badge=String(a[e.styleMapping.badge])),e.styleMapping.icon&&a[e.styleMapping.icon]&&(o.icon=String(a[e.styleMapping.icon])),Object.keys(o).length>0)return o}}var Gp=j(xt('<div class="resize-handle svelte-14l8yxx"></div>'),D[P],[[943,12]]),Vp=j(xt('<div class="grid-cell header-cell column-group-header svelte-14l8yxx"><span class="header-text svelte-14l8yxx"> </span></div>'),D[P],[[954,12,[[959,14]]]]),Op=j(xt('<span class="header-text svelte-14l8yxx"> </span>'),D[P],[[980,16]]),$p=j(xt('<div class="resize-handle svelte-14l8yxx"></div>'),D[P],[[984,16]]),jp=j(xt('<div class="grid-cell header-cell plot-header svelte-14l8yxx"><!> <!></div>'),D[P],[[973,12]]),qp=j(xt('<div class="resize-handle svelte-14l8yxx"></div>'),D[P],[[1002,16]]),Xp=j(xt('<div class="grid-cell header-cell svelte-14l8yxx"><span class="header-text svelte-14l8yxx"> </span> <!></div>'),D[P],[[993,12,[[999,14]]]]),Up=j(xt('<span class="row-icon svelte-14l8yxx"> </span>'),D[P],[[1049,35]]),Yp=j(xt('<span class="row-badge svelte-14l8yxx"> </span>'),D[P],[[1051,36]]),Zp=j(xt("<!> <!>",1),D[P],[]),Kp=j(xt("<div></div>"),D[P],[[1059,14]]),Qp=j(xt("<div><!></div>"),D[P],[[1074,14]]),Jp=j(xt("<div><!></div> <!>",1),D[P],[[1024,10]]),tv=j(xt('<div class="grid-cell axis-cell svelte-14l8yxx"></div>'),D[P],[[1102,14]]),ev=j(xt('<div class="grid-cell axis-spacer svelte-14l8yxx"></div>'),D[P],[[1104,14]]),nv=j(xt('<!> <div class="grid-cell axis-spacer svelte-14l8yxx"></div>',1),D[P],[[1108,10]]),rv=j(Lt('<text text-anchor="middle" font-size="var(--wf-font-size-sm)" font-weight="500" class="svelte-14l8yxx"> </text>'),D[P],[[1159,18]]),ov=j(Lt('<line class="svelte-14l8yxx"></line><!>',1),D[P],[[1147,16]]),iv=j(Lt('<g class="svelte-14l8yxx"><!></g>'),D[P],[[1220,14]]),av=j(Lt('<svg class="plot-overlay svelte-14l8yxx"><line stroke="var(--wf-muted)" stroke-width="1" stroke-dasharray="4,4" class="svelte-14l8yxx"></line><!><!><!><!></svg>'),D[P],[[1122,10,[[1131,12]]]]),sv=j(Lt('<g class="svelte-14l8yxx"><!></g>'),D[P],[[1263,16]]),lv=j(Lt('<svg class="plot-overlay svelte-14l8yxx"><!><!></svg>'),D[P],[[1236,12]]),cv=j(Lt('<g class="svelte-14l8yxx"><!></g>'),D[P],[[1316,16]]),fv=j(Lt('<svg class="plot-overlay svelte-14l8yxx"><!><!></svg>'),D[P],[[1289,12]]),uv=j(Lt('<g class="svelte-14l8yxx"><!></g>'),D[P],[[1369,16]]),dv=j(Lt('<svg class="plot-overlay svelte-14l8yxx"><!><!></svg>'),D[P],[[1342,12]]),hv=j(xt('<!> <div class="tabviz-scalable svelte-14l8yxx"><!>  <div><div class="grid-cell header-cell label-header svelte-14l8yxx"><span class="header-text svelte-14l8yxx"> </span> <!></div> <!> <!> <!> <!> <!> <!> <!></div> <!></div> <!>',1),D[P],[[857,4,[[932,6,[[935,8,[[940,10]]]]]]]]),gv=j(xt('<div class="tabviz-empty svelte-14l8yxx">No data</div>'),D[P],[[1394,4]]),pv=j(xt("<div><!></div>"),D[P],[[842,0]]);function D(t,e){We(new.target),Se(e,!0,D);const r=v(m(()=>e.store.spec),"spec"),o=v(m(()=>e.store.visibleRows),"visibleRows"),a=v(m(()=>e.store.displayRows),"displayRows"),i=v(m(()=>e.store.layout),"layout"),s=v(m(()=>e.store.xScale),"xScale"),c=v(m(()=>e.store.axisComputation),"axisComputation"),f=v(m(()=>n(c).axisLimits),"clipBounds"),l=v(m(()=>{var C;return(C=n(r))==null?void 0:C.theme}),"theme"),u=v(m(()=>{var C,L;return((L=(C=n(l))==null?void 0:C.layout)==null?void 0:L.banding)??!1}),"bandingEnabled"),h=v(m(()=>e.store.allColumns),"allColumns"),d=v(m(()=>e.store.allColumnDefs),"allColumnDefs"),g=v(m(()=>e.store.forestColumns),"forestColumns");v(m(()=>n(g).length>0),"hasForestColumns");const p=v(m(()=>e.store.vizColumns),"vizColumns"),y=v(m(()=>n(p).length>0),"hasVizColumns"),_=v(m(()=>{var C;return((C=n(r))==null?void 0:C.data.labelHeader)||"Study"}),"labelHeader"),x=v(m(()=>{var C,L,O,ut;return!!((L=(C=n(r))==null?void 0:C.labels)!=null&&L.title)||!!((ut=(O=n(r))==null?void 0:O.labels)!=null&&ut.subtitle)}),"hasPlotHeader"),k=v(m(()=>{var C,L;return!!((L=(C=n(r))==null?void 0:C.labels)!=null&&L.subtitle)}),"hasSubtitle");v(m(()=>n(d).some(C=>C.isGroup)),"hasColumnGroups");const W=v(m(()=>e.store.tooltipRow),"tooltipRow"),A=v(m(()=>e.store.tooltipPosition),"tooltipPosition"),M=v(m(()=>e.store.selectedRowIds),"selectedRowIds"),E=v(m(()=>e.store.hoveredRowId),"hoveredRowId"),b=v(m(()=>e.store.zoom),"zoom"),S=v(m(()=>e.store.autoFit),"autoFit"),F=v(m(()=>e.store.actualScale),"actualScale"),N=v(m(()=>e.store.maxWidth),"maxWidth"),R=v(m(()=>e.store.maxHeight),"maxHeight");v(m(()=>e.store.showZoomControls),"showZoomControls");const T=v(m(()=>({...e.store.columnWidths})),"columnWidthsSnapshot");let G=v(Wt(void 0),"containerRef"),K=v(Wt(void 0),"scalableRef"),ct=v(Wt(0),"containerContentWidth"),B=v(Wt(0),"scalableNaturalWidth"),q=v(Wt(0),"scalableNaturalHeight");v(m(()=>e.store.naturalContentWidth),"naturalContentWidth");const nt=v(m(()=>n(B)*n(F)),"scaledWidth"),U=v(m(()=>n(q)*n(F)),"scaledHeight"),X=v(m(()=>{if(!n(S)||n(ct)<=0||n(nt)<=0)return 0;const C=(n(ct)-n(nt))/2;return Math.max(0,C)}),"centeringMargin");Qi(()=>{if(!n(G)||!n(K))return;n(G).id&&e.store.setContainerElementId(n(G).id);const C=new ResizeObserver(L=>{for(const O of L)w(O.target,n(G))?(lt(ct,O.contentRect.width,!0),e.store.setContainerDimensions(O.contentRect.width,O.contentRect.height)):w(O.target,n(K))&&(lt(B,O.contentRect.width,!0),lt(q,O.contentRect.height,!0),e.store.setScalableNaturalDimensions(O.contentRect.width,O.contentRect.height))});return C.observe(n(G)),C.observe(n(K)),()=>{C.disconnect()}});const st=v(m(()=>{var C,L;return w((L=(C=n(r))==null?void 0:C.interaction)==null?void 0:L.enableExport,!1,!1)}),"enableExport"),rt=v(m(()=>{var C,L;return(L=(C=n(r))==null?void 0:C.interaction)==null?void 0:L.enableThemes}),"enableThemes");function ot(C){var L;if(!(!C.metaKey&&!C.ctrlKey)&&!w((L=C.target)==null?void 0:L.tagName,"INPUT"))switch(C.key){case"=":case"+":C.preventDefault(),e.store.zoomIn();break;case"-":C.preventDefault(),e.store.zoomOut();break;case"0":C.preventDefault(),e.store.resetZoom();break;case"1":C.preventDefault(),e.store.fitToWidth();break}}const pt=v(m(()=>{var ut;const C=[],L=[];let O=0;for(const Dt of n(a)){const Mt=w(Dt.type,"data")&&w((ut=Dt.row.style)==null?void 0:ut.type,"spacer")?n(i).rowHeight/2:n(i).rowHeight;C.push(O),L.push(Mt),O+=Mt}return{positions:C,heights:L,totalHeight:O}}),"rowLayout"),vt=v(m(()=>n(pt).totalHeight),"rowsAreaHeight");function Tt(C){const L=C.filter(Mt=>w(Mt.type,"reference_line")&&Mt.label).map(Mt=>({id:Mt.id,x:n(s)(Mt.x),label:Mt.label})).sort((Mt,Ht)=>Mt.x-Ht.x),O={},ut=120,Dt=-18;for(let Mt=0;Mt<L.length;Mt++){const Ht=L[Mt];if(O[Ht.id]=0,Mt>0){const wt=L[Mt-1];Ht.x-wt.x<ut&&(O[Ht.id]=w(O[wt.id],0)?Dt:0)}}return O}function Et(C){return n(M).has(C)}function Nt(C,L){return w(C.type,"group_header")?`group_${C.group.id}`:C.row.id}function $e(C){return C.isGroup?C.columns.reduce((L,O)=>L+$e(O),0):1}function ne(C){let L=0;for(const O of C)if(O.isGroup){const ut=1+ne(O.columns);L=Math.max(L,ut)}return L}function be(C,L){var ie,te;const O=L==null?void 0:L.groupHeaders,ut=((ie=L==null?void 0:L.colors)==null?void 0:ie.primary)??"#0891b2",Dt=((te=L==null?void 0:L.colors)==null?void 0:te.background)??"#ffffff";if(w(C,1)&&(O!=null&&O.level1Background))return O.level1Background;if(w(C,2)&&(O!=null&&O.level2Background))return O.level2Background;if(C>=3&&(O!=null&&O.level3Background))return O.level3Background;const Ht=[.15,.1,.06][Math.min(C-1,2)],wt=le=>{const it=le.replace("#","");return{r:parseInt(it.substring(0,2),16),g:parseInt(it.substring(2,4),16),b:parseInt(it.substring(4,6),16)}},Vt=wt(ut),re=wt(Dt),Zt=(le,it)=>Math.round(le*Ht+it*(1-Ht)),je=Zt(Vt.r,re.r),$t=Zt(Vt.g,re.g),qe=Zt(Vt.b,re.b);return`rgb(${je}, ${$t}, ${qe})`}const ue=v(m(()=>Math.max(1,1+ne(n(d)))),"headerDepth"),gt=v(m(()=>{const C=[];let L=2;function O(ut,Dt){const Mt=$e(ut),Ht=L;if(ut.isGroup){C.push({col:ut,gridColumnStart:Ht,colspan:Mt,rowStart:Dt+1,rowSpan:1,isGroupHeader:!0,isForest:!1});for(const wt of ut.columns)O(wt,Dt+1)}else{const wt=!ut.isGroup&&Yt.includes(ut.type);C.push({col:ut,gridColumnStart:Ht,colspan:1,rowStart:Dt+1,rowSpan:n(ue)-Dt,isGroupHeader:!1,isForest:wt}),L++}}for(const ut of n(d))O(ut,0);return C}),"headerCells");function Ct(C){const L=n(T)[C.id];return w(typeof L,"number")?`${L}px`:w(typeof C.width,"number")?`${C.width}px`:"max-content"}const Yt=["forest","viz_bar","viz_boxplot","viz_violin"],jt=v(m(()=>{var O,ut,Dt,Mt,Ht,wt,Vt,re;const C=[],L=n(T).__label__;C.push(L?`${L}px`:"max-content");for(const Zt of n(h))if(Yt.includes(Zt.type)){const je=n(T)[Zt.id];let $t;w(typeof je,"number")?$t=je:w(typeof Zt.width,"number")?$t=Zt.width:w(Zt.type,"forest")?$t=((ut=(O=Zt.options)==null?void 0:O.forest)==null?void 0:ut.width)??n(i).forestWidth:w(Zt.type,"viz_bar")?$t=((Mt=(Dt=Zt.options)==null?void 0:Dt.vizBar)==null?void 0:Mt.width)??n(i).forestWidth:w(Zt.type,"viz_boxplot")?$t=((wt=(Ht=Zt.options)==null?void 0:Ht.vizBoxplot)==null?void 0:wt.width)??n(i).forestWidth:w(Zt.type,"viz_violin")?$t=((re=(Vt=Zt.options)==null?void 0:Vt.vizViolin)==null?void 0:re.width)??n(i).forestWidth:$t=n(i).forestWidth,C.push(`${$t}px`)}else C.push(Ct(Zt));return C.join(" ")}),"gridTemplateColumns");v(m(()=>1+n(h).length),"totalColumns");const Xt=v(m(()=>{const C=[];for(let L=0;L<n(h).length;L++)Yt.includes(n(h)[L].type)&&C.push({gridCol:2+L,column:n(h)[L]});return C}),"vizColumnGridIndices");n(Xt);let ke=v(Wt(yr(new Map)),"forestColumnRefs"),Ft=v(Wt(yr(new Map)),"forestColumnPositions"),Gt=v(Wt(void 0),"labelHeaderRef"),Ye=v(Wt(0),"measuredHeaderHeight");Qi(()=>{n(T),n(i).forestWidth,n(ue),ku().then(()=>{const C=new Map;for(const[L,O]of n(ke))O&&C.set(L,O.offsetLeft);lt(Ft,C,!0),n(Gt)&&lt(Ye,n(Gt).offsetHeight,!0)})});function Ue(C,L){return n(ke).set(L,C),lt(ke,new Map(n(ke)),!0),{destroy(){n(ke).delete(L),lt(ke,new Map(n(ke)),!0)}}}const _e=v(m(()=>n(Ye)>0?n(Ye):n(i).headerHeight),"actualHeaderHeight"),dn=v(m(()=>{var O,ut,Dt,Mt,Ht,wt,Vt,re,Zt;const C=new Map,L=Tn;for(const je of n(p)){const $t=je.column,qe=L;if(w($t.type,"viz_bar")){const ie=(O=$t.options)==null?void 0:O.vizBar;if(!ie)continue;const te=n(T)[$t.id],le=w(typeof te,"number")?te:w(typeof $t.width,"number")?$t.width:ie.width??n(i).forestWidth;let it=(ut=ie.axisRange)==null?void 0:ut[0],St=(Dt=ie.axisRange)==null?void 0:Dt[1];if(he(it,null)||he(St,null)){const Ce=[];for(const Te of n(a))if(w(Te.type,"data"))for(const Ve of ie.effects){const Ot=Te.row.metadata[Ve.value];he(Ot,null,!1)&&!Number.isNaN(Ot)&&Ce.push(Ot)}Ce.length>0?(it=it??Math.min(0,...Ce),St=St??Math.max(...Ce)*1.1):(it=it??0,St=St??100)}const Ze=w(ie.scale,"log")?Dr().domain([Math.max(.01,it),St]).range([qe,le-qe]):Qn().domain([it,St]).range([qe,le-qe]);C.set($t.id,Ze)}else if(w($t.type,"viz_boxplot")){const ie=(Mt=$t.options)==null?void 0:Mt.vizBoxplot;if(!ie)continue;const te=n(T)[$t.id],le=w(typeof te,"number")?te:w(typeof $t.width,"number")?$t.width:ie.width??n(i).forestWidth;let it=(Ht=ie.axisRange)==null?void 0:Ht[0],St=(wt=ie.axisRange)==null?void 0:wt[1];if(he(it,null)||he(St,null)){const Ce=[];for(const Te of n(a))if(w(Te.type,"data")){for(const Ve of ie.effects)if(Ve.data){const Ot=Te.row.metadata[Ve.data];if(Ot&&Array.isArray(Ot)){const Ne=ma(Ot);Ce.push(Ne.min,Ne.max),w(ie.showOutliers,!1,!1)&&Ce.push(...Ne.outliers)}}else if(Ve.min&&Ve.max){const Ot=Te.row.metadata[Ve.min],Ne=Te.row.metadata[Ve.max];he(Ot,null,!1)&&!Number.isNaN(Ot)&&Ce.push(Ot),he(Ne,null,!1)&&!Number.isNaN(Ne)&&Ce.push(Ne)}}if(Ce.length>0){const Te=Math.min(...Ce),Ve=Math.max(...Ce),Ot=Ve-Te;it=it??Te-Ot*.05,St=St??Ve+Ot*.05}else it=it??0,St=St??100}const Ze=w(ie.scale,"log")?Dr().domain([Math.max(.01,it),St]).range([qe,le-qe]):Qn().domain([it,St]).range([qe,le-qe]);C.set($t.id,Ze)}else if(w($t.type,"viz_violin")){const ie=(Vt=$t.options)==null?void 0:Vt.vizViolin;if(!ie)continue;const te=n(T)[$t.id],le=w(typeof te,"number")?te:w(typeof $t.width,"number")?$t.width:ie.width??n(i).forestWidth;let it=(re=ie.axisRange)==null?void 0:re[0],St=(Zt=ie.axisRange)==null?void 0:Zt[1];if(he(it,null)||he(St,null)){const Ce=[];for(const Te of n(a))if(w(Te.type,"data"))for(const Ve of ie.effects){const Ot=Te.row.metadata[Ve.data];Ot&&Array.isArray(Ot)&&Ce.push(...Ot.filter(Ne=>he(Ne,null,!1)&&!Number.isNaN(Ne)))}if(Ce.length>0){it=it??Math.min(...Ce),St=St??Math.max(...Ce);const Te=St-it;it=it-Te*.1,St=St+Te*.1}else it=it??0,St=St??100}const Ze=w(ie.scale,"log")?Dr().domain([Math.max(.01,it),St]).range([qe,le-qe]):Qn().domain([it,St]).range([qe,le-qe]);C.set($t.id,Ze)}}return C}),"vizColumnScales"),Mn=v(m(()=>{var O;const C=new Map,L=Tn;for(const ut of n(g)){const Dt=ut.column,Mt=(O=Dt.options)==null?void 0:O.forest,Ht=n(T)[Dt.id],wt=w(typeof Ht,"number")?Ht:w(typeof Dt.width,"number")?Dt.width:(Mt==null?void 0:Mt.width)??n(i).forestWidth,Vt=w(Mt==null?void 0:Mt.scale,"log"),re=n(c).axisLimits,Zt=L,je=Math.max(wt-L,Zt+50);if(Vt){const $t=[Math.max(re[0],.01),Math.max(re[1],.02)];C.set(Dt.id,Dr().domain($t).range([Zt,je]))}else C.set(Dt.id,Qn().domain(re).range([Zt,je]))}return C}),"forestColumnScales");v(Wt(!1),"resizingPlot");let qt=v(Wt(null),"resizingColumn"),At=0,Le=0;function On(C,L,O){var ut;(ut=n(r))!=null&&ut.interaction.enableResize&&(C.preventDefault(),C.stopPropagation(),lt(qt,L,!0),At=C.clientX,Le=O,document.addEventListener("pointermove",hr),document.addEventListener("pointerup",Sn))}function hr(C){if(!n(qt))return;const L=C.clientX-At,O=Math.max(40,Le+L);e.store.setColumnWidth(n(qt),O)}function Sn(){lt(qt,null),document.removeEventListener("pointermove",hr),document.removeEventListener("pointerup",Sn)}function tn(C,L){e.store.setHovered(C),e.store.setTooltip(C,{x:L.clientX,y:L.clientY})}function hn(){e.store.setHovered(null),e.store.setTooltip(null,null)}const jr=v(m(()=>n(l)?`
      --wf-max-width: ${n(N)?`${n(N)}px`:"none"};
      --wf-max-height: ${n(R)?`${n(R)}px`:"none"};
      --wf-bg: ${n(l).colors.background};
      --wf-fg: ${n(l).colors.foreground};
      --wf-primary: ${n(l).colors.primary};
      --wf-secondary: ${n(l).colors.secondary};
      --wf-muted: ${n(l).colors.muted};
      --wf-border: ${n(l).colors.border};
      --wf-row-bg: ${n(l).colors.rowBg};
      --wf-alt-bg: ${n(l).colors.altBg};
      --wf-interval-line: ${n(l).colors.intervalLine};
      --wf-interval-positive: ${n(l).colors.intervalPositive};
      --wf-interval-negative: ${n(l).colors.intervalNegative};
      --wf-summary-fill: ${n(l).colors.summaryFill};
      --wf-summary-border: ${n(l).colors.summaryBorder};
      --wf-accent: ${n(l).colors.accent};
      --wf-badge-success: ${Ci.success};
      --wf-badge-warning: ${Ci.warning};
      --wf-badge-error: ${Ci.error};
      --wf-badge-info: ${Ci.info};
      --wf-badge-muted: ${n(l).colors.muted};
      --wf-font-family: ${n(l).typography.fontFamily};
      --wf-font-size-sm: ${n(l).typography.fontSizeSm};
      --wf-font-size-base: ${n(l).typography.fontSizeBase};
      --wf-font-size-lg: ${n(l).typography.fontSizeLg};
      --wf-font-weight-normal: ${n(l).typography.fontWeightNormal};
      --wf-font-weight-medium: ${n(l).typography.fontWeightMedium};
      --wf-font-weight-bold: ${n(l).typography.fontWeightBold};
      --wf-line-height: ${n(l).typography.lineHeight};
      --wf-header-font-scale: ${n(l).typography.headerFontScale??1.05};
      --wf-row-height: ${n(l).spacing.rowHeight}px;
      --wf-header-height: ${n(l).spacing.headerHeight}px;
      --wf-header-row-height: ${n(l).spacing.headerHeight/n(ue)}px;
      --wf-header-depth: ${n(ue)};
      --wf-padding: ${n(l).spacing.padding}px;
      --wf-container-padding: ${n(l).spacing.containerPadding}px;
      --wf-cell-padding-x: ${n(l).spacing.cellPaddingX}px;
      --wf-cell-padding-y: ${n(l).spacing.cellPaddingY}px;
      --wf-axis-gap: ${n(l).spacing.axisGap??Yn.DEFAULT_AXIS_GAP}px;
      --wf-axis-height: ${n(i).axisHeight}px;
      --wf-group-padding: ${n(l).spacing.groupPadding??8}px;
      --wf-column-gap: ${n(l).spacing.columnGap??8}px;
      --wf-plot-width: ${n(i).forestWidth}px;
      --wf-point-size: ${n(l).shapes.pointSize}px;
      --wf-line-width: ${n(l).shapes.lineWidth}px;
      --wf-border-radius: ${n(l).shapes.borderRadius}px;
      --wf-container-border: ${n(l).layout.containerBorder?"1px solid var(--wf-border)":"none"};
      --wf-container-border-radius: ${n(l).layout.containerBorderRadius}px;
      --wf-group-header-opacity: ${od};
      --wf-row-hover-opacity: ${id};
      --wf-row-selected-opacity: ${ad};
      --wf-row-selected-hover-opacity: ${sd};
      --wf-actual-scale: ${n(F)};
      --wf-zoom: ${n(b)};
    `.trim():""),"cssVars");var gr={...Re()},Ge=pv();Bn("keydown",$o,ot);let ln;var Fn=J(Ge);{var ri=C=>{var L=hv(),O=yt(L);I(()=>In(O,{get store(){return e.store},get enableExport(){return n(st)},get enableThemes(){return n(rt)},get onThemeChange(){return e.onThemeChange}}),"component",D,854,4,{componentTag:"ControlToolbar"});var ut=at(O,2);let Dt;{const Ot=Lu(D,function(ht,Q=Vs,Z=Vs){Bu(...arguments);const It=v(m(()=>Bp(Q(),Z())),"cellStyle");n(It);var dt=kt(),Ie=yt(dt);{var ge=pe=>{{let De=m(()=>Pp(n(o),Z())),xe=m(()=>{var _t;return(_t=Z().options)==null?void 0:_t.bar});I(()=>xo(pe,{get value(){return Q().metadata[Z().field]},get maxValue(){return n(De)},get options(){return n(xe)}}),"component",D,867,10,{componentTag:"CellBar"})}},ae=pe=>{var De=kt(),xe=yt(De);{var _t=Bt=>{{let se=m(()=>{var He;return(He=Z().options)==null?void 0:He.pvalue});I(()=>Uo(Bt,{get value(){return Q().metadata[Z().field]},get options(){return n(se)},get cellStyle(){return n(It)}}),"component",D,873,10,{componentTag:"CellPvalue"})}},bt=Bt=>{var se=kt(),He=yt(se);{var gn=zt=>{{let de=m(()=>{var mt;return(mt=Z().options)==null?void 0:mt.sparkline});I(()=>An(zt,{get data(){return Q().metadata[Z().field]},get options(){return n(de)}}),"component",D,879,10,{componentTag:"CellSparkline"})}},Kt=zt=>{var de=kt(),mt=yt(de);{var et=ee=>{{let we=m(()=>{var Ae;return(Ae=Z().options)==null?void 0:Ae.icon});I(()=>Ri(ee,{get value(){return Q().metadata[Z().field]},get options(){return n(we)}}),"component",D,884,10,{componentTag:"CellIcon"})}},Pt=ee=>{var we=kt(),Ae=yt(we);{var ve=Ke=>{{let pn=m(()=>{var cn;return(cn=Z().options)==null?void 0:cn.badge});I(()=>Ii(Ke,{get value(){return Q().metadata[Z().field]},get options(){return n(pn)}}),"component",D,889,10,{componentTag:"CellBadge"})}},Qt=Ke=>{var pn=kt(),cn=yt(pn);{var nn=Be=>{{let oi=m(()=>{var ii;return(ii=Z().options)==null?void 0:ii.stars});I(()=>So(Be,{get value(){return Q().metadata[Z().field]},get options(){return n(oi)}}),"component",D,894,10,{componentTag:"CellStars"})}},me=Be=>{var oi=kt(),ii=yt(oi);{var Io=$n=>{{let si=m(()=>{var li;return(li=Z().options)==null?void 0:li.img});I(()=>Eo($n,{get value(){return Q().metadata[Z().field]},get options(){return n(si)}}),"component",D,899,10,{componentTag:"CellImg"})}},ai=$n=>{var si=kt(),li=yt(si);{var xv=ci=>{{let ka=m(()=>{var Ca;return(Ca=Z().options)==null?void 0:Ca.reference});I(()=>Br(ci,{get value(){return Q().metadata[Z().field]},get metadata(){return Q().metadata},get options(){return n(ka)}}),"component",D,904,10,{componentTag:"CellReference"})}},wv=ci=>{var ka=kt(),Ca=yt(ka);{var bv=fi=>{{let Ta=m(()=>{var Na;return(Na=Z().options)==null?void 0:Na.range});I(()=>zi(fi,{get value(){return Q().metadata[Z().field]},get metadata(){return Q().metadata},get options(){return n(Ta)}}),"component",D,910,10,{componentTag:"CellRange"})}},Mv=fi=>{var Ta=kt(),Na=yt(Ta);{var Sv=ui=>{{let Ha=m(()=>Qo(Q().metadata[Z().field],Z().options));I(()=>lr(ui,{get value(){return n(Ha)},get cellStyle(){return n(It)}}),"component",D,916,10,{componentTag:"CellContent"})}},Ev=ui=>{var Ha=kt(),kv=yt(Ha);{var Cv=di=>{{let zo=m(()=>Ms(Q(),Z().options));I(()=>lr(di,{get value(){return n(zo)},get cellStyle(){return n(It)}}),"component",D,918,10,{componentTag:"CellContent"})}},Tv=di=>{var zo=kt(),Nv=yt(zo);{var Hv=hi=>{{let Ws=m(()=>{var Jc,tf,ef,nf,rf,of;return Ss((tf=(Jc=Z().options)==null?void 0:Jc.interval)!=null&&tf.point?Q().metadata[Z().options.interval.point]:void 0,(nf=(ef=Z().options)==null?void 0:ef.interval)!=null&&nf.lower?Q().metadata[Z().options.interval.lower]:void 0,(of=(rf=Z().options)==null?void 0:rf.interval)!=null&&of.upper?Q().metadata[Z().options.interval.upper]:void 0,Z().options)});I(()=>lr(hi,{get value(){return n(Ws)},get cellStyle(){return n(It)}}),"component",D,920,10,{componentTag:"CellContent"})}},Av=hi=>{{let Ws=m(()=>Q().metadata[Z().field]??"");I(()=>lr(hi,{get value(){return n(Ws)},get cellStyle(){return n(It)}}),"component",D,927,10,{componentTag:"CellContent"})}};I(()=>Y(Nv,hi=>{w(Z().type,"interval")?hi(Hv):hi(Av,!1)},!0),"if",D,919,8)}z(di,zo)};I(()=>Y(kv,di=>{var zo;w(Z().type,"custom")&&((zo=Z().options)!=null&&zo.events)?di(Cv):di(Tv,!1)},!0),"if",D,917,8)}z(ui,Ha)};I(()=>Y(Na,ui=>{w(Z().type,"numeric")?ui(Sv):ui(Ev,!1)},!0),"if",D,915,8)}z(fi,Ta)};I(()=>Y(Ca,fi=>{w(Z().type,"range")?fi(bv):fi(Mv,!1)},!0),"if",D,909,8)}z(ci,ka)};I(()=>Y(li,ci=>{w(Z().type,"reference")?ci(xv):ci(wv,!1)},!0),"if",D,903,8)}z($n,si)};I(()=>Y(ii,$n=>{w(Z().type,"img")?$n(Io):$n(ai,!1)},!0),"if",D,898,8)}z(Be,oi)};I(()=>Y(cn,Be=>{w(Z().type,"stars")?Be(nn):Be(me,!1)},!0),"if",D,893,8)}z(Ke,pn)};I(()=>Y(Ae,Ke=>{w(Z().type,"badge")?Ke(ve):Ke(Qt,!1)},!0),"if",D,888,8)}z(ee,we)};I(()=>Y(mt,ee=>{w(Z().type,"icon")?ee(et):ee(Pt,!1)},!0),"if",D,883,8)}z(zt,de)};I(()=>Y(He,zt=>{w(Z().type,"sparkline")?zt(gn):zt(Kt,!1)},!0),"if",D,878,8)}z(Bt,se)};I(()=>Y(xe,Bt=>{w(Z().type,"pvalue")?Bt(_t):Bt(bt,!1)},!0),"if",D,872,8)}z(pe,De)};I(()=>Y(Ie,pe=>{w(Z().type,"bar")?pe(ge):pe(ae,!1)}),"if",D,866,8)}z(ht,dt)});var Mt=J(ut);{var Ht=ht=>{{let Q=m(()=>{var It;return(It=n(r).labels)==null?void 0:It.title}),Z=m(()=>{var It;return(It=n(r).labels)==null?void 0:It.subtitle});I(()=>Kn(ht,{get title(){return n(Q)},get subtitle(){return n(Z)}}),"component",D,860,8,{componentTag:"PlotHeader"})}};I(()=>Y(Mt,ht=>{n(x)&&ht(Ht)}),"if",D,859,6)}var wt=at(Mt,2);let Ne,Pn;var Vt=J(wt);let Ea;var re=J(Vt),Zt=J(re),je=at(re,2);{var $t=ht=>{var Q=Gp();Q.__pointerdown=Z=>On(Z,"__label__",n(T).__label__??150),z(ht,Q)};I(()=>Y(je,ht=>{var Q;(Q=n(r))!=null&&Q.interaction.enableResize&&ht($t)}),"if",D,941,10)}yo(Vt,ht=>lt(Gt,ht),()=>n(Gt));var qe=at(Vt,2);_n(()=>n(gt),ht=>ht.col.id),I(()=>ze(qe,17,()=>n(gt),ht=>ht.col.id,(ht,Q)=>{var Z=kt(),It=yt(Z);{var dt=ge=>{var ae=Vp();let pe;var De=J(ae),xe=J(De,!0);tt(()=>{pe=Fe(ae,"",pe,{"grid-column":`${n(Q).gridColumnStart??""} / span ${n(Q).colspan??""}`,"grid-row":`${n(Q).rowStart??""} / span ${n(Q).rowSpan??""}`}),Jt(xe,n(Q).col.header)}),z(ge,ae)},Ie=ge=>{var ae=kt(),pe=yt(ae);{var De=_t=>{const bt=v(m(()=>n(Q).col),"column");n(bt);const Bt=v(m(()=>{var mt,et,Pt,ee,we,Ae,ve,Qt;return w(n(bt).type,"forest")?((et=(mt=n(bt).options)==null?void 0:mt.forest)==null?void 0:et.width)??n(i).forestWidth:w(n(bt).type,"viz_bar")?((ee=(Pt=n(bt).options)==null?void 0:Pt.vizBar)==null?void 0:ee.width)??n(i).forestWidth:w(n(bt).type,"viz_boxplot")?((Ae=(we=n(bt).options)==null?void 0:we.vizBoxplot)==null?void 0:Ae.width)??n(i).forestWidth:w(n(bt).type,"viz_violin")?((Qt=(ve=n(bt).options)==null?void 0:ve.vizViolin)==null?void 0:Qt.width)??n(i).forestWidth:n(i).forestWidth}),"vizDefaultWidth");n(Bt);var se=jp();let He;var gn=J(se);{var Kt=mt=>{var et=Op(),Pt=J(et,!0);tt(()=>Jt(Pt,n(bt).header)),z(mt,et)};I(()=>Y(gn,mt=>{n(bt).header&&mt(Kt)}),"if",D,979,14)}var zt=at(gn,2);{var de=mt=>{var et=$p();et.__pointerdown=Pt=>On(Pt,n(bt).id,n(T)[n(bt).id]??n(Bt)),z(mt,et)};I(()=>Y(zt,mt=>{var et;(et=n(r))!=null&&et.interaction.enableResize&&mt(de)}),"if",D,982,14)}oa(se,(mt,et)=>Ue==null?void 0:Ue(mt,et),()=>n(bt).id),tt(()=>He=Fe(se,"",He,{"grid-column":n(Q).gridColumnStart,"grid-row":`${n(Q).rowStart??""} / span ${n(Q).rowSpan??""}`})),z(_t,se)},xe=_t=>{const bt=v(m(()=>n(Q).col),"column");n(bt);var Bt=Xp();let se;var He=J(Bt),gn=J(He,!0);var Kt=at(He,2);{var zt=de=>{var mt=qp();mt.__pointerdown=et=>On(et,n(bt).id,n(T)[n(bt).id]??(w(typeof n(bt).width,"number")?n(bt).width:80)),z(de,mt)};I(()=>Y(Kt,de=>{var mt;(mt=n(r))!=null&&mt.interaction.enableResize&&de(zt)}),"if",D,1e3,14)}tt(()=>{se=Fe(Bt,"",se,{"grid-column":n(Q).gridColumnStart,"grid-row":`${n(Q).rowStart??""} / span ${n(Q).rowSpan??""}`,"text-align":n(bt).headerAlign??n(bt).align}),Jt(gn,n(bt).header)}),z(_t,Bt)};I(()=>Y(pe,_t=>{n(Q).isForest?_t(De):_t(xe,!1)},!0),"if",D,961,10)}z(ge,ae)};I(()=>Y(It,ge=>{n(Q).isGroupHeader?ge(dt):ge(Ie,!1)}),"if",D,952,10)}z(ht,Z)}),"each",D,951,8);var ie=at(qe,2);_n(()=>n(a),(ht,Q)=>Nt(ht)),I(()=>ze(ie,19,()=>n(a),(ht,Q)=>Nt(ht,Q),(ht,Q,Z)=>{const It=v(m(()=>w(n(Q).type,"group_header")),"isGroupHeader");n(It);const dt=v(m(()=>n(It)?null:n(Q).row),"row");n(dt);const Ie=v(m(()=>n(Q).depth),"rowDepth");n(Ie);const ge=v(m(()=>n(dt)?Et(n(dt).id):!1),"selected");n(ge);const ae=v(m(()=>n(dt)?Lp(n(dt).style,n(Z),n(u)):""),"rowClasses");n(ae);const pe=v(m(()=>n(dt)?Dp(n(dt).style,n(Ie)):""),"rowStyles");n(pe);const De=v(m(()=>{var mt,et;return w((et=(mt=n(dt))==null?void 0:mt.style)==null?void 0:et.type,"spacer")}),"isSpacerRow");n(De);const xe=v(m(()=>n(ue)+1+n(Z)),"gridRow");n(xe);const _t=v(m(()=>n(It)?be(n(Ie)+1,n(l)):void 0),"groupBg");n(_t);var bt=Jp(),Bt=yt(bt);let se,He;Bt.__click=function(...mt){ar(()=>n(It)?()=>e.store.toggleGroup(n(Q).group.id):n(dt)?()=>e.store.selectRow(n(dt).id):void 0,this,mt,D,[1036,21])},Bt.__keydown=function(...mt){ar(()=>n(It)?et=>(w(et.key,"Enter")||w(et.key," "))&&e.store.toggleGroup(n(Q).group.id):void 0,this,mt,D,[1037,23])};var gn=J(Bt);{var Kt=mt=>{{let et=m(()=>n(Q).depth+1);I(()=>Xo(mt,{get group(){return n(Q).group},get rowCount(){return n(Q).rowCount},get level(){return n(et)},get theme(){return n(l)}}),"component",D,1042,14,{componentTag:"GroupHeader"})}},zt=mt=>{var et=kt(),Pt=yt(et);{var ee=we=>{var Ae=Zp(),ve=yt(Ae);{var Qt=nn=>{var me=Up(),Be=J(me,!0);tt(()=>Jt(Be,n(dt).style.icon)),z(nn,me)};I(()=>Y(ve,nn=>{var me;(me=n(dt).style)!=null&&me.icon&&nn(Qt)}),"if",D,1049,14)}var Ke=at(ve),pn=at(Ke);{var cn=nn=>{var me=Yp(),Be=J(me,!0);tt(()=>Jt(Be,n(dt).style.badge)),z(nn,me)};I(()=>Y(pn,nn=>{var me;(me=n(dt).style)!=null&&me.badge&&nn(cn)}),"if",D,1051,14)}tt(()=>Jt(Ke,` ${n(dt).label??""} `)),z(we,Ae)};I(()=>Y(Pt,we=>{n(dt)&&we(ee)},!0),"if",D,1048,12)}z(mt,et)};I(()=>Y(gn,mt=>{n(It)?mt(Kt):mt(zt,!1)}),"if",D,1041,12)}var de=at(Bt,2);_n(()=>n(h),mt=>mt.id),I(()=>ze(de,17,()=>n(h),mt=>mt.id,(mt,et)=>{var Pt=kt(),ee=yt(Pt);{var we=ve=>{var Qt=Kp();let Ke,pn;Qt.__click=function(...cn){ar(()=>n(dt)?()=>e.store.selectRow(n(dt).id):void 0,this,cn,D,[1070,25])},tt(()=>{Ke=Cn(Qt,1,`grid-cell data-cell plot-cell ${n(ae)??""}`,"svelte-14l8yxx",Ke,{"group-row":n(It),selected:n(ge),hovered:n(dt)&&w(n(E),n(dt).id),"spacer-row":n(De)}),pn=Fe(Qt,n(pe)||void 0,pn,{"grid-row":n(xe),"background-color":n(_t)})}),Bn("mouseenter",Qt,function(...cn){ar(()=>n(dt)?nn=>tn(n(dt).id,nn):void 0,this,cn,D,[1068,30])}),Bn("mouseleave",Qt,function(...cn){ar(()=>n(dt)?()=>hn():void 0,this,cn,D,[1069,30])}),z(ve,Qt)},Ae=ve=>{var Qt=Qp();let Ke,pn;Qt.__click=function(...me){ar(()=>n(dt)?()=>e.store.selectRow(n(dt).id):void 0,this,me,D,[1087,25])};var cn=J(Qt);{var nn=me=>{I(()=>Ot(me,()=>n(dt),()=>n(et)),"render",D,1090,18)};I(()=>Y(cn,me=>{n(dt)&&me(nn)}),"if",D,1089,16)}tt(()=>{Ke=Cn(Qt,1,`grid-cell data-cell ${n(ae)??""}`,"svelte-14l8yxx",Ke,{"group-row":n(It),selected:n(ge),hovered:n(dt)&&w(n(E),n(dt).id),"spacer-row":n(De),"wrap-enabled":n(et).wrap}),pn=Fe(Qt,n(pe)||void 0,pn,{"grid-row":n(xe),"background-color":n(_t),"text-align":n(et).align})}),Bn("mouseenter",Qt,function(...me){ar(()=>n(dt)?Be=>tn(n(dt).id,Be):void 0,this,me,D,[1085,30])}),Bn("mouseleave",Qt,function(...me){ar(()=>n(dt)?()=>hn():void 0,this,me,D,[1086,30])}),z(ve,Qt)};I(()=>Y(ee,ve=>{Yt.includes(n(et).type)?ve(we):ve(Ae,!1)}),"if",D,1057,12)}z(mt,Pt)}),"each",D,1056,10),tt(()=>{var mt,et,Pt,ee;se=Cn(Bt,1,`grid-cell data-cell label-cell ${n(ae)??""}`,"svelte-14l8yxx",se,{"group-row":n(It),selected:n(ge),hovered:n(dt)&&w(n(E),n(dt).id),"spacer-row":n(De)}),He=Fe(Bt,n(pe)||void 0,He,{"grid-row":n(xe),"background-color":n(_t),"padding-left":n(It)?`${n(Ie)*12}px`:((et=(mt=n(dt))==null?void 0:mt.style)==null?void 0:et.indent)??n(Ie)?`${(((ee=(Pt=n(dt))==null?void 0:Pt.style)==null?void 0:ee.indent)??n(Ie))*12}px`:void 0}),H(Bt,"role",n(It)?"button":void 0),H(Bt,"tabindex",n(It)?0:void 0)}),Bn("mouseenter",Bt,function(...mt){ar(()=>n(dt)?et=>tn(n(dt).id,et):void 0,this,mt,D,[1038,26])}),Bn("mouseleave",Bt,function(...mt){ar(()=>n(dt)?()=>hn():void 0,this,mt,D,[1039,26])}),z(ht,bt)}),"each",D,1012,8);var te=at(ie,2);{var le=ht=>{const Q=v(m(()=>n(ue)+1+n(a).length),"axisRowNum");n(Q);var Z=nv(),It=yt(Z);_n(()=>n(h),ge=>ge.id),I(()=>ze(It,19,()=>n(h),ge=>ge.id,(ge,ae,pe)=>{var De=kt(),xe=yt(De);{var _t=Bt=>{var se=tv();let He;tt(()=>He=Fe(se,"",He,{"grid-column":2+n(pe),"grid-row":n(Q)})),z(Bt,se)},bt=Bt=>{var se=ev();let He;tt(()=>He=Fe(se,"",He,{"grid-column":2+n(pe),"grid-row":n(Q)})),z(Bt,se)};I(()=>Y(xe,Bt=>{Yt.includes(n(ae).type)?Bt(_t):Bt(bt,!1)}),"if",D,1101,12)}z(ge,De)}),"each",D,1100,10);var dt=at(It,2);let Ie;tt(()=>Ie=Fe(dt,"",Ie,{"grid-column":"1","grid-row":n(Q)})),z(ht,Z)};I(()=>Y(te,ht=>{n(y)&&ht(le)}),"if",D,1098,8)}var it=at(te,2);_n(()=>n(g),ht=>ht.column.id),I(()=>ze(it,17,()=>n(g),ht=>ht.column.id,(ht,Q)=>{const Z=v(m(()=>{var et;return(et=n(Q).column.options)==null?void 0:et.forest}),"forestOpts");n(Z);const It=v(m(()=>n(T)[n(Q).column.id]),"dynamicForestWidth");n(It);const dt=v(m(()=>{var et;return w(typeof n(It),"number")?n(It):w(typeof n(Q).column.width,"number")?n(Q).column.width:((et=n(Z))==null?void 0:et.width)??n(i).forestWidth}),"forestWidth");n(dt);const Ie=v(m(()=>n(Ft).get(n(Q).column.id)??0),"forestLeft");n(Ie);const ge=v(m(()=>{var et;return((et=n(l))==null?void 0:et.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(ge);const ae=v(m(()=>{var et;return((et=n(Z))==null?void 0:et.nullValue)??n(i).nullValue}),"nullValue");n(ae);const pe=v(m(()=>{var et;return((et=n(Z))==null?void 0:et.axisLabel)??"Effect"}),"axisLabel");n(pe);const De=v(m(()=>{var et;return w((et=n(Z))==null?void 0:et.scale,"log")}),"isLog");n(De);const xe=v(m(()=>n(Mn).get(n(Q).column.id)??n(s)),"colScale");n(xe);var _t=av();let bt;var Bt=J(_t);H(Bt,"y1",0);var se=at(Bt);{var He=et=>{const Pt=v(m(()=>{var ve;return[...n(r).annotations??[],...((ve=n(Z))==null?void 0:ve.annotations)??[]]}),"allAnnotations");n(Pt);const ee=v(m(()=>Tt(n(Pt))),"annotationLabelOffsets");n(ee);var we=kt(),Ae=yt(we);_n(()=>n(Pt),ve=>ve.id),I(()=>ze(Ae,17,()=>n(Pt),ve=>ve.id,(ve,Qt)=>{var Ke=kt(),pn=yt(Ke);{var cn=nn=>{var me=ov(),Be=yt(me);H(Be,"y1",0);var oi=at(Be);{var ii=Io=>{const ai=v(m(()=>n(ee)[n(Qt).id]??0),"yOffset");n(ai);var $n=rv(),si=J($n,!0);tt(li=>{H($n,"x",li),H($n,"y",-4+n(ai)),H($n,"fill",n(Qt).color??"var(--wf-secondary)"),Jt(si,n(Qt).label)},[()=>n(xe)(n(Qt).x)]),z(Io,$n)};I(()=>Y(oi,Io=>{n(Qt).label&&Io(ii)}),"if",D,1157,16)}tt((Io,ai)=>{H(Be,"x1",Io),H(Be,"x2",ai),H(Be,"y2",n(vt)),H(Be,"stroke",n(Qt).color??"var(--wf-accent)"),H(Be,"stroke-width",n(Qt).width??1.5),H(Be,"stroke-opacity",n(Qt).opacity??.6),H(Be,"stroke-dasharray",w(n(Qt).style,"dashed")?"6,4":w(n(Qt).style,"dotted")?"2,2":"none")},[()=>n(xe)(n(Qt).x),()=>n(xe)(n(Qt).x)]),z(nn,me)};I(()=>Y(pn,nn=>{w(n(Qt).type,"reference_line")&&nn(cn)}),"if",D,1146,14)}z(ve,Ke)}),"each",D,1145,14),z(et,we)};I(()=>Y(se,et=>{et(He)}),"if",D,1142,12)}var gn=at(se);_n(()=>n(a),(et,Pt)=>Nt(et,Pt)),I(()=>ze(gn,19,()=>n(a),(et,Pt)=>Nt(et,Pt),(et,Pt,ee)=>{var we=kt(),Ae=yt(we);{var ve=Qt=>{const Ke=v(m(()=>n(pt).positions[n(ee)]??n(ee)*n(i).rowHeight),"rowY");n(Ke);const pn=v(m(()=>n(pt).heights[n(ee)]??n(i).rowHeight),"rowH");n(pn);{let cn=m(()=>n(Ke)+n(pn)/2),nn=m(()=>({...n(i),forestWidth:n(dt)}));I(()=>Oe(Qt,{get row(){return n(Pt).row},get yPosition(){return n(cn)},get xScale(){return n(xe)},get layout(){return n(nn)},get theme(){return n(l)},get clipBounds(){return n(f)},get isLog(){return n(De)},get weightCol(){return n(r).data.weightCol},get forestColumnOptions(){return n(Z)},onRowClick:()=>e.store.selectRow(n(Pt).row.id),onRowHover:(me,Be)=>{e.store.setHovered(me?n(Pt).row.id:null),me&&Be?e.store.setTooltip(n(Pt).row.id,{x:Be.clientX,y:Be.clientY}):e.store.setTooltip(null,null)}}),"component",D,1179,16,{componentTag:"RowInterval"})}};I(()=>Y(Ae,Qt=>{w(n(Pt).type,"data")&&Qt(ve)}),"if",D,1176,14)}z(et,we)}),"each",D,1175,12);var Kt=at(gn);{var zt=et=>{{let Pt=m(()=>n(vt)+n(i).rowHeight/2),ee=m(()=>({...n(i),forestWidth:n(dt)}));I(()=>to(et,{get point(){return n(r).data.overall.point},get lower(){return n(r).data.overall.lower},get upper(){return n(r).data.overall.upper},get yPosition(){return n(Pt)},get xScale(){return n(xe)},get layout(){return n(ee)},get theme(){return n(l)}}),"component",D,1207,14,{componentTag:"SummaryDiamond"})}};I(()=>Y(Kt,et=>{n(r).data.overall&&n(i).showOverallSummary&&w(typeof n(r).data.overall.point,"number")&&!Number.isNaN(n(r).data.overall.point)&&w(typeof n(r).data.overall.lower,"number")&&!Number.isNaN(n(r).data.overall.lower)&&w(typeof n(r).data.overall.upper,"number")&&!Number.isNaN(n(r).data.overall.upper)&&et(zt)}),"if",D,1203,12)}var de=at(Kt);{var mt=et=>{var Pt=iv(),ee=J(Pt);{let we=m(()=>({...n(i),forestWidth:n(dt)}));I(()=>Nn(ee,{get xScale(){return n(xe)},get layout(){return n(we)},get theme(){return n(l)},get axisLabel(){return n(pe)},position:"bottom",get plotHeight(){return n(i).plotHeight},get baseTicks(){return n(c).ticks}}),"component",D,1221,16,{componentTag:"EffectAxis"})}tt(()=>H(Pt,"transform",`translate(0, ${n(vt)+n(ge)})`)),z(et,Pt)};I(()=>Y(de,et=>{var Pt;w((Pt=n(Z))==null?void 0:Pt.showAxis,!1,!1)&&et(mt)}),"if",D,1219,12)}tt((et,Pt)=>{H(_t,"width",n(dt)),H(_t,"height",n(vt)+n(i).axisHeight),H(_t,"viewBox",`0 0 ${n(dt)??""} ${n(vt)+n(i).axisHeight}`),bt=Fe(_t,"",bt,{top:`${n(_e)??""}px`,left:`${n(Ie)??""}px`}),H(Bt,"x1",et),H(Bt,"x2",Pt),H(Bt,"y2",n(vt))},[()=>n(xe)(n(ae)),()=>n(xe)(n(ae))]),z(ht,_t)}),"each",D,1112,8);var St=at(it,2);_n(()=>n(p).filter(ht=>w(ht.column.type,"viz_bar")),ht=>ht.column.id),I(()=>ze(St,17,()=>n(p).filter(ht=>w(ht.column.type,"viz_bar")),ht=>ht.column.id,(ht,Q)=>{const Z=v(m(()=>{var _t;return(_t=n(Q).column.options)==null?void 0:_t.vizBar}),"vizOpts");n(Z);const It=v(m(()=>n(T)[n(Q).column.id]),"dynamicVizWidth");n(It);const dt=v(m(()=>{var _t;return w(typeof n(It),"number")?n(It):n(Q).column.width??((_t=n(Z))==null?void 0:_t.width)??n(i).forestWidth}),"vizWidth");n(dt);const Ie=v(m(()=>n(Ft).get(n(Q).column.id)??0),"vizLeft");n(Ie);const ge=v(m(()=>{var _t;return((_t=n(l))==null?void 0:_t.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(ge);const ae=v(m(()=>n(dn).get(n(Q).column.id)),"sharedScale");n(ae);var pe=kt(),De=yt(pe);{var xe=_t=>{var bt=lv();let Bt;var se=J(bt);_n(()=>n(a),(Kt,zt)=>Nt(Kt,zt)),I(()=>ze(se,19,()=>n(a),(Kt,zt)=>Nt(Kt,zt),(Kt,zt,de)=>{var mt=kt(),et=yt(mt);{var Pt=ee=>{const we=v(m(()=>n(pt).positions[n(de)]??n(de)*n(i).rowHeight),"rowY");n(we);const Ae=v(m(()=>n(pt).heights[n(de)]??n(i).rowHeight),"rowH");n(Ae);{let ve=m(()=>n(we)+n(Ae)/2);I(()=>eo(ee,{get row(){return n(zt).row},get yPosition(){return n(ve)},get rowHeight(){return n(Ae)},get width(){return n(dt)},get options(){return n(Z)},get theme(){return n(l)},get sharedScale(){return n(ae)}}),"component",D,1249,18,{componentTag:"VizBar"})}};I(()=>Y(et,ee=>{w(n(zt).type,"data")&&ee(Pt)}),"if",D,1246,16)}z(Kt,mt)}),"each",D,1245,14);var He=at(se);{var gn=Kt=>{var zt=sv(),de=J(zt);{let mt=m(()=>({...n(i),forestWidth:n(dt),nullValue:0})),et=m(()=>n(Z).axisLabel??"Value");I(()=>Nn(de,{get xScale(){return n(ae)},get layout(){return n(mt)},get theme(){return n(l)},get axisLabel(){return n(et)},position:"bottom",get plotHeight(){return n(vt)},get baseTicks(){return n(Z).axisTicks},get gridlines(){return n(Z).axisGridlines}}),"component",D,1264,18,{componentTag:"EffectAxis"})}tt(()=>H(zt,"transform",`translate(0, ${n(vt)+n(ge)})`)),z(Kt,zt)};I(()=>Y(He,Kt=>{w(n(Z).showAxis,!1,!1)&&n(ae)&&Kt(gn)}),"if",D,1262,14)}tt(()=>{H(bt,"width",n(dt)),H(bt,"height",n(vt)+n(i).axisHeight),H(bt,"viewBox",`0 0 ${n(dt)??""} ${n(vt)+n(i).axisHeight}`),Bt=Fe(bt,"",Bt,{top:`${n(_e)??""}px`,left:`${n(Ie)??""}px`})}),z(_t,bt)};I(()=>Y(De,_t=>{n(Z)&&_t(xe)}),"if",D,1235,10)}z(ht,pe)}),"each",D,1228,8);var Ze=at(St,2);_n(()=>n(p).filter(ht=>w(ht.column.type,"viz_boxplot")),ht=>ht.column.id),I(()=>ze(Ze,17,()=>n(p).filter(ht=>w(ht.column.type,"viz_boxplot")),ht=>ht.column.id,(ht,Q)=>{const Z=v(m(()=>{var _t;return(_t=n(Q).column.options)==null?void 0:_t.vizBoxplot}),"vizOpts");n(Z);const It=v(m(()=>n(T)[n(Q).column.id]),"dynamicVizWidth");n(It);const dt=v(m(()=>{var _t;return w(typeof n(It),"number")?n(It):n(Q).column.width??((_t=n(Z))==null?void 0:_t.width)??n(i).forestWidth}),"vizWidth");n(dt);const Ie=v(m(()=>n(Ft).get(n(Q).column.id)??0),"vizLeft");n(Ie);const ge=v(m(()=>{var _t;return((_t=n(l))==null?void 0:_t.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(ge);const ae=v(m(()=>n(dn).get(n(Q).column.id)),"sharedScale");n(ae);var pe=kt(),De=yt(pe);{var xe=_t=>{var bt=fv();let Bt;var se=J(bt);_n(()=>n(a),(Kt,zt)=>Nt(Kt,zt)),I(()=>ze(se,19,()=>n(a),(Kt,zt)=>Nt(Kt,zt),(Kt,zt,de)=>{var mt=kt(),et=yt(mt);{var Pt=ee=>{const we=v(m(()=>n(pt).positions[n(de)]??n(de)*n(i).rowHeight),"rowY");n(we);const Ae=v(m(()=>n(pt).heights[n(de)]??n(i).rowHeight),"rowH");n(Ae);{let ve=m(()=>n(we)+n(Ae)/2);I(()=>ur(ee,{get row(){return n(zt).row},get yPosition(){return n(ve)},get rowHeight(){return n(Ae)},get width(){return n(dt)},get options(){return n(Z)},get theme(){return n(l)},get sharedScale(){return n(ae)}}),"component",D,1302,18,{componentTag:"VizBoxplot"})}};I(()=>Y(et,ee=>{w(n(zt).type,"data")&&ee(Pt)}),"if",D,1299,16)}z(Kt,mt)}),"each",D,1298,14);var He=at(se);{var gn=Kt=>{var zt=cv(),de=J(zt);{let mt=m(()=>({...n(i),forestWidth:n(dt),nullValue:0})),et=m(()=>n(Z).axisLabel??"Value");I(()=>Nn(de,{get xScale(){return n(ae)},get layout(){return n(mt)},get theme(){return n(l)},get axisLabel(){return n(et)},position:"bottom",get plotHeight(){return n(vt)},get baseTicks(){return n(Z).axisTicks},get gridlines(){return n(Z).axisGridlines}}),"component",D,1317,18,{componentTag:"EffectAxis"})}tt(()=>H(zt,"transform",`translate(0, ${n(vt)+n(ge)})`)),z(Kt,zt)};I(()=>Y(He,Kt=>{w(n(Z).showAxis,!1,!1)&&n(ae)&&Kt(gn)}),"if",D,1315,14)}tt(()=>{H(bt,"width",n(dt)),H(bt,"height",n(vt)+n(i).axisHeight),H(bt,"viewBox",`0 0 ${n(dt)??""} ${n(vt)+n(i).axisHeight}`),Bt=Fe(bt,"",Bt,{top:`${n(_e)??""}px`,left:`${n(Ie)??""}px`})}),z(_t,bt)};I(()=>Y(De,_t=>{n(Z)&&_t(xe)}),"if",D,1288,10)}z(ht,pe)}),"each",D,1281,8);var Ce=at(Ze,2);_n(()=>n(p).filter(ht=>w(ht.column.type,"viz_violin")),ht=>ht.column.id),I(()=>ze(Ce,17,()=>n(p).filter(ht=>w(ht.column.type,"viz_violin")),ht=>ht.column.id,(ht,Q)=>{const Z=v(m(()=>{var _t;return(_t=n(Q).column.options)==null?void 0:_t.vizViolin}),"vizOpts");n(Z);const It=v(m(()=>n(T)[n(Q).column.id]),"dynamicVizWidth");n(It);const dt=v(m(()=>{var _t;return w(typeof n(It),"number")?n(It):n(Q).column.width??((_t=n(Z))==null?void 0:_t.width)??n(i).forestWidth}),"vizWidth");n(dt);const Ie=v(m(()=>n(Ft).get(n(Q).column.id)??0),"vizLeft");n(Ie);const ge=v(m(()=>{var _t;return((_t=n(l))==null?void 0:_t.spacing.axisGap)??Yn.DEFAULT_AXIS_GAP}),"axisGap");n(ge);const ae=v(m(()=>n(dn).get(n(Q).column.id)),"sharedScale");n(ae);var pe=kt(),De=yt(pe);{var xe=_t=>{var bt=dv();let Bt;var se=J(bt);_n(()=>n(a),(Kt,zt)=>Nt(Kt,zt)),I(()=>ze(se,19,()=>n(a),(Kt,zt)=>Nt(Kt,zt),(Kt,zt,de)=>{var mt=kt(),et=yt(mt);{var Pt=ee=>{const we=v(m(()=>n(pt).positions[n(de)]??n(de)*n(i).rowHeight),"rowY");n(we);const Ae=v(m(()=>n(pt).heights[n(de)]??n(i).rowHeight),"rowH");n(Ae);{let ve=m(()=>n(we)+n(Ae)/2);I(()=>Jn(ee,{get row(){return n(zt).row},get yPosition(){return n(ve)},get rowHeight(){return n(Ae)},get width(){return n(dt)},get options(){return n(Z)},get theme(){return n(l)},get sharedScale(){return n(ae)}}),"component",D,1355,18,{componentTag:"VizViolin"})}};I(()=>Y(et,ee=>{w(n(zt).type,"data")&&ee(Pt)}),"if",D,1352,16)}z(Kt,mt)}),"each",D,1351,14);var He=at(se);{var gn=Kt=>{var zt=uv(),de=J(zt);{let mt=m(()=>({...n(i),forestWidth:n(dt),nullValue:0})),et=m(()=>n(Z).axisLabel??"Value");I(()=>Nn(de,{get xScale(){return n(ae)},get layout(){return n(mt)},get theme(){return n(l)},get axisLabel(){return n(et)},position:"bottom",get plotHeight(){return n(vt)},get baseTicks(){return n(Z).axisTicks},get gridlines(){return n(Z).axisGridlines}}),"component",D,1370,18,{componentTag:"EffectAxis"})}tt(()=>H(zt,"transform",`translate(0, ${n(vt)+n(ge)})`)),z(Kt,zt)};I(()=>Y(He,Kt=>{w(n(Z).showAxis,!1,!1)&&n(ae)&&Kt(gn)}),"if",D,1368,14)}tt(()=>{H(bt,"width",n(dt)),H(bt,"height",n(vt)+n(i).axisHeight),H(bt,"viewBox",`0 0 ${n(dt)??""} ${n(vt)+n(i).axisHeight}`),Bt=Fe(bt,"",Bt,{top:`${n(_e)??""}px`,left:`${n(Ie)??""}px`})}),z(_t,bt)};I(()=>Y(De,_t=>{n(Z)&&_t(xe)}),"if",D,1341,10)}z(ht,pe)}),"each",D,1334,8);var Te=at(wt,2);{let ht=m(()=>{var Z;return(Z=n(r).labels)==null?void 0:Z.caption}),Q=m(()=>{var Z;return(Z=n(r).labels)==null?void 0:Z.footnote});I(()=>Lr(Te,{get caption(){return n(ht)},get footnote(){return n(Q)}}),"component",D,1388,6,{componentTag:"PlotFooter"})}yo(ut,ht=>lt(K,ht),()=>n(K)),tt(()=>{Ne=Cn(wt,1,"tabviz-main svelte-14l8yxx",null,Ne,{"has-header":n(k)}),Pn=Fe(wt,"",Pn,{"grid-template-columns":n(jt)}),Ea=Fe(Vt,"",Ea,{"grid-row":`1 / span ${n(ue)??""}`}),Jt(Zt,n(_))})}var Ve=at(ut,2);{let Ot=m(()=>{var Ne,Pn;return(Pn=(Ne=n(r))==null?void 0:Ne.interaction)==null?void 0:Pn.tooltipFields});I(()=>_o(Ve,{get row(){return n(W)},get position(){return n(A)},get fields(){return n(Ot)},get theme(){return n(l)}}),"component",D,1392,4,{componentTag:"Tooltip"})}tt(()=>Dt=Fe(ut,"",Dt,{"margin-left":`${n(X)??""}px`})),z(C,L)},V=C=>{var L=gv();z(C,L)};I(()=>Y(Fn,C=>{n(r)?C(ri):C(V,!1)}),"if",D,852,2)}return yo(Ge,C=>lt(G,C),()=>n(G)),tt(C=>{ln=Cn(Ge,1,"tabviz-container svelte-14l8yxx",null,ln,{"auto-fit":n(S),"has-max-width":w(n(N),null,!1),"has-max-height":w(n(R),null,!1),zoomed:w(n(b),1,!1)}),H(Ge,"data-zoom",`${C??""}%`),Fe(Ge,`${n(jr)??""}; ${n(S)&&n(U)>0?`height: ${n(U)}px`:""}`)},[()=>Math.round(n(F)*100)]),z(t,Ge),Ee(gr)}mo(["pointerdown","click","keydown"]);function Xc(){let t=v(Wt(null),"spec"),e=v(Wt(800),"initialWidth"),r=v(Wt(400),"initialHeight"),o=v(Wt(yr(new Set)),"selectedRowIds"),a=v(Wt(yr(new Set)),"collapsedGroups"),i=v(Wt(null),"sortConfig"),s=v(Wt(null),"filterConfig"),c=v(Wt(null),"hoveredRowId"),f=v(Wt(null),"tooltipRowId"),l=v(Wt(null),"tooltipPosition"),u=v(Wt(yr({})),"columnWidths"),h=v(Wt(null),"plotWidthOverride"),d=v(Wt(1),"zoom"),g=v(Wt(!0),"autoFit"),p=v(Wt(null),"maxWidth"),y=v(Wt(null),"maxHeight"),_=v(Wt(!0),"showZoomControls"),x=v(Wt(0),"containerWidth"),k=v(Wt(0),"containerHeight"),W=v(Wt(0),"scalableNaturalWidth"),A=v(Wt(0),"scalableNaturalHeight"),M=v(Wt(null),"containerElementId");const E=v(m(()=>n(x)>0?n(x):n(e)),"effectiveWidth"),b=v(m(()=>n(k)>0?n(k):n(r)),"effectiveHeight"),S=v(m(()=>{if(!n(t))return[];let V=[...n(t).data.rows];return n(s)&&(V=vv(V,n(s))),n(i)&&(V=mv(V,n(i))),V}),"visibleRows"),F=v(m(()=>{var Zt,je;if(!n(t))return{axisLimits:[0,1],plotRegion:[0,1],ticks:[0,.5,1]};const V=(Zt=n(K)[0])==null?void 0:Zt.column,L=n(K).length>0?n(h)??Math.max(n(E)*.25,200):0,O=(je=V==null?void 0:V.options)==null?void 0:je.forest,ut=(O==null?void 0:O.scale)??"linear",Dt=(O==null?void 0:O.nullValue)??(w(ut,"log")?1:0),Mt=(O==null?void 0:O.effects)??[],Ht=(O==null?void 0:O.point)??null,wt=(O==null?void 0:O.lower)??null,Vt=(O==null?void 0:O.upper)??null,re={...n(t).theme.axis};return O!=null&&O.axisRange&&Array.isArray(O.axisRange)&&w(O.axisRange.length,2)&&(re.rangeMin=O.axisRange[0],re.rangeMax=O.axisRange[1]),O!=null&&O.axisTicks&&Array.isArray(O.axisTicks)&&(re.tickValues=O.axisTicks),$l({rows:n(t).data.rows,config:re,scale:ut,nullValue:Dt,forestWidth:L,pointSize:n(t).theme.shapes.pointSize,effects:Mt,pointCol:Ht,lowerCol:wt,upperCol:Vt})}),"axisComputation"),N=v(m(()=>{var wt,Vt;if(!n(t))return Qn().domain([0,1]).range([0,100]);const V=(wt=n(K)[0])==null?void 0:wt.column,C=(Vt=V==null?void 0:V.options)==null?void 0:Vt.forest,L=w((C==null?void 0:C.scale)??"linear","log"),{plotRegion:O}=n(F),Dt=n(K).length>0?n(h)??Math.max(n(E)*.25,200):0,Mt=Tn,Ht=Math.max(Dt-Tn,Mt+50);if(L){const re=[Math.max(O[0],.01),Math.max(O[1],.02)];return Dr().domain(re).range([Mt,Ht])}return Qn().domain(O).range([Mt,Ht])}),"xScale");function R(V){const C=[];for(const L of V)L.isGroup?C.push(...R(L.columns)):C.push(L);return C}const T=v(m(()=>n(t)?R(n(t).columns):[]),"allColumns"),G=v(m(()=>n(t)?n(t).columns:[]),"allColumnDefs"),K=v(m(()=>{if(!n(t))return[];const V=[],C=n(T);for(let L=0;L<C.length;L++)w(C[L].type,"forest")&&V.push({index:L,column:C[L]});return V}),"forestColumns"),ct=v(m(()=>n(K).length>0),"hasExplicitForestColumns"),B=v(m(()=>{if(!n(t))return[];const V=[],C=n(T),L=["forest","viz_bar","viz_boxplot","viz_violin"];for(let O=0;O<C.length;O++)L.includes(C[O].type)&&V.push({index:O,column:C[O]});return V}),"vizColumns"),q=v(m(()=>n(B).length>0),"hasVizColumns"),nt=v(m(()=>{const V=new Map;if(!n(t))return V;for(const C of n(t).data.groups)V.set(C.id,C);return V}),"groupMap"),U=v(m(()=>{const V=new Map;if(!n(t))return V;for(const C of n(t).data.groups)V.set(C.id,C.depth);return V}),"groupDepthMap");function X(V){return V?(n(U).get(V)??0)+1:0}function st(V){if(!V)return!1;let C=V;for(;C;){const L=n(nt).get(C);if(!L)break;if(L.parentId&&n(a).has(L.parentId))return!0;C=L.parentId}return!1}const rt=v(m(()=>{var Mt;if(!n(t))return[];const V=[],C=new Map;for(const Ht of n(S)){const wt=Ht.groupId??null;C.has(wt)||C.set(wt,[]),C.get(wt).push(Ht)}const L=new Set;for(const Ht of C.keys()){if(!Ht)continue;let wt=Ht;for(;wt;)L.add(wt),wt=(Mt=n(nt).get(wt))==null?void 0:Mt.parentId}function O(Ht){return n(t).data.groups.filter(wt=>w(wt.parentId??null,Ht)&&L.has(wt.id))}function ut(Ht){var Vt;let wt=((Vt=C.get(Ht))==null?void 0:Vt.length)??0;for(const re of O(Ht))wt+=ut(re.id);return wt}function Dt(Ht){if(Ht){const Vt=n(nt).get(Ht);if(!Vt||st(Ht))return;const re=n(a).has(Vt.id),Zt=ut(Ht);if(V.push({type:"group_header",group:{...Vt,collapsed:re},rowCount:Zt,depth:Vt.depth}),re)return}for(const Vt of O(Ht))Dt(Vt.id);const wt=C.get(Ht)??[];for(const Vt of wt)V.push({type:"data",row:Vt,depth:X(Vt.groupId)})}return Dt(null),V}),"displayRows"),ot=v(m(()=>{var te,le,it;if(!n(t))return{totalWidth:n(E),totalHeight:n(b),tableWidth:300,forestWidth:400,headerHeight:36,rowHeight:28,plotHeight:300,axisHeight:32,nullValue:0,summaryYPosition:0,showOverallSummary:!1,rowPositions:[],rowHeights:[]};const V=n(t).theme.spacing.rowHeight,C=n(t).theme.spacing.headerHeight,O=(n(t).theme.spacing.axisGap??Yn.DEFAULT_AXIS_GAP)+Sr.AXIS_HEIGHT+Sr.AXIS_LABEL_HEIGHT,Dt=n(K).length>0?n(h)??Math.max(n(E)*.25,200):0,Mt=n(E)-Dt,Ht=!!n(t).data.overall,wt=[];for(const St of n(rt))w(St.type,"data")&&w((te=St.row.style)==null?void 0:te.type,"spacer")?wt.push(V/2):wt.push(V);const Vt=[];let re=0;for(const St of wt)Vt.push(re),re+=St;const Zt=re+(Ht?V*1.5:0),je=(le=n(K)[0])==null?void 0:le.column,$t=(it=je==null?void 0:je.options)==null?void 0:it.forest,qe=($t==null?void 0:$t.scale)??"linear",ie=($t==null?void 0:$t.nullValue)??(w(qe,"log")?1:0);return{totalWidth:n(E),totalHeight:Math.max(n(b),Zt+C+O+n(t).theme.spacing.padding*2),tableWidth:Mt,forestWidth:Dt,headerHeight:C,rowHeight:V,plotHeight:Zt,axisHeight:O,nullValue:ie,summaryYPosition:Zt-V,showOverallSummary:Ht,rowPositions:Vt,rowHeights:wt}}),"layout"),pt=v(m(()=>{if(!n(t))return 800;const V=100,C=150;let L=0;for(const Dt of n(T)){if(w(Dt.type,"forest"))continue;const Mt=n(u)[Dt.id]??(w(typeof Dt.width,"number")?Dt.width:null)??V;L+=Mt}L+=n(u).__label__??C;const O=n(ot).forestWidth,ut=n(t).theme.spacing.padding*2;return L+O+ut}),"naturalContentWidth"),vt=v(m(()=>{if(n(x)<=0||n(W)<=0)return 1;const V=n(W)*n(d);return V>n(x)?n(x)/V:1}),"fitScale"),Tt=v(m(()=>n(g)?Math.max(.5,n(d)*n(vt)):Math.max(.5,Math.min(2,n(d)))),"actualScale"),Et=v(m(()=>n(g)&&n(vt)<1),"isClamped");function Nt(V){lt(t,{...V},!0),lt(a,new Set(V.data.groups.filter(C=>C.collapsed).map(C=>C.id)),!0),$e()}function $e(){if(!n(t)||w(typeof document,"undefined"))return;const V=n(t).theme.typography.fontFamily;let C=n(t).theme.typography.fontSizeBase;if(w(typeof C,"string")&&(C.endsWith("rem")||C.endsWith("em"))){const L=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;C=`${parseFloat(C)*L}px`}ne(C,V),document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>{ne(C,V,!0)})}function ne(V,C,L=!1){var te,le;if(!n(t))return;const ut=document.createElement("canvas").getContext("2d");if(!ut)return;const Dt=n(t).theme.typography.headerFontScale??1.05;let Mt=V;if(w(typeof V,"string")){const it=V.match(/^([\d.]+)(px|rem|em)$/);it&&(Mt=`${parseFloat(it[1])*Dt}${it[2]}`)}const wt=`${n(t).theme.typography.fontWeightBold??600} ${Mt} ${C}`,Vt=`${V} ${C}`,re=(n(t).theme.spacing.cellPaddingX??10)*2,Zt=(n(t).theme.spacing.groupPadding??8)*2;function je(it){return it.isGroup?it.columns.flatMap(je):[it]}function $t(it){return w(n(u)[it.id],void 0,!1)?n(u)[it.id]:w(typeof it.width,"number")?it.width:Zn.MIN}function qe(it){var Te,Ve;if(w(typeof it.width,"number")||he(it.width,null,!1)&&w(it.width,"auto",!1))return;let St=0;it.header&&(ut.font=wt,St=Math.max(St,ut.measureText(it.header).width)),ut.font=Vt;for(const Ot of n(t).data.rows){if(w((Te=Ot.style)==null?void 0:Te.type,"header")||w((Ve=Ot.style)==null?void 0:Ve.type,"spacer"))continue;const Ne=zc(Ot,it);Ne&&(St=Math.max(St,ut.measureText(Ne).width))}const Ze=Zn.VISUAL_MIN[it.type]??Zn.MIN,Ce=Math.min(Zn.MAX,Math.max(Ze,Math.ceil(St+re+Yn.RENDERING_BUFFER)));n(u)[it.id]=Ce}function ie(it){if(it.isGroup){for(const St of it.columns)ie(St);if(it.header){ut.font=wt;const St=ut.measureText(it.header).width+Zt+Yn.RENDERING_BUFFER,Ze=je(it),Ce=Ze.reduce((Te,Ve)=>Te+$t(Ve),0);if(St>Ce&&Ze.length>0){const Te=Math.ceil((St-Ce)/Ze.length);for(const Ve of Ze)n(u)[Ve.id]=$t(Ve)+Te}}return}qe(it)}for(const it of n(t).columns)ie(it);if(n(t).data.labelCol){let it=function(Ot){let Ne=0;for(const Pn of n(t).data.rows)w(Pn.groupId,Ot)&&Ne++;for(const Pn of n(t).data.groups)w(Pn.parentId,Ot)&&(Ne+=it(Pn.id));return Ne},St=0;const Ze=new Map;for(const Ot of n(t).data.groups)Ze.set(Ot.id,Ot.depth);const Ce=Ot=>Ot?(Ze.get(Ot)??0)+1:0;n(t).data.labelHeader&&(ut.font=wt,St=Math.max(St,ut.measureText(n(t).data.labelHeader).width)),ut.font=Vt;const Te=parseFloat(V);for(const Ot of n(t).data.rows)if(Ot.label){const Ne=Ce(Ot.groupId),Pn=((te=Ot.style)==null?void 0:te.indent)??0,ht=(Ne+Pn)*Pe.INDENT_PER_LEVEL;let Q=ut.measureText(Ot.label).width+ht;if((le=Ot.style)!=null&&le.badge){const Z=String(Ot.style.badge),It=Te*Mr.FONT_SCALE;ut.font=`${It}px ${C}`;const Ie=ut.measureText(Z).width+Mr.PADDING*2;Q+=Mr.GAP+Ie,ut.font=Vt}St=Math.max(St,Q)}ut.font=wt;for(const Ot of n(t).data.groups)if(Ot.label){const Ne=Ot.depth*Pe.INDENT_PER_LEVEL,Pn=ut.measureText(Ot.label).width,ht=`(${it(Ot.id)})`,Q=Te*.75;ut.font=`${Q}px ${C}`;const Z=ut.measureText(ht).width;ut.font=wt;const It=Ne+Jr.CHEVRON_WIDTH+Jr.GAP+Pn+Jr.GAP+Z+Jr.SAFETY_MARGIN;St=Math.max(St,It)}const Ve=Math.min(Zn.LABEL_MAX,Math.max(Zn.MIN,Math.ceil(St+re+Yn.RENDERING_BUFFER)));n(u).__label__=Ve}}function be(V,C){lt(e,V,!0),lt(r,C,!0)}function ue(V){const C=new Set(n(o));C.has(V)?C.delete(V):C.add(V),lt(o,C,!0)}function gt(V,C){const L=new Set(n(a));C??!L.has(V)?L.add(V):L.delete(V),lt(a,L,!0)}function Ct(V,C){lt(i,w(C,"none")?null:{column:V,direction:C},!0)}function Yt(V){lt(s,V,!0)}function jt(V){lt(c,V,!0)}function Xt(V,C){lt(f,V,!0),lt(l,C,!0)}function ke(V,C){n(u)[V]=Math.max(40,C)}function Ft(V){return n(u)[V]}function Gt(V){lt(h,w(V,null)?null:Math.max(100,V),!0)}function Ye(){return n(h)}function Ue(V){const C=kg[V];!n(t)||!C||lt(t,{...n(t),theme:C},!0)}function _e(V){lt(d,Math.max(.5,Math.min(2,V)),!0),Ge()}function dn(){lt(d,1),Ge()}function Mn(){_e(n(d)*1.1)}function qt(){_e(n(d)/1.1)}function At(V){lt(g,V,!0),Ge()}function Le(){!n(x)||!n(W)||(lt(d,Math.min(2,Math.max(.5,n(x)/n(W))),!0),Ge())}function On(V){lt(p,V,!0),Ge()}function hr(V){lt(y,V,!0),Ge()}function Sn(V){lt(_,V,!0)}function tn(V,C){lt(x,V,!0),lt(k,C,!0)}function hn(V,C){lt(W,V,!0),lt(A,C,!0)}function jr(V){lt(M,V,!0),V&&ln()}function gr(){return n(M)?`tabviz_zoom_${n(M)}`:null}function Ge(){const V=gr();if(V)try{const C={zoom:n(d),autoFit:n(g),maxWidth:n(p),maxHeight:n(y),version:2};localStorage.setItem(V,JSON.stringify(C))}catch{}}function ln(){const V=gr();if(V)try{const C=localStorage.getItem(V);if(C){const L=JSON.parse(C);w(L.version,2)&&(lt(d,L.zoom??1,!0),lt(g,L.autoFit??!0,!0),lt(p,L.maxWidth??null,!0),lt(y,L.maxHeight??null,!0))}}catch{}}function Fn(){lt(o,new Set,!0),lt(a,new Set,!0),lt(i,null),lt(s,null),lt(u,{},!0),lt(h,null),lt(d,1),lt(g,!0),lt(p,null),lt(y,null),lt(c,null),lt(f,null),lt(l,null)}const ri=v(m(()=>!n(f)||!n(t)?null:n(t).data.rows.find(V=>w(V.id,n(f)))??null),"tooltipRow");return{get spec(){return n(t)},get width(){return n(E)},get height(){return n(b)},get visibleRows(){return n(S)},get xScale(){return n(N)},get axisComputation(){return n(F)},get layout(){return n(ot)},get selectedRowIds(){return n(o)},get collapsedGroups(){return n(a)},get hoveredRowId(){return n(c)},get allColumns(){return n(T)},get allColumnDefs(){return n(G)},get forestColumns(){return n(K)},get hasExplicitForestColumns(){return n(ct)},get vizColumns(){return n(B)},get hasVizColumns(){return n(q)},get displayRows(){return n(rt)},get tooltipRow(){return n(ri)},get tooltipPosition(){return n(l)},get columnWidths(){return n(u)},get zoom(){return n(d)},get autoFit(){return n(g)},get actualScale(){return n(Tt)},get isClamped(){return n(Et)},get maxWidth(){return n(p)},get maxHeight(){return n(y)},get showZoomControls(){return n(_)},get naturalContentWidth(){return n(pt)},getRowDepth:X,getColumnWidth:Ft,getPlotWidth:Ye,getExportDimensions(){var Zt,je,$t,qe,ie;const V=n(N).domain(),C=[],L={},O={},ut=n(u).__label__??150;O.__label__=ut;let Dt=ut;for(const te of n(T)){C.push(te.id),L[te.id]=Dt;let le;w(te.type,"forest")?le=n(u)[te.id]??(w(typeof te.width,"number")?te.width:null)??((je=(Zt=te.options)==null?void 0:Zt.forest)==null?void 0:je.width)??n(ot).forestWidth:le=n(u)[te.id]??(w(typeof te.width,"number")?te.width:100),O[te.id]=le,Dt+=le}const Mt=[];for(const te of n(K)){const le=te.column,it=($t=le.options)==null?void 0:$t.forest,St=O[le.id]??n(ot).forestWidth,Ze=(it==null?void 0:it.scale)??"linear",Ce=(it==null?void 0:it.nullValue)??(w(Ze,"log")?1:0);Mt.push({columnId:le.id,xPosition:L[le.id],width:St,xDomain:V,clipBounds:n(F).axisLimits,ticks:n(F).ticks,scale:Ze,nullValue:Ce,axisLabel:(it==null?void 0:it.axisLabel)??"Effect"})}const Ht=[],wt=[];let Vt=0;for(const te of n(rt)){const le=w(te.type,"data")&&w((qe=te.row.style)==null?void 0:qe.type,"spacer")?n(ot).rowHeight/2:n(ot).rowHeight;wt.push(Vt),Ht.push(le),Vt+=le}const re=n(G).some(te=>te.isGroup)?2:1;return{columnOrder:C,columnWidths:O,columnPositions:L,forestColumns:Mt,rowHeights:Ht,rowPositions:wt,totalRowsHeight:Vt,headerHeight:n(ot).headerHeight,headerDepth:re,width:n(pt)*n(d),height:(n(A)||400)*n(d),naturalWidth:Dt,naturalHeight:Vt+n(ot).headerHeight+n(ot).axisHeight,forestWidth:(((ie=Mt[0])==null?void 0:ie.width)??n(ot).forestWidth)*n(d),xDomain:V,clipBounds:n(F).axisLimits,scale:n(d)}},setSpec:Nt,setDimensions:be,selectRow:ue,toggleGroup:gt,sortBy:Ct,setFilter:Yt,setHovered:jt,setTooltip:Xt,setColumnWidth:ke,setPlotWidth:Gt,setTheme:Ue,setZoom:_e,resetZoom:dn,zoomIn:Mn,zoomOut:qt,setAutoFit:At,fitToWidth:Le,setMaxWidth:On,setMaxHeight:hr,setShowZoomControls:Sn,setContainerDimensions:tn,setScalableNaturalDimensions:hn,setContainerElementId:jr,resetState:Fn}}function vv(t,e){return t.filter(r=>{const o=r.metadata[e.field]??r[e.field];switch(e.operator){case"eq":return w(o,e.value);case"neq":return w(o,e.value,!1);case"gt":return w(typeof o,"number")&&o>e.value;case"lt":return w(typeof o,"number")&&o<e.value;case"contains":return w(typeof o,"string")&&o.toLowerCase().includes(e.value.toLowerCase());default:return!0}})}function mv(t,e){const r=[...t],{column:o,direction:a}=e;return r.sort((i,s)=>{const c=i.metadata[o]??i[o],f=s.metadata[o]??s[o];let l=0;return w(typeof c,"number")&&w(typeof f,"number")?l=c-f:w(typeof c,"string")&&w(typeof f,"string")&&(l=c.localeCompare(f)),w(a,"desc")?-l:l}),r}const Uc=new Map,Yc={updateData:(t,e)=>{e.spec&&t.setSpec(e.spec)},toggleGroup:(t,e)=>{t.toggleGroup(e.groupId,e.collapsed)},applyFilter:(t,e)=>{t.setFilter(e.filter)},clearFilter:t=>{t.setFilter(null)},sortBy:(t,e)=>{t.sortBy(e.column,e.direction)}},yv={name:"tabviz",type:"output",factory:(t,e,r)=>{let o=null;const a=Xc();return t.id&&Uc.set(t.id,a),{renderValue:i=>{a.setSpec(i),a.setDimensions(e,r),w(typeof i.zoom,"number")&&a.setZoom(i.zoom),w(typeof i.autoFit,"boolean")&&a.setAutoFit(i.autoFit),w(i.maxWidth,void 0,!1)&&a.setMaxWidth(i.maxWidth),w(i.maxHeight,void 0,!1)&&a.setMaxHeight(i.maxHeight),w(typeof i.showZoomControls,"boolean")&&a.setShowZoomControls(i.showZoomControls),t.style.height="auto",o&&zu(o),o=Ru(D,{target:t,props:{store:a}}),window.Shiny&&t.id&&_v(t.id,a)},resize:(i,s)=>{a.setDimensions(i,s)}}}};function _v(t,e){_u(()=>{Qi(()=>{var o;const r=e.selectedRowIds;(o=window.Shiny)==null||o.setInputValue(`${t}_selected`,Array.from(r),{priority:"event"})}),Qi(()=>{var o;const r=e.hoveredRowId;(o=window.Shiny)==null||o.setInputValue(`${t}_hover`,r,{priority:"event"})})})}return w(typeof window,"undefined",!1)&&window.HTMLWidgets&&window.HTMLWidgets.widget(yv),w(typeof window,"undefined",!1)&&window.Shiny&&window.Shiny.addCustomMessageHandler("tabviz-proxy",t=>{const e=Uc.get(t.id);e&&t.method in Yc&&Yc[t.method](e,t.args)}),Me.ForestPlot=D,Me.createForestStore=Xc,Object.defineProperty(Me,Symbol.toStringTag,{value:"Module"}),Me})({});
