(function(){"use strict";const Kt=[1,5,2,2.5,4,3],it=[.001,.002,.005,.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,300,500,750,1e3];function _t(t,n){return n?mn(t):yn(t)}function mn(t){if(t[0]<=0||t[1]<=0)return[.1,10];if(t[0]>=t[1])return t;let n=it[0];for(const e of it)if(e<=t[0])n=e;else break;t[0]<it[0]&&(n=Math.pow(10,Math.floor(Math.log10(t[0]))));let o=it[it.length-1];for(let e=it.length-1;e>=0&&it[e]>=t[1];e--)o=it[e];return t[1]>it[it.length-1]&&(o=Math.pow(10,Math.ceil(Math.log10(t[1])))),[n,o]}function yn(t){const n=t[1]-t[0];if(n===0)return t;if(n<0)return[t[1],t[0]];const o=Math.pow(10,Math.floor(Math.log10(n)));let e=o,i=1/0;for(const d of Kt)for(const c of[.1,1,10]){const a=d*o*c;if(a<=0)continue;const s=Math.floor(t[0]/a)*a,h=(Math.ceil(t[1]/a)*a-s)/n-1;h>=0&&h<i&&(i=h,e=a)}const r=Math.floor(t[0]/e)*e,l=Math.ceil(t[1]/e)*e;return[Math.round(r*1e10)/1e10,Math.round(l*1e10)/1e10]}function ft(t,n,o,e,i=!1){if(t&&o in t){const r=t[o];if(typeof r=="number"&&Number.isFinite(r)&&(!i||r>0))return r}return o===e&&n!=null&&Number.isFinite(n)&&(!i||n>0)?n:null}const yt=12;function $n(t){const{rows:n,config:o,scale:e,nullValue:i,forestWidth:r,pointSize:l,effects:d=[],pointCol:c,lowerCol:a,upperCol:s}=t,u=xn(n,o,e,i,d,c,a,s),f=bn(u,o,e,r,l),h=Zt(u,o,e,i);return{axisLimits:u,plotRegion:f,ticks:h}}function xn(t,n,o,e,i=[],r,l,d){const c=n.rangeMin!=null,a=n.rangeMax!=null;if(c&&a)return[n.rangeMin,n.rangeMax];const s=[],u=o==="log",f=r||"point";for(const _ of t){const v=ft(_.metadata,void 0,f,"point",u);v!=null&&s.push(v);for(const L of i){const B=ft(_.metadata,void 0,L.pointCol,"point",u);B!=null&&s.push(B)}}if(s.length===0)return o==="log"?[.1,10]:[-1,1];let h=Math.min(...s),p=Math.max(...s);(n.includeNull??!0)&&(h=Math.min(h,e),p=Math.max(p,e));const I=h,N=p;let b;if(u){const _=Math.max(h,.001),v=Math.max(p,.001);b=Math.log(v)-Math.log(_)}else b=p-h;if(b===0||!Number.isFinite(b)){const _=s[0];if(u)return _t([_/2,_*2],!0);{const v=Math.max(1,Math.abs(_)*.1);return _t([_-v,_+v],!1)}}const[C,w]=_t([h,p],u),A=n.ciClipFactor??2;let g=C,y=w;const m=[],T=[],E=l||"lower",W=d||"upper";for(const _ of t){const v=ft(_.metadata,void 0,E,"lower",u);v!=null&&m.push(v);const L=ft(_.metadata,void 0,W,"upper",u);L!=null&&T.push(L);for(const B of i){const z=ft(_.metadata,void 0,B.lowerCol,"lower",u);z!=null&&m.push(z);const V=ft(_.metadata,void 0,B.upperCol,"upper",u);V!=null&&T.push(V)}}let H,P;if(u)H=g/A,P=y*A;else{const _=y-g;H=g-_*A,P=y+_*A}let $=!1,k=!1;for(const _ of m)_>=H?g=Math.min(g,_):$=!0;for(const _ of T)_<=P?y=Math.max(y,_):k=!0;if($&&(g=Math.min(g,H)),k&&(y=Math.max(y,P)),n.symmetric===!0&&!c&&!a)if(o==="log"){const _=Math.log(e),v=Math.max(Math.abs(Math.log(Math.max(I,.001))-_),Math.abs(Math.log(N)-_));g=Math.exp(_-v),y=Math.exp(_+v)}else{const _=Math.max(Math.abs(I-e),Math.abs(N-e));g=e-_,y=e+_}let S=c?n.rangeMin:g,x=a?n.rangeMax:y;return _t([S,x],o==="log")}function bn(t,n,o,e,i){if(!(n.markerMargin??!0)||e<=0)return t;const l=e-2*yt;if(l<=0)return t;if(o==="log"){const a=Math.log(Math.max(t[0],.001)),s=Math.log(Math.max(t[1],.001)),u=s-a,f=i/2*(u/l),h=Math.min(f,.5);return[Math.exp(a-h),Math.exp(s+h)]}const d=t[1]-t[0],c=i/2*(d/l);return[t[0]-c,t[1]+c]}function Zt(t,n,o,e){const[i,r]=t,l=e>=i&&e<=r,d=(n.nullTick??!0)&&l;if(n.tickValues&&n.tickValues.length>0){let s=n.tickValues.filter(u=>u>=i&&u<=r);return d&&!s.includes(e)&&(s=[...s,e].sort((u,f)=>u-f)),s}const c=n.tickCount??5;let a=o==="log"?Nn(t,c):Mn(t,c);return d&&!a.includes(e)&&(a=[...a,e].sort((s,u)=>s-u)),a}function Mn(t,n){const[o,e]=t,i=e-o;if(i===0)return[o];const r=i/Math.max(n-1,1),l=Math.pow(10,Math.floor(Math.log10(r)));let d=l,c=1/0;for(const u of Kt){const f=u*l,h=Math.floor(i/f)+1,p=Math.abs(h-n);p<c&&(c=p,d=f);const M=u*l/10;if(M>0){const I=Math.floor(i/M)+1,N=Math.abs(I-n);N<c&&(c=N,d=M)}}const a=Math.ceil(o/d)*d,s=[];for(let u=a;u<=e+d*.001;u+=d){const f=Math.round(u*1e10)/1e10;f>=o&&f<=e&&s.push(f)}return s.length<2&&(s.includes(o)||s.unshift(o),s.includes(e)||s.push(e)),s}function Nn(t,n){const[o,e]=t,r=[.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,500,1e3].filter(c=>c>=o&&c<=e);if(r.length<=n)return r;const l=[1,.1,10,100,.5,2,5,.2,.25,1.5,3,4,20,50],d=[];for(const c of l)r.includes(c)&&d.length<n&&d.push(c);if(d.length<n){const c=r.filter(s=>!d.includes(s)),a=Math.max(1,Math.floor(c.length/(n-d.length)));for(let s=0;s<c.length&&d.length<n;s+=a)d.push(c[s])}return d.sort((c,a)=>c-a)}function Tn(t){var e,i;const n=((e=t==null?void 0:t.shapes)==null?void 0:e.lineWidth)??1.5,o=((i=t==null?void 0:t.colors)==null?void 0:i.intervalLine)??"#475569";return{width:Math.max(4,Math.round(n*3)),height:Math.max(6,Math.round(n*4)),color:o,opacity:1}}function Qt(t,n,o,e){const{width:i,height:r}=e,l=r/2;return t==="left"?`M ${n} ${o} L ${n+i} ${o-l} L ${n+i} ${o+l} Z`:`M ${n} ${o} L ${n-i} ${o-l} L ${n-i} ${o+l} Z`}const Lt={RENDERING_BUFFER:4},bt={FONT_SCALE:.8,PADDING:4,GAP:6},$t={DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:32,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800},lt={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,PT_TO_PX:96/72},U={INDENT_PER_LEVEL:12,TEXT_PADDING:10,DEFAULT_TICK_COUNT:5},En={OVERALL_ROW_HEIGHT_MULTIPLIER:1.5},Nt={MIN:60,MAX:600,LABEL_MAX:400,VISUAL_MIN:{sparkline:92,bar:100,stars:84,range:84,badge:74,forest:200,viz_bar:150,viz_boxplot:150,viz_violin:150}},Wt={CHEVRON_WIDTH:12,GAP:6,SAFETY_MARGIN:8},Jt={SPACING:6},Rt={EDGE_THRESHOLD:35,MIN_TICK_SPACING:50},wn={success:"#16a34a",warning:"#d97706",error:"#dc2626",info:"#2563eb"};function In(t,n){return n<=1?0:-((n-1)*Jt.SPACING)/2+t*Jt.SPACING}function Ft(t,n){const o=t.split(".");return o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),o.join(".")}function Bt(t){const n=Math.abs(t),o=t<0?"-":"";if(n>=1e12)throw new Error(`Cannot abbreviate value >= 1 trillion: ${t}`);if(n>=1e9){const e=n/1e9;return o+zt(e)+"B"}if(n>=1e6){const e=n/1e6;return o+zt(e)+"M"}if(n>=1e3){const e=n/1e3;return o+zt(e)+"K"}return o+Math.round(n).toString()}function zt(t){const n=Math.round(t*10)/10;return n===Math.floor(n)?n.toFixed(0):n.toFixed(1)}const An={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function Cn(t){return t.split("").map(n=>An[n]??n).join("")}function Tt(t,n){var d,c,a,s,u;if(t==null||Number.isNaN(t))return(n==null?void 0:n.naText)??"";if(n!=null&&n.percent){const{decimals:f,digits:h,multiply:p=!0,symbol:M=!0}=n.percent,I=p?t*100:t,N=h!=null?I.toPrecision(h):I.toFixed(f??1);return M?`${N}%`:N}if(((d=n==null?void 0:n.numeric)==null?void 0:d.abbreviate)&&Math.abs(t)>=1e3)return Bt(t);const e=(c=n==null?void 0:n.numeric)==null?void 0:c.digits;if(e!=null){const f=t.toPrecision(e),h=(a=n==null?void 0:n.numeric)==null?void 0:a.thousandsSep;return h&&typeof h=="string"?Ft(f,h):f}const i=(s=n==null?void 0:n.numeric)==null?void 0:s.decimals,r=(u=n==null?void 0:n.numeric)==null?void 0:u.thousandsSep;let l;return i!==void 0?l=t.toFixed(i):Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?l=Math.round(t).toString():l=t.toFixed(2),r&&typeof r=="string"&&(l=Ft(l,r)),l}function tn(t,n){const{eventsField:o,nField:e,separator:i="/",showPct:r=!1,thousandsSep:l,abbreviate:d}=n.events,c=t.metadata[o],a=t.metadata[e];if(c==null||a===void 0||a===null)return n.naText??"";const s=Number(c),u=Number(a);let f,h;d&&(s>=1e3||u>=1e3)?(f=s>=1e3?Bt(s):String(s),h=u>=1e3?Bt(u):String(u)):(f=String(s),h=String(u),l&&typeof l=="string"&&(f=Ft(f,l),h=Ft(h,l)));let p=`${f}${i}${h}`;if(r&&u>0){const M=(s/u*100).toFixed(1);p+=` (${M}%)`}return p}function nn(t,n,o,e){var d,c,a;if(t==null||Number.isNaN(t))return"";const i=((d=e==null?void 0:e.interval)==null?void 0:d.decimals)??2,r=((c=e==null?void 0:e.interval)==null?void 0:c.sep)??" ",l=(a=e==null?void 0:e.interval)==null?void 0:a.impreciseThreshold;return n==null||o===void 0||o===null||Number.isNaN(n)||Number.isNaN(o)?t.toFixed(i):l!=null&&n>0&&o/n>l?"—":`${t.toFixed(i)}${r}(${n.toFixed(i)}, ${o.toFixed(i)})`}function on(t,n){if(t==null||Number.isNaN(t))return(n==null?void 0:n.naText)??"";const o=n==null?void 0:n.pvalue,e=(o==null?void 0:o.digits)??2,i=(o==null?void 0:o.expThreshold)??.001,r=(o==null?void 0:o.abbrevThreshold)??null,l=(o==null?void 0:o.format)??"auto",d=(o==null?void 0:o.stars)??!1,c=(o==null?void 0:o.thresholds)??[.05,.01,.001];let a="";if(d&&(t<c[2]?a="***":t<c[1]?a="**":t<c[0]&&(a="*")),r!==null&&t<r)return`<${r}${a}`;if(l==="scientific"||l==="auto"&&t<i){const u=Math.floor(Math.log10(t));return`${(t/Math.pow(10,u)).toPrecision(e)}×10${Cn(u.toString())}${a}`}let s;return t>=.1?s=t.toFixed(e):t>=.01?s=t.toFixed(e+1):s=t.toFixed(e+2),`${s}${a}`}function _n(t,n){var r,l,d,c;const{type:o,field:e,options:i}=n;switch(o){case"interval":{const a=(r=i==null?void 0:i.interval)!=null&&r.point?t.metadata[i.interval.point]:t.point,s=(l=i==null?void 0:i.interval)!=null&&l.lower?t.metadata[i.interval.lower]:t.lower,u=(d=i==null?void 0:i.interval)!=null&&d.upper?t.metadata[i.interval.upper]:t.upper;return nn(a,s,u,i)}case"custom":return i!=null&&i.events?tn(t,i):String(t.metadata[e]??"");case"pvalue":return on(t.metadata[e],i);case"numeric":return Tt(t.metadata[e],i);case"percent":return Tt(t.metadata[e],i);case"sparkline":case"icon":case"stars":case"img":case"range":return"";case"badge":{const a=t.metadata[e];return a==null?"":`  ${String(a)}  `}case"bar":{if(((c=i==null?void 0:i.bar)==null?void 0:c.showLabel)===!1)return"";const a=t.metadata[e];return a==null?"":a>=100?a.toFixed(0):a>=10?a.toFixed(1):a.toFixed(2)}case"text":default:return String(t.metadata[e]??"")}}function et(t,n){const o="⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻",e="ilI1.,;:|!()[]{}' -",i="mwMW@%",r="ABCDEFGHJKLNOPQRSTUVXYZ";let l=0;for(const d of t)o.includes(d)?l+=n*.15:e.includes(d)?l+=n*.35:"×−".includes(d)?l+=n*.4:i.includes(d)?l+=n*.85:d>="0"&&d<="9"?l+=n*.6:r.includes(d)?l+=n*.68:l+=n*.55;return l}function Wn(t,n,o,e=400){if(typeof document>"u")return null;const r=document.createElement("canvas").getContext("2d");return r?(r.font=`${e} ${n} ${o}`,r.measureText(t).width):null}function Fn(t){if(!t||t.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const n=t.filter(i=>i!=null&&!Number.isNaN(i)).sort((i,r)=>i-r);if(n.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const o=n.length,e=i=>{if(o===1)return n[0];const r=(o-1)*i,l=Math.floor(r),d=Math.ceil(r);return l===d?n[l]:n[l]+(r-l)*(n[d]-n[l])};return{min:n[0],q1:e(.25),median:e(.5),q3:e(.75),max:n[o-1]}}function kn(t,n,o){if(!t||t.length===0||Number.isNaN(n)||Number.isNaN(o))return[];const e=o-n,i=n-1.5*e,r=o+1.5*e;return t.filter(l=>l!=null&&!Number.isNaN(l)&&(l<i||l>r))}function en(t){const n=Fn(t),o=kn(t,n.q1,n.q3);return{...n,outliers:o}}function Dn(t){if(!t||t.length<2)return 1;const n=t.filter(h=>h!=null&&!Number.isNaN(h)).sort((h,p)=>h-p);if(n.length<2)return 1;const o=n.length,e=n.reduce((h,p)=>h+p,0)/o,i=n.reduce((h,p)=>h+(p-e)**2,0)/(o-1),r=Math.sqrt(i),l=Math.floor((o-1)*.25),d=Math.floor((o-1)*.75),c=n[l],s=n[d]-c,f=.9*Math.min(r,s/1.34)*Math.pow(o,-.2);return Math.max(f,.001)}function Hn(t){return Math.exp(-.5*t*t)/Math.sqrt(2*Math.PI)}function Sn(t,n,o=128){if(!t||t.length===0)return{x:[],y:[]};const e=t.filter(h=>h!=null&&!Number.isNaN(h));if(e.length===0)return{x:[],y:[]};const i=n??Dn(e),r=Math.min(...e),l=Math.max(...e),d=3*i,c=r-d,s=(l+d-c)/(o-1),u=[],f=[];for(let h=0;h<o;h++){const p=c+h*s;u.push(p);let M=0;for(const I of e)M+=Hn((p-I)/i);M/=e.length*i,f.push(M)}return{x:u,y:f}}function vn(t,n){if(t.y.length===0)return t;const o=Math.max(...t.y);if(o===0)return t;const e=t.y.map(i=>i/o*n);return{x:t.x,y:e}}function kt(t,n,o,e=400){const i=Wn(t,`${n}px`,o,e);if(i!==null)return i;const r=1+Math.max(0,(e-400)/100)*.02;return et(t,n)*r}function Gn(t,n){var a,s;const o=new Map,e=K(t.theme.typography.fontSizeBase),i=t.theme.typography.headerFontScale??1.05,r=Math.round(e*i*100)/100,l=t.data.rows,d=(t.theme.spacing.cellPaddingX??10)*2,c=(t.theme.spacing.groupPadding??8)*2;for(const u of n){if(u.width!=="auto"&&u.width!==null&&u.width!==void 0)continue;let f=0;u.header&&(f=Math.max(f,et(u.header,r)));for(const M of l){if(((a=M.style)==null?void 0:a.type)==="header"||((s=M.style)==null?void 0:s.type)==="spacer")continue;const I=_n(M,u);I&&(f=Math.max(f,et(I,e)))}const h=Nt.VISUAL_MIN[u.type]??Nt.MIN,p=Math.ceil(f+d+Lt.RENDERING_BUFFER);o.set(u.id,Math.min(Nt.MAX,Math.max(h,p)))}return Pn(t.columns,o,r,c,Lt.RENDERING_BUFFER),o}function Pn(t,n,o,e,i){function r(c){return c.isGroup?c.columns.flatMap(r):[c]}function l(c){const a=n.get(c.id);return a!==void 0?a:typeof c.width=="number"?c.width:Nt.MIN}function d(c){if(c.isGroup){for(const a of c.columns)d(a);if(c.header){const a=et(c.header,o)+e+i,s=r(c),u=s.reduce((f,h)=>f+l(h),0);if(a>u&&s.length>0){const f=Math.ceil((a-u)/s.length);for(const h of s)n.set(h.id,l(h)+f)}}}}for(const c of t)d(c)}function rn(t,n,o){let e=o.filter(r=>r.groupId===t).length;const i=n.filter(r=>r.parentId===t);for(const r of i)e+=rn(r.id,n,o);return e}function sn(t){var c,a;const n=K(t.theme.typography.fontSizeBase),o=(t.theme.spacing.cellPaddingX??10)*2;let e=0;const i=new Map,r=Array.isArray(t.data.groups)?t.data.groups:[];for(const s of r)i.set(s.id,s.depth);const l=s=>s?(i.get(s)??0)+1:0;t.data.labelHeader&&(e=Math.max(e,et(t.data.labelHeader,n)));for(const s of t.data.rows)if(s.label){const u=l(s.groupId),f=((c=s.style)==null?void 0:c.indent)??0,p=(u+f)*U.INDENT_PER_LEVEL;let M=et(s.label,n)+p;if((a=s.style)!=null&&a.badge){const I=String(s.style.badge),N=n*bt.FONT_SCALE,C=et(I,N)+bt.PADDING*2;M+=bt.GAP+C}e=Math.max(e,M)}for(const s of r)if(s.label){const u=s.depth*U.INDENT_PER_LEVEL,f=et(s.label,n),p=`(${rn(s.id,r,t.data.rows)})`,M=n*.75,I=et(p,M),N=u+Wt.CHEVRON_WIDTH+Wt.GAP+f+Wt.GAP+I+Wt.SAFETY_MARGIN;e=Math.max(e,N)}const d=Math.ceil(e+o+Lt.RENDERING_BUFFER);return Math.min(Nt.LABEL_MAX,Math.max(Nt.MIN,d))}function Vt(t,n){const o=n.get(t.id);return o!==void 0?o:typeof t.width=="number"?t.width:$t.DEFAULT_COLUMN_WIDTH}function Ln(t,n,o=0){var F,q,Q,ht,It;const e=t.theme,i=e.spacing.rowHeight,r=e.spacing.padding,l=Array.isArray(t.columns)?t.columns:[],d=ln(l,"left"),c=ln(l,"right"),s=Dt(d)||Dt(c)||Dt(l)?2:1,u=e.spacing.cellPaddingY??4,p=(e.spacing.headerHeight/s+u*2)*s,M=!!((F=t.labels)!=null&&F.title),I=!!((q=t.labels)!=null&&q.subtitle),N=!!((Q=t.labels)!=null&&Q.caption),b=!!((ht=t.labels)!=null&&ht.footnote),C=M?lt.TITLE_HEIGHT:0,w=I?lt.SUBTITLE_HEIGHT:0,A=M&&I?13:0,g=C+A+w+(M||I?r:0),y=N?lt.CAPTION_HEIGHT:0,m=b?lt.FOOTNOTE_HEIGHT:0,T=y+m+(N||b?r:0),E=an(t),W=!!t.data.overall;let H=0;for(const X of E){const G=X.type==="data"&&((It=X.row.style)==null?void 0:It.type)==="spacer";H+=G?i/2:i}const P=H+(W?i*En.OVERALL_ROW_HEIGHT_MULTIPLIER:0),$=qt(l,"left"),k=qt(l,"right"),D=Xt(l).filter(X=>X.position===void 0),S=[...$,...k,...D];let x,_;if(n.columnWidths){x=new Map;for(const[X,G]of Object.entries(n.columnWidths))X!=="__label__"&&x.set(X,G);_=n.columnWidths.__label__??sn(t)}else x=Gn(t,S),_=sn(t);const v=_+$.reduce((X,G)=>X+Vt(G,x),0),L=k.reduce((X,G)=>X+Vt(G,x),0),B=D.filter(X=>X.type!=="forest").reduce((X,G)=>X+Vt(G,x),0),z=n.width??$t.DEFAULT_WIDTH,tt=S.some(X=>X.type==="forest")||t.data.includeForest,rt=v+L+B;let j;if(!tt)j=0;else if(typeof n.forestWidth=="number")j=n.forestWidth;else if(typeof t.layout.plotWidth=="number")j=t.layout.plotWidth;else{const X=z-rt-r*2;j=Math.max(X,$t.MIN_FOREST_WIDTH)}const Z=r*2+rt+j,ct=Math.max(n.width??z,Z);tt&&ct>Z&&typeof n.forestWidth!="number"&&typeof t.layout.plotWidth!="number"&&(j=ct-rt-r*2);const st=e.spacing.axisGap??12,dt=st+$t.AXIS_HEIGHT+$t.AXIS_LABEL_HEIGHT,at=g+r+p+P+dt+T+$t.BOTTOM_MARGIN;return{totalWidth:ct,totalHeight:n.height??at,tableWidth:v+L,forestWidth:j,headerHeight:p,rowHeight:i,plotHeight:P,axisHeight:$t.AXIS_HEIGHT,nullValue:o,summaryYPosition:P-i,showOverallSummary:W,headerTextHeight:g,footerTextHeight:T,titleY:r+lt.TITLE_HEIGHT-4,subtitleY:r+C+A+lt.SUBTITLE_HEIGHT-4,mainY:g+r,footerY:g+r+p+P+dt+8,axisGap:st,rowsHeight:H,autoWidths:x,labelWidth:_}}function an(t){var u;const n=t.data.rows,o=Array.isArray(t.data.groups)?t.data.groups:[];if(o.length===0)return n.map(f=>({type:"data",row:f,depth:0}));const e=new Map;for(const f of o)e.set(f.id,f);const i=new Map;for(const f of n){const h=f.groupId??null;i.has(h)||i.set(h,[]),i.get(h).push(f)}const r=new Set;for(const f of i.keys()){if(!f)continue;let h=f;for(;h;)r.add(h),h=(u=e.get(h))==null?void 0:u.parentId}function l(f){return o.filter(h=>(h.parentId??null)===f&&r.has(h.id))}function d(f){if(!f)return 0;const h=e.get(f);return h?h.depth+1:0}function c(f){var p;let h=((p=i.get(f))==null?void 0:p.length)??0;for(const M of l(f))h+=c(M.id);return h}const a=[];function s(f){if(f){const p=e.get(f);if(!p)return;const M=c(f);a.push({type:"group_header",groupId:p.id,label:p.label,depth:p.depth,rowCount:M})}for(const p of l(f))s(p.id);const h=i.get(f)??[];for(const p of h)a.push({type:"data",row:p,depth:d(p.groupId)})}return s(null),a}function Ut(t){const n=[];for(const o of t)o.isGroup?n.push(...Ut(o.columns)):n.push(o);return n}function Xt(t){const n=[];for(const o of t)o.isGroup?n.push(...Ut(o.columns)):n.push(o);return n}function qt(t,n){if(n===void 0)return Xt(t);const o=[];for(const e of t)e.position===n&&(e.isGroup?o.push(...Ut(e.columns)):o.push(e));return o}function ln(t,n){return t.filter(o=>o.position===n)}function Dt(t){return t.some(n=>n.isGroup)}function K(t){let n;return t.endsWith("rem")?n=parseFloat(t)*lt.REM_BASE:t.endsWith("px")?n=parseFloat(t):t.endsWith("pt")?n=parseFloat(t)*lt.PT_TO_PX:n=lt.DEFAULT_FONT_SIZE,Math.round(n*100)/100}function Ht(t,n,o){return o==="right"?{textX:t+n-U.TEXT_PADDING,anchor:"end"}:o==="center"?{textX:t+n/2,anchor:"middle"}:{textX:t+U.TEXT_PADDING,anchor:"start"}}function O(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function cn(t,n,o,e=0){const i=n-e*2;if(et(t,o)<=i)return t;const l="…",d=o*.55;let c=0,a=t.length;for(;c<a;){const s=Math.ceil((c+a)/2),u=t.slice(0,s);et(u,o)+d<=i?c=s:a=s-1}return c===0?l:t.slice(0,c)+l}function Rn(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function Et(t,n){const[o,e]=t,[i,r]=n,l=(r-i)/(e-o),d=c=>i+(c-o)*l;return d.domain=()=>t,d.range=()=>n,d.ticks=c=>{const a=(e-o)/(c-1),s=[];for(let u=0;u<c;u++)s.push(o+a*u);return s},d}function wt(t,n){const[o,e]=t.map(s=>Math.max(s,.001)),[i,r]=n,l=Math.log10(o),d=Math.log10(e),c=(r-i)/(d-l),a=s=>{const u=Math.log10(Math.max(s,.001));return i+(u-l)*c};return a.domain=()=>[o,e],a.range=()=>n,a.ticks=s=>{const u=[],f=Math.floor(Math.log10(o)),h=Math.ceil(Math.log10(e));for(let p=f;p<=h;p++){const M=Math.pow(10,p);for(const I of[1,2,5]){const N=M*I;N>=o&&N<=e&&u.push(N)}}return u.length>0?u:[o,e]},a}function Bn(t,n,o,e){const i=o.scale==="log",r=yt,l=Math.max(n-yt,r+50);if(e!=null&&e.xDomain){const u=e.xDomain,f=e.clipBounds??u,h=Zt(f,t.theme.axis,o.scale,o.nullValue);return i?{scale:wt([Math.max(u[0],.01),Math.max(u[1],.02)],[r,l]),clipBounds:f,ticks:h}:{scale:Et(u,[r,l]),clipBounds:f,ticks:h}}const d=$n({rows:t.data.rows,config:t.theme.axis,scale:o.scale,nullValue:o.nullValue,forestWidth:n,pointSize:t.theme.shapes.pointSize,effects:o.effects,pointCol:o.pointCol,lowerCol:o.lowerCol,upperCol:o.upperCol}),{plotRegion:c,axisLimits:a,ticks:s}=d;return i?{scale:wt([Math.max(c[0],.01),Math.max(c[1],.02)],[r,l]),clipBounds:a,ticks:s}:{scale:Et(c,[r,l]),clipBounds:a,ticks:s}}function zn(t,n,o){var r,l,d,c;const e=[],i=o.spacing.padding;if((r=t.labels)!=null&&r.title){const a=K(o.typography.fontSizeLg);e.push(`<text x="${i}" y="${n.titleY}"
      font-family="${o.typography.fontFamily}"
      font-size="${a}px"
      font-weight="${o.typography.fontWeightBold}"
      fill="${o.colors.foreground}">${O(t.labels.title)}</text>`)}if((l=t.labels)!=null&&l.subtitle){const a=K(o.typography.fontSizeBase);e.push(`<text x="${i}" y="${n.subtitleY}"
      font-family="${o.typography.fontFamily}"
      font-size="${a}px"
      font-weight="${o.typography.fontWeightNormal}"
      fill="${o.colors.secondary}">${O(t.labels.subtitle)}</text>`)}if((d=t.labels)!=null&&d.title&&((c=t.labels)!=null&&c.subtitle)){const s=K(o.typography.fontSizeBase)*.75,u=n.subtitleY-s-6;e.push(`<line x1="${i}" x2="${n.totalWidth-i}"
      y1="${u}" y2="${u}"
      stroke="${o.colors.border}" stroke-width="1" opacity="0.3"/>`)}return e.join(`
`)}function Vn(t,n,o){var d,c,a,s;const e=[],i=o.spacing.padding;let r=n.footerY;if(!!((d=t.labels)!=null&&d.caption)||!!((c=t.labels)!=null&&c.footnote)){const u=n.footerY-8;e.push(`<line x1="${i}" x2="${n.totalWidth-i}"
      y1="${u}" y2="${u}"
      stroke="${o.colors.border}" stroke-width="1"/>`)}if((a=t.labels)!=null&&a.caption){const u=K(o.typography.fontSizeSm);e.push(`<text x="${i}" y="${r}"
      font-family="${o.typography.fontFamily}"
      font-size="${u}px"
      font-weight="${o.typography.fontWeightNormal}"
      fill="${o.colors.secondary}">${O(t.labels.caption)}</text>`),r+=lt.CAPTION_HEIGHT}if((s=t.labels)!=null&&s.footnote){const u=K(o.typography.fontSizeSm);e.push(`<text x="${i}" y="${r}"
      font-family="${o.typography.fontFamily}"
      font-size="${u}px"
      font-weight="${o.typography.fontWeightNormal}"
      font-style="italic"
      fill="${o.colors.muted}">${O(t.labels.footnote)}</text>`)}return e.join(`
`)}function Un(t,n,o,e,i,r,l,d){const c=[],a=n+1,s=d.groupHeaders;let u,f,h,p,M;if(a===1?(u=K((s==null?void 0:s.level1FontSize)??d.typography.fontSizeBase),f=(s==null?void 0:s.level1FontWeight)??d.typography.fontWeightBold,h=(s==null?void 0:s.level1Italic)??!1,p=(s==null?void 0:s.level1Background)??null,M=(s==null?void 0:s.level1BorderBottom)??!1):a===2?(u=K((s==null?void 0:s.level2FontSize)??d.typography.fontSizeBase),f=(s==null?void 0:s.level2FontWeight)??d.typography.fontWeightMedium,h=(s==null?void 0:s.level2Italic)??!0,p=(s==null?void 0:s.level2Background)??null,M=(s==null?void 0:s.level2BorderBottom)??!1):(u=K((s==null?void 0:s.level3FontSize)??d.typography.fontSizeBase),f=(s==null?void 0:s.level3FontWeight)??d.typography.fontWeightNormal,h=(s==null?void 0:s.level3Italic)??!1,p=(s==null?void 0:s.level3Background)??null,M=(s==null?void 0:s.level3BorderBottom)??!1),!p){const w=d.colors.primary,A=a===1?.15:a===2?.1:.06,g=w.replace("#",""),y=parseInt(g.substring(0,2),16),m=parseInt(g.substring(2,4),16),T=parseInt(g.substring(4,6),16);p=`rgba(${y}, ${m}, ${T}, ${A})`}const I=i+r/2,N=n*((s==null?void 0:s.indentPerLevel)??U.INDENT_PER_LEVEL);c.push(`<rect x="${e}" y="${i}"
    width="${l}" height="${r}"
    fill="${p}"/>`),M&&c.push(`<line x1="${e}" x2="${e+l}" y1="${i+r}" y2="${i+r}"
      stroke="${d.colors.border}" stroke-width="1" opacity="0.5"/>`);const b=h?' font-style="italic"':"",C=e+U.TEXT_PADDING+N;if(c.push(`<text class="cell-text" x="${C}" y="${I}"
    font-family="${d.typography.fontFamily}"
    font-size="${u}px"
    font-weight="${f}"${b}
    fill="${d.colors.foreground}">${O(t)}</text>`),o>0){const w=kt(t,u,d.typography.fontFamily,f),A=C+w+6,g=K(d.typography.fontSizeSm??"0.75rem");c.push(`<text class="cell-text" x="${A}" y="${I}"
      font-family="${d.typography.fontFamily}"
      font-size="${g}px"
      font-weight="${d.typography.fontWeightNormal}"
      fill="${d.colors.muted}">(${o})</text>`)}return c.join(`
`)}function Xn(t,n){const o=new Map;for(const e of n)if(e.type==="bar"){let i=0;for(const r of t){const l=r.metadata[e.field];typeof l=="number"&&l>i&&(i=l)}o.set(e.field,i>0?i:1)}return o}function qn(t,n){var e,i,r,l,d,c,a,s,u,f,h,p,M,I,N,b,C,w,A;if(n.type==="interval"){const g=(i=(e=n.options)==null?void 0:e.interval)!=null&&i.point?t.metadata[n.options.interval.point]:t.point,y=(l=(r=n.options)==null?void 0:r.interval)!=null&&l.lower?t.metadata[n.options.interval.lower]:t.lower,m=(c=(d=n.options)==null?void 0:d.interval)!=null&&c.upper?t.metadata[n.options.interval.upper]:t.upper;return nn(g,y,m,n.options)}if(n.type==="numeric"){const g=t.metadata[n.field];return typeof g=="number"?Tt(g,n.options):((a=n.options)==null?void 0:a.naText)??""}if(n.type==="custom"&&((s=n.options)!=null&&s.events))return tn(t,n.options);if(n.type==="pvalue"){const g=t.metadata[n.field];return typeof g!="number"?((u=n.options)==null?void 0:u.naText)??"":on(g,n.options)}if(n.type==="icon"){const g=t.metadata[n.field];if(g==null)return"";const y=String(g),m=(h=(f=n.options)==null?void 0:f.icon)==null?void 0:h.mapping;return m&&y in m?m[y]:y}if(n.type==="badge"){const g=t.metadata[n.field];return g!=null?String(g):""}if(n.type==="stars"){const g=t.metadata[n.field];if(typeof g!="number")return"";const y=((M=(p=n.options)==null?void 0:p.stars)==null?void 0:M.maxStars)??5,m=Math.max(0,Math.min(y,g)),T=Math.floor(m),E=y-T;return"★".repeat(T)+"☆".repeat(E)}if(n.type==="img")return((N=(I=n.options)==null?void 0:I.img)==null?void 0:N.fallback)??"[IMG]";if(n.type==="reference"){const g=t.metadata[n.field];if(g==null)return"";const y=String(g),m=((C=(b=n.options)==null?void 0:b.reference)==null?void 0:C.maxChars)??30;return y.length<=m?y:y.substring(0,m)+"..."}if(n.type==="range"){const g=(w=n.options)==null?void 0:w.range;if(!g)return"";const y=t.metadata[g.minField],m=t.metadata[g.maxField],T=g.separator??" – ",E=g.decimals,W=H=>typeof H!="number"?"":E==null?Number.isInteger(H)?String(H):H.toFixed(1):H.toFixed(E);return y===null&&m===null?"":y===null?W(m):m===null?W(y):`${W(y)}${T}${W(m)}`}const o=t.metadata[n.field];return o!=null?String(o):((A=n.options)==null?void 0:A.naText)??""}function Yn(t,n,o,e,i){const r=t.filter(s=>Number.isFinite(s));if(r.length===0)return"";if(r.length===1){const s=n+e/2,u=o+i/2;return`M${s.toFixed(1)},${u.toFixed(1)}`}const l=Math.min(...r),c=Math.max(...r)-l||1;return`M${r.map((s,u)=>{const f=n+u/(r.length-1)*e,h=o+i-(s-l)/c*i;return`${f.toFixed(1)},${h.toFixed(1)}`}).join("L")}`}function On(t,n,o,e,i,r=[],l,d=0,c=1/0,a,s=!1){var y;let u;if(r.length===0){const m=!s||t.point!=null&&t.point>0?t.point:null,T=!s||t.lower!=null&&t.lower>0?t.lower:null,E=!s||t.upper!=null&&t.upper>0?t.upper:null;u=[{point:m,lower:T,upper:E,color:null,shape:null,opacity:null}]}else u=r.map(m=>({point:ft(t.metadata,t.point,m.pointCol,"point",s),lower:ft(t.metadata,t.lower,m.lowerCol,"lower",s),upper:ft(t.metadata,t.upper,m.upperCol,"upper",s),color:m.color??null,shape:m.shape??null,opacity:m.opacity??null}));const f=u.filter(m=>m.point!=null&&!Number.isNaN(m.point)&&m.lower!=null&&!Number.isNaN(m.lower)&&m.upper!=null&&!Number.isNaN(m.upper));if(f.length===0)return"";const h=e.shapes.pointSize,p=e.shapes.lineWidth,M=e.colors.intervalLine,I=((y=t.style)==null?void 0:y.type)==="summary",b=e.shapes.summaryHeight/2;function C(m){var E;if(m&&((E=t.markerStyle)==null?void 0:E.size)!=null)return h*t.markerStyle.size;const T=l?t.metadata[l]:void 0;if(T){const W=.5+Math.sqrt(T/100)*1.5;return Math.min(Math.max(h*W,3),h*2.5)}return h}function w(m,T){const E=T===0,W=t.markerStyle,H=e.shapes.effectColors,P=e.shapes.markerShapes,$=["square","circle","diamond","triangle"];let k;E&&(W!=null&&W.color)?k=W.color:m.color?k=m.color:H&&H.length>0?k=H[T%H.length]:k=e.colors.interval??e.colors.primary??"#2563eb";let D;E&&(W!=null&&W.shape)?D=W.shape:m.shape?D=m.shape:P&&P.length>0?D=P[T%P.length]:D=$[T%$.length];let S;return E&&(W==null?void 0:W.opacity)!=null?S=W.opacity:m.opacity!=null?S=m.opacity:S=1,{color:k,shape:D,opacity:S}}function A(m,T,E,W){const{color:H,shape:P,opacity:$}=W,k=$<1?` fill-opacity="${$}"`:"";switch(P){case"circle":return`<circle cx="${m}" cy="${T}" r="${E}" fill="${H}"${k}/>`;case"diamond":return`<polygon points="${[`${m},${T-E}`,`${m+E},${T}`,`${m},${T+E}`,`${m-E},${T}`].join(" ")}" fill="${H}"${k}/>`;case"triangle":return`<polygon points="${[`${m},${T-E}`,`${m+E},${T+E}`,`${m-E},${T+E}`].join(" ")}" fill="${H}"${k}/>`;default:return`<rect x="${m-E}" y="${T-E}" width="${E*2}" height="${E*2}" fill="${H}"${k}/>`}}const g=[];return f.forEach((m,T)=>{const E=n+In(T,f.length),W=o(m.lower),H=o(m.upper),P=o(m.point),$=w(m,T),k=C(T===0),D=M;if(I){const S=$.opacity<1?` fill-opacity="${$.opacity}"`:"",x=[`${W},${E}`,`${P},${E-b}`,`${H},${E}`,`${P},${E+b}`].join(" ");g.push(`
        <g class="interval effect-${T} summary">
          <polygon points="${x}"
            fill="${$.color}"${S} stroke="${e.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else{const S=d+yt,x=d+c-yt,_=a?m.lower<a[0]:W<S,v=a?m.upper>a[1]:H>x;let L,B;if(a){const st=Math.max(a[0],Math.min(a[1],m.lower)),dt=Math.max(a[0],Math.min(a[1],m.upper));L=o(st),B=o(dt)}else L=Math.max(S,Math.min(x,W)),B=Math.max(S,Math.min(x,H));const z=Tn(e),V=z.height/2,tt=a?o(a[0]):S,rt=a?o(a[1]):x;let j="";_?j=`<path d="${Qt("left",tt,E,z)}" fill="${z.color}"/>`:j=`<line x1="${L}" x2="${L}" y1="${E-V}" y2="${E+V}" stroke="${D}" stroke-width="${p}"/>`;let Z="";v?Z=`<path d="${Qt("right",rt,E,z)}" fill="${z.color}"/>`:Z=`<line x1="${B}" x2="${B}" y1="${E-V}" y2="${E+V}" stroke="${D}" stroke-width="${p}"/>`;const ct=a?o(Math.max(a[0],Math.min(a[1],m.point))):Math.max(S,Math.min(x,P));g.push(`
        <g class="interval effect-${T}">
          <line x1="${L}" x2="${B}" y1="${E}" y2="${E}"
            stroke="${D}" stroke-width="${p}"/>
          ${j}
          ${Z}
          ${A(ct,E,k,$)}
        </g>`)}}),g.join("")}function jn(t,n,o,e,i,r,l,d){const a=d.shapes.summaryHeight/2,[s,u]=i.domain().map(A=>i(A)),f=Math.min(s,u),h=Math.max(s,u),p=i(n),M=i(t),I=i(o),N=r+Math.max(f,Math.min(h,p)),b=r+Math.max(f,Math.min(h,M)),C=r+Math.max(f,Math.min(h,I));return`<polygon points="${[`${N},${e}`,`${b},${e-a}`,`${C},${e}`,`${b},${e+a}`].join(" ")}"
    fill="${d.colors.summaryFill}"
    stroke="${d.colors.summaryBorder}"
    stroke-width="1"/>`}function Kn(t,n,o,e,i,r,l,d){const c=[],a=r.effects,s=a.length;if(!a.some(N=>{const b=t.metadata[N.value];return b!=null&&!Number.isNaN(b)}))return"";const f=o*.7,h=s>1?2:0,p=(f-h*(s-1))/s,M=Math.max(4,p),I=d.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"];return a.forEach((N,b)=>{const C=t.metadata[N.value];if(C==null||Number.isNaN(C))return;const w=n-f/2+b*(M+h),A=e+l(Math.min(0,C)),g=Math.abs(l(C)-l(0)),y=N.color??I[b%I.length],m=N.opacity??.85;c.push(`<rect
      x="${A}" y="${w}"
      width="${Math.max(1,g)}" height="${M}"
      fill="${y}" fill-opacity="${m}" rx="2"
      class="viz-bar-segment"/>`)}),c.join(`
`)}function Zn(t,n,o,e,i,r,l,d){const c=[],a=r.effects,s=a.length,u=a.map(b=>{if(b.data){const C=t.metadata[b.data];return!C||!Array.isArray(C)||C.length===0?null:en(C)}if(b.min&&b.q1&&b.median&&b.q3&&b.max){const C=t.metadata[b.min],w=t.metadata[b.q1],A=t.metadata[b.median],g=t.metadata[b.q3],y=t.metadata[b.max];if([C,w,A,g,y].some(T=>T==null||Number.isNaN(T)))return null;let m=[];if(b.outliers){const T=t.metadata[b.outliers];T&&Array.isArray(T)&&(m=T)}return{min:C,q1:w,median:A,q3:g,max:y,outliers:m}}return null});if(!u.some(b=>b!==null))return"";const h=o*.7,p=s>1?2:0,M=Math.max(8,(h-(s-1)*p)/s),I=d.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],N=d.colors.foreground??"#1a1a1a";return a.forEach((b,C)=>{const w=u[C];if(!w)return;const A=n-h/2+C*(M+p),g=A+M/2,y=b.color??I[C%I.length],m=b.fillOpacity??.7;c.push(`<line
      x1="${e+l(w.min)}" x2="${e+l(w.q1)}"
      y1="${g}" y2="${g}"
      stroke="${N}" stroke-width="1"/>`),c.push(`<line
      x1="${e+l(w.min)}" x2="${e+l(w.min)}"
      y1="${g-M/4}" y2="${g+M/4}"
      stroke="${N}" stroke-width="1"/>`),c.push(`<line
      x1="${e+l(w.q3)}" x2="${e+l(w.max)}"
      y1="${g}" y2="${g}"
      stroke="${N}" stroke-width="1"/>`),c.push(`<line
      x1="${e+l(w.max)}" x2="${e+l(w.max)}"
      y1="${g-M/4}" y2="${g+M/4}"
      stroke="${N}" stroke-width="1"/>`);const T=Math.max(2,l(w.q3)-l(w.q1));if(c.push(`<rect
      x="${e+l(w.q1)}" y="${A}"
      width="${T}" height="${M}"
      fill="${y}" fill-opacity="${m}"
      stroke="${N}" stroke-width="1"/>`),c.push(`<line
      x1="${e+l(w.median)}" x2="${e+l(w.median)}"
      y1="${A}" y2="${A+M}"
      stroke="${N}" stroke-width="2"/>`),r.showOutliers!==!1&&w.outliers.length>0)for(const E of w.outliers)c.push(`<circle
          cx="${e+l(E)}" cy="${g}"
          r="2.5"
          fill="none" stroke="${y}" stroke-width="1.5"/>`)}),c.join(`
`)}function Qn(t,n,o,e,i,r,l,d){const c=[],a=r.effects,s=a.length,u=a.map(w=>{const A=t.metadata[w.data];return!A||!Array.isArray(A)||A.length<2?null:Sn(A,r.bandwidth)}),f=a.map(w=>{const A=t.metadata[w.data];if(!A||!Array.isArray(A)||A.length<2)return null;const g=A.filter(T=>T!=null&&!Number.isNaN(T)).sort((T,E)=>T-E);if(g.length===0)return null;const y=g.length,m=T=>{if(y===1)return g[0];const E=(y-1)*T,W=Math.floor(E),H=Math.ceil(E);return W===H?g[W]:g[W]+(E-W)*(g[H]-g[W])};return{q1:m(.25),median:m(.5),q3:m(.75)}});if(!u.some(w=>w!==null))return"";const p=o*.8,M=s>1?2:0,I=Math.max(10,(p-(s-1)*M)/s),N=I/2,b=d.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],C=d.colors.foreground??"#1a1a1a";return a.forEach((w,A)=>{const g=u[A],y=f[A];if(!g||g.x.length<2)return;const m=n-p/2+I/2+A*(I+M),T=w.color??b[A%b.length],E=w.fillOpacity??.5,W=vn(g,N),H=[];for(let P=0;P<W.x.length;P++){const $=e+l(W.x[P]),k=m-W.y[P];H.push(P===0?`M ${$} ${k}`:`L ${$} ${k}`)}for(let P=W.x.length-1;P>=0;P--){const $=e+l(W.x[P]),k=m+W.y[P];H.push(`L ${$} ${k}`)}if(H.push("Z"),c.push(`<path
      d="${H.join(" ")}"
      fill="${T}" fill-opacity="${E}"
      stroke="${C}" stroke-width="0.5"/>`),r.showMedian!==!1&&y){const P=e+l(y.median);c.push(`<line
        x1="${P}" x2="${P}"
        y1="${m-N*.6}" y2="${m+N*.6}"
        stroke="${C}" stroke-width="2"/>`)}if(r.showQuartiles&&y){const P=e+l(y.q1),$=e+l(y.q3);c.push(`<line
        x1="${P}" x2="${P}"
        y1="${m-N*.4}" y2="${m+N*.4}"
        stroke="${C}" stroke-width="1" stroke-dasharray="2,2"/>`),c.push(`<line
        x1="${$}" x2="${$}"
        y1="${m-N*.4}" y2="${m+N*.4}"
        stroke="${C}" stroke-width="1" stroke-dasharray="2,2"/>`)}}),c.join(`
`)}function Jn(t,n,o){var d,c;const e=n.scale==="log",i=yt;let r=(d=n.axisRange)==null?void 0:d[0],l=(c=n.axisRange)==null?void 0:c[1];if(r==null||l==null){const a=[];for(const s of t)for(const u of n.effects){const f=s.metadata[u.value];f!=null&&!Number.isNaN(f)&&a.push(f)}a.length>0?(r=r??Math.min(0,...a),l=l??Math.max(...a)*1.1):(r=r??0,l=l??100)}return e?wt([Math.max(.01,r),l],[i,o-i]):Et([r,l],[i,o-i])}function to(t,n,o){var d,c;const e=n.scale==="log",i=yt;let r=(d=n.axisRange)==null?void 0:d[0],l=(c=n.axisRange)==null?void 0:c[1];if(r==null||l==null){const a=[];for(const s of t)for(const u of n.effects)if(u.data){const f=s.metadata[u.data];if(f&&Array.isArray(f)){const h=en(f);a.push(h.min,h.max),n.showOutliers!==!1&&a.push(...h.outliers)}}else if(u.min&&u.max){const f=s.metadata[u.min],h=s.metadata[u.max];f!=null&&!Number.isNaN(f)&&a.push(f),h!=null&&!Number.isNaN(h)&&a.push(h)}if(a.length>0){const s=Math.min(...a),u=Math.max(...a),f=u-s;r=r??s-f*.05,l=l??u+f*.05}else r=r??0,l=l??100}return e?wt([Math.max(.01,r),l],[i,o-i]):Et([r,l],[i,o-i])}function no(t,n,o){var d,c;const e=n.scale==="log",i=yt;let r=(d=n.axisRange)==null?void 0:d[0],l=(c=n.axisRange)==null?void 0:c[1];if(r==null||l==null){const a=[];for(const s of t)for(const u of n.effects){const f=s.metadata[u.data];f&&Array.isArray(f)&&a.push(...f.filter(h=>h!=null&&!Number.isNaN(h)))}if(a.length>0){r=r??Math.min(...a),l=l??Math.max(...a);const s=(l??0)-(r??0);r=(r??0)-s*.1,l=(l??0)+s*.1}else r=r??0,l=l??100}return e?wt([Math.max(.01,r),l],[i,o-i]):Et([r,l],[i,o-i])}function Yt(t,n,o,e,i,r,l){const d=[],c=K(o.typography.fontSizeSm),a=Rt.EDGE_THRESHOLD,s=I=>I<a?"start":I>r-a?"end":"middle",u=I=>I<a?2:I>r-a?-2:0;d.push(`<line x1="${i}" x2="${i+r}"
    y1="0" y2="0" stroke="${o.colors.border}" stroke-width="1"/>`);const f=t.domain(),h=5,p=[],M=f[1]-f[0];for(let I=0;I<=h;I++)p.push(f[0]+M*I/h);for(const I of p){const N=t(I),b=i+N,C=s(N),w=u(N),A=Tt(I);d.push(`<line x1="${b}" x2="${b}" y1="0" y2="4" stroke="${o.colors.border}" stroke-width="1"/>`),d.push(`<text x="${b+w}" y="14"
      text-anchor="${C}"
      font-family="${o.typography.fontFamily}"
      font-size="${c}px"
      font-weight="${o.typography.fontWeightNormal}"
      fill="${o.colors.foreground}">${A}</text>`)}return e&&d.push(`<text x="${i+r/2}" y="28"
      text-anchor="middle"
      font-family="${o.typography.fontFamily}"
      font-size="${c}px"
      font-weight="${o.typography.fontWeightMedium}"
      fill="${o.colors.foreground}">${O(e)}</text>`),d.join(`
`)}function oo(t,n,o,e,i,r,l=1,d){const c=[],a=typeof o.axis.tickCount=="number"?o.axis.tickCount:U.DEFAULT_TICK_COUNT,s=so(t,a,o,l,r,d),u=K(o.typography.fontSizeSm),f=Rt.EDGE_THRESHOLD,h=M=>M<f?"start":M>r-f?"end":"middle",p=M=>M<f?2:M>r-f?-2:0;c.push(`<line x1="${i}" x2="${i+r}"
    y1="0" y2="0" stroke="${o.colors.border}" stroke-width="1"/>`);for(const M of s){const I=t(M),N=i+I,b=h(I),C=p(I);c.push(`<line x1="${N}" x2="${N}" y1="0" y2="4"
      stroke="${o.colors.border}" stroke-width="1"/>`),c.push(`<text x="${N+C}" y="16" text-anchor="${b}"
      font-family="${o.typography.fontFamily}"
      font-size="${u}px"
      font-weight="${o.typography.fontWeightNormal}"
      fill="${o.colors.secondary}">${Rn(M)}</text>`)}return e&&c.push(`<text x="${i+r/2}" y="28"
      text-anchor="middle"
      font-family="${o.typography.fontFamily}"
      font-size="${u}px"
      font-weight="${o.typography.fontWeightMedium}"
      fill="${o.colors.secondary}">${O(e)}</text>`),`<g transform="translate(0, ${n.mainY+n.headerHeight+n.rowsHeight+n.axisGap})">${c.join(`
`)}</g>`}function eo(t,n,o,e,i,r,l,d,c,a){const s=[],u=K(r.typography.fontSizeBase),f=r.typography.headerFontScale??1.05,h=Math.round(u*f*100)/100,p=r.typography.fontWeightBold,M=r.typography.fontWeightBold,I=Dt(t),N=(b,C)=>b+C/2;if(I){const b=i/2,C=i/2;let w=o;s.push(`<text class="cell-text" x="${w+U.TEXT_PADDING}" y="${N(e,i)}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${p}"
      fill="${r.colors.foreground}">${O(l)}</text>`),w+=d;const A=[];for(const g of t)if(g.isGroup){const y=g.columns.reduce((T,E)=>E.isGroup?T+E.columns.reduce((W,H)=>W+a(H),0):T+a(E),0),m=w+y/2;s.push(`<text class="cell-text" x="${m}" y="${N(e,b)}"
          font-family="${r.typography.fontFamily}"
          font-size="${h}px"
          font-weight="${M}"
          text-anchor="middle"
          fill="${r.colors.foreground}">${O(g.header)}</text>`),A.push({x1:w,x2:w+y}),w+=y}else{const y=a(g),m=g.headerAlign??g.align,{textX:T,anchor:E}=Ht(w,y,m),W=cn(g.header,y,h,U.TEXT_PADDING);s.push(`<text class="cell-text" x="${T}" y="${N(e,i)}"
          font-family="${r.typography.fontFamily}"
          font-size="${h}px"
          font-weight="${p}"
          text-anchor="${E}"
          fill="${r.colors.foreground}">${O(W)}</text>`),w+=y}for(const g of A)s.push(`<line x1="${g.x1}" x2="${g.x2}"
        y1="${e+b}" y2="${e+b}"
        stroke="${r.colors.border}" stroke-width="1"/>`);w=o+d;for(const g of t)if(g.isGroup){for(const y of g.columns)if(!y.isGroup){const m=a(y),T=y.headerAlign??y.align,{textX:E,anchor:W}=Ht(w,m,T);s.push(`<text class="cell-text" x="${E}" y="${N(e+b,C)}"
              font-family="${r.typography.fontFamily}"
              font-size="${h}px"
              font-weight="${p}"
              text-anchor="${W}"
              fill="${r.colors.foreground}">${O(y.header)}</text>`),w+=m}}else w+=a(g)}else{let b=o;s.push(`<text class="cell-text" x="${b+U.TEXT_PADDING}" y="${N(e,i)}"
      font-family="${r.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${p}"
      fill="${r.colors.foreground}">${O(l)}</text>`),b+=d;for(const C of n){const w=a(C),A=C.headerAlign??C.align,{textX:g,anchor:y}=Ht(b,w,A),m=cn(C.header,w,h,U.TEXT_PADDING);s.push(`<text class="cell-text" x="${g}" y="${N(e,i)}"
        font-family="${r.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${p}"
        text-anchor="${y}"
        fill="${r.colors.foreground}">${O(m)}</text>`),b+=w}}return s.join(`
`)}function ro(t,n,o,e,i,r,l,d,c,a,s,u){var C,w,A,g,y,m,T,E,W,H,P,$,k,D,S,x,_,v,L,B,z,V,tt,rt,j,Z,ct,st,dt;const f=[],h=K(r.typography.fontSizeBase),p=e+i/2,M=d*U.INDENT_PER_LEVEL+(((C=t.style)==null?void 0:C.indent)??0)*U.INDENT_PER_LEVEL,I=(w=t.style)!=null&&w.bold||(A=t.style)!=null&&A.emphasis?r.typography.fontWeightBold:r.typography.fontWeightNormal,N=(g=t.style)!=null&&g.italic?"italic":"normal";let b=r.colors.foreground;if((y=t.style)!=null&&y.color?b=t.style.color:(m=t.style)!=null&&m.muted?b=r.colors.muted:(T=t.style)!=null&&T.accent&&(b=r.colors.accent),f.push(`<text class="cell-text" x="${o+U.TEXT_PADDING+M}" y="${p}"
    font-family="${r.typography.fontFamily}"
    font-size="${h}px"
    font-weight="${I}"
    font-style="${N}"
    fill="${b}">${O(t.label)}</text>`),(E=t.style)!=null&&E.badge){const at=String(t.style.badge),F=h*bt.FONT_SCALE,q=F+bt.PADDING*2,Q=kt(t.label,h,r.typography.fontFamily,I),ht=o+U.TEXT_PADDING+M+Q+bt.GAP,X=kt(at,F,r.typography.fontFamily,r.typography.fontWeightBold)+bt.PADDING*2,G=e+(i-q)/2;f.push(`<rect x="${ht}" y="${G}" width="${X}" height="${q}"
      rx="3" fill="${r.colors.primary}" opacity="0.15"/>`),f.push(`<text class="cell-text" x="${ht+X/2}" y="${G+q/2}"
      text-anchor="middle"
      font-family="${r.typography.fontFamily}"
      font-size="${F}px"
      font-weight="${r.typography.fontWeightBold}"
      fill="${r.colors.primary}">${O(at)}</text>`)}for(let at=0;at<n.length;at++){const F=n[at],q=u[at],Q=s(F);if(F.type==="forest"||F.type==="viz_bar"||F.type==="viz_boxplot"||F.type==="viz_violin")continue;const ht=qn(t,F),{textX:It,anchor:X}=Ht(q,Q,F.align);if(F.type==="bar"&&typeof t.metadata[F.field]=="number"){const G=t.metadata[F.field],R=c.get(F.field),nt=((H=(W=F.options)==null?void 0:W.bar)==null?void 0:H.maxValue)??R??100,J=(($=(P=F.options)==null?void 0:P.bar)==null?void 0:$.color)??r.colors.primary,Y=r.shapes.pointSize*2,gt=Q-U.TEXT_PADDING*2-50,ot=Math.min(G/nt*gt,gt),ut=t.style,mt=ut!=null&&ut.bold||ut!=null&&ut.emphasis?r.typography.fontWeightBold:r.typography.fontWeightNormal;f.push(`<rect x="${q+U.TEXT_PADDING}" y="${e+i/2-Y/2}"
        width="${Math.max(0,ot)}" height="${Y}"
        fill="${J}" opacity="0.7" rx="2"/>`),f.push(`<text class="cell-text" x="${q+Q-U.TEXT_PADDING}" y="${p}"
        font-family="${r.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${mt}"
        text-anchor="end"
        fill="${r.colors.foreground}">${Tt(G)}</text>`)}else if(F.type==="sparkline"&&Array.isArray(t.metadata[F.field])){let G=t.metadata[F.field];Array.isArray(G[0])&&(G=G[0]);const R=((D=(k=F.options)==null?void 0:k.sparkline)==null?void 0:D.height)??16,nt=((x=(S=F.options)==null?void 0:S.sparkline)==null?void 0:x.color)??r.colors.primary,J=U.TEXT_PADDING*2,Y=Yn(G,q+U.TEXT_PADDING,e+i/2-R/2,Q-J,R);f.push(`<path d="${Y}" fill="none" stroke="${nt}" stroke-width="1.5"/>`)}else if(F.type==="badge"){const G=t.metadata[F.field];if(G!=null){const R=String(G),nt=h*.85,J=nt+8,Y=(v=(_=F.options)==null?void 0:_.badge)==null?void 0:v.variants,pt=(B=(L=F.options)==null?void 0:L.badge)==null?void 0:B.colors;let gt=r.colors.primary,ot=r.colors.primary;if(pt&&R in pt)gt=pt[R],ot=pt[R];else if(Y&&R in Y){const Ot=Y[R];gt={default:r.colors.primary,...wn,muted:r.colors.muted}[Ot]??r.colors.primary,ot=gt}const mt=kt(R,nt,r.typography.fontFamily,r.typography.fontWeightBold)+12,At=F.align==="right"?q+Q-U.TEXT_PADDING-mt:F.align==="center"?q+(Q-mt)/2:q+U.TEXT_PADDING,St=e+(i-J)/2;f.push(`<rect x="${At}" y="${St}" width="${mt}" height="${J}"
          rx="${J/2}" fill="${gt}" opacity="0.15"/>`),f.push(`<text class="cell-text" x="${At+mt/2}" y="${St+J/2}"
          text-anchor="middle"
          font-family="${r.typography.fontFamily}"
          font-size="${nt}px"
          font-weight="${r.typography.fontWeightBold}"
          fill="${ot}">${O(R)}</text>`)}}else if(F.type==="stars"){const G=t.metadata[F.field];if(typeof G=="number"){const R=((V=(z=F.options)==null?void 0:z.stars)==null?void 0:V.maxStars)??5,nt=((rt=(tt=F.options)==null?void 0:tt.stars)==null?void 0:rt.color)??"#f59e0b",J=((Z=(j=F.options)==null?void 0:j.stars)==null?void 0:Z.emptyColor)??"#d1d5db",Y=Math.max(0,Math.min(R,G)),pt=Math.floor(Y),gt=((st=(ct=F.options)==null?void 0:ct.stars)==null?void 0:st.halfStars)&&Y-pt>=.5,ot=12,ut=2,mt=R*ot+(R-1)*ut;let At=F.align==="right"?q+Q-U.TEXT_PADDING-mt:F.align==="center"?q+(Q-mt)/2:q+U.TEXT_PADDING;const St=e+(i-ot)/2,Ot=(xt,vt,jt)=>{const Gt=jt/2,Pt=Gt*.4;let fn="";for(let Ct=0;Ct<5;Ct++){const dn=(Ct*72-90)*Math.PI/180,hn=(Ct*72+36-90)*Math.PI/180,pn=xt+Gt*Math.cos(dn),gn=vt+Gt*Math.sin(dn),uo=xt+Pt*Math.cos(hn),fo=vt+Pt*Math.sin(hn);fn+=(Ct===0?`M${pn},${gn}`:`L${pn},${gn}`)+`L${uo},${fo}`}return fn+"Z"};for(let xt=0;xt<R;xt++){const vt=At+ot/2,jt=St+ot/2,Pt=xt<pt||xt===pt&&gt?nt:J;f.push(`<path d="${Ot(vt,jt,ot)}" fill="${Pt}"/>`),At+=ot+ut}}}else{const G=(dt=t.cellStyles)==null?void 0:dt[F.field],R=t.style;let nt=r.typography.fontWeightNormal;(G!=null&&G.bold||G!=null&&G.emphasis||R!=null&&R.bold||R!=null&&R.emphasis)&&(nt=r.typography.fontWeightBold);let J="normal";(G!=null&&G.italic||R!=null&&R.italic)&&(J="italic");let Y=r.colors.foreground;G!=null&&G.color?Y=G.color:G!=null&&G.muted?Y=r.colors.muted:G!=null&&G.accent?Y=r.colors.accent:R!=null&&R.color?Y=R.color:R!=null&&R.muted?Y=r.colors.muted:R!=null&&R.accent&&(Y=r.colors.accent),f.push(`<text class="cell-text" x="${It}" y="${p}"
        font-family="${r.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${nt}"
        font-style="${J}"
        text-anchor="${X}"
        fill="${Y}">${O(ht)}</text>`)}}return f.join(`
`)}function so(t,n,o,e,i,r){if(Array.isArray(o.axis.tickValues)&&o.axis.tickValues.length>0){const[y,m]=t.domain();let T=o.axis.tickValues.filter(H=>H>=y&&H<=m);const E=o.axis.nullTick!==!1,W=e>=y&&e<=m;return E&&W&&!T.includes(e)&&(T=[...T,e].sort((H,P)=>H-P)),T}const[l,d]=t.domain(),c=o.axis.nullTick!==!1,a=e>=l&&e<=d,s=Rt.MIN_TICK_SPACING,u=Math.max(2,Math.floor(i/s)),f=Math.min(n,Math.min(7,u)),h=r&&r.length>0?r.filter(y=>y>=l&&y<=d):t.ticks(f);if(h.length===0)return c&&a?[e]:[];const p=t(e),M=h.filter(y=>y<e).reverse(),I=h.filter(y=>y>e),N=h.some(y=>y===e),b=[];let C=p;for(const y of M){const m=t(y);C-m>=s&&(b.unshift(y),C=m)}const w=[];let A=p;for(const y of I){const m=t(y);m-A>=s&&(w.push(y),A=m)}const g=[...b];if((N||c&&a)&&g.push(e),g.push(...w),g.length<2){const y=new Set(g);y.has(l)||g.unshift(l),g.length<2&&!y.has(d)&&g.push(d)}return g}function un(t,n,o,e,i,r,l,d=1,c=.6){let s=`<line x1="${t}" x2="${t}" y1="${n}" y2="${o}"
    stroke="${i}" stroke-width="${d}" stroke-opacity="${c}" stroke-dasharray="${e==="dashed"?"6,4":e==="dotted"?"2,2":"none"}"/>`;if(l){const u=r.colors.secondary;s+=`<text x="${t}" y="${n-4}" text-anchor="middle"
      font-family="${r.typography.fontFamily}"
      font-size="${r.typography.fontSizeSm}"
      font-weight="${r.typography.fontWeightMedium}"
      fill="${u}">${O(l)}</text>`}return s}class Mt extends Error{constructor(n){super(`SVG Generator: ${n}`),this.name="SVGGeneratorError"}}function ao(t){if(!t||typeof t!="object")throw new Mt("Invalid spec: expected an object");const n=t;if(!n.data||typeof n.data!="object")throw new Mt("Invalid spec: missing or invalid 'data' property");const o=n.data;if(!Array.isArray(o.rows))throw new Mt("Invalid spec: 'data.rows' must be an array");if(!n.theme||typeof n.theme!="object")throw new Mt("Invalid spec: missing or invalid 'theme' property");const e=n.theme;if(!e.colors||typeof e.colors!="object")throw new Mt("Invalid spec: missing or invalid 'theme.colors'");if(!e.typography||typeof e.typography!="object")throw new Mt("Invalid spec: missing or invalid 'theme.typography'");if(!e.spacing||typeof e.spacing!="object")throw new Mt("Invalid spec: missing or invalid 'theme.spacing'")}function io(t){var r;const o=qt(t.columns,void 0).find(l=>l.type==="forest");if(!o||!((r=o.options)!=null&&r.forest))return{scale:"linear",nullValue:0,effects:[],axisLabel:"Effect",pointCol:null,lowerCol:null,upperCol:null};const e=o.options.forest,i=e.scale??"linear";return{scale:i,nullValue:e.nullValue??(i==="log"?1:0),effects:e.effects??[],axisLabel:e.axisLabel??"Effect",pointCol:e.point??null,lowerCol:e.lower??null,upperCol:e.upper??null}}function lo(t,n={}){var T,E,W,H,P;ao(t);const o=t.theme,e=o.spacing.padding,i=Array.isArray(t.columns)?t.columns:[],r=Xt(i),l=[];for(let $=0;$<r.length;$++)r[$].type==="forest"&&l.push($);l.length>0;const d=[];for(let $=0;$<r.length;$++){const k=r[$];(k.type==="viz_bar"||k.type==="viz_boxplot"||k.type==="viz_violin")&&d.push({index:$,type:k.type,column:k})}const c=io(t),a=Ln(t,n,c.nullValue),s=a.autoWidths,u=$=>{var D,S,x,_,v,L,B,z;if($.type==="forest"){const V=s.get($.id);return V!==void 0?V:typeof $.width=="number"?$.width:((S=(D=$.options)==null?void 0:D.forest)==null?void 0:S.width)??a.forestWidth}if($.type==="viz_bar"){const V=s.get($.id);return V!==void 0?V:typeof $.width=="number"?$.width:((_=(x=$.options)==null?void 0:x.vizBar)==null?void 0:_.width)??a.forestWidth}if($.type==="viz_boxplot"){const V=s.get($.id);return V!==void 0?V:typeof $.width=="number"?$.width:((L=(v=$.options)==null?void 0:v.vizBoxplot)==null?void 0:L.width)??a.forestWidth}if($.type==="viz_violin"){const V=s.get($.id);return V!==void 0?V:typeof $.width=="number"?$.width:((z=(B=$.options)==null?void 0:B.vizViolin)==null?void 0:z.width)??a.forestWidth}const k=s.get($.id);return k!==void 0?k:typeof $.width=="number"?$.width:$t.DEFAULT_COLUMN_WIDTH},f=[];let h=e+a.labelWidth;for(const $ of r)f.push(h),h+=u($);const p=[];p.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${a.totalWidth}" height="${a.totalHeight}"
  viewBox="0 0 ${a.totalWidth} ${a.totalHeight}">
<style>
  text {
    font-variant-numeric: tabular-nums;
  }
  /* Use dominant-baseline for cell text to match CSS flex centering */
  .cell-text { dominant-baseline: central; }
</style>`);const M=n.backgroundColor??o.colors.background;if(p.push(`<rect width="100%" height="100%" fill="${M}"/>`),o.layout.containerBorder!==!1){const $=o.layout.containerBorderRadius??8;p.push(`<rect x="0.5" y="0.5"
      width="${a.totalWidth-1}" height="${a.totalHeight-1}"
      fill="none" stroke="${o.colors.border}" stroke-width="1"
      rx="${$}" ry="${$}"/>`)}p.push(zn(t,a,o)),p.push(`<line x1="${e}" x2="${a.totalWidth-e}"
    y1="${a.mainY}" y2="${a.mainY}"
    stroke="${o.colors.border}" stroke-width="2"/>`);const I=a.mainY;p.push(eo(i,r,e,I,a.headerHeight,o,t.data.labelHeader??"Study",a.labelWidth,s,u)),p.push(`<line x1="${e}" x2="${a.totalWidth-e}"
    y1="${I+a.headerHeight}" y2="${I+a.headerHeight}"
    stroke="${o.colors.border}" stroke-width="2"/>`);const N=an(t),b=[],C=[];let w=0;for(const $ of N){const D=$.type==="data"&&((T=$.row.style)==null?void 0:T.type)==="spacer"?a.rowHeight/2:a.rowHeight;b.push(w),C.push(D),w+=D}const A=a.mainY+a.headerHeight;N.forEach(($,k)=>{var D,S,x,_;if($.type==="data"){const v=$.row,L=A+b[k],B=C[k];if((D=v.style)!=null&&D.bg)p.push(`<rect x="${e}" y="${L}"
          width="${a.totalWidth-e*2}" height="${B}"
          fill="${v.style.bg}"/>`);else if(((S=v.style)==null?void 0:S.type)==="header")p.push(`<rect x="${e}" y="${L}"
          width="${a.totalWidth-e*2}" height="${B}"
          fill="${o.colors.muted}" fill-opacity="0.1"/>`);else if(o.layout.banding&&!(((x=v.style)==null?void 0:x.type)==="summary"||((_=v.style)==null?void 0:_.type)==="spacer")){const tt=k%2===1?o.colors.altBg:o.colors.rowBg;tt!==o.colors.background&&p.push(`<rect x="${e}" y="${L}"
              width="${a.totalWidth-e*2}" height="${B}"
              fill="${tt}"/>`)}}});for(const $ of l){const k=r[$],D=f[$],S=u(k),x=(E=k.options)==null?void 0:E.forest,_=(x==null?void 0:x.scale)??"linear",v=(x==null?void 0:x.nullValue)??(_==="log"?1:0),L=(x==null?void 0:x.axisLabel)??"Effect",B=_==="log";let z=(x==null?void 0:x.effects)??[];const V=(x==null?void 0:x.point)??null,tt=(x==null?void 0:x.lower)??null,rt=(x==null?void 0:x.upper)??null;z.length===0&&(V||tt||rt)&&(z=[{pointCol:V,lowerCol:tt,upperCol:rt}]);const j={scale:_,nullValue:v,effects:z,pointCol:(x==null?void 0:x.point)??null,lowerCol:(x==null?void 0:x.lower)??null,upperCol:(x==null?void 0:x.upper)??null},{scale:Z,clipBounds:ct,ticks:st}=Bn(t,S,j,n),dt=D+Z(v);p.push(un(dt,A,A+a.rowsHeight,"dashed",o.colors.muted,o));const at=(x==null?void 0:x.annotations)??[];for(const F of at)if(F.type==="reference_line"){const q=D+Z(F.x);p.push(un(q,A,A+a.rowsHeight,F.style,F.color??o.colors.accent,o,F.label,F.width??1,F.opacity??.6))}if(N.forEach((F,q)=>{if(F.type==="data"){const Q=A+b[q]+C[q]/2;p.push(On(F.row,Q,ht=>D+Z(ht),o,v,z,t.data.weightCol,D,S,ct,B))}}),t.data.overall&&a.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const F=A+a.summaryYPosition;p.push(jn(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,F,Z,D,S,o))}p.push(oo(Z,a,o,L,D,S,v,st))}const g=t.data.rows;for(const $ of d){const k=$.column,D=f[$.index],S=u(k);if($.type==="viz_bar"){const x=(W=k.options)==null?void 0:W.vizBar;if(!x)continue;const _=Jn(g,x,S);N.forEach((v,L)=>{if(v.type==="data"){const B=A+b[L]+C[L]/2,z=C[L];p.push(Kn(v.row,B,z,D,S,x,_,o))}}),x.showAxis!==!1&&(p.push(`<g transform="translate(0, ${A+a.plotHeight})">`),p.push(Yt(_,a,o,x.axisLabel,D,S,x.nullValue)),p.push("</g>"))}else if($.type==="viz_boxplot"){const x=(H=k.options)==null?void 0:H.vizBoxplot;if(!x)continue;const _=to(g,x,S);N.forEach((v,L)=>{if(v.type==="data"){const B=A+b[L]+C[L]/2,z=C[L];p.push(Zn(v.row,B,z,D,S,x,_,o))}}),x.showAxis!==!1&&(p.push(`<g transform="translate(0, ${A+a.plotHeight})">`),p.push(Yt(_,a,o,x.axisLabel,D,S,x.nullValue)),p.push("</g>"))}else if($.type==="viz_violin"){const x=(P=k.options)==null?void 0:P.vizViolin;if(!x)continue;const _=no(g,x,S);N.forEach((v,L)=>{if(v.type==="data"){const B=A+b[L]+C[L]/2,z=C[L];p.push(Qn(v.row,B,z,D,S,x,_,o))}}),x.showAxis!==!1&&(p.push(`<g transform="translate(0, ${A+a.plotHeight})">`),p.push(Yt(_,a,o,x.axisLabel,D,S,x.nullValue)),p.push("</g>"))}}const y=a.mainY+a.headerHeight,m=Xn(g,r);return N.forEach(($,k)=>{var x,_,v;const D=y+b[k],S=C[k];if($.type==="group_header")p.push(Un($.label,$.depth,$.rowCount,e,D,S,a.totalWidth-e*2,o));else{const L=$.row,B=$.depth;((x=L.style)==null?void 0:x.type)==="spacer"||p.push(ro(L,r,e,D,S,o,a.labelWidth,B,m,s,u,f))}if($.type==="data"){const L=$.row,B=((_=L.style)==null?void 0:_.type)==="summary",z=((v=L.style)==null?void 0:v.type)==="spacer";B&&p.push(`<line x1="${e}" x2="${a.totalWidth-e}"
          y1="${D}" y2="${D}"
          stroke="${o.colors.border}" stroke-width="2"/>`),z||p.push(`<line x1="${e}" x2="${a.totalWidth-e}"
          y1="${D+S}" y2="${D+S}"
          stroke="${o.colors.border}" stroke-width="1"/>`)}else p.push(`<line x1="${e}" x2="${a.totalWidth-e}"
        y1="${D+S}" y2="${D+S}"
        stroke="${o.colors.border}" stroke-width="1"/>`)}),p.push(Vn(t,a,o)),p.push("</svg>"),p.join(`
`)}function co(t,n){const o=JSON.parse(t);return lo(o,n)}globalThis.generateSVG=co})();
