(function(){"use strict";function ut(t,r){if(r){const c=[.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100];let f=c[0];for(const s of c)if(s<=t[0])f=s;else break;let a=c[c.length-1];for(let s=c.length-1;s>=0&&c[s]>=t[1];s--)a=c[s];return[f,a]}const n=t[1]-t[0];if(n===0)return t;const o=Math.pow(10,Math.floor(Math.log10(n))),i=n/o;let e;i<=1?e=o*.1:i<=2?e=o*.2:i<=5?e=o*.5:e=o;const u=Math.floor(t[0]/e)*e,l=Math.ceil(t[1]/e)*e;return[u,l]}const tt=.15,ht=.06,dt=.05,ot=.04;function pt(t){return t<=0?0:ot+t*ot}const I={DEFAULT_LABEL_WIDTH:200,DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:20,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},G={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},w={INDENT_PER_LEVEL:12,TEXT_PADDING:10,WHISKER_HALF_HEIGHT:4,DEFAULT_TICK_COUNT:5},nt={GROUP_HEADER_HEIGHT_MULTIPLIER:1.5,OVERALL_ROW_HEIGHT_MULTIPLIER:1.5};function gt(t,r){var W,P,B,Y;const n=t.theme,o=n.spacing.rowHeight,i=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],u=j(e,"left"),l=j(e,"right"),f=K(u)||K(l)?n.spacing.headerHeight*nt.GROUP_HEADER_HEIGHT_MULTIPLIER:n.spacing.headerHeight,a=!!((W=t.labels)!=null&&W.title),s=!!((P=t.labels)!=null&&P.subtitle),p=!!((B=t.labels)!=null&&B.caption),y=!!((Y=t.labels)!=null&&Y.footnote),h=a?G.TITLE_HEIGHT:0,A=s?G.SUBTITLE_HEIGHT:0,x=h+A+(a||s?i:0),E=p?G.CAPTION_HEIGHT:0,$=y?G.FOOTNOTE_HEIGHT:0,m=E+$+(p||y?i:0),N=et(t).length,g=!!t.data.overall,_=N*o+(g?o*nt.OVERALL_ROW_HEIGHT_MULTIPLIER:0),b=V(e,"left"),H=V(e,"right"),D=I.DEFAULT_LABEL_WIDTH+b.reduce((C,k)=>C+(typeof k.width=="number"?k.width:I.DEFAULT_COLUMN_WIDTH),0),T=H.reduce((C,k)=>C+(typeof k.width=="number"?k.width:I.DEFAULT_COLUMN_WIDTH),0),M=r.width??I.DEFAULT_WIDTH,U=t.data.includeForest,R=D+T;let O;if(!U)O=0;else if(typeof t.layout.plotWidth=="number")O=t.layout.plotWidth;else{const C=M-R-I.COLUMN_GAP*2-i*2;O=Math.max(C,I.MIN_FOREST_WIDTH)}const S=i*2+R+O+I.COLUMN_GAP*2,F=Math.max(r.width??M,S),X=x+i+f+_+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+m+I.BOTTOM_MARGIN;return{totalWidth:F,totalHeight:r.height??X,tableWidth:D+T,forestWidth:O,headerHeight:f,rowHeight:o,plotHeight:_,axisHeight:I.AXIS_HEIGHT,nullValue:t.data.nullValue,summaryYPosition:_-o,showOverallSummary:g,headerTextHeight:x,footerTextHeight:m,titleY:i+G.TITLE_HEIGHT-8,subtitleY:i+h+G.SUBTITLE_HEIGHT-4,mainY:x+i,footerY:x+i+f+_+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+i}}function et(t){var a;const r=t.data.rows,n=Array.isArray(t.data.groups)?t.data.groups:[];if(n.length===0)return r.map(s=>({type:"data",row:s,depth:0}));const o=new Map;for(const s of n)o.set(s.id,s);const i=new Map;for(const s of r){const p=s.groupId??null;i.has(p)||i.set(p,[]),i.get(p).push(s)}const e=new Set;for(const s of i.keys()){if(!s)continue;let p=s;for(;p;)e.add(p),p=(a=o.get(p))==null?void 0:a.parentId}function u(s){return n.filter(p=>(p.parentId??null)===s&&e.has(p.id))}function l(s){if(!s)return 0;const p=o.get(s);return p?p.depth+1:0}const c=[];function f(s){var y;if(s){const h=o.get(s);if(!h)return;const A=((y=i.get(s))==null?void 0:y.length)??0;c.push({type:"group_header",groupId:h.id,label:h.label,depth:h.depth,rowCount:A})}for(const h of u(s))f(h.id);const p=i.get(s)??[];for(const h of p)c.push({type:"data",row:h,depth:l(h.groupId)})}return f(null),c}function rt(t){const r=[];for(const n of t)n.isGroup?r.push(...rt(n.columns)):r.push(n);return r}function V(t,r){const n=[];for(const o of t)o.position===r&&(o.isGroup?n.push(...rt(o.columns)):n.push(o));return n}function j(t,r){return t.filter(n=>n.position===r)}function K(t){return t.some(r=>r.isGroup)}function it(t,r){return t.isGroup?t.columns.reduce((n,o)=>n+it(o,r),0):typeof t.width=="number"?t.width:r}function v(t){return t.endsWith("rem")?parseFloat(t)*G.REM_BASE:t.endsWith("px")?parseFloat(t):G.DEFAULT_FONT_SIZE}function J(t,r,n){return n==="right"?{textX:t+r-w.TEXT_PADDING,anchor:"end"}:n==="center"?{textX:t+r/2,anchor:"middle"}:{textX:t+w.TEXT_PADDING,anchor:"start"}}function L(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(t,r,n,o=0){const i=n*.55,e=r-o*2,u=Math.floor(e/i);return t.length<=u?t:t.slice(0,u-1)+"â€¦"}function Z(t){return t==null||Number.isNaN(t)?"":Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?Math.round(t).toString():t.toFixed(2)}function yt(t,r,n){return t==null||Number.isNaN(t)?"":r==null||n===void 0||n===null||Number.isNaN(r)||Number.isNaN(n)?Z(t):`${t.toFixed(2)} (${r.toFixed(2)}, ${n.toFixed(2)})`}function $t(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function xt(t,r){const[n,o]=t,[i,e]=r,u=(e-i)/(o-n),l=c=>i+(c-n)*u;return l.domain=()=>t,l.range=()=>r,l.ticks=c=>{const f=(o-n)/(c-1),a=[];for(let s=0;s<c;s++)a.push(n+f*s);return a},l}function Tt(t,r){const[n,o]=t.map(a=>Math.max(a,.001)),[i,e]=r,u=Math.log10(n),l=Math.log10(o),c=(e-i)/(l-u),f=a=>{const s=Math.log10(Math.max(a,.001));return i+(s-u)*c};return f.domain=()=>[n,o],f.range=()=>r,f.ticks=a=>{const s=[],p=Math.floor(Math.log10(n)),y=Math.ceil(Math.log10(o));for(let h=p;h<=y;h++){const A=Math.pow(10,h);for(const x of[1,2,5]){const E=A*x;E>=n&&E<=o&&s.push(E)}}return s.length>0?s:[n,o]},f}function mt(t,r){const n=t.data.rows,o=t.theme.axis,i=t.data.scale==="log",e=typeof(o==null?void 0:o.rangeMin)=="number",u=typeof(o==null?void 0:o.rangeMax)=="number";let l;if(e&&u)l=[o.rangeMin,o.rangeMax];else{const f=n.flatMap(a=>[a.lower,a.upper]).filter(a=>a!=null&&!Number.isNaN(a)&&Number.isFinite(a));if(f.length===0)l=i?[.1,10]:[0,1];else{const[a,s]=[Math.min(...f),Math.max(...f)],p=s-a||1;l=[e?o.rangeMin:a-p*tt,u?o.rangeMax:s+p*tt]}}const c=ut(l,i);return i?Tt([Math.max(c[0],.01),Math.max(c[1],.02)],[0,r]):xt(c,[0,r])}function Et(t,r,n){var e,u;const o=[],i=n.spacing.padding;if((e=t.labels)!=null&&e.title){const l=v(n.typography.fontSizeLg);o.push(`<text x="${i}" y="${r.titleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      font-weight="${n.typography.fontWeightBold}"
      fill="${n.colors.foreground}">${L(t.labels.title)}</text>`)}if((u=t.labels)!=null&&u.subtitle){const l=v(n.typography.fontSizeBase);o.push(`<text x="${i}" y="${r.subtitleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      fill="${n.colors.secondary}">${L(t.labels.subtitle)}</text>`)}return o.join(`
`)}function _t(t,r,n){var u,l;const o=[],i=n.spacing.padding;let e=r.footerY;if((u=t.labels)!=null&&u.caption){const c=v(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${L(t.labels.caption)}</text>`),e+=G.CAPTION_HEIGHT}if((l=t.labels)!=null&&l.footnote){const c=v(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-style="italic"
      fill="${n.colors.muted}">${L(t.labels.footnote)}</text>`)}return o.join(`
`)}function st(t,r,n,o,i,e,u,l){const c=[],f=v(e.typography.fontSizeSm),a=e.typography.fontWeightMedium,s=e.typography.fontWeightBold,p=K(t),y=I.DEFAULT_COLUMN_WIDTH,h=l??I.DEFAULT_LABEL_WIDTH,A=(x,E)=>x+E/2+f*G.TEXT_BASELINE_ADJUSTMENT;if(p){const x=i/2,E=i/2;let $=n;u&&(c.push(`<text x="${$+w.TEXT_PADDING}" y="${A(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${L(u)}</text>`),c.push(`<line x1="${$+h}" x2="${$+h}"
        y1="${o}" y2="${o+i}"
        stroke="${e.colors.border}" stroke-width="1" opacity="0.3"/>`),$+=h);for(const m of t)if(m.isGroup){const d=it(m,y),N=$+d/2;c.push(`<text x="${N}" y="${A(o,x)}"
          font-family="${e.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${s}"
          text-anchor="middle"
          fill="${e.colors.foreground}">${L(m.header)}</text>`),c.push(`<line x1="${$}" x2="${$+d}"
          y1="${o+x}" y2="${o+x}"
          stroke="${e.colors.border}" stroke-width="1" opacity="0.5"/>`),$+=d}else{const d=typeof m.width=="number"?m.width:y,N=m.headerAlign??m.align,{textX:g,anchor:_}=J($,d,N),b=q(m.header,d,f,w.TEXT_PADDING);c.push(`<text x="${g}" y="${A(o,i)}"
          font-family="${e.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${a}"
          text-anchor="${_}"
          fill="${e.colors.foreground}">${L(b)}</text>`),$+=d}$=n+(u?h:0);for(const m of t)if(m.isGroup){for(const d of m.columns)if(!d.isGroup){const N=typeof d.width=="number"?d.width:y,g=d.headerAlign??d.align,{textX:_,anchor:b}=J($,N,g);c.push(`<text x="${_}" y="${A(o+x,E)}"
              font-family="${e.typography.fontFamily}"
              font-size="${f}px"
              font-weight="${a}"
              text-anchor="${b}"
              fill="${e.colors.foreground}">${L(d.header)}</text>`),$+=N}}else{const d=typeof m.width=="number"?m.width:y;$+=d}}else{let x=n;u&&(c.push(`<text x="${x+w.TEXT_PADDING}" y="${A(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${L(u)}</text>`),x+=h);for(const E of r){const $=typeof E.width=="number"?E.width:y,m=E.headerAlign??E.align,{textX:d,anchor:N}=J(x,$,m),g=q(E.header,$,f,w.TEXT_PADDING);c.push(`<text x="${d}" y="${A(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${a}"
        text-anchor="${N}"
        fill="${e.colors.foreground}">${L(g)}</text>`),x+=$}}return c.join(`
`)}function bt(t,r,n,o,i,e,u){const l=[],c=v(u.typography.fontSizeBase),f=o+i/2+c*G.TEXT_BASELINE_ADJUSTMENT,a=r*w.INDENT_PER_LEVEL;return l.push(`<rect x="${n}" y="${o}"
    width="${e}" height="${i}"
    fill="${u.colors.primary}" opacity="${dt}"/>`),l.push(`<text x="${n+w.TEXT_PADDING+a}" y="${f}"
    font-family="${u.typography.fontFamily}"
    font-size="${c}px"
    font-weight="${u.typography.fontWeightBold}"
    fill="${u.colors.foreground}">${L(t)}</text>`),l.join(`
`)}function at(t,r){const n=new Map;for(const o of r)if(o.type==="bar"){let i=0;for(const e of t){const u=e.metadata[o.field];typeof u=="number"&&u>i&&(i=u)}n.set(o.field,i>0?i:1)}return n}function lt(t,r,n,o,i,e,u,l=I.DEFAULT_LABEL_WIDTH,c=0,f){var h,A,x,E,$,m,d,N,g,_,b,H,D;const a=[],s=v(e.typography.fontSizeBase),p=o+i/2+s*G.TEXT_BASELINE_ADJUSTMENT;let y=n;if(u){const T=c*w.INDENT_PER_LEVEL+(((h=t.style)==null?void 0:h.indent)??0)*w.INDENT_PER_LEVEL,M=(A=t.style)!=null&&A.bold?e.typography.fontWeightBold:e.typography.fontWeightNormal,U=(x=t.style)!=null&&x.italic?"italic":"normal",R=l-T-w.TEXT_PADDING*2,O=q(t.label,R,s,0);if(a.push(`<text x="${y+w.TEXT_PADDING+T}" y="${p}"
      font-family="${e.typography.fontFamily}"
      font-size="${s}px"
      font-weight="${M}"
      font-style="${U}"
      fill="${((E=t.style)==null?void 0:E.color)??e.colors.foreground}">${L(O)}</text>`),($=t.style)!=null&&$.badge){const S=String(t.style.badge),F=s*.8,X=4,W=F+X*2,P=t.label.length*s*.55,B=y+w.TEXT_PADDING+T+P+6,C=S.length*F*.6+X*2,k=o+(i-W)/2;a.push(`<rect x="${B}" y="${k}" width="${C}" height="${W}"
        rx="3" fill="${e.colors.primary}" opacity="0.15"/>`),a.push(`<text x="${B+C/2}" y="${k+W/2+F*.35}"
        text-anchor="middle"
        font-family="${e.typography.fontFamily}"
        font-size="${F}px"
        font-weight="500"
        fill="${e.colors.primary}">${L(S)}</text>`)}y+=l}for(const T of r){const M=typeof T.width=="number"?T.width:I.DEFAULT_COLUMN_WIDTH,U=Ht(t,T),{textX:R,anchor:O}=J(y,M,T.align);if(T.type==="bar"&&typeof t.metadata[T.field]=="number"){const S=t.metadata[T.field],F=f==null?void 0:f.get(T.field),X=((d=(m=T.options)==null?void 0:m.bar)==null?void 0:d.maxValue)??F??100,W=((g=(N=T.options)==null?void 0:N.bar)==null?void 0:g.color)??e.colors.primary,P=e.shapes.pointSize*2,Y=M-w.TEXT_PADDING*2-50,C=Math.min(S/X*Y,Y);a.push(`<rect x="${y+w.TEXT_PADDING}" y="${o+i/2-P/2}"
        width="${Math.max(0,C)}" height="${P}"
        fill="${W}" opacity="0.7" rx="2"/>`);const k=y+M-w.TEXT_PADDING;a.push(`<text x="${k}" y="${p}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="end"
        fill="${e.colors.foreground}">${Z(S)}</text>`)}else if(T.type==="sparkline"&&Array.isArray(t.metadata[T.field])){let S=t.metadata[T.field];Array.isArray(S[0])&&(S=S[0]);const F=((b=(_=T.options)==null?void 0:_.sparkline)==null?void 0:b.height)??16,X=((D=(H=T.options)==null?void 0:H.sparkline)==null?void 0:D.color)??e.colors.primary,W=w.TEXT_PADDING*2,P=It(S,y+w.TEXT_PADDING,o+i/2-F/2,M-W,F);a.push(`<path d="${P}" fill="none" stroke="${X}" stroke-width="1.5"/>`)}else a.push(`<text x="${R}" y="${p}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="${O}"
        fill="${e.colors.foreground}">${L(U)}</text>`);y+=M}return a.join(`
`)}function Ht(t,r){var o,i,e,u;if(r.type==="interval")return yt(t.point,t.lower,t.upper);if(r.type==="numeric"){const l=t.metadata[r.field];return typeof l=="number"?Z(l):""}if(r.type==="pvalue"){const l=t.metadata[r.field];if(typeof l!="number")return"";const c=(i=(o=r.options)==null?void 0:o.pvalue)==null?void 0:i.stars,f=((u=(e=r.options)==null?void 0:e.pvalue)==null?void 0:u.thresholds)??[.05,.01,.001];let a="";return c&&(l<f[2]?a="***":l<f[1]?a="**":l<f[0]&&(a="*")),l<.001?`<0.001${a}`:`${l.toFixed(3)}${a}`}const n=t.metadata[r.field];return n!=null?String(n):""}function It(t,r,n,o,i){if(t.length===0)return"";const e=Math.min(...t),l=Math.max(...t)-e||1;return`M${t.map((f,a)=>{const s=r+a/(t.length-1)*o,p=n+i-(f-e)/l*i;return`${s.toFixed(1)},${p.toFixed(1)}`}).join("L")}`}const ct=6;function Q(t,r,n){const o=t.metadata[r];return o!=null&&typeof o=="number"&&!Number.isNaN(o)?o:n}function At(t,r){return r<=1?0:-((r-1)*ct)/2+t*ct}function wt(t,r,n,o,i,e=[],u){var m;let l;e.length===0?l=[{point:t.point,lower:t.lower,upper:t.upper,color:null}]:l=e.map(d=>({point:Q(t,d.pointCol,t.point),lower:Q(t,d.lowerCol,t.lower),upper:Q(t,d.upperCol,t.upper),color:d.color??null}));const c=l.filter(d=>d.point!=null&&!Number.isNaN(d.point)&&d.lower!=null&&!Number.isNaN(d.lower)&&d.upper!=null&&!Number.isNaN(d.upper));if(c.length===0)return"";const f=o.shapes.pointSize,a=u?t.metadata[u]:void 0;let s=f;if(a){const d=.5+Math.sqrt(a/100)*1.5;s=Math.min(Math.max(f*d,3),f*2.5)}const p=o.shapes.lineWidth,y=o.colors.intervalLine,h=w.WHISKER_HALF_HEIGHT,A=((m=t.style)==null?void 0:m.type)==="summary",E=o.shapes.summaryHeight/2,$=[];return c.forEach((d,N)=>{const g=r+At(N,c.length),_=n(d.lower),b=n(d.upper),H=n(d.point),D=d.color??y,T=d.color??(d.point>i?o.colors.intervalPositive:d.point<i?o.colors.intervalNegative:o.colors.muted);if(A){const M=[`${_},${g}`,`${H},${g-E}`,`${b},${g}`,`${H},${g+E}`].join(" ");$.push(`
        <g class="interval effect-${N} summary">
          <polygon points="${M}"
            fill="${o.colors.summaryFill}" stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else $.push(`
        <g class="interval effect-${N}">
          <!-- CI line -->
          <line x1="${_}" x2="${b}" y1="${g}" y2="${g}"
            stroke="${D}" stroke-width="${p}"/>
          <!-- Whiskers -->
          <line x1="${_}" x2="${_}" y1="${g-h}" y2="${g+h}"
            stroke="${D}" stroke-width="${p}"/>
          <line x1="${b}" x2="${b}" y1="${g-h}" y2="${g+h}"
            stroke="${D}" stroke-width="${p}"/>
          <!-- Point -->
          <rect x="${H-s}" y="${g-s}"
            width="${s*2}" height="${s*2}" fill="${T}"/>
        </g>`)}),$.join("")}function Nt(t,r,n,o,i,e,u,l){const f=l.shapes.summaryHeight/2,a=i(r),s=i(t),p=i(n),y=e+Math.max(0,Math.min(u,a)),h=e+Math.max(0,Math.min(u,s)),A=e+Math.max(0,Math.min(u,p));return`<polygon points="${[`${y},${o}`,`${h},${o-f}`,`${A},${o}`,`${h},${o+f}`].join(" ")}"
    fill="${l.colors.summaryFill}"
    stroke="${l.colors.summaryBorder}"
    stroke-width="1"/>`}function Dt(t,r,n,o,i){const e=[],u=typeof n.axis.tickCount=="number"?n.axis.tickCount:w.DEFAULT_TICK_COUNT,l=Array.isArray(n.axis.tickValues)?n.axis.tickValues:t.ticks(u),c=v(n.typography.fontSizeSm);e.push(`<line x1="${i}" x2="${i+r.forestWidth}"
    y1="0" y2="0" stroke="${n.colors.border}" stroke-width="1"/>`);for(const f of l){const a=i+t(f);e.push(`<line x1="${a}" x2="${a}" y1="0" y2="4"
      stroke="${n.colors.border}" stroke-width="1"/>`),e.push(`<text x="${a}" y="16" text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${$t(f)}</text>`)}return o&&e.push(`<text x="${i+r.forestWidth/2}" y="28"
      text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-weight="500"
      fill="${n.colors.secondary}">${L(o)}</text>`),`<g transform="translate(0, ${r.mainY+r.headerHeight+r.plotHeight})">${e.join(`
`)}</g>`}function ft(t,r,n,o,i,e){let l=`<line x1="${t}" x2="${t}" y1="${r}" y2="${n}"
    stroke="${i}" stroke-width="1" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return e&&(l+=`<text x="${t}" y="${r-4}" text-anchor="middle"
      font-size="10px" fill="${i}">${L(e)}</text>`),l}class z extends Error{constructor(r){super(`SVG Generator: ${r}`),this.name="SVGGeneratorError"}}function Lt(t){if(!t||typeof t!="object")throw new z("Invalid spec: expected an object");const r=t;if(!r.data||typeof r.data!="object")throw new z("Invalid spec: missing or invalid 'data' property");const n=r.data;if(!Array.isArray(n.rows))throw new z("Invalid spec: 'data.rows' must be an array");if(!r.theme||typeof r.theme!="object")throw new z("Invalid spec: missing or invalid 'theme' property");const o=r.theme;if(!o.colors||typeof o.colors!="object")throw new z("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new z("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new z("Invalid spec: missing or invalid 'theme.spacing'")}function Mt(t,r={}){Lt(t);const n=t.theme,o=gt(t,r),i=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],u=j(e,"left"),l=j(e,"right"),c=V(e,"left"),f=V(e,"right"),a=I.DEFAULT_LABEL_WIDTH+c.reduce((g,_)=>g+(typeof _.width=="number"?_.width:I.DEFAULT_COLUMN_WIDTH),0),s=i+a,p=mt(t,o.forestWidth),y=s+o.forestWidth,h=[];h.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${o.totalWidth}" height="${o.totalHeight}"
  viewBox="0 0 ${o.totalWidth} ${o.totalHeight}">`);const A=r.backgroundColor??n.colors.background;h.push(`<rect width="100%" height="100%" fill="${A}"/>`),h.push(Et(t,o,n));const x=o.mainY;h.push(st(u,c,i,x,o.headerHeight,n,t.data.labelHeader??"Study",I.DEFAULT_LABEL_WIDTH)),f.length>0&&h.push(st(l,f,y,x,o.headerHeight,n)),h.push(`<line x1="${i}" x2="${o.totalWidth-i}"
    y1="${x+o.headerHeight}" y2="${x+o.headerHeight}"
    stroke="${n.colors.border}" stroke-width="1"/>`);const E=et(t);if(t.data.includeForest&&o.forestWidth>0){const g=o.mainY+o.headerHeight,_=s+p(t.data.nullValue);h.push(ft(_,g,g+o.plotHeight,"dashed",n.colors.muted));const b=Array.isArray(t.annotations)?t.annotations:[];for(const H of b)if(H.type==="reference_line"){const D=s+p(H.x);h.push(ft(D,g,g+o.plotHeight,H.style,H.color??n.colors.accent,H.label))}if(E.forEach((H,D)=>{if(H.type==="data"){const T=g+D*o.rowHeight+o.rowHeight/2;h.push(wt(H.row,T,M=>s+p(M),n,t.data.nullValue,t.data.effects,t.data.weightCol))}}),t.data.overall&&o.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const H=g+o.summaryYPosition;h.push(Nt(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,H,p,s,o.forestWidth,n))}h.push(Dt(p,o,n,t.data.axisLabel,s))}const $=o.mainY+o.headerHeight,m=t.data.rows,d=at(m,c),N=at(m,f);return E.forEach((g,_)=>{const b=$+_*o.rowHeight;if(g.type==="group_header")h.push(bt(g.label,g.depth,i,b,o.rowHeight,o.totalWidth-i*2,n));else{const H=g.row,D=g.depth,T=pt(D),M=_%2===1?ht:0,U=Math.max(T,M);U>0&&h.push(`<rect x="${i}" y="${b}"
          width="${o.totalWidth-i*2}" height="${o.rowHeight}"
          fill="${n.colors.muted}" opacity="${U}"/>`),h.push(lt(H,c,i,b,o.rowHeight,n,!0,I.DEFAULT_LABEL_WIDTH,D,d)),f.length>0&&h.push(lt(H,f,y,b,o.rowHeight,n,!1,0,D,N))}h.push(`<line x1="${i}" x2="${o.totalWidth-i}"
      y1="${b+o.rowHeight}" y2="${b+o.rowHeight}"
      stroke="${n.colors.border}" stroke-width="1" opacity="0.5"/>`)}),h.push(_t(t,o,n)),h.push("</svg>"),h.join(`
`)}function Gt(t,r){const n=JSON.parse(t);return Mt(n,r)}globalThis.generateSVG=Gt})();
