(function(){"use strict";function ft(t,r){if(r){const c=[.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100];let u=c[0];for(const s of c)if(s<=t[0])u=s;else break;let a=c[c.length-1];for(let s=c.length-1;s>=0&&c[s]>=t[1];s--)a=c[s];return[u,a]}const n=t[1]-t[0];if(n===0)return t;const o=Math.pow(10,Math.floor(Math.log10(n))),i=n/o;let e;i<=1?e=o*.1:i<=2?e=o*.2:i<=5?e=o*.5:e=o;const f=Math.floor(t[0]/e)*e,l=Math.ceil(t[1]/e)*e;return[f,l]}const tt=.15,ut=.06,ht=.05,ot=.04;function dt(t){return t<=0?0:ot+t*ot}const b={DEFAULT_LABEL_WIDTH:200,DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:20,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},G={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},A={INDENT_PER_LEVEL:12,TEXT_PADDING:10,WHISKER_HALF_HEIGHT:4,DEFAULT_TICK_COUNT:5},nt={GROUP_HEADER_HEIGHT_MULTIPLIER:1.5,OVERALL_ROW_HEIGHT_MULTIPLIER:1.5};function pt(t,r){var W,O,B,Y;const n=t.theme,o=n.spacing.rowHeight,i=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],f=j(e,"left"),l=j(e,"right"),u=K(f)||K(l)?n.spacing.headerHeight*nt.GROUP_HEADER_HEIGHT_MULTIPLIER:n.spacing.headerHeight,a=!!((W=t.labels)!=null&&W.title),s=!!((O=t.labels)!=null&&O.subtitle),p=!!((B=t.labels)!=null&&B.caption),g=!!((Y=t.labels)!=null&&Y.footnote),h=a?G.TITLE_HEIGHT:0,N=s?G.SUBTITLE_HEIGHT:0,$=h+N+(a||s?i:0),_=p?G.CAPTION_HEIGHT:0,x=g?G.FOOTNOTE_HEIGHT:0,d=_+x+(p||g?i:0),T=et(t).length,y=!!t.data.overall,H=T*o+(y?o*nt.OVERALL_ROW_HEIGHT_MULTIPLIER:0),D=V(e,"left"),I=V(e,"right"),w=b.DEFAULT_LABEL_WIDTH+D.reduce((k,X)=>k+(X.width??b.DEFAULT_COLUMN_WIDTH),0),m=I.reduce((k,X)=>k+(X.width??b.DEFAULT_COLUMN_WIDTH),0),M=r.width??b.DEFAULT_WIDTH,v=t.data.includeForest,R=w+m;let C;if(!v)C=0;else if(typeof t.layout.plotWidth=="number")C=t.layout.plotWidth;else{const k=M-R-b.COLUMN_GAP*2-i*2;C=Math.max(k,b.MIN_FOREST_WIDTH)}const S=i*2+R+C+b.COLUMN_GAP*2,F=Math.max(r.width??M,S),U=$+i+u+H+b.AXIS_HEIGHT+b.AXIS_LABEL_HEIGHT+d+b.BOTTOM_MARGIN;return{totalWidth:F,totalHeight:r.height??U,tableWidth:w+m,forestWidth:C,headerHeight:u,rowHeight:o,plotHeight:H,axisHeight:b.AXIS_HEIGHT,nullValue:t.data.nullValue,summaryYPosition:H-o,showOverallSummary:y,headerTextHeight:$,footerTextHeight:d,titleY:i+G.TITLE_HEIGHT-8,subtitleY:i+h+G.SUBTITLE_HEIGHT-4,mainY:$+i,footerY:$+i+u+H+b.AXIS_HEIGHT+b.AXIS_LABEL_HEIGHT+i}}function et(t){var a;const r=t.data.rows,n=Array.isArray(t.data.groups)?t.data.groups:[];if(n.length===0)return r.map(s=>({type:"data",row:s,depth:0}));const o=new Map;for(const s of n)o.set(s.id,s);const i=new Map;for(const s of r){const p=s.groupId??null;i.has(p)||i.set(p,[]),i.get(p).push(s)}const e=new Set;for(const s of i.keys()){if(!s)continue;let p=s;for(;p;)e.add(p),p=(a=o.get(p))==null?void 0:a.parentId}function f(s){return n.filter(p=>(p.parentId??null)===s&&e.has(p.id))}function l(s){if(!s)return 0;const p=o.get(s);return p?p.depth+1:0}const c=[];function u(s){var g;if(s){const h=o.get(s);if(!h)return;const N=((g=i.get(s))==null?void 0:g.length)??0;c.push({type:"group_header",groupId:h.id,label:h.label,depth:h.depth,rowCount:N})}for(const h of f(s))u(h.id);const p=i.get(s)??[];for(const h of p)c.push({type:"data",row:h,depth:l(h.groupId)})}return u(null),c}function V(t,r){const n=[];for(const o of t)o.position===r&&(o.isGroup?n.push(...V(o.columns,r)):n.push(o));return n}function j(t,r){return t.filter(n=>n.position===r)}function K(t){return t.some(r=>r.isGroup)}function rt(t,r){return t.isGroup?t.columns.reduce((n,o)=>n+rt(o,r),0):t.width??r}function P(t){return t.endsWith("rem")?parseFloat(t)*G.REM_BASE:t.endsWith("px")?parseFloat(t):G.DEFAULT_FONT_SIZE}function J(t,r,n){return n==="right"?{textX:t+r-A.TEXT_PADDING,anchor:"end"}:n==="center"?{textX:t+r/2,anchor:"middle"}:{textX:t+A.TEXT_PADDING,anchor:"start"}}function L(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(t,r,n,o=0){const i=n*.55,e=r-o*2,f=Math.floor(e/i);return t.length<=f?t:t.slice(0,f-1)+"â€¦"}function Z(t){return t==null||Number.isNaN(t)?"":Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?Math.round(t).toString():t.toFixed(2)}function gt(t,r,n){return t==null||Number.isNaN(t)?"":r==null||n===void 0||n===null||Number.isNaN(r)||Number.isNaN(n)?Z(t):`${t.toFixed(2)} (${r.toFixed(2)}, ${n.toFixed(2)})`}function $t(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function yt(t,r){const[n,o]=t,[i,e]=r,f=(e-i)/(o-n),l=c=>i+(c-n)*f;return l.domain=()=>t,l.range=()=>r,l.ticks=c=>{const u=(o-n)/(c-1),a=[];for(let s=0;s<c;s++)a.push(n+u*s);return a},l}function xt(t,r){const[n,o]=t.map(a=>Math.max(a,.001)),[i,e]=r,f=Math.log10(n),l=Math.log10(o),c=(e-i)/(l-f),u=a=>{const s=Math.log10(Math.max(a,.001));return i+(s-f)*c};return u.domain=()=>[n,o],u.range=()=>r,u.ticks=a=>{const s=[],p=Math.floor(Math.log10(n)),g=Math.ceil(Math.log10(o));for(let h=p;h<=g;h++){const N=Math.pow(10,h);for(const $ of[1,2,5]){const _=N*$;_>=n&&_<=o&&s.push(_)}}return s.length>0?s:[n,o]},u}function Tt(t,r){const n=t.data.rows,o=t.theme.axis,i=t.data.scale==="log",e=typeof(o==null?void 0:o.rangeMin)=="number",f=typeof(o==null?void 0:o.rangeMax)=="number";let l;if(e&&f)l=[o.rangeMin,o.rangeMax];else{const u=n.flatMap(a=>[a.lower,a.upper]).filter(a=>a!=null&&!Number.isNaN(a)&&Number.isFinite(a));if(u.length===0)l=i?[.1,10]:[0,1];else{const[a,s]=[Math.min(...u),Math.max(...u)],p=s-a||1;l=[e?o.rangeMin:a-p*tt,f?o.rangeMax:s+p*tt]}}const c=ft(l,i);return i?xt([Math.max(c[0],.01),Math.max(c[1],.02)],[0,r]):yt(c,[0,r])}function mt(t,r,n){var e,f;const o=[],i=n.spacing.padding;if((e=t.labels)!=null&&e.title){const l=P(n.typography.fontSizeLg);o.push(`<text x="${i}" y="${r.titleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      font-weight="${n.typography.fontWeightBold}"
      fill="${n.colors.foreground}">${L(t.labels.title)}</text>`)}if((f=t.labels)!=null&&f.subtitle){const l=P(n.typography.fontSizeBase);o.push(`<text x="${i}" y="${r.subtitleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      fill="${n.colors.secondary}">${L(t.labels.subtitle)}</text>`)}return o.join(`
`)}function Et(t,r,n){var f,l;const o=[],i=n.spacing.padding;let e=r.footerY;if((f=t.labels)!=null&&f.caption){const c=P(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${L(t.labels.caption)}</text>`),e+=G.CAPTION_HEIGHT}if((l=t.labels)!=null&&l.footnote){const c=P(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-style="italic"
      fill="${n.colors.muted}">${L(t.labels.footnote)}</text>`)}return o.join(`
`)}function it(t,r,n,o,i,e,f,l){const c=[],u=P(e.typography.fontSizeSm),a=e.typography.fontWeightMedium,s=e.typography.fontWeightBold,p=K(t),g=b.DEFAULT_COLUMN_WIDTH,h=l??b.DEFAULT_LABEL_WIDTH,N=($,_)=>$+_/2+u*G.TEXT_BASELINE_ADJUSTMENT;if(p){const $=i/2,_=i/2;let x=n;f&&(c.push(`<text x="${x+A.TEXT_PADDING}" y="${N(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${u}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${L(f)}</text>`),c.push(`<line x1="${x+h}" x2="${x+h}"
        y1="${o}" y2="${o+i}"
        stroke="${e.colors.border}" stroke-width="1" opacity="0.3"/>`),x+=h);for(const d of t)if(d.isGroup){const E=rt(d,g),T=x+E/2;c.push(`<text x="${T}" y="${N(o,$)}"
          font-family="${e.typography.fontFamily}"
          font-size="${u}px"
          font-weight="${s}"
          text-anchor="middle"
          fill="${e.colors.foreground}">${L(d.header)}</text>`),c.push(`<line x1="${x}" x2="${x+E}"
          y1="${o+$}" y2="${o+$}"
          stroke="${e.colors.border}" stroke-width="1" opacity="0.5"/>`),x+=E}else{const E=d.width??g,{textX:T,anchor:y}=J(x,E,d.align),H=q(d.header,E,u,A.TEXT_PADDING);c.push(`<text x="${T}" y="${N(o,i)}"
          font-family="${e.typography.fontFamily}"
          font-size="${u}px"
          font-weight="${a}"
          text-anchor="${y}"
          fill="${e.colors.foreground}">${L(H)}</text>`),x+=E}x=n+(f?h:0);for(const d of t)if(d.isGroup){for(const E of d.columns)if(!E.isGroup){const T=E.width??g,{textX:y,anchor:H}=J(x,T,E.align);c.push(`<text x="${y}" y="${N(o+$,_)}"
              font-family="${e.typography.fontFamily}"
              font-size="${u}px"
              font-weight="${a}"
              text-anchor="${H}"
              fill="${e.colors.foreground}">${L(E.header)}</text>`),x+=T}}else x+=d.width??g}else{let $=n;f&&(c.push(`<text x="${$+A.TEXT_PADDING}" y="${N(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${u}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${L(f)}</text>`),$+=h);for(const _ of r){const x=_.width??g,{textX:d,anchor:E}=J($,x,_.align),T=q(_.header,x,u,A.TEXT_PADDING);c.push(`<text x="${d}" y="${N(o,i)}"
        font-family="${e.typography.fontFamily}"
        font-size="${u}px"
        font-weight="${a}"
        text-anchor="${E}"
        fill="${e.colors.foreground}">${L(T)}</text>`),$+=x}}return c.join(`
`)}function _t(t,r,n,o,i,e,f){const l=[],c=P(f.typography.fontSizeBase),u=o+i/2+c*G.TEXT_BASELINE_ADJUSTMENT,a=r*A.INDENT_PER_LEVEL;return l.push(`<rect x="${n}" y="${o}"
    width="${e}" height="${i}"
    fill="${f.colors.primary}" opacity="${ht}"/>`),l.push(`<text x="${n+A.TEXT_PADDING+a}" y="${u}"
    font-family="${f.typography.fontFamily}"
    font-size="${c}px"
    font-weight="${f.typography.fontWeightBold}"
    fill="${f.colors.foreground}">${L(t)}</text>`),l.join(`
`)}function st(t,r){const n=new Map;for(const o of r)if(o.type==="bar"){let i=0;for(const e of t){const f=e.metadata[o.field];typeof f=="number"&&f>i&&(i=f)}n.set(o.field,i>0?i:1)}return n}function at(t,r,n,o,i,e,f,l=b.DEFAULT_LABEL_WIDTH,c=0,u){var h,N,$,_,x,d,E,T,y,H,D,I,w;const a=[],s=P(e.typography.fontSizeBase),p=o+i/2+s*G.TEXT_BASELINE_ADJUSTMENT;let g=n;if(f){const m=c*A.INDENT_PER_LEVEL+(((h=t.style)==null?void 0:h.indent)??0)*A.INDENT_PER_LEVEL,M=(N=t.style)!=null&&N.bold?e.typography.fontWeightBold:e.typography.fontWeightNormal,v=($=t.style)!=null&&$.italic?"italic":"normal",R=l-m-A.TEXT_PADDING*2,C=q(t.label,R,s,0);if(a.push(`<text x="${g+A.TEXT_PADDING+m}" y="${p}"
      font-family="${e.typography.fontFamily}"
      font-size="${s}px"
      font-weight="${M}"
      font-style="${v}"
      fill="${((_=t.style)==null?void 0:_.color)??e.colors.foreground}">${L(C)}</text>`),(x=t.style)!=null&&x.badge){const S=String(t.style.badge),F=s*.8,U=4,W=F+U*2,O=t.label.length*s*.55,B=g+A.TEXT_PADDING+m+O+6,k=S.length*F*.6+U*2,X=o+(i-W)/2;a.push(`<rect x="${B}" y="${X}" width="${k}" height="${W}"
        rx="3" fill="${e.colors.primary}" opacity="0.15"/>`),a.push(`<text x="${B+k/2}" y="${X+W/2+F*.35}"
        text-anchor="middle"
        font-family="${e.typography.fontFamily}"
        font-size="${F}px"
        font-weight="500"
        fill="${e.colors.primary}">${L(S)}</text>`)}g+=l}for(const m of r){const M=m.width??b.DEFAULT_COLUMN_WIDTH,v=Ht(t,m),{textX:R,anchor:C}=J(g,M,m.align);if(m.type==="bar"&&typeof t.metadata[m.field]=="number"){const S=t.metadata[m.field],F=u==null?void 0:u.get(m.field),U=((E=(d=m.options)==null?void 0:d.bar)==null?void 0:E.maxValue)??F??100,W=((y=(T=m.options)==null?void 0:T.bar)==null?void 0:y.color)??e.colors.primary,O=e.shapes.pointSize*2,Y=M-A.TEXT_PADDING*2-50,k=Math.min(S/U*Y,Y);a.push(`<rect x="${g+A.TEXT_PADDING}" y="${o+i/2-O/2}"
        width="${Math.max(0,k)}" height="${O}"
        fill="${W}" opacity="0.7" rx="2"/>`);const X=g+M-A.TEXT_PADDING;a.push(`<text x="${X}" y="${p}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="end"
        fill="${e.colors.foreground}">${Z(S)}</text>`)}else if(m.type==="sparkline"&&Array.isArray(t.metadata[m.field])){let S=t.metadata[m.field];Array.isArray(S[0])&&(S=S[0]);const F=((D=(H=m.options)==null?void 0:H.sparkline)==null?void 0:D.height)??16,U=((w=(I=m.options)==null?void 0:I.sparkline)==null?void 0:w.color)??e.colors.primary,W=A.TEXT_PADDING*2,O=It(S,g+A.TEXT_PADDING,o+i/2-F/2,M-W,F);a.push(`<path d="${O}" fill="none" stroke="${U}" stroke-width="1.5"/>`)}else a.push(`<text x="${R}" y="${p}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="${C}"
        fill="${e.colors.foreground}">${L(v)}</text>`);g+=M}return a.join(`
`)}function Ht(t,r){var o,i,e,f;if(r.type==="interval")return gt(t.point,t.lower,t.upper);if(r.type==="numeric"){const l=t.metadata[r.field];return typeof l=="number"?Z(l):""}if(r.type==="pvalue"){const l=t.metadata[r.field];if(typeof l!="number")return"";const c=(i=(o=r.options)==null?void 0:o.pvalue)==null?void 0:i.stars,u=((f=(e=r.options)==null?void 0:e.pvalue)==null?void 0:f.thresholds)??[.05,.01,.001];let a="";return c&&(l<u[2]?a="***":l<u[1]?a="**":l<u[0]&&(a="*")),l<.001?`<0.001${a}`:`${l.toFixed(3)}${a}`}const n=t.metadata[r.field];return n!=null?String(n):""}function It(t,r,n,o,i){if(t.length===0)return"";const e=Math.min(...t),l=Math.max(...t)-e||1;return`M${t.map((u,a)=>{const s=r+a/(t.length-1)*o,p=n+i-(u-e)/l*i;return`${s.toFixed(1)},${p.toFixed(1)}`}).join("L")}`}const lt=6;function Q(t,r,n){const o=t.metadata[r];return o!=null&&typeof o=="number"&&!Number.isNaN(o)?o:n}function bt(t,r){return r<=1?0:-((r-1)*lt)/2+t*lt}function At(t,r,n,o,i,e=[]){var x;let f;e.length===0?f=[{point:t.point,lower:t.lower,upper:t.upper,color:null}]:f=e.map(d=>({point:Q(t,d.pointCol,t.point),lower:Q(t,d.lowerCol,t.lower),upper:Q(t,d.upperCol,t.upper),color:d.color??null}));const l=f.filter(d=>d.point!=null&&!Number.isNaN(d.point)&&d.lower!=null&&!Number.isNaN(d.lower)&&d.upper!=null&&!Number.isNaN(d.upper));if(l.length===0)return"";const c=o.shapes.pointSize,u=t.metadata.weight;let a=c;if(u){const d=.5+Math.sqrt(u/100)*1.5;a=Math.min(Math.max(c*d,3),c*2.5)}const s=o.shapes.lineWidth,p=o.colors.intervalLine,g=A.WHISKER_HALF_HEIGHT,h=((x=t.style)==null?void 0:x.type)==="summary",$=o.shapes.summaryHeight/2,_=[];return l.forEach((d,E)=>{const T=r+bt(E,l.length),y=n(d.lower),H=n(d.upper),D=n(d.point),I=d.color??p,w=d.color??(d.point>i?o.colors.intervalPositive:d.point<i?o.colors.intervalNegative:o.colors.muted);if(h){const m=[`${y},${T}`,`${D},${T-$}`,`${H},${T}`,`${D},${T+$}`].join(" ");_.push(`
        <g class="interval effect-${E} summary">
          <polygon points="${m}"
            fill="${o.colors.summaryFill}" stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else _.push(`
        <g class="interval effect-${E}">
          <!-- CI line -->
          <line x1="${y}" x2="${H}" y1="${T}" y2="${T}"
            stroke="${I}" stroke-width="${s}"/>
          <!-- Whiskers -->
          <line x1="${y}" x2="${y}" y1="${T-g}" y2="${T+g}"
            stroke="${I}" stroke-width="${s}"/>
          <line x1="${H}" x2="${H}" y1="${T-g}" y2="${T+g}"
            stroke="${I}" stroke-width="${s}"/>
          <!-- Point -->
          <rect x="${D-a}" y="${T-a}"
            width="${a*2}" height="${a*2}" fill="${w}"/>
        </g>`)}),_.join("")}function Nt(t,r,n,o,i,e,f,l){const u=l.shapes.summaryHeight/2,a=i(r),s=i(t),p=i(n),g=e+Math.max(0,Math.min(f,a)),h=e+Math.max(0,Math.min(f,s)),N=e+Math.max(0,Math.min(f,p));return`<polygon points="${[`${g},${o}`,`${h},${o-u}`,`${N},${o}`,`${h},${o+u}`].join(" ")}"
    fill="${l.colors.summaryFill}"
    stroke="${l.colors.summaryBorder}"
    stroke-width="1"/>`}function Dt(t,r,n,o,i){const e=[],f=typeof n.axis.tickCount=="number"?n.axis.tickCount:A.DEFAULT_TICK_COUNT,l=Array.isArray(n.axis.tickValues)?n.axis.tickValues:t.ticks(f),c=P(n.typography.fontSizeSm);e.push(`<line x1="${i}" x2="${i+r.forestWidth}"
    y1="0" y2="0" stroke="${n.colors.border}" stroke-width="1"/>`);for(const u of l){const a=i+t(u);e.push(`<line x1="${a}" x2="${a}" y1="0" y2="4"
      stroke="${n.colors.border}" stroke-width="1"/>`),e.push(`<text x="${a}" y="16" text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${$t(u)}</text>`)}return o&&e.push(`<text x="${i+r.forestWidth/2}" y="28"
      text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-weight="500"
      fill="${n.colors.secondary}">${L(o)}</text>`),`<g transform="translate(0, ${r.mainY+r.headerHeight+r.plotHeight})">${e.join(`
`)}</g>`}function ct(t,r,n,o,i,e){let l=`<line x1="${t}" x2="${t}" y1="${r}" y2="${n}"
    stroke="${i}" stroke-width="1" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return e&&(l+=`<text x="${t}" y="${r-4}" text-anchor="middle"
      font-size="10px" fill="${i}">${L(e)}</text>`),l}class z extends Error{constructor(r){super(`SVG Generator: ${r}`),this.name="SVGGeneratorError"}}function Lt(t){if(!t||typeof t!="object")throw new z("Invalid spec: expected an object");const r=t;if(!r.data||typeof r.data!="object")throw new z("Invalid spec: missing or invalid 'data' property");const n=r.data;if(!Array.isArray(n.rows))throw new z("Invalid spec: 'data.rows' must be an array");if(!r.theme||typeof r.theme!="object")throw new z("Invalid spec: missing or invalid 'theme' property");const o=r.theme;if(!o.colors||typeof o.colors!="object")throw new z("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new z("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new z("Invalid spec: missing or invalid 'theme.spacing'")}function wt(t,r={}){Lt(t);const n=t.theme,o=pt(t,r),i=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],f=j(e,"left"),l=j(e,"right"),c=V(e,"left"),u=V(e,"right"),a=b.DEFAULT_LABEL_WIDTH+c.reduce((y,H)=>y+(H.width??b.DEFAULT_COLUMN_WIDTH),0),s=i+a,p=Tt(t,o.forestWidth),g=s+o.forestWidth,h=[];h.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${o.totalWidth}" height="${o.totalHeight}"
  viewBox="0 0 ${o.totalWidth} ${o.totalHeight}">`);const N=r.backgroundColor??n.colors.background;h.push(`<rect width="100%" height="100%" fill="${N}"/>`),h.push(mt(t,o,n));const $=o.mainY;h.push(it(f,c,i,$,o.headerHeight,n,t.data.labelHeader??"Study",b.DEFAULT_LABEL_WIDTH)),u.length>0&&h.push(it(l,u,g,$,o.headerHeight,n)),h.push(`<line x1="${i}" x2="${o.totalWidth-i}"
    y1="${$+o.headerHeight}" y2="${$+o.headerHeight}"
    stroke="${n.colors.border}" stroke-width="1"/>`);const _=et(t);if(t.data.includeForest&&o.forestWidth>0){const y=o.mainY+o.headerHeight,H=s+p(t.data.nullValue);h.push(ct(H,y,y+o.plotHeight,"dashed",n.colors.muted));const D=Array.isArray(t.annotations)?t.annotations:[];for(const I of D)if(I.type==="reference_line"){const w=s+p(I.x);h.push(ct(w,y,y+o.plotHeight,I.style,I.color??n.colors.accent,I.label))}if(_.forEach((I,w)=>{if(I.type==="data"){const m=y+w*o.rowHeight+o.rowHeight/2;h.push(At(I.row,m,M=>s+p(M),n,t.data.nullValue,t.data.effects))}}),t.data.overall&&o.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const I=y+o.summaryYPosition;h.push(Nt(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,I,p,s,o.forestWidth,n))}h.push(Dt(p,o,n,t.data.axisLabel,s))}const x=o.mainY+o.headerHeight,d=t.data.rows,E=st(d,c),T=st(d,u);return _.forEach((y,H)=>{const D=x+H*o.rowHeight;if(y.type==="group_header")h.push(_t(y.label,y.depth,i,D,o.rowHeight,o.totalWidth-i*2,n));else{const I=y.row,w=y.depth,m=dt(w),M=H%2===1?ut:0,v=Math.max(m,M);v>0&&h.push(`<rect x="${i}" y="${D}"
          width="${o.totalWidth-i*2}" height="${o.rowHeight}"
          fill="${n.colors.muted}" opacity="${v}"/>`),h.push(at(I,c,i,D,o.rowHeight,n,!0,b.DEFAULT_LABEL_WIDTH,w,E)),u.length>0&&h.push(at(I,u,g,D,o.rowHeight,n,!1,0,w,T))}h.push(`<line x1="${i}" x2="${o.totalWidth-i}"
      y1="${D+o.rowHeight}" y2="${D+o.rowHeight}"
      stroke="${n.colors.border}" stroke-width="1" opacity="0.5"/>`)}),h.push(Et(t,o,n)),h.push("</svg>"),h.join(`
`)}function Mt(t,r){const n=JSON.parse(t);return wt(n,r)}globalThis.generateSVG=Mt})();
