(function(){"use strict";const Kt=[1,5,2,2.5,4,3],st=[.001,.002,.005,.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,300,500,750,1e3];function It(t,n){return n?gn(t):mn(t)}function gn(t){if(t[0]<=0||t[1]<=0)return[.1,10];if(t[0]>=t[1])return t;let n=st[0];for(const o of st)if(o<=t[0])n=o;else break;t[0]<st[0]&&(n=Math.pow(10,Math.floor(Math.log10(t[0]))));let e=st[st.length-1];for(let o=st.length-1;o>=0&&st[o]>=t[1];o--)e=st[o];return t[1]>st[st.length-1]&&(e=Math.pow(10,Math.ceil(Math.log10(t[1])))),[n,e]}function mn(t){const n=t[1]-t[0];if(n===0)return t;if(n<0)return[t[1],t[0]];const e=Math.pow(10,Math.floor(Math.log10(n)));let o=e,s=1/0;for(const h of Kt)for(const c of[.1,1,10]){const r=h*e*c;if(r<=0)continue;const l=Math.floor(t[0]/r)*r,f=(Math.ceil(t[1]/r)*r-l)/n-1;f>=0&&f<s&&(s=f,o=r)}const a=Math.floor(t[0]/o)*o,i=Math.ceil(t[1]/o)*o;return[Math.round(a*1e10)/1e10,Math.round(i*1e10)/1e10]}function lt(t,n,e,o,s=!1){if(t&&e in t){const a=t[e];if(typeof a=="number"&&Number.isFinite(a)&&(!s||a>0))return a}return e===o&&n!=null&&Number.isFinite(n)&&(!s||n>0)?n:null}const pt=12;function yn(t){const{rows:n,config:e,scale:o,nullValue:s,forestWidth:a,pointSize:i,effects:h=[],pointCol:c,lowerCol:r,upperCol:l}=t,d=$n(n,e,o,s,h,c,r,l),u=xn(d,e,o,a,i),f=Zt(d,e,o,s);return{axisLimits:d,plotRegion:u,ticks:f}}function $n(t,n,e,o,s=[],a,i,h){const c=n.rangeMin!=null,r=n.rangeMax!=null;if(c&&r)return[n.rangeMin,n.rangeMax];const l=[],d=e==="log",u=a||"point";for(const C of t){const v=lt(C.metadata,void 0,u,"point",d);v!=null&&l.push(v);for(const L of s){const B=lt(C.metadata,void 0,L.pointCol,"point",d);B!=null&&l.push(B)}}if(l.length===0)return e==="log"?[.1,10]:[-1,1];let f=Math.min(...l),p=Math.max(...l);(n.includeNull??!0)&&(f=Math.min(f,o),p=Math.max(p,o));const I=f,b=p;let x;if(d){const C=Math.max(f,.001),v=Math.max(p,.001);x=Math.log(v)-Math.log(C)}else x=p-f;if(x===0||!Number.isFinite(x)){const C=l[0];if(d)return It([C/2,C*2],!0);{const v=Math.max(1,Math.abs(C)*.1);return It([C-v,C+v],!1)}}const[_,E]=It([f,p],d),w=n.ciClipFactor??2;let m=_,y=E;const g=[],A=[],T=i||"lower",S=h||"upper";for(const C of t){const v=lt(C.metadata,void 0,T,"lower",d);v!=null&&g.push(v);const L=lt(C.metadata,void 0,S,"upper",d);L!=null&&A.push(L);for(const B of s){const V=lt(C.metadata,void 0,B.lowerCol,"lower",d);V!=null&&g.push(V);const R=lt(C.metadata,void 0,B.upperCol,"upper",d);R!=null&&A.push(R)}}let H,G;if(d)H=m/w,G=y*w;else{const C=y-m;H=m-C*w,G=y+C*w}let $=!1,k=!1;for(const C of g)C>=H?m=Math.min(m,C):$=!0;for(const C of A)C<=G?y=Math.max(y,C):k=!0;if($&&(m=Math.min(m,H)),k&&(y=Math.max(y,G)),n.symmetric===!0&&!c&&!r)if(e==="log"){const C=Math.log(o),v=Math.max(Math.abs(Math.log(Math.max(I,.001))-C),Math.abs(Math.log(b)-C));m=Math.exp(C-v),y=Math.exp(C+v)}else{const C=Math.max(Math.abs(I-o),Math.abs(b-o));m=o-C,y=o+C}let F=c?n.rangeMin:m,M=r?n.rangeMax:y;return It([F,M],e==="log")}function xn(t,n,e,o,s){if(!(n.markerMargin??!0)||o<=0)return t;const i=o-2*pt;if(i<=0)return t;if(e==="log"){const r=Math.log(Math.max(t[0],.001)),l=Math.log(Math.max(t[1],.001)),d=l-r,u=s/2*(d/i),f=Math.min(u,.5);return[Math.exp(r-f),Math.exp(l+f)]}const h=t[1]-t[0],c=s/2*(h/i);return[t[0]-c,t[1]+c]}function Zt(t,n,e,o){const[s,a]=t,i=o>=s&&o<=a,h=(n.nullTick??!0)&&i;if(n.tickValues&&n.tickValues.length>0){let l=n.tickValues.filter(d=>d>=s&&d<=a);return h&&!l.includes(o)&&(l=[...l,o].sort((d,u)=>d-u)),l}const c=n.tickCount??5;let r=e==="log"?bn(t,c):Mn(t,c);return h&&!r.includes(o)&&(r=[...r,o].sort((l,d)=>l-d)),r}function Mn(t,n){const[e,o]=t,s=o-e;if(s===0)return[e];const a=s/Math.max(n-1,1),i=Math.pow(10,Math.floor(Math.log10(a)));let h=i,c=1/0;for(const d of Kt){const u=d*i,f=Math.floor(s/u)+1,p=Math.abs(f-n);p<c&&(c=p,h=u);const N=d*i/10;if(N>0){const I=Math.floor(s/N)+1,b=Math.abs(I-n);b<c&&(c=b,h=N)}}const r=Math.ceil(e/h)*h,l=[];for(let d=r;d<=o+h*.001;d+=h){const u=Math.round(d*1e10)/1e10;u>=e&&u<=o&&l.push(u)}return l.length<2&&(l.includes(e)||l.unshift(e),l.includes(o)||l.push(o)),l}function bn(t,n){const[e,o]=t,a=[.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,500,1e3].filter(c=>c>=e&&c<=o);if(a.length<=n)return a;const i=[1,.1,10,100,.5,2,5,.2,.25,1.5,3,4,20,50],h=[];for(const c of i)a.includes(c)&&h.length<n&&h.push(c);if(h.length<n){const c=a.filter(l=>!h.includes(l)),r=Math.max(1,Math.floor(c.length/(n-h.length)));for(let l=0;l<c.length&&h.length<n;l+=r)h.push(c[l])}return h.sort((c,r)=>c-r)}function Nn(t){var o,s;const n=((o=t==null?void 0:t.shapes)==null?void 0:o.lineWidth)??1.5,e=((s=t==null?void 0:t.colors)==null?void 0:s.intervalLine)??"#475569";return{width:Math.max(4,Math.round(n*3)),height:Math.max(6,Math.round(n*4)),color:e,opacity:1}}function Jt(t,n,e,o){const{width:s,height:a}=o,i=a/2;return t==="left"?`M ${n} ${e} L ${n+s} ${e-i} L ${n+s} ${e+i} Z`:`M ${n} ${e} L ${n-s} ${e-i} L ${n-s} ${e+i} Z`}const Wt={RENDERING_BUFFER:4},$t={FONT_SCALE:.8,PADDING:4,GAP:6},gt={DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},ot={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},X={INDENT_PER_LEVEL:12,TEXT_PADDING:10,DEFAULT_TICK_COUNT:5},Tn={OVERALL_ROW_HEIGHT_MULTIPLIER:1.5},bt={MIN:60,MAX:600,LABEL_MAX:400,VISUAL_MIN:{sparkline:92,bar:100,stars:84,range:84,badge:74,forest:200,viz_bar:150,viz_boxplot:150,viz_violin:150}},_t={CHEVRON_WIDTH:12,GAP:6,SAFETY_MARGIN:8},Qt={SPACING:6},Lt={EDGE_THRESHOLD:35,MIN_TICK_SPACING:50},En={success:"#16a34a",warning:"#d97706",error:"#dc2626",info:"#2563eb"};function wn(t,n){return n<=1?0:-((n-1)*Qt.SPACING)/2+t*Qt.SPACING}function St(t,n){const e=t.split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),e.join(".")}function Pt(t){const n=Math.abs(t),e=t<0?"-":"";if(n>=1e12)throw new Error(`Cannot abbreviate value >= 1 trillion: ${t}`);if(n>=1e9){const o=n/1e9;return e+Rt(o)+"B"}if(n>=1e6){const o=n/1e6;return e+Rt(o)+"M"}if(n>=1e3){const o=n/1e3;return e+Rt(o)+"K"}return e+Math.round(n).toString()}function Rt(t){const n=Math.round(t*10)/10;return n===Math.floor(n)?n.toFixed(0):n.toFixed(1)}const An={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function In(t){return t.split("").map(n=>An[n]??n).join("")}function Nt(t,n){var h,c,r,l,d;if(t==null||Number.isNaN(t))return(n==null?void 0:n.naText)??"";if(n!=null&&n.percent){const{decimals:u,digits:f,multiply:p=!0,symbol:N=!0}=n.percent,I=p?t*100:t,b=f!=null?I.toPrecision(f):I.toFixed(u??1);return N?`${b}%`:b}if(((h=n==null?void 0:n.numeric)==null?void 0:h.abbreviate)&&Math.abs(t)>=1e3)return Pt(t);const o=(c=n==null?void 0:n.numeric)==null?void 0:c.digits;if(o!=null){const u=t.toPrecision(o),f=(r=n==null?void 0:n.numeric)==null?void 0:r.thousandsSep;return f&&typeof f=="string"?St(u,f):u}const s=(l=n==null?void 0:n.numeric)==null?void 0:l.decimals,a=(d=n==null?void 0:n.numeric)==null?void 0:d.thousandsSep;let i;return s!==void 0?i=t.toFixed(s):Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?i=Math.round(t).toString():i=t.toFixed(2),a&&typeof a=="string"&&(i=St(i,a)),i}function tn(t,n){const{eventsField:e,nField:o,separator:s="/",showPct:a=!1,thousandsSep:i,abbreviate:h}=n.events,c=t.metadata[e],r=t.metadata[o];if(c==null||r===void 0||r===null)return n.naText??"";const l=Number(c),d=Number(r);let u,f;h&&(l>=1e3||d>=1e3)?(u=l>=1e3?Pt(l):String(l),f=d>=1e3?Pt(d):String(d)):(u=String(l),f=String(d),i&&typeof i=="string"&&(u=St(u,i),f=St(f,i)));let p=`${u}${s}${f}`;if(a&&d>0){const N=(l/d*100).toFixed(1);p+=` (${N}%)`}return p}function nn(t,n,e,o){var h,c,r;if(t==null||Number.isNaN(t))return"";const s=((h=o==null?void 0:o.interval)==null?void 0:h.decimals)??2,a=((c=o==null?void 0:o.interval)==null?void 0:c.sep)??" ",i=(r=o==null?void 0:o.interval)==null?void 0:r.impreciseThreshold;return n==null||e===void 0||e===null||Number.isNaN(n)||Number.isNaN(e)?t.toFixed(s):i!=null&&n>0&&e/n>i?"—":`${t.toFixed(s)}${a}(${n.toFixed(s)}, ${e.toFixed(s)})`}function on(t,n){if(t==null||Number.isNaN(t))return(n==null?void 0:n.naText)??"";const e=n==null?void 0:n.pvalue,o=(e==null?void 0:e.digits)??2,s=(e==null?void 0:e.expThreshold)??.001,a=(e==null?void 0:e.abbrevThreshold)??null,i=(e==null?void 0:e.format)??"auto",h=(e==null?void 0:e.stars)??!1,c=(e==null?void 0:e.thresholds)??[.05,.01,.001];let r="";if(h&&(t<c[2]?r="***":t<c[1]?r="**":t<c[0]&&(r="*")),a!==null&&t<a)return`<${a}${r}`;if(i==="scientific"||i==="auto"&&t<s){const d=Math.floor(Math.log10(t));return`${(t/Math.pow(10,d)).toPrecision(o)}×10${In(d.toString())}${r}`}let l;return t>=.1?l=t.toFixed(o):t>=.01?l=t.toFixed(o+1):l=t.toFixed(o+2),`${l}${r}`}function _n(t,n){var a,i,h,c;const{type:e,field:o,options:s}=n;switch(e){case"interval":{const r=(a=s==null?void 0:s.interval)!=null&&a.point?t.metadata[s.interval.point]:t.point,l=(i=s==null?void 0:s.interval)!=null&&i.lower?t.metadata[s.interval.lower]:t.lower,d=(h=s==null?void 0:s.interval)!=null&&h.upper?t.metadata[s.interval.upper]:t.upper;return nn(r,l,d,s)}case"custom":return s!=null&&s.events?tn(t,s):String(t.metadata[o]??"");case"pvalue":return on(t.metadata[o],s);case"numeric":return Nt(t.metadata[o],s);case"percent":return Nt(t.metadata[o],s);case"sparkline":case"icon":case"stars":case"img":case"range":return"";case"badge":{const r=t.metadata[o];return r==null?"":`  ${String(r)}  `}case"bar":{if(((c=s==null?void 0:s.bar)==null?void 0:c.showLabel)===!1)return"";const r=t.metadata[o];return r==null?"":r>=100?r.toFixed(0):r>=10?r.toFixed(1):r.toFixed(2)}case"text":default:return String(t.metadata[o]??"")}}function Q(t,n){const e="⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻";let o=0;for(const s of t)e.includes(s)?o+=n*.3:"il1.,;:|!()[]{}' ".includes(s)?o+=n*.35:"×−".includes(s)?o+=n*.5:"mwMW@%".includes(s)?o+=n*.85:s>="0"&&s<="9"?o+=n*.6:o+=n*.55;return o}function Sn(t){if(!t||t.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const n=t.filter(s=>s!=null&&!Number.isNaN(s)).sort((s,a)=>s-a);if(n.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const e=n.length,o=s=>{if(e===1)return n[0];const a=(e-1)*s,i=Math.floor(a),h=Math.ceil(a);return i===h?n[i]:n[i]+(a-i)*(n[h]-n[i])};return{min:n[0],q1:o(.25),median:o(.5),q3:o(.75),max:n[e-1]}}function Cn(t,n,e){if(!t||t.length===0||Number.isNaN(n)||Number.isNaN(e))return[];const o=e-n,s=n-1.5*o,a=e+1.5*o;return t.filter(i=>i!=null&&!Number.isNaN(i)&&(i<s||i>a))}function en(t){const n=Sn(t),e=Cn(t,n.q1,n.q3);return{...n,outliers:e}}function Dn(t){if(!t||t.length<2)return 1;const n=t.filter(f=>f!=null&&!Number.isNaN(f)).sort((f,p)=>f-p);if(n.length<2)return 1;const e=n.length,o=n.reduce((f,p)=>f+p,0)/e,s=n.reduce((f,p)=>f+(p-o)**2,0)/(e-1),a=Math.sqrt(s),i=Math.floor((e-1)*.25),h=Math.floor((e-1)*.75),c=n[i],l=n[h]-c,u=.9*Math.min(a,l/1.34)*Math.pow(e,-.2);return Math.max(u,.001)}function kn(t){return Math.exp(-.5*t*t)/Math.sqrt(2*Math.PI)}function Fn(t,n,e=128){if(!t||t.length===0)return{x:[],y:[]};const o=t.filter(f=>f!=null&&!Number.isNaN(f));if(o.length===0)return{x:[],y:[]};const s=n??Dn(o),a=Math.min(...o),i=Math.max(...o),h=3*s,c=a-h,l=(i+h-c)/(e-1),d=[],u=[];for(let f=0;f<e;f++){const p=c+f*l;d.push(p);let N=0;for(const I of o)N+=kn((p-I)/s);N/=o.length*s,u.push(N)}return{x:d,y:u}}function Hn(t,n){if(t.y.length===0)return t;const e=Math.max(...t.y);if(e===0)return t;const o=t.y.map(s=>s/e*n);return{x:t.x,y:o}}function vn(t,n){var r,l;const e=new Map,o=tt(t.theme.typography.fontSizeBase),s=t.theme.typography.headerFontScale??1.05,a=Math.round(o*s*100)/100,i=t.data.rows,h=(t.theme.spacing.cellPaddingX??10)*2,c=(t.theme.spacing.groupPadding??8)*2;for(const d of n){if(d.width!=="auto"&&d.width!==null&&d.width!==void 0)continue;let u=0;d.header&&(u=Math.max(u,Q(d.header,a)));for(const N of i){if(((r=N.style)==null?void 0:r.type)==="header"||((l=N.style)==null?void 0:l.type)==="spacer")continue;const I=_n(N,d);I&&(u=Math.max(u,Q(I,o)))}const f=bt.VISUAL_MIN[d.type]??bt.MIN,p=Math.ceil(u+h+Wt.RENDERING_BUFFER);e.set(d.id,Math.min(bt.MAX,Math.max(f,p)))}return Gn(t.columns,e,a,c,Wt.RENDERING_BUFFER),e}function Gn(t,n,e,o,s){function a(c){return c.isGroup?c.columns.flatMap(a):[c]}function i(c){const r=n.get(c.id);return r!==void 0?r:typeof c.width=="number"?c.width:bt.MIN}function h(c){if(c.isGroup){for(const r of c.columns)h(r);if(c.header){const r=Q(c.header,e)+o+s,l=a(c),d=l.reduce((u,f)=>u+i(f),0);if(r>d&&l.length>0){const u=Math.ceil((r-d)/l.length);for(const f of l)n.set(f.id,i(f)+u)}}}}for(const c of t)h(c)}function rn(t,n,e){let o=e.filter(a=>a.groupId===t).length;const s=n.filter(a=>a.parentId===t);for(const a of s)o+=rn(a.id,n,e);return o}function an(t){var c,r;const n=tt(t.theme.typography.fontSizeBase),e=(t.theme.spacing.cellPaddingX??10)*2;let o=0;const s=new Map,a=Array.isArray(t.data.groups)?t.data.groups:[];for(const l of a)s.set(l.id,l.depth);const i=l=>l?(s.get(l)??0)+1:0;t.data.labelHeader&&(o=Math.max(o,Q(t.data.labelHeader,n)));for(const l of t.data.rows)if(l.label){const d=i(l.groupId),u=((c=l.style)==null?void 0:c.indent)??0,p=(d+u)*X.INDENT_PER_LEVEL;let N=Q(l.label,n)+p;if((r=l.style)!=null&&r.badge){const I=String(l.style.badge),b=n*$t.FONT_SCALE,_=Q(I,b)+$t.PADDING*2;N+=$t.GAP+_}o=Math.max(o,N)}for(const l of a)if(l.label){const d=l.depth*X.INDENT_PER_LEVEL,u=Q(l.label,n),p=`(${rn(l.id,a,t.data.rows)})`,N=n*.75,I=Q(p,N),b=d+_t.CHEVRON_WIDTH+_t.GAP+u+_t.GAP+I+_t.SAFETY_MARGIN;o=Math.max(o,b)}const h=Math.ceil(o+e+Wt.RENDERING_BUFFER);return Math.min(bt.LABEL_MAX,Math.max(bt.MIN,h))}function Bt(t,n){const e=n.get(t.id);return e!==void 0?e:typeof t.width=="number"?t.width:gt.DEFAULT_COLUMN_WIDTH}function Wn(t,n,e=0){var ft,et,W,P,q;const o=t.theme,s=o.spacing.rowHeight,a=o.spacing.padding,i=Array.isArray(t.columns)?t.columns:[],h=ln(i,"left"),c=ln(i,"right"),r=Ct(h)||Ct(c)||Ct(i),l=r?2:1,d=o.spacing.cellPaddingY??4,p=(o.spacing.headerHeight/l+(r?d*2:0))*l,N=!!((ft=t.labels)!=null&&ft.title),I=!!((et=t.labels)!=null&&et.subtitle),b=!!((W=t.labels)!=null&&W.caption),x=!!((P=t.labels)!=null&&P.footnote),_=N?ot.TITLE_HEIGHT:0,E=I?ot.SUBTITLE_HEIGHT:0,w=_+E+(N||I?a:0),m=b?ot.CAPTION_HEIGHT:0,y=x?ot.FOOTNOTE_HEIGHT:0,g=m+y+(b||x?a:0),A=sn(t),T=!!t.data.overall;let S=0;for(const z of A){const J=z.type==="data"&&((q=z.row.style)==null?void 0:q.type)==="spacer";S+=J?s/2:s}T&&(S+=s*Tn.OVERALL_ROW_HEIGHT_MULTIPLIER);const H=Ut(i,"left"),G=Ut(i,"right"),$=zt(i).filter(z=>z.position===void 0),k=[...H,...G,...$];let D,F;if(n.columnWidths){D=new Map;for(const[z,J]of Object.entries(n.columnWidths))z!=="__label__"&&D.set(z,J);F=n.columnWidths.__label__??an(t)}else D=vn(t,k),F=an(t);const M=F+H.reduce((z,J)=>z+Bt(J,D),0),C=G.reduce((z,J)=>z+Bt(J,D),0),v=$.filter(z=>z.type!=="forest").reduce((z,J)=>z+Bt(J,D),0),L=n.width??gt.DEFAULT_WIDTH,V=k.some(z=>z.type==="forest")||t.data.includeForest,R=M+C+v;let K;if(!V)K=0;else if(typeof n.forestWidth=="number")K=n.forestWidth;else if(typeof t.layout.plotWidth=="number")K=t.layout.plotWidth;else{const z=L-R-gt.COLUMN_GAP*2-a*2;K=Math.max(z,gt.MIN_FOREST_WIDTH)}const ct=a*2+R+K+gt.COLUMN_GAP*2,it=Math.max(n.width??L,ct),ut=32+(o.spacing.axisGap??12),mt=w+a+p+S+ut+g+gt.BOTTOM_MARGIN;return{totalWidth:it,totalHeight:n.height??mt,tableWidth:M+C,forestWidth:K,headerHeight:p,rowHeight:s,plotHeight:S,axisHeight:gt.AXIS_HEIGHT,nullValue:e,summaryYPosition:S-s,showOverallSummary:T,headerTextHeight:w,footerTextHeight:g,titleY:a+ot.TITLE_HEIGHT-8,subtitleY:a+_+ot.SUBTITLE_HEIGHT-4,mainY:w+a,footerY:w+a+p+S+ut+8,autoWidths:D,labelWidth:F}}function sn(t){var d;const n=t.data.rows,e=Array.isArray(t.data.groups)?t.data.groups:[];if(e.length===0)return n.map(u=>({type:"data",row:u,depth:0}));const o=new Map;for(const u of e)o.set(u.id,u);const s=new Map;for(const u of n){const f=u.groupId??null;s.has(f)||s.set(f,[]),s.get(f).push(u)}const a=new Set;for(const u of s.keys()){if(!u)continue;let f=u;for(;f;)a.add(f),f=(d=o.get(f))==null?void 0:d.parentId}function i(u){return e.filter(f=>(f.parentId??null)===u&&a.has(f.id))}function h(u){if(!u)return 0;const f=o.get(u);return f?f.depth+1:0}function c(u){var p;let f=((p=s.get(u))==null?void 0:p.length)??0;for(const N of i(u))f+=c(N.id);return f}const r=[];function l(u){if(u){const p=o.get(u);if(!p)return;const N=c(u);r.push({type:"group_header",groupId:p.id,label:p.label,depth:p.depth,rowCount:N})}for(const p of i(u))l(p.id);const f=s.get(u)??[];for(const p of f)r.push({type:"data",row:p,depth:h(p.groupId)})}return l(null),r}function Vt(t){const n=[];for(const e of t)e.isGroup?n.push(...Vt(e.columns)):n.push(e);return n}function zt(t){const n=[];for(const e of t)e.isGroup?n.push(...Vt(e.columns)):n.push(e);return n}function Ut(t,n){if(n===void 0)return zt(t);const e=[];for(const o of t)o.position===n&&(o.isGroup?e.push(...Vt(o.columns)):e.push(o));return e}function ln(t,n){return t.filter(e=>e.position===n)}function Ct(t){return t.some(n=>n.isGroup)}function tt(t){let n;return t.endsWith("rem")?n=parseFloat(t)*ot.REM_BASE:t.endsWith("px")?n=parseFloat(t):n=ot.DEFAULT_FONT_SIZE,Math.round(n*100)/100}function Dt(t,n,e){return e==="right"?{textX:t+n-X.TEXT_PADDING,anchor:"end"}:e==="center"?{textX:t+n/2,anchor:"middle"}:{textX:t+X.TEXT_PADDING,anchor:"start"}}function j(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function cn(t,n,e,o=0){const s=n-o*2;if(Q(t,e)<=s)return t;const i="…",h=e*.55;let c=0,r=t.length;for(;c<r;){const l=Math.ceil((c+r)/2),d=t.slice(0,l);Q(d,e)+h<=s?c=l:r=l-1}return c===0?i:t.slice(0,c)+i}function Ln(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function Tt(t,n){const[e,o]=t,[s,a]=n,i=(a-s)/(o-e),h=c=>s+(c-e)*i;return h.domain=()=>t,h.range=()=>n,h.ticks=c=>{const r=(o-e)/(c-1),l=[];for(let d=0;d<c;d++)l.push(e+r*d);return l},h}function Et(t,n){const[e,o]=t.map(l=>Math.max(l,.001)),[s,a]=n,i=Math.log10(e),h=Math.log10(o),c=(a-s)/(h-i),r=l=>{const d=Math.log10(Math.max(l,.001));return s+(d-i)*c};return r.domain=()=>[e,o],r.range=()=>n,r.ticks=l=>{const d=[],u=Math.floor(Math.log10(e)),f=Math.ceil(Math.log10(o));for(let p=u;p<=f;p++){const N=Math.pow(10,p);for(const I of[1,2,5]){const b=N*I;b>=e&&b<=o&&d.push(b)}}return d.length>0?d:[e,o]},r}function Pn(t,n,e,o){const s=e.scale==="log",a=pt,i=Math.max(n-pt,a+50);if(o!=null&&o.xDomain){const d=o.xDomain,u=o.clipBounds??d,f=Zt(u,t.theme.axis,e.scale,e.nullValue);return s?{scale:Et([Math.max(d[0],.01),Math.max(d[1],.02)],[a,i]),clipBounds:u,ticks:f}:{scale:Tt(d,[a,i]),clipBounds:u,ticks:f}}const h=yn({rows:t.data.rows,config:t.theme.axis,scale:e.scale,nullValue:e.nullValue,forestWidth:n,pointSize:t.theme.shapes.pointSize,effects:e.effects,pointCol:e.pointCol,lowerCol:e.lowerCol,upperCol:e.upperCol}),{plotRegion:c,axisLimits:r,ticks:l}=h;return s?{scale:Et([Math.max(c[0],.01),Math.max(c[1],.02)],[a,i]),clipBounds:r,ticks:l}:{scale:Tt(c,[a,i]),clipBounds:r,ticks:l}}function Rn(t,n,e){var a,i;const o=[],s=e.spacing.padding;if((a=t.labels)!=null&&a.title){const h=tt(e.typography.fontSizeLg);o.push(`<text x="${s}" y="${n.titleY}"
      font-family="${e.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${e.typography.fontWeightBold}"
      fill="${e.colors.foreground}">${j(t.labels.title)}</text>`)}if((i=t.labels)!=null&&i.subtitle){const h=tt(e.typography.fontSizeBase);o.push(`<text x="${s}" y="${n.subtitleY}"
      font-family="${e.typography.fontFamily}"
      font-size="${h}px"
      fill="${e.colors.secondary}">${j(t.labels.subtitle)}</text>`)}return o.join(`
`)}function Bn(t,n,e){var i,h;const o=[],s=e.spacing.padding;let a=n.footerY;if((i=t.labels)!=null&&i.caption){const c=tt(e.typography.fontSizeSm);o.push(`<text x="${s}" y="${a}"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      fill="${e.colors.secondary}">${j(t.labels.caption)}</text>`),a+=ot.CAPTION_HEIGHT}if((h=t.labels)!=null&&h.footnote){const c=tt(e.typography.fontSizeSm);o.push(`<text x="${s}" y="${a}"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      font-style="italic"
      fill="${e.colors.muted}">${j(t.labels.footnote)}</text>`)}return o.join(`
`)}function Vn(t,n,e,o,s,a,i){const h=[],c=n+1,r=i.groupHeaders;let l,d,u,f,p;if(c===1?(l=tt((r==null?void 0:r.level1FontSize)??i.typography.fontSizeBase),d=(r==null?void 0:r.level1FontWeight)??i.typography.fontWeightBold,u=(r==null?void 0:r.level1Italic)??!1,f=(r==null?void 0:r.level1Background)??null,p=(r==null?void 0:r.level1BorderBottom)??!1):c===2?(l=tt((r==null?void 0:r.level2FontSize)??i.typography.fontSizeBase),d=(r==null?void 0:r.level2FontWeight)??i.typography.fontWeightMedium,u=(r==null?void 0:r.level2Italic)??!0,f=(r==null?void 0:r.level2Background)??null,p=(r==null?void 0:r.level2BorderBottom)??!1):(l=tt((r==null?void 0:r.level3FontSize)??i.typography.fontSizeBase),d=(r==null?void 0:r.level3FontWeight)??i.typography.fontWeightNormal,u=(r==null?void 0:r.level3Italic)??!1,f=(r==null?void 0:r.level3Background)??null,p=(r==null?void 0:r.level3BorderBottom)??!1),!f){const x=i.colors.primary,_=c===1?.15:c===2?.1:.06,E=x.replace("#",""),w=parseInt(E.substring(0,2),16),m=parseInt(E.substring(2,4),16),y=parseInt(E.substring(4,6),16);f=`rgba(${w}, ${m}, ${y}, ${_})`}const N=o+s/2+l*ot.TEXT_BASELINE_ADJUSTMENT,I=n*((r==null?void 0:r.indentPerLevel)??X.INDENT_PER_LEVEL);h.push(`<rect x="${e}" y="${o}"
    width="${a}" height="${s}"
    fill="${f}"/>`),p&&h.push(`<line x1="${e}" x2="${e+a}" y1="${o+s}" y2="${o+s}"
      stroke="${i.colors.border}" stroke-width="1" opacity="0.5"/>`);const b=u?' font-style="italic"':"";return h.push(`<text x="${e+X.TEXT_PADDING+I}" y="${N}"
    font-family="${i.typography.fontFamily}"
    font-size="${l}px"
    font-weight="${d}"${b}
    fill="${i.colors.foreground}">${j(t)}</text>`),h.join(`
`)}function zn(t,n){const e=new Map;for(const o of n)if(o.type==="bar"){let s=0;for(const a of t){const i=a.metadata[o.field];typeof i=="number"&&i>s&&(s=i)}e.set(o.field,s>0?s:1)}return e}function Un(t,n){var o,s,a,i,h,c,r,l,d,u,f,p,N,I,b,x,_,E,w;if(n.type==="interval"){const m=(s=(o=n.options)==null?void 0:o.interval)!=null&&s.point?t.metadata[n.options.interval.point]:t.point,y=(i=(a=n.options)==null?void 0:a.interval)!=null&&i.lower?t.metadata[n.options.interval.lower]:t.lower,g=(c=(h=n.options)==null?void 0:h.interval)!=null&&c.upper?t.metadata[n.options.interval.upper]:t.upper;return nn(m,y,g,n.options)}if(n.type==="numeric"){const m=t.metadata[n.field];return typeof m=="number"?Nt(m,n.options):((r=n.options)==null?void 0:r.naText)??""}if(n.type==="custom"&&((l=n.options)!=null&&l.events))return tn(t,n.options);if(n.type==="pvalue"){const m=t.metadata[n.field];return typeof m!="number"?((d=n.options)==null?void 0:d.naText)??"":on(m,n.options)}if(n.type==="icon"){const m=t.metadata[n.field];if(m==null)return"";const y=String(m),g=(f=(u=n.options)==null?void 0:u.icon)==null?void 0:f.mapping;return g&&y in g?g[y]:y}if(n.type==="badge"){const m=t.metadata[n.field];return m!=null?String(m):""}if(n.type==="stars"){const m=t.metadata[n.field];if(typeof m!="number")return"";const y=((N=(p=n.options)==null?void 0:p.stars)==null?void 0:N.maxStars)??5,g=Math.max(0,Math.min(y,m)),A=Math.floor(g),T=y-A;return"★".repeat(A)+"☆".repeat(T)}if(n.type==="img")return((b=(I=n.options)==null?void 0:I.img)==null?void 0:b.fallback)??"[IMG]";if(n.type==="reference"){const m=t.metadata[n.field];if(m==null)return"";const y=String(m),g=((_=(x=n.options)==null?void 0:x.reference)==null?void 0:_.maxChars)??30;return y.length<=g?y:y.substring(0,g)+"..."}if(n.type==="range"){const m=(E=n.options)==null?void 0:E.range;if(!m)return"";const y=t.metadata[m.minField],g=t.metadata[m.maxField],A=m.separator??" – ",T=m.decimals,S=H=>typeof H!="number"?"":T==null?Number.isInteger(H)?String(H):H.toFixed(1):H.toFixed(T);return y===null&&g===null?"":y===null?S(g):g===null?S(y):`${S(y)}${A}${S(g)}`}const e=t.metadata[n.field];return e!=null?String(e):((w=n.options)==null?void 0:w.naText)??""}function Xn(t,n,e,o,s){const a=t.filter(l=>Number.isFinite(l));if(a.length===0)return"";if(a.length===1){const l=n+o/2,d=e+s/2;return`M${l.toFixed(1)},${d.toFixed(1)}`}const i=Math.min(...a),c=Math.max(...a)-i||1;return`M${a.map((l,d)=>{const u=n+d/(a.length-1)*o,f=e+s-(l-i)/c*s;return`${u.toFixed(1)},${f.toFixed(1)}`}).join("L")}`}function qn(t,n,e,o,s,a=[],i,h=0,c=1/0,r,l=!1){var y;let d;if(a.length===0){const g=!l||t.point!=null&&t.point>0?t.point:null,A=!l||t.lower!=null&&t.lower>0?t.lower:null,T=!l||t.upper!=null&&t.upper>0?t.upper:null;d=[{point:g,lower:A,upper:T,color:null,shape:null,opacity:null}]}else d=a.map(g=>({point:lt(t.metadata,t.point,g.pointCol,"point",l),lower:lt(t.metadata,t.lower,g.lowerCol,"lower",l),upper:lt(t.metadata,t.upper,g.upperCol,"upper",l),color:g.color??null,shape:g.shape??null,opacity:g.opacity??null}));const u=d.filter(g=>g.point!=null&&!Number.isNaN(g.point)&&g.lower!=null&&!Number.isNaN(g.lower)&&g.upper!=null&&!Number.isNaN(g.upper));if(u.length===0)return"";const f=o.shapes.pointSize,p=o.shapes.lineWidth,N=o.colors.intervalLine,I=((y=t.style)==null?void 0:y.type)==="summary",x=o.shapes.summaryHeight/2;function _(g){var T;if(g&&((T=t.markerStyle)==null?void 0:T.size)!=null)return f*t.markerStyle.size;const A=i?t.metadata[i]:void 0;if(A){const S=.5+Math.sqrt(A/100)*1.5;return Math.min(Math.max(f*S,3),f*2.5)}return f}function E(g,A){const T=A===0,S=t.markerStyle,H=o.shapes.effectColors,G=o.shapes.markerShapes,$=["square","circle","diamond","triangle"];let k;T&&(S!=null&&S.color)?k=S.color:g.color?k=g.color:H&&H.length>0?k=H[A%H.length]:k=o.colors.interval??o.colors.primary??"#2563eb";let D;T&&(S!=null&&S.shape)?D=S.shape:g.shape?D=g.shape:G&&G.length>0?D=G[A%G.length]:D=$[A%$.length];let F;return T&&(S==null?void 0:S.opacity)!=null?F=S.opacity:g.opacity!=null?F=g.opacity:F=1,{color:k,shape:D,opacity:F}}function w(g,A,T,S){const{color:H,shape:G,opacity:$}=S,k=$<1?` fill-opacity="${$}"`:"";switch(G){case"circle":return`<circle cx="${g}" cy="${A}" r="${T}" fill="${H}"${k}/>`;case"diamond":return`<polygon points="${[`${g},${A-T}`,`${g+T},${A}`,`${g},${A+T}`,`${g-T},${A}`].join(" ")}" fill="${H}"${k}/>`;case"triangle":return`<polygon points="${[`${g},${A-T}`,`${g+T},${A+T}`,`${g-T},${A+T}`].join(" ")}" fill="${H}"${k}/>`;default:return`<rect x="${g-T}" y="${A-T}" width="${T*2}" height="${T*2}" fill="${H}"${k}/>`}}const m=[];return u.forEach((g,A)=>{const T=n+wn(A,u.length),S=e(g.lower),H=e(g.upper),G=e(g.point),$=E(g,A),k=_(A===0),D=N;if(I){const F=$.opacity<1?` fill-opacity="${$.opacity}"`:"",M=[`${S},${T}`,`${G},${T-x}`,`${H},${T}`,`${G},${T+x}`].join(" ");m.push(`
        <g class="interval effect-${A} summary">
          <polygon points="${M}"
            fill="${$.color}"${F} stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else{const F=h+pt,M=h+c-pt,C=r?g.lower<r[0]:S<F,v=r?g.upper>r[1]:H>M;let L,B;if(r){const mt=Math.max(r[0],Math.min(r[1],g.lower)),ft=Math.max(r[0],Math.min(r[1],g.upper));L=e(mt),B=e(ft)}else L=Math.max(F,Math.min(M,S)),B=Math.max(F,Math.min(M,H));const V=Nn(o),R=V.height/2,K=r?e(r[0]):F,ct=r?e(r[1]):M;let it="";C?it=`<path d="${Jt("left",K,T,V)}" fill="${V.color}"/>`:it=`<line x1="${L}" x2="${L}" y1="${T-R}" y2="${T+R}" stroke="${D}" stroke-width="${p}"/>`;let Z="";v?Z=`<path d="${Jt("right",ct,T,V)}" fill="${V.color}"/>`:Z=`<line x1="${B}" x2="${B}" y1="${T-R}" y2="${T+R}" stroke="${D}" stroke-width="${p}"/>`;const ut=r?e(Math.max(r[0],Math.min(r[1],g.point))):Math.max(F,Math.min(M,G));m.push(`
        <g class="interval effect-${A}">
          <line x1="${L}" x2="${B}" y1="${T}" y2="${T}"
            stroke="${D}" stroke-width="${p}"/>
          ${it}
          ${Z}
          ${w(ut,T,k,$)}
        </g>`)}}),m.join("")}function Yn(t,n,e,o,s,a,i,h){const r=h.shapes.summaryHeight/2,[l,d]=s.domain().map(w=>s(w)),u=Math.min(l,d),f=Math.max(l,d),p=s(n),N=s(t),I=s(e),b=a+Math.max(u,Math.min(f,p)),x=a+Math.max(u,Math.min(f,N)),_=a+Math.max(u,Math.min(f,I));return`<polygon points="${[`${b},${o}`,`${x},${o-r}`,`${_},${o}`,`${x},${o+r}`].join(" ")}"
    fill="${h.colors.summaryFill}"
    stroke="${h.colors.summaryBorder}"
    stroke-width="1"/>`}function jn(t,n,e,o,s,a,i,h){const c=[],r=a.effects,l=r.length;if(!r.some(b=>{const x=t.metadata[b.value];return x!=null&&!Number.isNaN(x)}))return"";const u=e*.7,f=l>1?2:0,p=(u-f*(l-1))/l,N=Math.max(4,p),I=h.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"];return r.forEach((b,x)=>{const _=t.metadata[b.value];if(_==null||Number.isNaN(_))return;const E=n-u/2+x*(N+f),w=o+i(Math.min(0,_)),m=Math.abs(i(_)-i(0)),y=b.color??I[x%I.length],g=b.opacity??.85;c.push(`<rect
      x="${w}" y="${E}"
      width="${Math.max(1,m)}" height="${N}"
      fill="${y}" fill-opacity="${g}" rx="2"
      class="viz-bar-segment"/>`)}),c.join(`
`)}function On(t,n,e,o,s,a,i,h){const c=[],r=a.effects,l=r.length,d=r.map(x=>{if(x.data){const _=t.metadata[x.data];return!_||!Array.isArray(_)||_.length===0?null:en(_)}if(x.min&&x.q1&&x.median&&x.q3&&x.max){const _=t.metadata[x.min],E=t.metadata[x.q1],w=t.metadata[x.median],m=t.metadata[x.q3],y=t.metadata[x.max];if([_,E,w,m,y].some(A=>A==null||Number.isNaN(A)))return null;let g=[];if(x.outliers){const A=t.metadata[x.outliers];A&&Array.isArray(A)&&(g=A)}return{min:_,q1:E,median:w,q3:m,max:y,outliers:g}}return null});if(!d.some(x=>x!==null))return"";const f=e*.7,p=l>1?2:0,N=Math.max(8,(f-(l-1)*p)/l),I=h.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],b=h.colors.foreground??"#1a1a1a";return r.forEach((x,_)=>{const E=d[_];if(!E)return;const w=n-f/2+_*(N+p),m=w+N/2,y=x.color??I[_%I.length],g=x.fillOpacity??.7;c.push(`<line
      x1="${o+i(E.min)}" x2="${o+i(E.q1)}"
      y1="${m}" y2="${m}"
      stroke="${b}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(E.min)}" x2="${o+i(E.min)}"
      y1="${m-N/4}" y2="${m+N/4}"
      stroke="${b}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(E.q3)}" x2="${o+i(E.max)}"
      y1="${m}" y2="${m}"
      stroke="${b}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(E.max)}" x2="${o+i(E.max)}"
      y1="${m-N/4}" y2="${m+N/4}"
      stroke="${b}" stroke-width="1"/>`);const A=Math.max(2,i(E.q3)-i(E.q1));if(c.push(`<rect
      x="${o+i(E.q1)}" y="${w}"
      width="${A}" height="${N}"
      fill="${y}" fill-opacity="${g}"
      stroke="${b}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(E.median)}" x2="${o+i(E.median)}"
      y1="${w}" y2="${w+N}"
      stroke="${b}" stroke-width="2"/>`),a.showOutliers!==!1&&E.outliers.length>0)for(const T of E.outliers)c.push(`<circle
          cx="${o+i(T)}" cy="${m}"
          r="2.5"
          fill="none" stroke="${y}" stroke-width="1.5"/>`)}),c.join(`
`)}function Kn(t,n,e,o,s,a,i,h){const c=[],r=a.effects,l=r.length,d=r.map(E=>{const w=t.metadata[E.data];return!w||!Array.isArray(w)||w.length<2?null:Fn(w,a.bandwidth)}),u=r.map(E=>{const w=t.metadata[E.data];if(!w||!Array.isArray(w)||w.length<2)return null;const m=w.filter(A=>A!=null&&!Number.isNaN(A)).sort((A,T)=>A-T);if(m.length===0)return null;const y=m.length,g=A=>{if(y===1)return m[0];const T=(y-1)*A,S=Math.floor(T),H=Math.ceil(T);return S===H?m[S]:m[S]+(T-S)*(m[H]-m[S])};return{q1:g(.25),median:g(.5),q3:g(.75)}});if(!d.some(E=>E!==null))return"";const p=e*.8,N=l>1?2:0,I=Math.max(10,(p-(l-1)*N)/l),b=I/2,x=h.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],_=h.colors.foreground??"#1a1a1a";return r.forEach((E,w)=>{const m=d[w],y=u[w];if(!m||m.x.length<2)return;const g=n-p/2+I/2+w*(I+N),A=E.color??x[w%x.length],T=E.fillOpacity??.5,S=Hn(m,b),H=[];for(let G=0;G<S.x.length;G++){const $=o+i(S.x[G]),k=g-S.y[G];H.push(G===0?`M ${$} ${k}`:`L ${$} ${k}`)}for(let G=S.x.length-1;G>=0;G--){const $=o+i(S.x[G]),k=g+S.y[G];H.push(`L ${$} ${k}`)}if(H.push("Z"),c.push(`<path
      d="${H.join(" ")}"
      fill="${A}" fill-opacity="${T}"
      stroke="${_}" stroke-width="0.5"/>`),a.showMedian!==!1&&y){const G=o+i(y.median);c.push(`<line
        x1="${G}" x2="${G}"
        y1="${g-b*.6}" y2="${g+b*.6}"
        stroke="${_}" stroke-width="2"/>`)}if(a.showQuartiles&&y){const G=o+i(y.q1),$=o+i(y.q3);c.push(`<line
        x1="${G}" x2="${G}"
        y1="${g-b*.4}" y2="${g+b*.4}"
        stroke="${_}" stroke-width="1" stroke-dasharray="2,2"/>`),c.push(`<line
        x1="${$}" x2="${$}"
        y1="${g-b*.4}" y2="${g+b*.4}"
        stroke="${_}" stroke-width="1" stroke-dasharray="2,2"/>`)}}),c.join(`
`)}function Zn(t,n,e){var h,c;const o=n.scale==="log",s=pt;let a=(h=n.axisRange)==null?void 0:h[0],i=(c=n.axisRange)==null?void 0:c[1];if(a==null||i==null){const r=[];for(const l of t)for(const d of n.effects){const u=l.metadata[d.value];u!=null&&!Number.isNaN(u)&&r.push(u)}r.length>0?(a=a??Math.min(0,...r),i=i??Math.max(...r)*1.1):(a=a??0,i=i??100)}return o?Et([Math.max(.01,a),i],[s,e-s]):Tt([a,i],[s,e-s])}function Jn(t,n,e){var h,c;const o=n.scale==="log",s=pt;let a=(h=n.axisRange)==null?void 0:h[0],i=(c=n.axisRange)==null?void 0:c[1];if(a==null||i==null){const r=[];for(const l of t)for(const d of n.effects)if(d.data){const u=l.metadata[d.data];if(u&&Array.isArray(u)){const f=en(u);r.push(f.min,f.max),n.showOutliers!==!1&&r.push(...f.outliers)}}else if(d.min&&d.max){const u=l.metadata[d.min],f=l.metadata[d.max];u!=null&&!Number.isNaN(u)&&r.push(u),f!=null&&!Number.isNaN(f)&&r.push(f)}if(r.length>0){const l=Math.min(...r),d=Math.max(...r),u=d-l;a=a??l-u*.05,i=i??d+u*.05}else a=a??0,i=i??100}return o?Et([Math.max(.01,a),i],[s,e-s]):Tt([a,i],[s,e-s])}function Qn(t,n,e){var h,c;const o=n.scale==="log",s=pt;let a=(h=n.axisRange)==null?void 0:h[0],i=(c=n.axisRange)==null?void 0:c[1];if(a==null||i==null){const r=[];for(const l of t)for(const d of n.effects){const u=l.metadata[d.data];u&&Array.isArray(u)&&r.push(...u.filter(f=>f!=null&&!Number.isNaN(f)))}if(r.length>0){a=a??Math.min(...r),i=i??Math.max(...r);const l=(i??0)-(a??0);a=(a??0)-l*.1,i=(i??0)+l*.1}else a=a??0,i=i??100}return o?Et([Math.max(.01,a),i],[s,e-s]):Tt([a,i],[s,e-s])}function Xt(t,n,e,o,s,a,i){const h=[],c=tt(e.typography.fontSizeSm),r=Lt.EDGE_THRESHOLD,l=I=>I<r?"start":I>a-r?"end":"middle",d=I=>I<r?2:I>a-r?-2:0;h.push(`<line x1="${s}" x2="${s+a}"
    y1="0" y2="0" stroke="${e.colors.border}" stroke-width="1"/>`);const u=t.domain(),f=5,p=[],N=u[1]-u[0];for(let I=0;I<=f;I++)p.push(u[0]+N*I/f);for(const I of p){const b=t(I),x=s+b,_=l(b),E=d(b),w=Nt(I);h.push(`<line x1="${x}" x2="${x}" y1="0" y2="4" stroke="${e.colors.border}" stroke-width="1"/>`),h.push(`<text x="${x+E}" y="14"
      text-anchor="${_}"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      fill="${e.colors.foreground}">${w}</text>`)}return o&&h.push(`<text x="${s+a/2}" y="28"
      text-anchor="middle"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      fill="${e.colors.foreground}">${j(o)}</text>`),h.join(`
`)}function to(t,n,e,o,s,a,i=1,h){const c=[],r=typeof e.axis.tickCount=="number"?e.axis.tickCount:X.DEFAULT_TICK_COUNT,l=eo(t,r,e,i,a,h),d=tt(e.typography.fontSizeSm),u=Lt.EDGE_THRESHOLD,f=N=>N<u?"start":N>a-u?"end":"middle",p=N=>N<u?2:N>a-u?-2:0;c.push(`<line x1="${s}" x2="${s+a}"
    y1="0" y2="0" stroke="${e.colors.border}" stroke-width="1"/>`);for(const N of l){const I=t(N),b=s+I,x=f(I),_=p(I);c.push(`<line x1="${b}" x2="${b}" y1="0" y2="4"
      stroke="${e.colors.border}" stroke-width="1"/>`),c.push(`<text x="${b+_}" y="16" text-anchor="${x}"
      font-family="${e.typography.fontFamily}"
      font-size="${d}px"
      fill="${e.colors.secondary}">${Ln(N)}</text>`)}return o&&c.push(`<text x="${s+a/2}" y="28"
      text-anchor="middle"
      font-family="${e.typography.fontFamily}"
      font-size="${d}px"
      font-weight="500"
      fill="${e.colors.secondary}">${j(o)}</text>`),`<g transform="translate(0, ${n.mainY+n.headerHeight+n.plotHeight})">${c.join(`
`)}</g>`}function no(t,n,e,o,s,a,i,h,c,r){const l=[],d=tt(a.typography.fontSizeBase),u=a.typography.headerFontScale??1.05,f=Math.round(d*u*100)/100,p=a.typography.fontWeightBold,N=a.typography.fontWeightBold,I=Ct(t),b=(x,_)=>x+_/2+f*ot.TEXT_BASELINE_ADJUSTMENT;if(I){const x=s/2,_=s/2;let E=e;l.push(`<text x="${E+X.TEXT_PADDING}" y="${b(o,s)}"
      font-family="${a.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${p}"
      fill="${a.colors.foreground}">${j(i)}</text>`),E+=h;const w=[];for(const m of t)if(m.isGroup){const y=m.columns.reduce((A,T)=>T.isGroup?A+T.columns.reduce((S,H)=>S+r(H),0):A+r(T),0),g=E+y/2;l.push(`<text x="${g}" y="${b(o,x)}"
          font-family="${a.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${N}"
          text-anchor="middle"
          fill="${a.colors.foreground}">${j(m.header)}</text>`),w.push({x1:E,x2:E+y}),E+=y}else{const y=r(m),g=m.headerAlign??m.align,{textX:A,anchor:T}=Dt(E,y,g),S=cn(m.header,y,f,X.TEXT_PADDING);l.push(`<text x="${A}" y="${b(o,s)}"
          font-family="${a.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${p}"
          text-anchor="${T}"
          fill="${a.colors.foreground}">${j(S)}</text>`),E+=y}for(const m of w)l.push(`<line x1="${m.x1}" x2="${m.x2}"
        y1="${o+x}" y2="${o+x}"
        stroke="${a.colors.border}" stroke-width="1" opacity="0.5"/>`);E=e+h;for(const m of t)if(m.isGroup){for(const y of m.columns)if(!y.isGroup){const g=r(y),A=y.headerAlign??y.align,{textX:T,anchor:S}=Dt(E,g,A);l.push(`<text x="${T}" y="${b(o+x,_)}"
              font-family="${a.typography.fontFamily}"
              font-size="${f}px"
              font-weight="${p}"
              text-anchor="${S}"
              fill="${a.colors.foreground}">${j(y.header)}</text>`),E+=g}}else E+=r(m)}else{let x=e;l.push(`<text x="${x+X.TEXT_PADDING}" y="${b(o,s)}"
      font-family="${a.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${p}"
      fill="${a.colors.foreground}">${j(i)}</text>`),x+=h;for(const _ of n){const E=r(_),w=_.headerAlign??_.align,{textX:m,anchor:y}=Dt(x,E,w),g=cn(_.header,E,f,X.TEXT_PADDING);l.push(`<text x="${m}" y="${b(o,s)}"
        font-family="${a.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${p}"
        text-anchor="${y}"
        fill="${a.colors.foreground}">${j(g)}</text>`),x+=E}}return l.join(`
`)}function oo(t,n,e,o,s,a,i,h,c,r,l,d){var _,E,w,m,y,g,A,T,S,H,G,$,k,D,F,M,C,v,L,B,V,R,K,ct,it,Z,ut,mt,ft;const u=[],f=tt(a.typography.fontSizeBase),p=o+s/2+f*ot.TEXT_BASELINE_ADJUSTMENT,N=h*X.INDENT_PER_LEVEL+(((_=t.style)==null?void 0:_.indent)??0)*X.INDENT_PER_LEVEL,I=(E=t.style)!=null&&E.bold||(w=t.style)!=null&&w.emphasis?a.typography.fontWeightBold:a.typography.fontWeightNormal,b=(m=t.style)!=null&&m.italic?"italic":"normal";let x=a.colors.foreground;if((y=t.style)!=null&&y.color?x=t.style.color:(g=t.style)!=null&&g.muted?x=a.colors.muted:(A=t.style)!=null&&A.accent&&(x=a.colors.accent),u.push(`<text x="${e+X.TEXT_PADDING+N}" y="${p}"
    font-family="${a.typography.fontFamily}"
    font-size="${f}px"
    font-weight="${I}"
    font-style="${b}"
    fill="${x}">${j(t.label)}</text>`),(T=t.style)!=null&&T.badge){const et=String(t.style.badge),W=f*$t.FONT_SCALE,P=W+$t.PADDING*2,q=Q(t.label,f),z=e+X.TEXT_PADDING+N+q+$t.GAP,kt=Q(et,W)+$t.PADDING*2,U=o+(s-P)/2;u.push(`<rect x="${z}" y="${U}" width="${kt}" height="${P}"
      rx="3" fill="${a.colors.primary}" opacity="0.15"/>`),u.push(`<text x="${z+kt/2}" y="${U+P/2+W*.35}"
      text-anchor="middle"
      font-family="${a.typography.fontFamily}"
      font-size="${W}px"
      font-weight="500"
      fill="${a.colors.primary}">${j(et)}</text>`)}for(let et=0;et<n.length;et++){const W=n[et],P=d[et],q=l(W);if(W.type==="forest"||W.type==="viz_bar"||W.type==="viz_boxplot"||W.type==="viz_violin")continue;const z=Un(t,W),{textX:J,anchor:kt}=Dt(P,q,W.align);if(W.type==="bar"&&typeof t.metadata[W.field]=="number"){const U=t.metadata[W.field],Y=c.get(W.field),nt=((H=(S=W.options)==null?void 0:S.bar)==null?void 0:H.maxValue)??Y??100,O=(($=(G=W.options)==null?void 0:G.bar)==null?void 0:$.color)??a.colors.primary,at=a.shapes.pointSize*2,ht=q-X.TEXT_PADDING*2-50,rt=Math.min(U/nt*ht,ht);u.push(`<rect x="${P+X.TEXT_PADDING}" y="${o+s/2-at/2}"
        width="${Math.max(0,rt)}" height="${at}"
        fill="${O}" opacity="0.7" rx="2"/>`),u.push(`<text x="${P+q-X.TEXT_PADDING}" y="${p}"
        font-family="${a.typography.fontFamily}"
        font-size="${f}px"
        text-anchor="end"
        fill="${a.colors.foreground}">${Nt(U)}</text>`)}else if(W.type==="sparkline"&&Array.isArray(t.metadata[W.field])){let U=t.metadata[W.field];Array.isArray(U[0])&&(U=U[0]);const Y=((D=(k=W.options)==null?void 0:k.sparkline)==null?void 0:D.height)??16,nt=((M=(F=W.options)==null?void 0:F.sparkline)==null?void 0:M.color)??a.colors.primary,O=X.TEXT_PADDING*2,at=Xn(U,P+X.TEXT_PADDING,o+s/2-Y/2,q-O,Y);u.push(`<path d="${at}" fill="none" stroke="${nt}" stroke-width="1.5"/>`)}else if(W.type==="badge"){const U=t.metadata[W.field];if(U!=null){const Y=String(U),nt=f*.85,O=nt+8,at=(v=(C=W.options)==null?void 0:C.badge)==null?void 0:v.variants,dt=(B=(L=W.options)==null?void 0:L.badge)==null?void 0:B.colors;let ht=a.colors.primary,rt=a.colors.primary;if(dt&&Y in dt)ht=dt[Y],rt=dt[Y];else if(at&&Y in at){const jt=at[Y];ht={default:a.colors.primary,...En,muted:a.colors.muted}[jt]??a.colors.primary,rt=ht}const Mt=Q(Y,nt)+12,wt=W.align==="right"?P+q-X.TEXT_PADDING-Mt:W.align==="center"?P+(q-Mt)/2:P+X.TEXT_PADDING,Ft=o+(s-O)/2;u.push(`<rect x="${wt}" y="${Ft}" width="${Mt}" height="${O}"
          rx="${O/2}" fill="${ht}" opacity="0.15"/>`),u.push(`<text x="${wt+Mt/2}" y="${Ft+O/2+nt*.35}"
          text-anchor="middle"
          font-family="${a.typography.fontFamily}"
          font-size="${nt}px"
          font-weight="500"
          fill="${rt}">${j(Y)}</text>`)}}else if(W.type==="stars"){const U=t.metadata[W.field];if(typeof U=="number"){const Y=((R=(V=W.options)==null?void 0:V.stars)==null?void 0:R.maxStars)??5,nt=((ct=(K=W.options)==null?void 0:K.stars)==null?void 0:ct.color)??"#f59e0b",O=((Z=(it=W.options)==null?void 0:it.stars)==null?void 0:Z.emptyColor)??"#d1d5db",at=Math.max(0,Math.min(Y,U)),dt=Math.floor(at),ht=((mt=(ut=W.options)==null?void 0:ut.stars)==null?void 0:mt.halfStars)&&at-dt>=.5,rt=12,Yt=2,Mt=Y*rt+(Y-1)*Yt;let wt=W.align==="right"?P+q-X.TEXT_PADDING-Mt:W.align==="center"?P+(q-Mt)/2:P+X.TEXT_PADDING;const Ft=o+(s-rt)/2,jt=(yt,Ht,Ot)=>{const vt=Ot/2,Gt=vt*.4;let un="";for(let At=0;At<5;At++){const fn=(At*72-90)*Math.PI/180,dn=(At*72+36-90)*Math.PI/180,hn=yt+vt*Math.cos(fn),pn=Ht+vt*Math.sin(fn),lo=yt+Gt*Math.cos(dn),co=Ht+Gt*Math.sin(dn);un+=(At===0?`M${hn},${pn}`:`L${hn},${pn}`)+`L${lo},${co}`}return un+"Z"};for(let yt=0;yt<Y;yt++){const Ht=wt+rt/2,Ot=Ft+rt/2,Gt=yt<dt||yt===dt&&ht?nt:O;u.push(`<path d="${jt(Ht,Ot,rt)}" fill="${Gt}"/>`),wt+=rt+Yt}}}else{const U=(ft=t.cellStyles)==null?void 0:ft[W.field];let Y=a.typography.fontWeightNormal,nt="normal",O=a.colors.foreground;U&&((U.bold||U.emphasis)&&(Y=a.typography.fontWeightBold),U.italic&&(nt="italic"),U.color?O=U.color:U.muted?O=a.colors.muted:U.accent&&(O=a.colors.accent)),u.push(`<text x="${J}" y="${p}"
        font-family="${a.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${Y}"
        font-style="${nt}"
        text-anchor="${kt}"
        fill="${O}">${j(z)}</text>`)}}return u.join(`
`)}function eo(t,n,e,o,s,a){if(Array.isArray(e.axis.tickValues)&&e.axis.tickValues.length>0){const[y,g]=t.domain();let A=e.axis.tickValues.filter(H=>H>=y&&H<=g);const T=e.axis.nullTick!==!1,S=o>=y&&o<=g;return T&&S&&!A.includes(o)&&(A=[...A,o].sort((H,G)=>H-G)),A}const[i,h]=t.domain(),c=e.axis.nullTick!==!1,r=o>=i&&o<=h,l=Lt.MIN_TICK_SPACING,d=Math.max(2,Math.floor(s/l)),u=Math.min(n,Math.min(7,d)),f=a&&a.length>0?a.filter(y=>y>=i&&y<=h):t.ticks(u);if(f.length===0)return c&&r?[o]:[];const p=t(o),N=f.filter(y=>y<o).reverse(),I=f.filter(y=>y>o),b=f.some(y=>y===o),x=[];let _=p;for(const y of N){const g=t(y);_-g>=l&&(x.unshift(y),_=g)}const E=[];let w=p;for(const y of I){const g=t(y);g-w>=l&&(E.push(y),w=g)}const m=[...x];if((b||c&&r)&&m.push(o),m.push(...E),m.length<2){const y=new Set(m);y.has(i)||m.unshift(i),m.length<2&&!y.has(h)&&m.push(h)}return m}function qt(t,n,e,o,s,a,i=1,h=.6){let r=`<line x1="${t}" x2="${t}" y1="${n}" y2="${e}"
    stroke="${s}" stroke-width="${i}" stroke-opacity="${h}" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return a&&(r+=`<text x="${t}" y="${n-4}" text-anchor="middle"
      font-size="10px" fill="${s}">${j(a)}</text>`),r}class xt extends Error{constructor(n){super(`SVG Generator: ${n}`),this.name="SVGGeneratorError"}}function ro(t){if(!t||typeof t!="object")throw new xt("Invalid spec: expected an object");const n=t;if(!n.data||typeof n.data!="object")throw new xt("Invalid spec: missing or invalid 'data' property");const e=n.data;if(!Array.isArray(e.rows))throw new xt("Invalid spec: 'data.rows' must be an array");if(!n.theme||typeof n.theme!="object")throw new xt("Invalid spec: missing or invalid 'theme' property");const o=n.theme;if(!o.colors||typeof o.colors!="object")throw new xt("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new xt("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new xt("Invalid spec: missing or invalid 'theme.spacing'")}function ao(t){var a;const e=Ut(t.columns,void 0).find(i=>i.type==="forest");if(!e||!((a=e.options)!=null&&a.forest))return{scale:"linear",nullValue:0,effects:[],axisLabel:"Effect",pointCol:null,lowerCol:null,upperCol:null};const o=e.options.forest,s=o.scale??"linear";return{scale:s,nullValue:o.nullValue??(s==="log"?1:0),effects:o.effects??[],axisLabel:o.axisLabel??"Effect",pointCol:o.point??null,lowerCol:o.lower??null,upperCol:o.upper??null}}function so(t,n={}){var A,T,S,H,G;ro(t);const e=t.theme,o=e.spacing.padding,s=Array.isArray(t.columns)?t.columns:[],a=zt(s),i=[];for(let $=0;$<a.length;$++)a[$].type==="forest"&&i.push($);i.length>0;const h=[];for(let $=0;$<a.length;$++){const k=a[$];(k.type==="viz_bar"||k.type==="viz_boxplot"||k.type==="viz_violin")&&h.push({index:$,type:k.type,column:k})}const c=ao(t),r=Wn(t,n,c.nullValue),l=r.autoWidths,d=$=>{var D,F,M,C,v,L,B,V;if($.type==="forest"){const R=l.get($.id);return R!==void 0?R:typeof $.width=="number"?$.width:((F=(D=$.options)==null?void 0:D.forest)==null?void 0:F.width)??r.forestWidth}if($.type==="viz_bar"){const R=l.get($.id);return R!==void 0?R:typeof $.width=="number"?$.width:((C=(M=$.options)==null?void 0:M.vizBar)==null?void 0:C.width)??r.forestWidth}if($.type==="viz_boxplot"){const R=l.get($.id);return R!==void 0?R:typeof $.width=="number"?$.width:((L=(v=$.options)==null?void 0:v.vizBoxplot)==null?void 0:L.width)??r.forestWidth}if($.type==="viz_violin"){const R=l.get($.id);return R!==void 0?R:typeof $.width=="number"?$.width:((V=(B=$.options)==null?void 0:B.vizViolin)==null?void 0:V.width)??r.forestWidth}const k=l.get($.id);return k!==void 0?k:typeof $.width=="number"?$.width:gt.DEFAULT_COLUMN_WIDTH},u=[];let f=o+r.labelWidth;for(const $ of a)u.push(f),f+=d($);const p=[];p.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${r.totalWidth}" height="${r.totalHeight}"
  viewBox="0 0 ${r.totalWidth} ${r.totalHeight}">`);const N=n.backgroundColor??e.colors.background;p.push(`<rect width="100%" height="100%" fill="${N}"/>`),p.push(Rn(t,r,e)),p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
    y1="${r.mainY}" y2="${r.mainY}"
    stroke="${e.colors.border}" stroke-width="2"/>`);const I=r.mainY;p.push(no(s,a,o,I,r.headerHeight,e,t.data.labelHeader??"Study",r.labelWidth,l,d)),p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
    y1="${I+r.headerHeight}" y2="${I+r.headerHeight}"
    stroke="${e.colors.border}" stroke-width="2"/>`);const b=sn(t),x=[],_=[];let E=0;for(const $ of b){const D=$.type==="data"&&((A=$.row.style)==null?void 0:A.type)==="spacer"?r.rowHeight/2:r.rowHeight;x.push(E),_.push(D),E+=D}const w=r.mainY+r.headerHeight;e.layout.banding&&b.forEach(($,k)=>{var D,F;if($.type==="data"){const M=$.row,C=((D=M.style)==null?void 0:D.type)==="spacer",v=(F=M.style)==null?void 0:F.bg;if(!C&&!v){const L=w+x[k],B=_[k],R=k%2===1?e.colors.altBg:e.colors.rowBg;R!==e.colors.background&&p.push(`<rect x="${o}" y="${L}"
              width="${r.totalWidth-o*2}" height="${B}"
              fill="${R}"/>`)}}});for(const $ of i){const k=a[$],D=u[$],F=d(k),M=(T=k.options)==null?void 0:T.forest,C=(M==null?void 0:M.scale)??"linear",v=(M==null?void 0:M.nullValue)??(C==="log"?1:0),L=(M==null?void 0:M.axisLabel)??"Effect",B=C==="log";let V=(M==null?void 0:M.effects)??[];const R=(M==null?void 0:M.point)??null,K=(M==null?void 0:M.lower)??null,ct=(M==null?void 0:M.upper)??null;V.length===0&&(R||K||ct)&&(V=[{pointCol:R,lowerCol:K,upperCol:ct}]);const it={scale:C,nullValue:v,effects:V,pointCol:(M==null?void 0:M.point)??null,lowerCol:(M==null?void 0:M.lower)??null,upperCol:(M==null?void 0:M.upper)??null},{scale:Z,clipBounds:ut,ticks:mt}=Pn(t,F,it,n),ft=D+Z(v);p.push(qt(ft,w,w+r.plotHeight,"dashed",e.colors.muted));const et=(M==null?void 0:M.annotations)??[];for(const P of et)if(P.type==="reference_line"){const q=D+Z(P.x);p.push(qt(q,w,w+r.plotHeight,P.style,P.color??e.colors.accent,P.label,P.width??1,P.opacity??.6))}const W=Array.isArray(t.annotations)?t.annotations:[];for(const P of W)if(P.type==="reference_line"){const q=D+Z(P.x);p.push(qt(q,w,w+r.plotHeight,P.style,P.color??e.colors.accent,P.label,P.width??1,P.opacity??.6))}if(b.forEach((P,q)=>{if(P.type==="data"){const z=w+x[q]+_[q]/2;p.push(qn(P.row,z,J=>D+Z(J),e,v,V,t.data.weightCol,D,F,ut,B))}}),t.data.overall&&r.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const P=w+r.summaryYPosition;p.push(Yn(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,P,Z,D,F,e))}p.push(to(Z,r,e,L,D,F,v,mt))}const m=t.data.rows;for(const $ of h){const k=$.column,D=u[$.index],F=d(k);if($.type==="viz_bar"){const M=(S=k.options)==null?void 0:S.vizBar;if(!M)continue;const C=Zn(m,M,F);b.forEach((v,L)=>{if(v.type==="data"){const B=w+x[L]+_[L]/2,V=_[L];p.push(jn(v.row,B,V,D,F,M,C,e))}}),M.showAxis!==!1&&(p.push(`<g transform="translate(0, ${w+r.plotHeight})">`),p.push(Xt(C,r,e,M.axisLabel,D,F,M.nullValue)),p.push("</g>"))}else if($.type==="viz_boxplot"){const M=(H=k.options)==null?void 0:H.vizBoxplot;if(!M)continue;const C=Jn(m,M,F);b.forEach((v,L)=>{if(v.type==="data"){const B=w+x[L]+_[L]/2,V=_[L];p.push(On(v.row,B,V,D,F,M,C,e))}}),M.showAxis!==!1&&(p.push(`<g transform="translate(0, ${w+r.plotHeight})">`),p.push(Xt(C,r,e,M.axisLabel,D,F,M.nullValue)),p.push("</g>"))}else if($.type==="viz_violin"){const M=(G=k.options)==null?void 0:G.vizViolin;if(!M)continue;const C=Qn(m,M,F);b.forEach((v,L)=>{if(v.type==="data"){const B=w+x[L]+_[L]/2,V=_[L];p.push(Kn(v.row,B,V,D,F,M,C,e))}}),M.showAxis!==!1&&(p.push(`<g transform="translate(0, ${w+r.plotHeight})">`),p.push(Xt(C,r,e,M.axisLabel,D,F,M.nullValue)),p.push("</g>"))}}const y=r.mainY+r.headerHeight,g=zn(m,a);return b.forEach(($,k)=>{var M,C;const D=y+x[k],F=_[k];if($.type==="group_header")p.push(Vn($.label,$.depth,o,D,F,r.totalWidth-o*2,e));else{const v=$.row,L=$.depth;p.push(oo(v,a,o,D,F,e,r.labelWidth,L,g,l,d,u))}if($.type==="data"){const v=$.row,L=((M=v.style)==null?void 0:M.type)==="summary",B=((C=v.style)==null?void 0:C.type)==="spacer";L&&p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
          y1="${D}" y2="${D}"
          stroke="${e.colors.border}" stroke-width="2"/>`),B||p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
          y1="${D+F}" y2="${D+F}"
          stroke="${e.colors.border}" stroke-width="1"/>`)}else p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
        y1="${D+F}" y2="${D+F}"
        stroke="${e.colors.border}" stroke-width="1"/>`)}),p.push(Bn(t,r,e)),p.push("</svg>"),p.join(`
`)}function io(t,n){const e=JSON.parse(t);return so(e,n)}globalThis.generateSVG=io})();
