(function(){"use strict";function ft(t,i){if(i){const c=[.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100];let h=c[0];for(const s of c)if(s<=t[0])h=s;else break;let a=c[c.length-1];for(let s=c.length-1;s>=0&&c[s]>=t[1];s--)a=c[s];return[h,a]}const n=t[1]-t[0];if(n===0)return t;const o=Math.pow(10,Math.floor(Math.log10(n))),r=n/o;let e;r<=1?e=o*.1:r<=2?e=o*.2:r<=5?e=o*.5:e=o;const f=Math.floor(t[0]/e)*e,l=Math.ceil(t[1]/e)*e;return[f,l]}const tt=.15,ht=.06,ut=.05,ot=.04;function dt(t){return t<=0?0:ot+t*ot}const I={DEFAULT_LABEL_WIDTH:200,DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:20,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},G={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},H={INDENT_PER_LEVEL:12,TEXT_PADDING:10,WHISKER_HALF_HEIGHT:4,DEFAULT_TICK_COUNT:5},nt={GROUP_HEADER_HEIGHT_MULTIPLIER:1.5,OVERALL_ROW_HEIGHT_MULTIPLIER:1.5};function pt(t,i){var W,O,B,Y;const n=t.theme,o=n.spacing.rowHeight,r=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],f=j(e,"left"),l=j(e,"right"),h=K(f)||K(l)?n.spacing.headerHeight*nt.GROUP_HEADER_HEIGHT_MULTIPLIER:n.spacing.headerHeight,a=!!((W=t.labels)!=null&&W.title),s=!!((O=t.labels)!=null&&O.subtitle),d=!!((B=t.labels)!=null&&B.caption),g=!!((Y=t.labels)!=null&&Y.footnote),u=a?G.TITLE_HEIGHT:0,p=s?G.SUBTITLE_HEIGHT:0,$=u+p+(a||s?r:0),x=d?G.CAPTION_HEIGHT:0,y=g?G.FOOTNOTE_HEIGHT:0,E=x+y+(d||g?r:0),A=et(t).length,T=!!t.data.overall,b=A*o+(T?o*nt.OVERALL_ROW_HEIGHT_MULTIPLIER:0),w=V(e,"left"),D=V(e,"right"),M=I.DEFAULT_LABEL_WIDTH+w.reduce((C,X)=>C+(X.width??I.DEFAULT_COLUMN_WIDTH),0),m=D.reduce((C,X)=>C+(X.width??I.DEFAULT_COLUMN_WIDTH),0),N=i.width??I.DEFAULT_WIDTH,U=t.data.includeForest,R=M+m;let k;if(!U)k=0;else if(typeof t.layout.plotWidth=="number")k=t.layout.plotWidth;else{const C=N-R-I.COLUMN_GAP*2-r*2;k=Math.max(C,I.MIN_FOREST_WIDTH)}const S=r*2+R+k+I.COLUMN_GAP*2,F=Math.max(i.width??N,S),v=$+r+h+b+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+E+I.BOTTOM_MARGIN;return{totalWidth:F,totalHeight:i.height??v,tableWidth:M+m,forestWidth:k,headerHeight:h,rowHeight:o,plotHeight:b,axisHeight:I.AXIS_HEIGHT,nullValue:t.data.nullValue,summaryYPosition:b-o,showOverallSummary:T,headerTextHeight:$,footerTextHeight:E,titleY:r+G.TITLE_HEIGHT-8,subtitleY:r+u+G.SUBTITLE_HEIGHT-4,mainY:$+r,footerY:$+r+h+b+I.AXIS_HEIGHT+I.AXIS_LABEL_HEIGHT+r}}function et(t){var a;const i=t.data.rows,n=Array.isArray(t.data.groups)?t.data.groups:[];if(n.length===0)return i.map(s=>({type:"data",row:s,depth:0}));const o=new Map;for(const s of n)o.set(s.id,s);const r=new Map;for(const s of i){const d=s.groupId??null;r.has(d)||r.set(d,[]),r.get(d).push(s)}const e=new Set;for(const s of r.keys()){if(!s)continue;let d=s;for(;d;)e.add(d),d=(a=o.get(d))==null?void 0:a.parentId}function f(s){return n.filter(d=>(d.parentId??null)===s&&e.has(d.id))}function l(s){if(!s)return 0;const d=o.get(s);return d?d.depth+1:0}const c=[];function h(s){var g;if(s){const u=o.get(s);if(!u)return;const p=((g=r.get(s))==null?void 0:g.length)??0;c.push({type:"group_header",groupId:u.id,label:u.label,depth:u.depth,rowCount:p})}for(const u of f(s))h(u.id);const d=r.get(s)??[];for(const u of d)c.push({type:"data",row:u,depth:l(u.groupId)})}return h(null),c}function V(t,i){const n=[];for(const o of t)o.position===i&&(o.isGroup?n.push(...V(o.columns,i)):n.push(o));return n}function j(t,i){return t.filter(n=>n.position===i)}function K(t){return t.some(i=>i.isGroup)}function it(t,i){return t.isGroup?t.columns.reduce((n,o)=>n+it(o,i),0):t.width??i}function P(t){return t.endsWith("rem")?parseFloat(t)*G.REM_BASE:t.endsWith("px")?parseFloat(t):G.DEFAULT_FONT_SIZE}function J(t,i,n){return n==="right"?{textX:t+i-H.TEXT_PADDING,anchor:"end"}:n==="center"?{textX:t+i/2,anchor:"middle"}:{textX:t+H.TEXT_PADDING,anchor:"start"}}function L(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(t,i,n,o=0){const r=n*.55,e=i-o*2,f=Math.floor(e/r);return t.length<=f?t:t.slice(0,f-1)+"â€¦"}function Z(t){return t==null||Number.isNaN(t)?"":Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?Math.round(t).toString():t.toFixed(2)}function gt(t,i,n){return t==null||Number.isNaN(t)?"":i==null||n===void 0||n===null||Number.isNaN(i)||Number.isNaN(n)?Z(t):`${t.toFixed(2)} (${i.toFixed(2)}, ${n.toFixed(2)})`}function $t(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function yt(t,i){const[n,o]=t,[r,e]=i,f=(e-r)/(o-n),l=c=>r+(c-n)*f;return l.domain=()=>t,l.range=()=>i,l.ticks=c=>{const h=(o-n)/(c-1),a=[];for(let s=0;s<c;s++)a.push(n+h*s);return a},l}function xt(t,i){const[n,o]=t.map(a=>Math.max(a,.001)),[r,e]=i,f=Math.log10(n),l=Math.log10(o),c=(e-r)/(l-f),h=a=>{const s=Math.log10(Math.max(a,.001));return r+(s-f)*c};return h.domain=()=>[n,o],h.range=()=>i,h.ticks=a=>{const s=[],d=Math.floor(Math.log10(n)),g=Math.ceil(Math.log10(o));for(let u=d;u<=g;u++){const p=Math.pow(10,u);for(const $ of[1,2,5]){const x=p*$;x>=n&&x<=o&&s.push(x)}}return s.length>0?s:[n,o]},h}function Tt(t,i){const n=t.data.rows,o=t.theme.axis,r=t.data.scale==="log",e=typeof(o==null?void 0:o.rangeMin)=="number",f=typeof(o==null?void 0:o.rangeMax)=="number";let l;if(e&&f)l=[o.rangeMin,o.rangeMax];else{const h=n.flatMap(a=>[a.lower,a.upper]).filter(a=>a!=null&&!Number.isNaN(a)&&Number.isFinite(a));if(h.length===0)l=r?[.1,10]:[0,1];else{const[a,s]=[Math.min(...h),Math.max(...h)],d=s-a||1;l=[e?o.rangeMin:a-d*tt,f?o.rangeMax:s+d*tt]}}const c=ft(l,r);return r?xt([Math.max(c[0],.01),Math.max(c[1],.02)],[0,i]):yt(c,[0,i])}function Et(t,i,n){var e,f;const o=[],r=n.spacing.padding;if((e=t.labels)!=null&&e.title){const l=P(n.typography.fontSizeLg);o.push(`<text x="${r}" y="${i.titleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      font-weight="${n.typography.fontWeightBold}"
      fill="${n.colors.foreground}">${L(t.labels.title)}</text>`)}if((f=t.labels)!=null&&f.subtitle){const l=P(n.typography.fontSizeBase);o.push(`<text x="${r}" y="${i.subtitleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      fill="${n.colors.secondary}">${L(t.labels.subtitle)}</text>`)}return o.join(`
`)}function mt(t,i,n){var f,l;const o=[],r=n.spacing.padding;let e=i.footerY;if((f=t.labels)!=null&&f.caption){const c=P(n.typography.fontSizeSm);o.push(`<text x="${r}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${L(t.labels.caption)}</text>`),e+=G.CAPTION_HEIGHT}if((l=t.labels)!=null&&l.footnote){const c=P(n.typography.fontSizeSm);o.push(`<text x="${r}" y="${e}"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-style="italic"
      fill="${n.colors.muted}">${L(t.labels.footnote)}</text>`)}return o.join(`
`)}function rt(t,i,n,o,r,e,f,l){const c=[],h=P(e.typography.fontSizeSm),a=e.typography.fontWeightMedium,s=e.typography.fontWeightBold,d=K(t),g=I.DEFAULT_COLUMN_WIDTH,u=l??I.DEFAULT_LABEL_WIDTH,p=($,x)=>$+x/2+h*G.TEXT_BASELINE_ADJUSTMENT;if(d){const $=r/2,x=r/2;let y=n;f&&(c.push(`<text x="${y+H.TEXT_PADDING}" y="${p(o,r)}"
        font-family="${e.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${L(f)}</text>`),c.push(`<line x1="${y+u}" x2="${y+u}"
        y1="${o}" y2="${o+r}"
        stroke="${e.colors.border}" stroke-width="1" opacity="0.3"/>`),y+=u);for(const E of t)if(E.isGroup){const _=it(E,g),A=y+_/2;c.push(`<text x="${A}" y="${p(o,$)}"
          font-family="${e.typography.fontFamily}"
          font-size="${h}px"
          font-weight="${s}"
          text-anchor="middle"
          fill="${e.colors.foreground}">${L(E.header)}</text>`),c.push(`<line x1="${y}" x2="${y+_}"
          y1="${o+$}" y2="${o+$}"
          stroke="${e.colors.border}" stroke-width="1" opacity="0.5"/>`),y+=_}else{const _=E.width??g,{textX:A,anchor:T}=J(y,_,E.align),b=q(E.header,_,h,H.TEXT_PADDING);c.push(`<text x="${A}" y="${p(o,r)}"
          font-family="${e.typography.fontFamily}"
          font-size="${h}px"
          font-weight="${a}"
          text-anchor="${T}"
          fill="${e.colors.foreground}">${L(b)}</text>`),y+=_}y=n+(f?u:0);for(const E of t)if(E.isGroup){for(const _ of E.columns)if(!_.isGroup){const A=_.width??g,{textX:T,anchor:b}=J(y,A,_.align);c.push(`<text x="${T}" y="${p(o+$,x)}"
              font-family="${e.typography.fontFamily}"
              font-size="${h}px"
              font-weight="${a}"
              text-anchor="${b}"
              fill="${e.colors.foreground}">${L(_.header)}</text>`),y+=A}}else y+=E.width??g}else{let $=n;f&&(c.push(`<text x="${$+H.TEXT_PADDING}" y="${p(o,r)}"
        font-family="${e.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${a}"
        fill="${e.colors.foreground}">${L(f)}</text>`),$+=u);for(const x of i){const y=x.width??g,{textX:E,anchor:_}=J($,y,x.align),A=q(x.header,y,h,H.TEXT_PADDING);c.push(`<text x="${E}" y="${p(o,r)}"
        font-family="${e.typography.fontFamily}"
        font-size="${h}px"
        font-weight="${a}"
        text-anchor="${_}"
        fill="${e.colors.foreground}">${L(A)}</text>`),$+=y}}return c.join(`
`)}function _t(t,i,n,o,r,e,f){const l=[],c=P(f.typography.fontSizeBase),h=o+r/2+c*G.TEXT_BASELINE_ADJUSTMENT,a=i*H.INDENT_PER_LEVEL;return l.push(`<rect x="${n}" y="${o}"
    width="${e}" height="${r}"
    fill="${f.colors.primary}" opacity="${ut}"/>`),l.push(`<text x="${n+H.TEXT_PADDING+a}" y="${h}"
    font-family="${f.typography.fontFamily}"
    font-size="${c}px"
    font-weight="${f.typography.fontWeightBold}"
    fill="${f.colors.foreground}">${L(t)}</text>`),l.join(`
`)}function st(t,i){const n=new Map;for(const o of i)if(o.type==="bar"){let r=0;for(const e of t){const f=e.metadata[o.field];typeof f=="number"&&f>r&&(r=f)}n.set(o.field,r>0?r:1)}return n}function at(t,i,n,o,r,e,f,l=I.DEFAULT_LABEL_WIDTH,c=0,h){var u,p,$,x,y,E,_,A,T,b,w,D,M;const a=[],s=P(e.typography.fontSizeBase),d=o+r/2+s*G.TEXT_BASELINE_ADJUSTMENT;let g=n;if(f){const m=c*H.INDENT_PER_LEVEL+(((u=t.style)==null?void 0:u.indent)??0)*H.INDENT_PER_LEVEL,N=(p=t.style)!=null&&p.bold?e.typography.fontWeightBold:e.typography.fontWeightNormal,U=($=t.style)!=null&&$.italic?"italic":"normal",R=l-m-H.TEXT_PADDING*2,k=q(t.label,R,s,0);if(a.push(`<text x="${g+H.TEXT_PADDING+m}" y="${d}"
      font-family="${e.typography.fontFamily}"
      font-size="${s}px"
      font-weight="${N}"
      font-style="${U}"
      fill="${((x=t.style)==null?void 0:x.color)??e.colors.foreground}">${L(k)}</text>`),(y=t.style)!=null&&y.badge){const S=String(t.style.badge),F=s*.8,v=4,W=F+v*2,O=t.label.length*s*.55,B=g+H.TEXT_PADDING+m+O+6,C=S.length*F*.6+v*2,X=o+(r-W)/2;a.push(`<rect x="${B}" y="${X}" width="${C}" height="${W}"
        rx="3" fill="${e.colors.primary}" opacity="0.15"/>`),a.push(`<text x="${B+C/2}" y="${X+W/2+F*.35}"
        text-anchor="middle"
        font-family="${e.typography.fontFamily}"
        font-size="${F}px"
        font-weight="500"
        fill="${e.colors.primary}">${L(S)}</text>`)}g+=l}for(const m of i){const N=m.width??I.DEFAULT_COLUMN_WIDTH,U=It(t,m),{textX:R,anchor:k}=J(g,N,m.align);if(m.type==="bar"&&typeof t.metadata[m.field]=="number"){const S=t.metadata[m.field],F=h==null?void 0:h.get(m.field),v=((_=(E=m.options)==null?void 0:E.bar)==null?void 0:_.maxValue)??F??100,W=((T=(A=m.options)==null?void 0:A.bar)==null?void 0:T.color)??e.colors.primary,O=e.shapes.pointSize*2,Y=N-H.TEXT_PADDING*2-50,C=Math.min(S/v*Y,Y);a.push(`<rect x="${g+H.TEXT_PADDING}" y="${o+r/2-O/2}"
        width="${Math.max(0,C)}" height="${O}"
        fill="${W}" opacity="0.7" rx="2"/>`);const X=g+N-H.TEXT_PADDING;a.push(`<text x="${X}" y="${d}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="end"
        fill="${e.colors.foreground}">${Z(S)}</text>`)}else if(m.type==="sparkline"&&Array.isArray(t.metadata[m.field])){let S=t.metadata[m.field];Array.isArray(S[0])&&(S=S[0]);const F=((w=(b=m.options)==null?void 0:b.sparkline)==null?void 0:w.height)??16,v=((M=(D=m.options)==null?void 0:D.sparkline)==null?void 0:M.color)??e.colors.primary,W=H.TEXT_PADDING*2,O=Ht(S,g+H.TEXT_PADDING,o+r/2-F/2,N-W,F);a.push(`<path d="${O}" fill="none" stroke="${v}" stroke-width="1.5"/>`)}else a.push(`<text x="${R}" y="${d}"
        font-family="${e.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="${k}"
        fill="${e.colors.foreground}">${L(U)}</text>`);g+=N}return a.join(`
`)}function It(t,i){var o,r,e,f;if(i.type==="interval")return gt(t.point,t.lower,t.upper);if(i.type==="numeric"){const l=t.metadata[i.field];return typeof l=="number"?Z(l):""}if(i.type==="pvalue"){const l=t.metadata[i.field];if(typeof l!="number")return"";const c=(r=(o=i.options)==null?void 0:o.pvalue)==null?void 0:r.stars,h=((f=(e=i.options)==null?void 0:e.pvalue)==null?void 0:f.thresholds)??[.05,.01,.001];let a="";return c&&(l<h[2]?a="***":l<h[1]?a="**":l<h[0]&&(a="*")),l<.001?`<0.001${a}`:`${l.toFixed(3)}${a}`}const n=t.metadata[i.field];return n!=null?String(n):""}function Ht(t,i,n,o,r){if(t.length===0)return"";const e=Math.min(...t),l=Math.max(...t)-e||1;return`M${t.map((h,a)=>{const s=i+a/(t.length-1)*o,d=n+r-(h-e)/l*r;return`${s.toFixed(1)},${d.toFixed(1)}`}).join("L")}`}const lt=6;function Q(t,i,n){const o=t.metadata[i];return o!=null&&typeof o=="number"&&!Number.isNaN(o)?o:n}function At(t,i){return i<=1?0:-((i-1)*lt)/2+t*lt}function bt(t,i,n,o,r,e=[]){let f;e.length===0?f=[{point:t.point,lower:t.lower,upper:t.upper,color:null}]:f=e.map(p=>({point:Q(t,p.pointCol,t.point),lower:Q(t,p.lowerCol,t.lower),upper:Q(t,p.upperCol,t.upper),color:p.color??null}));const l=f.filter(p=>p.point!=null&&!Number.isNaN(p.point)&&p.lower!=null&&!Number.isNaN(p.lower)&&p.upper!=null&&!Number.isNaN(p.upper));if(l.length===0)return"";const c=o.shapes.pointSize,h=t.metadata.weight;let a=c;if(h){const p=.5+Math.sqrt(h/100)*1.5;a=Math.min(Math.max(c*p,3),c*2.5)}const s=o.shapes.lineWidth,d=o.colors.intervalLine,g=H.WHISKER_HALF_HEIGHT,u=[];return l.forEach((p,$)=>{const x=i+At($,l.length),y=n(p.lower),E=n(p.upper),_=n(p.point),A=p.color??d,T=p.color??(p.point>r?o.colors.intervalPositive:p.point<r?o.colors.intervalNegative:o.colors.muted);u.push(`
      <g class="interval effect-${$}">
        <!-- CI line -->
        <line x1="${y}" x2="${E}" y1="${x}" y2="${x}"
          stroke="${A}" stroke-width="${s}"/>
        <!-- Whiskers -->
        <line x1="${y}" x2="${y}" y1="${x-g}" y2="${x+g}"
          stroke="${A}" stroke-width="${s}"/>
        <line x1="${E}" x2="${E}" y1="${x-g}" y2="${x+g}"
          stroke="${A}" stroke-width="${s}"/>
        <!-- Point -->
        <rect x="${_-a}" y="${x-a}"
          width="${a*2}" height="${a*2}" fill="${T}"/>
      </g>`)}),u.join("")}function Dt(t,i,n,o,r,e,f,l){const h=l.shapes.summaryHeight/2,a=r(i),s=r(t),d=r(n),g=e+Math.max(0,Math.min(f,a)),u=e+Math.max(0,Math.min(f,s)),p=e+Math.max(0,Math.min(f,d));return`<polygon points="${[`${g},${o}`,`${u},${o-h}`,`${p},${o}`,`${u},${o+h}`].join(" ")}"
    fill="${l.colors.summaryFill}"
    stroke="${l.colors.summaryBorder}"
    stroke-width="1"/>`}function Lt(t,i,n,o,r){const e=[],f=typeof n.axis.tickCount=="number"?n.axis.tickCount:H.DEFAULT_TICK_COUNT,l=Array.isArray(n.axis.tickValues)?n.axis.tickValues:t.ticks(f),c=P(n.typography.fontSizeSm);e.push(`<line x1="${r}" x2="${r+i.forestWidth}"
    y1="0" y2="0" stroke="${n.colors.border}" stroke-width="1"/>`);for(const h of l){const a=r+t(h);e.push(`<line x1="${a}" x2="${a}" y1="0" y2="4"
      stroke="${n.colors.border}" stroke-width="1"/>`),e.push(`<text x="${a}" y="16" text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      fill="${n.colors.secondary}">${$t(h)}</text>`)}return o&&e.push(`<text x="${r+i.forestWidth/2}" y="28"
      text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${c}px"
      font-weight="500"
      fill="${n.colors.secondary}">${L(o)}</text>`),`<g transform="translate(0, ${i.mainY+i.headerHeight+i.plotHeight})">${e.join(`
`)}</g>`}function ct(t,i,n,o,r,e){let l=`<line x1="${t}" x2="${t}" y1="${i}" y2="${n}"
    stroke="${r}" stroke-width="1" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return e&&(l+=`<text x="${t}" y="${i-4}" text-anchor="middle"
      font-size="10px" fill="${r}">${L(e)}</text>`),l}class z extends Error{constructor(i){super(`SVG Generator: ${i}`),this.name="SVGGeneratorError"}}function Nt(t){if(!t||typeof t!="object")throw new z("Invalid spec: expected an object");const i=t;if(!i.data||typeof i.data!="object")throw new z("Invalid spec: missing or invalid 'data' property");const n=i.data;if(!Array.isArray(n.rows))throw new z("Invalid spec: 'data.rows' must be an array");if(!i.theme||typeof i.theme!="object")throw new z("Invalid spec: missing or invalid 'theme' property");const o=i.theme;if(!o.colors||typeof o.colors!="object")throw new z("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new z("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new z("Invalid spec: missing or invalid 'theme.spacing'")}function wt(t,i={}){Nt(t);const n=t.theme,o=pt(t,i),r=n.spacing.padding,e=Array.isArray(t.columns)?t.columns:[],f=j(e,"left"),l=j(e,"right"),c=V(e,"left"),h=V(e,"right"),a=I.DEFAULT_LABEL_WIDTH+c.reduce((T,b)=>T+(b.width??I.DEFAULT_COLUMN_WIDTH),0),s=r+a,d=Tt(t,o.forestWidth),g=s+o.forestWidth,u=[];u.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${o.totalWidth}" height="${o.totalHeight}"
  viewBox="0 0 ${o.totalWidth} ${o.totalHeight}">`);const p=i.backgroundColor??n.colors.background;u.push(`<rect width="100%" height="100%" fill="${p}"/>`),u.push(Et(t,o,n));const $=o.mainY;u.push(rt(f,c,r,$,o.headerHeight,n,t.data.labelHeader??"Study",I.DEFAULT_LABEL_WIDTH)),h.length>0&&u.push(rt(l,h,g,$,o.headerHeight,n)),u.push(`<line x1="${r}" x2="${o.totalWidth-r}"
    y1="${$+o.headerHeight}" y2="${$+o.headerHeight}"
    stroke="${n.colors.border}" stroke-width="1"/>`);const x=et(t);if(t.data.includeForest&&o.forestWidth>0){const T=o.mainY+o.headerHeight,b=s+d(t.data.nullValue);u.push(ct(b,T,T+o.plotHeight,"dashed",n.colors.muted));const w=Array.isArray(t.annotations)?t.annotations:[];for(const D of w)if(D.type==="reference_line"){const M=s+d(D.x);u.push(ct(M,T,T+o.plotHeight,D.style,D.color??n.colors.accent,D.label))}if(x.forEach((D,M)=>{if(D.type==="data"){const m=T+M*o.rowHeight+o.rowHeight/2;u.push(bt(D.row,m,N=>s+d(N),n,t.data.nullValue,t.data.effects))}}),t.data.overall&&o.showOverallSummary){const D=T+o.summaryYPosition;u.push(Dt(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,D,d,s,o.forestWidth,n))}u.push(Lt(d,o,n,t.data.axisLabel,s))}const y=o.mainY+o.headerHeight,E=t.data.rows,_=st(E,c),A=st(E,h);return x.forEach((T,b)=>{const w=y+b*o.rowHeight;if(T.type==="group_header")u.push(_t(T.label,T.depth,r,w,o.rowHeight,o.totalWidth-r*2,n));else{const D=T.row,M=T.depth,m=dt(M),N=b%2===1?ht:0,U=Math.max(m,N);U>0&&u.push(`<rect x="${r}" y="${w}"
          width="${o.totalWidth-r*2}" height="${o.rowHeight}"
          fill="${n.colors.muted}" opacity="${U}"/>`),u.push(at(D,c,r,w,o.rowHeight,n,!0,I.DEFAULT_LABEL_WIDTH,M,_)),h.length>0&&u.push(at(D,h,g,w,o.rowHeight,n,!1,0,M,A))}u.push(`<line x1="${r}" x2="${o.totalWidth-r}"
      y1="${w+o.rowHeight}" y2="${w+o.rowHeight}"
      stroke="${n.colors.border}" stroke-width="1" opacity="0.5"/>`)}),u.push(mt(t,o,n)),u.push("</svg>"),u.join(`
`)}function Mt(t,i){const n=JSON.parse(t);return wt(n,i)}globalThis.generateSVG=Mt})();
