(function(){"use strict";const Kt=[1,5,2,2.5,4,3],st=[.001,.002,.005,.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,300,500,750,1e3];function It(t,n){return n?mn(t):yn(t)}function mn(t){if(t[0]<=0||t[1]<=0)return[.1,10];if(t[0]>=t[1])return t;let n=st[0];for(const o of st)if(o<=t[0])n=o;else break;t[0]<st[0]&&(n=Math.pow(10,Math.floor(Math.log10(t[0]))));let e=st[st.length-1];for(let o=st.length-1;o>=0&&st[o]>=t[1];o--)e=st[o];return t[1]>st[st.length-1]&&(e=Math.pow(10,Math.ceil(Math.log10(t[1])))),[n,e]}function yn(t){const n=t[1]-t[0];if(n===0)return t;if(n<0)return[t[1],t[0]];const e=Math.pow(10,Math.floor(Math.log10(n)));let o=e,s=1/0;for(const h of Kt)for(const c of[.1,1,10]){const r=h*e*c;if(r<=0)continue;const l=Math.floor(t[0]/r)*r,f=(Math.ceil(t[1]/r)*r-l)/n-1;f>=0&&f<s&&(s=f,o=r)}const a=Math.floor(t[0]/o)*o,i=Math.ceil(t[1]/o)*o;return[Math.round(a*1e10)/1e10,Math.round(i*1e10)/1e10]}function ct(t,n,e,o,s=!1){if(t&&e in t){const a=t[e];if(typeof a=="number"&&Number.isFinite(a)&&(!s||a>0))return a}return e===o&&n!=null&&Number.isFinite(n)&&(!s||n>0)?n:null}const pt=12;function $n(t){const{rows:n,config:e,scale:o,nullValue:s,forestWidth:a,pointSize:i,effects:h=[],pointCol:c,lowerCol:r,upperCol:l}=t,d=xn(n,e,o,s,h,c,r,l),u=Mn(d,e,o,a,i),f=Zt(d,e,o,s);return{axisLimits:d,plotRegion:u,ticks:f}}function xn(t,n,e,o,s=[],a,i,h){const c=n.rangeMin!=null,r=n.rangeMax!=null;if(c&&r)return[n.rangeMin,n.rangeMax];const l=[],d=e==="log",u=a||"point";for(const S of t){const L=ct(S.metadata,void 0,u,"point",d);L!=null&&l.push(L);for(const v of s){const R=ct(S.metadata,void 0,v.pointCol,"point",d);R!=null&&l.push(R)}}if(l.length===0)return e==="log"?[.1,10]:[-1,1];let f=Math.min(...l),p=Math.max(...l);(n.includeNull??!0)&&(f=Math.min(f,o),p=Math.max(p,o));const A=f,M=p;let x;if(d){const S=Math.max(f,.001),L=Math.max(p,.001);x=Math.log(L)-Math.log(S)}else x=p-f;if(x===0||!Number.isFinite(x)){const S=l[0];if(d)return It([S/2,S*2],!0);{const L=Math.max(1,Math.abs(S)*.1);return It([S-L,S+L],!1)}}const[_,T]=It([f,p],d),I=n.ciClipFactor??2;let g=_,y=T;const m=[],w=[],E=i||"lower",C=h||"upper";for(const S of t){const L=ct(S.metadata,void 0,E,"lower",d);L!=null&&m.push(L);const v=ct(S.metadata,void 0,C,"upper",d);v!=null&&w.push(v);for(const R of s){const B=ct(S.metadata,void 0,R.lowerCol,"lower",d);B!=null&&m.push(B);const O=ct(S.metadata,void 0,R.upperCol,"upper",d);O!=null&&w.push(O)}}let D,G;if(d)D=g/I,G=y*I;else{const S=y-g;D=g-S*I,G=y+S*I}let $=!1,H=!1;for(const S of m)S>=D?g=Math.min(g,S):$=!0;for(const S of w)S<=G?y=Math.max(y,S):H=!0;if($&&(g=Math.min(g,D)),H&&(y=Math.max(y,G)),n.symmetric===!0&&!c&&!r)if(e==="log"){const S=Math.log(o),L=Math.max(Math.abs(Math.log(Math.max(A,.001))-S),Math.abs(Math.log(M)-S));g=Math.exp(S-L),y=Math.exp(S+L)}else{const S=Math.max(Math.abs(A-o),Math.abs(M-o));g=o-S,y=o+S}let F=c?n.rangeMin:g,b=r?n.rangeMax:y;return It([F,b],e==="log")}function Mn(t,n,e,o,s){if(!(n.markerMargin??!0)||o<=0)return t;const i=o-2*pt;if(i<=0)return t;if(e==="log"){const r=Math.log(Math.max(t[0],.001)),l=Math.log(Math.max(t[1],.001)),d=l-r,u=s/2*(d/i),f=Math.min(u,.5);return[Math.exp(r-f),Math.exp(l+f)]}const h=t[1]-t[0],c=s/2*(h/i);return[t[0]-c,t[1]+c]}function Zt(t,n,e,o){const[s,a]=t,i=o>=s&&o<=a,h=(n.nullTick??!0)&&i;if(n.tickValues&&n.tickValues.length>0){let l=n.tickValues.filter(d=>d>=s&&d<=a);return h&&!l.includes(o)&&(l=[...l,o].sort((d,u)=>d-u)),l}const c=n.tickCount??5;let r=e==="log"?Nn(t,c):bn(t,c);return h&&!r.includes(o)&&(r=[...r,o].sort((l,d)=>l-d)),r}function bn(t,n){const[e,o]=t,s=o-e;if(s===0)return[e];const a=s/Math.max(n-1,1),i=Math.pow(10,Math.floor(Math.log10(a)));let h=i,c=1/0;for(const d of Kt){const u=d*i,f=Math.floor(s/u)+1,p=Math.abs(f-n);p<c&&(c=p,h=u);const N=d*i/10;if(N>0){const A=Math.floor(s/N)+1,M=Math.abs(A-n);M<c&&(c=M,h=N)}}const r=Math.ceil(e/h)*h,l=[];for(let d=r;d<=o+h*.001;d+=h){const u=Math.round(d*1e10)/1e10;u>=e&&u<=o&&l.push(u)}return l.length<2&&(l.includes(e)||l.unshift(e),l.includes(o)||l.push(o)),l}function Nn(t,n){const[e,o]=t,a=[.01,.02,.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100,150,200,500,1e3].filter(c=>c>=e&&c<=o);if(a.length<=n)return a;const i=[1,.1,10,100,.5,2,5,.2,.25,1.5,3,4,20,50],h=[];for(const c of i)a.includes(c)&&h.length<n&&h.push(c);if(h.length<n){const c=a.filter(l=>!h.includes(l)),r=Math.max(1,Math.floor(c.length/(n-h.length)));for(let l=0;l<c.length&&h.length<n;l+=r)h.push(c[l])}return h.sort((c,r)=>c-r)}function En(t){var o,s;const n=((o=t==null?void 0:t.shapes)==null?void 0:o.lineWidth)??1.5,e=((s=t==null?void 0:t.colors)==null?void 0:s.intervalLine)??"#475569";return{width:Math.max(4,Math.round(n*3)),height:Math.max(6,Math.round(n*4)),color:e,opacity:1}}function Jt(t,n,e,o){const{width:s,height:a}=o,i=a/2;return t==="left"?`M ${n} ${e} L ${n+s} ${e-i} L ${n+s} ${e+i} Z`:`M ${n} ${e} L ${n-s} ${e-i} L ${n-s} ${e+i} Z`}const Lt={RENDERING_BUFFER:4},mt={FONT_SCALE:.8,PADDING:4,GAP:6},nt={DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:32,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},ot={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},U={INDENT_PER_LEVEL:12,TEXT_PADDING:10,DEFAULT_TICK_COUNT:5},Qt={GROUP_HEADER_HEIGHT_MULTIPLIER:1.3,OVERALL_ROW_HEIGHT_MULTIPLIER:1.5},xt={MIN:60,MAX:600,LABEL_MAX:400,VISUAL_MIN:{sparkline:92,bar:100,stars:84,range:84,badge:74,forest:200,viz_bar:150,viz_boxplot:150,viz_violin:150}},At={CHEVRON_WIDTH:12,GAP:6,SAFETY_MARGIN:8},tn={SPACING:6},vt={EDGE_THRESHOLD:35,MIN_TICK_SPACING:50},Tn={success:"#16a34a",warning:"#d97706",error:"#dc2626",info:"#2563eb"};function wn(t,n){return n<=1?0:-((n-1)*tn.SPACING)/2+t*tn.SPACING}function _t(t,n){const e=t.split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),e.join(".")}function Wt(t){const n=Math.abs(t),e=t<0?"-":"";if(n>=1e12)throw new Error(`Cannot abbreviate value >= 1 trillion: ${t}`);if(n>=1e9){const o=n/1e9;return e+Pt(o)+"B"}if(n>=1e6){const o=n/1e6;return e+Pt(o)+"M"}if(n>=1e3){const o=n/1e3;return e+Pt(o)+"K"}return e+Math.round(n).toString()}function Pt(t){const n=Math.round(t*10)/10;return n===Math.floor(n)?n.toFixed(0):n.toFixed(1)}const In={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function An(t){return t.split("").map(n=>In[n]??n).join("")}function bt(t,n){var h,c,r,l,d;if(t==null||Number.isNaN(t))return(n==null?void 0:n.naText)??"";if(n!=null&&n.percent){const{decimals:u,digits:f,multiply:p=!0,symbol:N=!0}=n.percent,A=p?t*100:t,M=f!=null?A.toPrecision(f):A.toFixed(u??1);return N?`${M}%`:M}if(((h=n==null?void 0:n.numeric)==null?void 0:h.abbreviate)&&Math.abs(t)>=1e3)return Wt(t);const o=(c=n==null?void 0:n.numeric)==null?void 0:c.digits;if(o!=null){const u=t.toPrecision(o),f=(r=n==null?void 0:n.numeric)==null?void 0:r.thousandsSep;return f&&typeof f=="string"?_t(u,f):u}const s=(l=n==null?void 0:n.numeric)==null?void 0:l.decimals,a=(d=n==null?void 0:n.numeric)==null?void 0:d.thousandsSep;let i;return s!==void 0?i=t.toFixed(s):Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?i=Math.round(t).toString():i=t.toFixed(2),a&&typeof a=="string"&&(i=_t(i,a)),i}function nn(t,n){const{eventsField:e,nField:o,separator:s="/",showPct:a=!1,thousandsSep:i,abbreviate:h}=n.events,c=t.metadata[e],r=t.metadata[o];if(c==null||r===void 0||r===null)return n.naText??"";const l=Number(c),d=Number(r);let u,f;h&&(l>=1e3||d>=1e3)?(u=l>=1e3?Wt(l):String(l),f=d>=1e3?Wt(d):String(d)):(u=String(l),f=String(d),i&&typeof i=="string"&&(u=_t(u,i),f=_t(f,i)));let p=`${u}${s}${f}`;if(a&&d>0){const N=(l/d*100).toFixed(1);p+=` (${N}%)`}return p}function on(t,n,e,o){var h,c,r;if(t==null||Number.isNaN(t))return"";const s=((h=o==null?void 0:o.interval)==null?void 0:h.decimals)??2,a=((c=o==null?void 0:o.interval)==null?void 0:c.sep)??" ",i=(r=o==null?void 0:o.interval)==null?void 0:r.impreciseThreshold;return n==null||e===void 0||e===null||Number.isNaN(n)||Number.isNaN(e)?t.toFixed(s):i!=null&&n>0&&e/n>i?"—":`${t.toFixed(s)}${a}(${n.toFixed(s)}, ${e.toFixed(s)})`}function en(t,n){if(t==null||Number.isNaN(t))return(n==null?void 0:n.naText)??"";const e=n==null?void 0:n.pvalue,o=(e==null?void 0:e.digits)??2,s=(e==null?void 0:e.expThreshold)??.001,a=(e==null?void 0:e.abbrevThreshold)??null,i=(e==null?void 0:e.format)??"auto",h=(e==null?void 0:e.stars)??!1,c=(e==null?void 0:e.thresholds)??[.05,.01,.001];let r="";if(h&&(t<c[2]?r="***":t<c[1]?r="**":t<c[0]&&(r="*")),a!==null&&t<a)return`<${a}${r}`;if(i==="scientific"||i==="auto"&&t<s){const d=Math.floor(Math.log10(t));return`${(t/Math.pow(10,d)).toPrecision(o)}×10${An(d.toString())}${r}`}let l;return t>=.1?l=t.toFixed(o):t>=.01?l=t.toFixed(o+1):l=t.toFixed(o+2),`${l}${r}`}function _n(t,n){var a,i,h,c;const{type:e,field:o,options:s}=n;switch(e){case"interval":{const r=(a=s==null?void 0:s.interval)!=null&&a.point?t.metadata[s.interval.point]:t.point,l=(i=s==null?void 0:s.interval)!=null&&i.lower?t.metadata[s.interval.lower]:t.lower,d=(h=s==null?void 0:s.interval)!=null&&h.upper?t.metadata[s.interval.upper]:t.upper;return on(r,l,d,s)}case"custom":return s!=null&&s.events?nn(t,s):String(t.metadata[o]??"");case"pvalue":return en(t.metadata[o],s);case"numeric":return bt(t.metadata[o],s);case"percent":return bt(t.metadata[o],s);case"sparkline":case"icon":case"stars":case"img":case"range":return"";case"badge":{const r=t.metadata[o];return r==null?"":`  ${String(r)}  `}case"bar":{if(((c=s==null?void 0:s.bar)==null?void 0:c.showLabel)===!1)return"";const r=t.metadata[o];return r==null?"":r>=100?r.toFixed(0):r>=10?r.toFixed(1):r.toFixed(2)}case"text":default:return String(t.metadata[o]??"")}}function J(t,n){const e="⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻";let o=0;for(const s of t)e.includes(s)?o+=n*.3:"il1.,;:|!()[]{}' ".includes(s)?o+=n*.35:"×−".includes(s)?o+=n*.5:"mwMW@%".includes(s)?o+=n*.85:s>="0"&&s<="9"?o+=n*.6:o+=n*.55;return o}function Sn(t){if(!t||t.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const n=t.filter(s=>s!=null&&!Number.isNaN(s)).sort((s,a)=>s-a);if(n.length===0)return{min:NaN,q1:NaN,median:NaN,q3:NaN,max:NaN};const e=n.length,o=s=>{if(e===1)return n[0];const a=(e-1)*s,i=Math.floor(a),h=Math.ceil(a);return i===h?n[i]:n[i]+(a-i)*(n[h]-n[i])};return{min:n[0],q1:o(.25),median:o(.5),q3:o(.75),max:n[e-1]}}function Cn(t,n,e){if(!t||t.length===0||Number.isNaN(n)||Number.isNaN(e))return[];const o=e-n,s=n-1.5*o,a=e+1.5*o;return t.filter(i=>i!=null&&!Number.isNaN(i)&&(i<s||i>a))}function rn(t){const n=Sn(t),e=Cn(t,n.q1,n.q3);return{...n,outliers:e}}function Dn(t){if(!t||t.length<2)return 1;const n=t.filter(f=>f!=null&&!Number.isNaN(f)).sort((f,p)=>f-p);if(n.length<2)return 1;const e=n.length,o=n.reduce((f,p)=>f+p,0)/e,s=n.reduce((f,p)=>f+(p-o)**2,0)/(e-1),a=Math.sqrt(s),i=Math.floor((e-1)*.25),h=Math.floor((e-1)*.75),c=n[i],l=n[h]-c,u=.9*Math.min(a,l/1.34)*Math.pow(e,-.2);return Math.max(u,.001)}function Hn(t){return Math.exp(-.5*t*t)/Math.sqrt(2*Math.PI)}function kn(t,n,e=128){if(!t||t.length===0)return{x:[],y:[]};const o=t.filter(f=>f!=null&&!Number.isNaN(f));if(o.length===0)return{x:[],y:[]};const s=n??Dn(o),a=Math.min(...o),i=Math.max(...o),h=3*s,c=a-h,l=(i+h-c)/(e-1),d=[],u=[];for(let f=0;f<e;f++){const p=c+f*l;d.push(p);let N=0;for(const A of o)N+=Hn((p-A)/s);N/=o.length*s,u.push(N)}return{x:d,y:u}}function Fn(t,n){if(t.y.length===0)return t;const e=Math.max(...t.y);if(e===0)return t;const o=t.y.map(s=>s/e*n);return{x:t.x,y:o}}function Gn(t,n){var r,l;const e=new Map,o=Q(t.theme.typography.fontSizeBase),s=t.theme.typography.headerFontScale??1.05,a=Math.round(o*s*100)/100,i=t.data.rows,h=(t.theme.spacing.cellPaddingX??10)*2,c=(t.theme.spacing.groupPadding??8)*2;for(const d of n){if(d.width!=="auto"&&d.width!==null&&d.width!==void 0)continue;let u=0;d.header&&(u=Math.max(u,J(d.header,a)));for(const N of i){if(((r=N.style)==null?void 0:r.type)==="header"||((l=N.style)==null?void 0:l.type)==="spacer")continue;const A=_n(N,d);A&&(u=Math.max(u,J(A,o)))}const f=xt.VISUAL_MIN[d.type]??xt.MIN,p=Math.ceil(u+h+Lt.RENDERING_BUFFER);e.set(d.id,Math.min(xt.MAX,Math.max(f,p)))}return Ln(t.columns,e,a,c,Lt.RENDERING_BUFFER),e}function Ln(t,n,e,o,s){function a(c){return c.isGroup?c.columns.flatMap(a):[c]}function i(c){const r=n.get(c.id);return r!==void 0?r:typeof c.width=="number"?c.width:xt.MIN}function h(c){if(c.isGroup){for(const r of c.columns)h(r);if(c.header){const r=J(c.header,e)+o+s,l=a(c),d=l.reduce((u,f)=>u+i(f),0);if(r>d&&l.length>0){const u=Math.ceil((r-d)/l.length);for(const f of l)n.set(f.id,i(f)+u)}}}}for(const c of t)h(c)}function an(t,n,e){let o=e.filter(a=>a.groupId===t).length;const s=n.filter(a=>a.parentId===t);for(const a of s)o+=an(a.id,n,e);return o}function sn(t){var c,r;const n=Q(t.theme.typography.fontSizeBase),e=(t.theme.spacing.cellPaddingX??10)*2;let o=0;const s=new Map,a=Array.isArray(t.data.groups)?t.data.groups:[];for(const l of a)s.set(l.id,l.depth);const i=l=>l?(s.get(l)??0)+1:0;t.data.labelHeader&&(o=Math.max(o,J(t.data.labelHeader,n)));for(const l of t.data.rows)if(l.label){const d=i(l.groupId),u=((c=l.style)==null?void 0:c.indent)??0,p=(d+u)*U.INDENT_PER_LEVEL;let N=J(l.label,n)+p;if((r=l.style)!=null&&r.badge){const A=String(l.style.badge),M=n*mt.FONT_SCALE,_=J(A,M)+mt.PADDING*2;N+=mt.GAP+_}o=Math.max(o,N)}for(const l of a)if(l.label){const d=l.depth*U.INDENT_PER_LEVEL,u=J(l.label,n),p=`(${an(l.id,a,t.data.rows)})`,N=n*.75,A=J(p,N),M=d+At.CHEVRON_WIDTH+At.GAP+u+At.GAP+A+At.SAFETY_MARGIN;o=Math.max(o,M)}const h=Math.ceil(o+e+Lt.RENDERING_BUFFER);return Math.min(xt.LABEL_MAX,Math.max(xt.MIN,h))}function Rt(t,n){const e=n.get(t.id);return e!==void 0?e:typeof t.width=="number"?t.width:nt.DEFAULT_COLUMN_WIDTH}function vn(t,n,e=0){var it,lt,rt,Y,ut;const o=t.theme,s=o.spacing.rowHeight,a=o.spacing.padding,i=Array.isArray(t.columns)?t.columns:[],h=cn(i,"left"),c=cn(i,"right"),l=Ut(h)||Ut(c)?o.spacing.headerHeight*Qt.GROUP_HEADER_HEIGHT_MULTIPLIER:o.spacing.headerHeight,d=!!((it=t.labels)!=null&&it.title),u=!!((lt=t.labels)!=null&&lt.subtitle),f=!!((rt=t.labels)!=null&&rt.caption),p=!!((Y=t.labels)!=null&&Y.footnote),N=d?ot.TITLE_HEIGHT:0,A=u?ot.SUBTITLE_HEIGHT:0,M=N+A+(d||u?a:0),x=f?ot.CAPTION_HEIGHT:0,_=p?ot.FOOTNOTE_HEIGHT:0,T=x+_+(f||p?a:0),I=ln(t),g=!!t.data.overall;let y=0;for(const V of I){const K=V.type==="data"&&((ut=V.row.style)==null?void 0:ut.type)==="spacer";y+=K?s/2:s}g&&(y+=s*Qt.OVERALL_ROW_HEIGHT_MULTIPLIER);const m=zt(i,"left"),w=zt(i,"right"),E=Vt(i).filter(V=>V.position===void 0),C=[...m,...w,...E];let D,G;if(n.columnWidths){D=new Map;for(const[V,K]of Object.entries(n.columnWidths))V!=="__label__"&&D.set(V,K);G=n.columnWidths.__label__??sn(t)}else D=Gn(t,C),G=sn(t);const $=G+m.reduce((V,K)=>V+Rt(K,D),0),H=w.reduce((V,K)=>V+Rt(K,D),0),k=E.filter(V=>V.type!=="forest").reduce((V,K)=>V+Rt(K,D),0),F=n.width??nt.DEFAULT_WIDTH,S=C.some(V=>V.type==="forest")||t.data.includeForest,L=$+H+k;let v;if(!S)v=0;else if(typeof n.forestWidth=="number")v=n.forestWidth;else if(typeof t.layout.plotWidth=="number")v=t.layout.plotWidth;else{const V=F-L-nt.COLUMN_GAP*2-a*2;v=Math.max(V,nt.MIN_FOREST_WIDTH)}const R=a*2+L+v+nt.COLUMN_GAP*2,B=Math.max(n.width??F,R),O=M+a+l+y+nt.AXIS_HEIGHT+nt.AXIS_LABEL_HEIGHT+T+nt.BOTTOM_MARGIN;return{totalWidth:B,totalHeight:n.height??O,tableWidth:$+H,forestWidth:v,headerHeight:l,rowHeight:s,plotHeight:y,axisHeight:nt.AXIS_HEIGHT,nullValue:e,summaryYPosition:y-s,showOverallSummary:g,headerTextHeight:M,footerTextHeight:T,titleY:a+ot.TITLE_HEIGHT-8,subtitleY:a+N+ot.SUBTITLE_HEIGHT-4,mainY:M+a,footerY:M+a+l+y+nt.AXIS_HEIGHT+nt.AXIS_LABEL_HEIGHT+a,autoWidths:D,labelWidth:G}}function ln(t){var d;const n=t.data.rows,e=Array.isArray(t.data.groups)?t.data.groups:[];if(e.length===0)return n.map(u=>({type:"data",row:u,depth:0}));const o=new Map;for(const u of e)o.set(u.id,u);const s=new Map;for(const u of n){const f=u.groupId??null;s.has(f)||s.set(f,[]),s.get(f).push(u)}const a=new Set;for(const u of s.keys()){if(!u)continue;let f=u;for(;f;)a.add(f),f=(d=o.get(f))==null?void 0:d.parentId}function i(u){return e.filter(f=>(f.parentId??null)===u&&a.has(f.id))}function h(u){if(!u)return 0;const f=o.get(u);return f?f.depth+1:0}function c(u){var p;let f=((p=s.get(u))==null?void 0:p.length)??0;for(const N of i(u))f+=c(N.id);return f}const r=[];function l(u){if(u){const p=o.get(u);if(!p)return;const N=c(u);r.push({type:"group_header",groupId:p.id,label:p.label,depth:p.depth,rowCount:N})}for(const p of i(u))l(p.id);const f=s.get(u)??[];for(const p of f)r.push({type:"data",row:p,depth:h(p.groupId)})}return l(null),r}function Bt(t){const n=[];for(const e of t)e.isGroup?n.push(...Bt(e.columns)):n.push(e);return n}function Vt(t){const n=[];for(const e of t)e.isGroup?n.push(...Bt(e.columns)):n.push(e);return n}function zt(t,n){if(n===void 0)return Vt(t);const e=[];for(const o of t)o.position===n&&(o.isGroup?e.push(...Bt(o.columns)):e.push(o));return e}function cn(t,n){return t.filter(e=>e.position===n)}function Ut(t){return t.some(n=>n.isGroup)}function Q(t){let n;return t.endsWith("rem")?n=parseFloat(t)*ot.REM_BASE:t.endsWith("px")?n=parseFloat(t):n=ot.DEFAULT_FONT_SIZE,Math.round(n*100)/100}function St(t,n,e){return e==="right"?{textX:t+n-U.TEXT_PADDING,anchor:"end"}:e==="center"?{textX:t+n/2,anchor:"middle"}:{textX:t+U.TEXT_PADDING,anchor:"start"}}function q(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function un(t,n,e,o=0){const s=n-o*2;if(J(t,e)<=s)return t;const i="…",h=e*.55;let c=0,r=t.length;for(;c<r;){const l=Math.ceil((c+r)/2),d=t.slice(0,l);J(d,e)+h<=s?c=l:r=l-1}return c===0?i:t.slice(0,c)+i}function Wn(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function Nt(t,n){const[e,o]=t,[s,a]=n,i=(a-s)/(o-e),h=c=>s+(c-e)*i;return h.domain=()=>t,h.range=()=>n,h.ticks=c=>{const r=(o-e)/(c-1),l=[];for(let d=0;d<c;d++)l.push(e+r*d);return l},h}function Et(t,n){const[e,o]=t.map(l=>Math.max(l,.001)),[s,a]=n,i=Math.log10(e),h=Math.log10(o),c=(a-s)/(h-i),r=l=>{const d=Math.log10(Math.max(l,.001));return s+(d-i)*c};return r.domain=()=>[e,o],r.range=()=>n,r.ticks=l=>{const d=[],u=Math.floor(Math.log10(e)),f=Math.ceil(Math.log10(o));for(let p=u;p<=f;p++){const N=Math.pow(10,p);for(const A of[1,2,5]){const M=N*A;M>=e&&M<=o&&d.push(M)}}return d.length>0?d:[e,o]},r}function Pn(t,n,e,o){const s=e.scale==="log",a=pt,i=Math.max(n-pt,a+50);if(o!=null&&o.xDomain){const d=o.xDomain,u=o.clipBounds??d,f=Zt(u,t.theme.axis,e.scale,e.nullValue);return s?{scale:Et([Math.max(d[0],.01),Math.max(d[1],.02)],[a,i]),clipBounds:u,ticks:f}:{scale:Nt(d,[a,i]),clipBounds:u,ticks:f}}const h=$n({rows:t.data.rows,config:t.theme.axis,scale:e.scale,nullValue:e.nullValue,forestWidth:n,pointSize:t.theme.shapes.pointSize,effects:e.effects,pointCol:e.pointCol,lowerCol:e.lowerCol,upperCol:e.upperCol}),{plotRegion:c,axisLimits:r,ticks:l}=h;return s?{scale:Et([Math.max(c[0],.01),Math.max(c[1],.02)],[a,i]),clipBounds:r,ticks:l}:{scale:Nt(c,[a,i]),clipBounds:r,ticks:l}}function Rn(t,n,e){var a,i;const o=[],s=e.spacing.padding;if((a=t.labels)!=null&&a.title){const h=Q(e.typography.fontSizeLg);o.push(`<text x="${s}" y="${n.titleY}"
      font-family="${e.typography.fontFamily}"
      font-size="${h}px"
      font-weight="${e.typography.fontWeightBold}"
      fill="${e.colors.foreground}">${q(t.labels.title)}</text>`)}if((i=t.labels)!=null&&i.subtitle){const h=Q(e.typography.fontSizeBase);o.push(`<text x="${s}" y="${n.subtitleY}"
      font-family="${e.typography.fontFamily}"
      font-size="${h}px"
      fill="${e.colors.secondary}">${q(t.labels.subtitle)}</text>`)}return o.join(`
`)}function Bn(t,n,e){var i,h;const o=[],s=e.spacing.padding;let a=n.footerY;if((i=t.labels)!=null&&i.caption){const c=Q(e.typography.fontSizeSm);o.push(`<text x="${s}" y="${a}"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      fill="${e.colors.secondary}">${q(t.labels.caption)}</text>`),a+=ot.CAPTION_HEIGHT}if((h=t.labels)!=null&&h.footnote){const c=Q(e.typography.fontSizeSm);o.push(`<text x="${s}" y="${a}"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      font-style="italic"
      fill="${e.colors.muted}">${q(t.labels.footnote)}</text>`)}return o.join(`
`)}function Vn(t,n,e,o,s,a,i){const h=[],c=n+1,r=i.groupHeaders;let l,d,u,f,p;if(c===1?(l=Q((r==null?void 0:r.level1FontSize)??i.typography.fontSizeBase),d=(r==null?void 0:r.level1FontWeight)??i.typography.fontWeightBold,u=(r==null?void 0:r.level1Italic)??!1,f=(r==null?void 0:r.level1Background)??null,p=(r==null?void 0:r.level1BorderBottom)??!1):c===2?(l=Q((r==null?void 0:r.level2FontSize)??i.typography.fontSizeBase),d=(r==null?void 0:r.level2FontWeight)??i.typography.fontWeightMedium,u=(r==null?void 0:r.level2Italic)??!0,f=(r==null?void 0:r.level2Background)??null,p=(r==null?void 0:r.level2BorderBottom)??!1):(l=Q((r==null?void 0:r.level3FontSize)??i.typography.fontSizeBase),d=(r==null?void 0:r.level3FontWeight)??i.typography.fontWeightNormal,u=(r==null?void 0:r.level3Italic)??!1,f=(r==null?void 0:r.level3Background)??null,p=(r==null?void 0:r.level3BorderBottom)??!1),!f){const x=i.colors.primary,_=c===1?.15:c===2?.1:.06,T=x.replace("#",""),I=parseInt(T.substring(0,2),16),g=parseInt(T.substring(2,4),16),y=parseInt(T.substring(4,6),16);f=`rgba(${I}, ${g}, ${y}, ${_})`}const N=o+s/2+l*ot.TEXT_BASELINE_ADJUSTMENT,A=n*((r==null?void 0:r.indentPerLevel)??U.INDENT_PER_LEVEL);h.push(`<rect x="${e}" y="${o}"
    width="${a}" height="${s}"
    fill="${f}"/>`),p&&h.push(`<line x1="${e}" x2="${e+a}" y1="${o+s}" y2="${o+s}"
      stroke="${i.colors.border}" stroke-width="1" opacity="0.5"/>`);const M=u?' font-style="italic"':"";return h.push(`<text x="${e+U.TEXT_PADDING+A}" y="${N}"
    font-family="${i.typography.fontFamily}"
    font-size="${l}px"
    font-weight="${d}"${M}
    fill="${i.colors.foreground}">${q(t)}</text>`),h.join(`
`)}function zn(t,n){const e=new Map;for(const o of n)if(o.type==="bar"){let s=0;for(const a of t){const i=a.metadata[o.field];typeof i=="number"&&i>s&&(s=i)}e.set(o.field,s>0?s:1)}return e}function Un(t,n){var o,s,a,i,h,c,r,l,d,u,f,p,N,A,M,x,_,T,I;if(n.type==="interval"){const g=(s=(o=n.options)==null?void 0:o.interval)!=null&&s.point?t.metadata[n.options.interval.point]:t.point,y=(i=(a=n.options)==null?void 0:a.interval)!=null&&i.lower?t.metadata[n.options.interval.lower]:t.lower,m=(c=(h=n.options)==null?void 0:h.interval)!=null&&c.upper?t.metadata[n.options.interval.upper]:t.upper;return on(g,y,m,n.options)}if(n.type==="numeric"){const g=t.metadata[n.field];return typeof g=="number"?bt(g,n.options):((r=n.options)==null?void 0:r.naText)??""}if(n.type==="custom"&&((l=n.options)!=null&&l.events))return nn(t,n.options);if(n.type==="pvalue"){const g=t.metadata[n.field];return typeof g!="number"?((d=n.options)==null?void 0:d.naText)??"":en(g,n.options)}if(n.type==="icon"){const g=t.metadata[n.field];if(g==null)return"";const y=String(g),m=(f=(u=n.options)==null?void 0:u.icon)==null?void 0:f.mapping;return m&&y in m?m[y]:y}if(n.type==="badge"){const g=t.metadata[n.field];return g!=null?String(g):""}if(n.type==="stars"){const g=t.metadata[n.field];if(typeof g!="number")return"";const y=((N=(p=n.options)==null?void 0:p.stars)==null?void 0:N.maxStars)??5,m=Math.max(0,Math.min(y,g)),w=Math.floor(m),E=y-w;return"★".repeat(w)+"☆".repeat(E)}if(n.type==="img")return((M=(A=n.options)==null?void 0:A.img)==null?void 0:M.fallback)??"[IMG]";if(n.type==="reference"){const g=t.metadata[n.field];if(g==null)return"";const y=String(g),m=((_=(x=n.options)==null?void 0:x.reference)==null?void 0:_.maxChars)??30;return y.length<=m?y:y.substring(0,m)+"..."}if(n.type==="range"){const g=(T=n.options)==null?void 0:T.range;if(!g)return"";const y=t.metadata[g.minField],m=t.metadata[g.maxField],w=g.separator??" – ",E=g.decimals,C=D=>typeof D!="number"?"":E==null?Number.isInteger(D)?String(D):D.toFixed(1):D.toFixed(E);return y===null&&m===null?"":y===null?C(m):m===null?C(y):`${C(y)}${w}${C(m)}`}const e=t.metadata[n.field];return e!=null?String(e):((I=n.options)==null?void 0:I.naText)??""}function Xn(t,n,e,o,s){const a=t.filter(l=>Number.isFinite(l));if(a.length===0)return"";if(a.length===1){const l=n+o/2,d=e+s/2;return`M${l.toFixed(1)},${d.toFixed(1)}`}const i=Math.min(...a),c=Math.max(...a)-i||1;return`M${a.map((l,d)=>{const u=n+d/(a.length-1)*o,f=e+s-(l-i)/c*s;return`${u.toFixed(1)},${f.toFixed(1)}`}).join("L")}`}function qn(t,n,e,o,s,a=[],i,h=0,c=1/0,r,l=!1){var y;let d;if(a.length===0){const m=!l||t.point!=null&&t.point>0?t.point:null,w=!l||t.lower!=null&&t.lower>0?t.lower:null,E=!l||t.upper!=null&&t.upper>0?t.upper:null;d=[{point:m,lower:w,upper:E,color:null,shape:null,opacity:null}]}else d=a.map(m=>({point:ct(t.metadata,t.point,m.pointCol,"point",l),lower:ct(t.metadata,t.lower,m.lowerCol,"lower",l),upper:ct(t.metadata,t.upper,m.upperCol,"upper",l),color:m.color??null,shape:m.shape??null,opacity:m.opacity??null}));const u=d.filter(m=>m.point!=null&&!Number.isNaN(m.point)&&m.lower!=null&&!Number.isNaN(m.lower)&&m.upper!=null&&!Number.isNaN(m.upper));if(u.length===0)return"";const f=o.shapes.pointSize,p=o.shapes.lineWidth,N=o.colors.intervalLine,A=((y=t.style)==null?void 0:y.type)==="summary",x=o.shapes.summaryHeight/2;function _(m){var E;if(m&&((E=t.markerStyle)==null?void 0:E.size)!=null)return f*t.markerStyle.size;const w=i?t.metadata[i]:void 0;if(w){const C=.5+Math.sqrt(w/100)*1.5;return Math.min(Math.max(f*C,3),f*2.5)}return f}function T(m,w){const E=w===0,C=t.markerStyle,D=o.shapes.effectColors,G=o.shapes.markerShapes,$=["square","circle","diamond","triangle"];let H;E&&(C!=null&&C.color)?H=C.color:m.color?H=m.color:D&&D.length>0?H=D[w%D.length]:H=o.colors.interval??o.colors.primary??"#2563eb";let k;E&&(C!=null&&C.shape)?k=C.shape:m.shape?k=m.shape:G&&G.length>0?k=G[w%G.length]:k=$[w%$.length];let F;return E&&(C==null?void 0:C.opacity)!=null?F=C.opacity:m.opacity!=null?F=m.opacity:F=1,{color:H,shape:k,opacity:F}}function I(m,w,E,C){const{color:D,shape:G,opacity:$}=C,H=$<1?` fill-opacity="${$}"`:"";switch(G){case"circle":return`<circle cx="${m}" cy="${w}" r="${E}" fill="${D}"${H}/>`;case"diamond":return`<polygon points="${[`${m},${w-E}`,`${m+E},${w}`,`${m},${w+E}`,`${m-E},${w}`].join(" ")}" fill="${D}"${H}/>`;case"triangle":return`<polygon points="${[`${m},${w-E}`,`${m+E},${w+E}`,`${m-E},${w+E}`].join(" ")}" fill="${D}"${H}/>`;default:return`<rect x="${m-E}" y="${w-E}" width="${E*2}" height="${E*2}" fill="${D}"${H}/>`}}const g=[];return u.forEach((m,w)=>{const E=n+wn(w,u.length),C=e(m.lower),D=e(m.upper),G=e(m.point),$=T(m,w),H=_(w===0),k=N;if(A){const F=$.opacity<1?` fill-opacity="${$.opacity}"`:"",b=[`${C},${E}`,`${G},${E-x}`,`${D},${E}`,`${G},${E+x}`].join(" ");g.push(`
        <g class="interval effect-${w} summary">
          <polygon points="${b}"
            fill="${$.color}"${F} stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else{const F=h+pt,b=h+c-pt,S=r?m.lower<r[0]:C<F,L=r?m.upper>r[1]:D>b;let v,R;if(r){const V=Math.max(r[0],Math.min(r[1],m.lower)),K=Math.max(r[0],Math.min(r[1],m.upper));v=e(V),R=e(K)}else v=Math.max(F,Math.min(b,C)),R=Math.max(F,Math.min(b,D));const B=En(o),O=B.height/2,it=r?e(r[0]):F,lt=r?e(r[1]):b;let rt="";S?rt=`<path d="${Jt("left",it,E,B)}" fill="${B.color}"/>`:rt=`<line x1="${v}" x2="${v}" y1="${E-O}" y2="${E+O}" stroke="${k}" stroke-width="${p}"/>`;let Y="";L?Y=`<path d="${Jt("right",lt,E,B)}" fill="${B.color}"/>`:Y=`<line x1="${R}" x2="${R}" y1="${E-O}" y2="${E+O}" stroke="${k}" stroke-width="${p}"/>`;const ut=r?e(Math.max(r[0],Math.min(r[1],m.point))):Math.max(F,Math.min(b,G));g.push(`
        <g class="interval effect-${w}">
          <line x1="${v}" x2="${R}" y1="${E}" y2="${E}"
            stroke="${k}" stroke-width="${p}"/>
          ${rt}
          ${Y}
          ${I(ut,E,H,$)}
        </g>`)}}),g.join("")}function On(t,n,e,o,s,a,i,h){const r=h.shapes.summaryHeight/2,[l,d]=s.domain().map(I=>s(I)),u=Math.min(l,d),f=Math.max(l,d),p=s(n),N=s(t),A=s(e),M=a+Math.max(u,Math.min(f,p)),x=a+Math.max(u,Math.min(f,N)),_=a+Math.max(u,Math.min(f,A));return`<polygon points="${[`${M},${o}`,`${x},${o-r}`,`${_},${o}`,`${x},${o+r}`].join(" ")}"
    fill="${h.colors.summaryFill}"
    stroke="${h.colors.summaryBorder}"
    stroke-width="1"/>`}function jn(t,n,e,o,s,a,i,h){const c=[],r=a.effects,l=r.length;if(!r.some(M=>{const x=t.metadata[M.value];return x!=null&&!Number.isNaN(x)}))return"";const u=e*.7,f=l>1?2:0,p=(u-f*(l-1))/l,N=Math.max(4,p),A=h.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"];return r.forEach((M,x)=>{const _=t.metadata[M.value];if(_==null||Number.isNaN(_))return;const T=n-u/2+x*(N+f),I=o+i(Math.min(0,_)),g=Math.abs(i(_)-i(0)),y=M.color??A[x%A.length],m=M.opacity??.85;c.push(`<rect
      x="${I}" y="${T}"
      width="${Math.max(1,g)}" height="${N}"
      fill="${y}" fill-opacity="${m}" rx="2"
      class="viz-bar-segment"/>`)}),c.join(`
`)}function Yn(t,n,e,o,s,a,i,h){const c=[],r=a.effects,l=r.length,d=r.map(x=>{if(x.data){const _=t.metadata[x.data];return!_||!Array.isArray(_)||_.length===0?null:rn(_)}if(x.min&&x.q1&&x.median&&x.q3&&x.max){const _=t.metadata[x.min],T=t.metadata[x.q1],I=t.metadata[x.median],g=t.metadata[x.q3],y=t.metadata[x.max];if([_,T,I,g,y].some(w=>w==null||Number.isNaN(w)))return null;let m=[];if(x.outliers){const w=t.metadata[x.outliers];w&&Array.isArray(w)&&(m=w)}return{min:_,q1:T,median:I,q3:g,max:y,outliers:m}}return null});if(!d.some(x=>x!==null))return"";const f=e*.7,p=l>1?2:0,N=Math.max(8,(f-(l-1)*p)/l),A=h.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],M=h.colors.foreground??"#1a1a1a";return r.forEach((x,_)=>{const T=d[_];if(!T)return;const I=n-f/2+_*(N+p),g=I+N/2,y=x.color??A[_%A.length],m=x.fillOpacity??.7;c.push(`<line
      x1="${o+i(T.min)}" x2="${o+i(T.q1)}"
      y1="${g}" y2="${g}"
      stroke="${M}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(T.min)}" x2="${o+i(T.min)}"
      y1="${g-N/4}" y2="${g+N/4}"
      stroke="${M}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(T.q3)}" x2="${o+i(T.max)}"
      y1="${g}" y2="${g}"
      stroke="${M}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(T.max)}" x2="${o+i(T.max)}"
      y1="${g-N/4}" y2="${g+N/4}"
      stroke="${M}" stroke-width="1"/>`);const w=Math.max(2,i(T.q3)-i(T.q1));if(c.push(`<rect
      x="${o+i(T.q1)}" y="${I}"
      width="${w}" height="${N}"
      fill="${y}" fill-opacity="${m}"
      stroke="${M}" stroke-width="1"/>`),c.push(`<line
      x1="${o+i(T.median)}" x2="${o+i(T.median)}"
      y1="${I}" y2="${I+N}"
      stroke="${M}" stroke-width="2"/>`),a.showOutliers!==!1&&T.outliers.length>0)for(const E of T.outliers)c.push(`<circle
          cx="${o+i(E)}" cy="${g}"
          r="2.5"
          fill="none" stroke="${y}" stroke-width="1.5"/>`)}),c.join(`
`)}function Kn(t,n,e,o,s,a,i,h){const c=[],r=a.effects,l=r.length,d=r.map(T=>{const I=t.metadata[T.data];return!I||!Array.isArray(I)||I.length<2?null:kn(I,a.bandwidth)}),u=r.map(T=>{const I=t.metadata[T.data];if(!I||!Array.isArray(I)||I.length<2)return null;const g=I.filter(w=>w!=null&&!Number.isNaN(w)).sort((w,E)=>w-E);if(g.length===0)return null;const y=g.length,m=w=>{if(y===1)return g[0];const E=(y-1)*w,C=Math.floor(E),D=Math.ceil(E);return C===D?g[C]:g[C]+(E-C)*(g[D]-g[C])};return{q1:m(.25),median:m(.5),q3:m(.75)}});if(!d.some(T=>T!==null))return"";const p=e*.8,N=l>1?2:0,A=Math.max(10,(p-(l-1)*N)/l),M=A/2,x=h.shapes.effectColors??["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6"],_=h.colors.foreground??"#1a1a1a";return r.forEach((T,I)=>{const g=d[I],y=u[I];if(!g||g.x.length<2)return;const m=n-p/2+A/2+I*(A+N),w=T.color??x[I%x.length],E=T.fillOpacity??.5,C=Fn(g,M),D=[];for(let G=0;G<C.x.length;G++){const $=o+i(C.x[G]),H=m-C.y[G];D.push(G===0?`M ${$} ${H}`:`L ${$} ${H}`)}for(let G=C.x.length-1;G>=0;G--){const $=o+i(C.x[G]),H=m+C.y[G];D.push(`L ${$} ${H}`)}if(D.push("Z"),c.push(`<path
      d="${D.join(" ")}"
      fill="${w}" fill-opacity="${E}"
      stroke="${_}" stroke-width="0.5"/>`),a.showMedian!==!1&&y){const G=o+i(y.median);c.push(`<line
        x1="${G}" x2="${G}"
        y1="${m-M*.6}" y2="${m+M*.6}"
        stroke="${_}" stroke-width="2"/>`)}if(a.showQuartiles&&y){const G=o+i(y.q1),$=o+i(y.q3);c.push(`<line
        x1="${G}" x2="${G}"
        y1="${m-M*.4}" y2="${m+M*.4}"
        stroke="${_}" stroke-width="1" stroke-dasharray="2,2"/>`),c.push(`<line
        x1="${$}" x2="${$}"
        y1="${m-M*.4}" y2="${m+M*.4}"
        stroke="${_}" stroke-width="1" stroke-dasharray="2,2"/>`)}}),c.join(`
`)}function Zn(t,n,e){var h,c;const o=n.scale==="log",s=pt;let a=(h=n.axisRange)==null?void 0:h[0],i=(c=n.axisRange)==null?void 0:c[1];if(a==null||i==null){const r=[];for(const l of t)for(const d of n.effects){const u=l.metadata[d.value];u!=null&&!Number.isNaN(u)&&r.push(u)}r.length>0?(a=a??Math.min(0,...r),i=i??Math.max(...r)*1.1):(a=a??0,i=i??100)}return o?Et([Math.max(.01,a),i],[s,e-s]):Nt([a,i],[s,e-s])}function Jn(t,n,e){var h,c;const o=n.scale==="log",s=pt;let a=(h=n.axisRange)==null?void 0:h[0],i=(c=n.axisRange)==null?void 0:c[1];if(a==null||i==null){const r=[];for(const l of t)for(const d of n.effects)if(d.data){const u=l.metadata[d.data];if(u&&Array.isArray(u)){const f=rn(u);r.push(f.min,f.max),n.showOutliers!==!1&&r.push(...f.outliers)}}else if(d.min&&d.max){const u=l.metadata[d.min],f=l.metadata[d.max];u!=null&&!Number.isNaN(u)&&r.push(u),f!=null&&!Number.isNaN(f)&&r.push(f)}if(r.length>0){const l=Math.min(...r),d=Math.max(...r),u=d-l;a=a??l-u*.05,i=i??d+u*.05}else a=a??0,i=i??100}return o?Et([Math.max(.01,a),i],[s,e-s]):Nt([a,i],[s,e-s])}function Qn(t,n,e){var h,c;const o=n.scale==="log",s=pt;let a=(h=n.axisRange)==null?void 0:h[0],i=(c=n.axisRange)==null?void 0:c[1];if(a==null||i==null){const r=[];for(const l of t)for(const d of n.effects){const u=l.metadata[d.data];u&&Array.isArray(u)&&r.push(...u.filter(f=>f!=null&&!Number.isNaN(f)))}if(r.length>0){a=a??Math.min(...r),i=i??Math.max(...r);const l=(i??0)-(a??0);a=(a??0)-l*.1,i=(i??0)+l*.1}else a=a??0,i=i??100}return o?Et([Math.max(.01,a),i],[s,e-s]):Nt([a,i],[s,e-s])}function Xt(t,n,e,o,s,a,i){const h=[],c=Q(e.typography.fontSizeSm),r=vt.EDGE_THRESHOLD,l=A=>A<r?"start":A>a-r?"end":"middle",d=A=>A<r?2:A>a-r?-2:0;h.push(`<line x1="${s}" x2="${s+a}"
    y1="0" y2="0" stroke="${e.colors.border}" stroke-width="1"/>`);const u=t.domain(),f=5,p=[],N=u[1]-u[0];for(let A=0;A<=f;A++)p.push(u[0]+N*A/f);for(const A of p){const M=t(A),x=s+M,_=l(M),T=d(M),I=bt(A);h.push(`<line x1="${x}" x2="${x}" y1="0" y2="4" stroke="${e.colors.border}" stroke-width="1"/>`),h.push(`<text x="${x+T}" y="14"
      text-anchor="${_}"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      fill="${e.colors.foreground}">${I}</text>`)}return o&&h.push(`<text x="${s+a/2}" y="28"
      text-anchor="middle"
      font-family="${e.typography.fontFamily}"
      font-size="${c}px"
      fill="${e.colors.foreground}">${q(o)}</text>`),h.join(`
`)}function to(t,n,e,o,s,a,i=1,h){const c=[],r=typeof e.axis.tickCount=="number"?e.axis.tickCount:U.DEFAULT_TICK_COUNT,l=eo(t,r,e,i,a,h),d=Q(e.typography.fontSizeSm),u=vt.EDGE_THRESHOLD,f=N=>N<u?"start":N>a-u?"end":"middle",p=N=>N<u?2:N>a-u?-2:0;c.push(`<line x1="${s}" x2="${s+a}"
    y1="0" y2="0" stroke="${e.colors.border}" stroke-width="1"/>`);for(const N of l){const A=t(N),M=s+A,x=f(A),_=p(A);c.push(`<line x1="${M}" x2="${M}" y1="0" y2="4"
      stroke="${e.colors.border}" stroke-width="1"/>`),c.push(`<text x="${M+_}" y="16" text-anchor="${x}"
      font-family="${e.typography.fontFamily}"
      font-size="${d}px"
      fill="${e.colors.secondary}">${Wn(N)}</text>`)}return o&&c.push(`<text x="${s+a/2}" y="28"
      text-anchor="middle"
      font-family="${e.typography.fontFamily}"
      font-size="${d}px"
      font-weight="500"
      fill="${e.colors.secondary}">${q(o)}</text>`),`<g transform="translate(0, ${n.mainY+n.headerHeight+n.plotHeight})">${c.join(`
`)}</g>`}function no(t,n,e,o,s,a,i,h,c,r){const l=[],d=Q(a.typography.fontSizeBase),u=a.typography.headerFontScale??1.05,f=Math.round(d*u*100)/100,p=a.typography.fontWeightMedium,N=a.typography.fontWeightBold,A=Ut(t),M=(x,_)=>x+_/2+f*ot.TEXT_BASELINE_ADJUSTMENT;if(A){const x=s/2,_=s/2;let T=e;l.push(`<text x="${T+U.TEXT_PADDING}" y="${M(o,s)}"
      font-family="${a.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${p}"
      fill="${a.colors.foreground}">${q(i)}</text>`),T+=h;const I=[];for(const g of t)if(g.isGroup){const y=g.columns.reduce((w,E)=>E.isGroup?w+E.columns.reduce((C,D)=>C+r(D),0):w+r(E),0),m=T+y/2;l.push(`<text x="${m}" y="${M(o,x)}"
          font-family="${a.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${N}"
          text-anchor="middle"
          fill="${a.colors.foreground}">${q(g.header)}</text>`),I.push({x1:T,x2:T+y}),T+=y}else{const y=r(g),m=g.headerAlign??g.align,{textX:w,anchor:E}=St(T,y,m),C=un(g.header,y,f,U.TEXT_PADDING);l.push(`<text x="${w}" y="${M(o,s)}"
          font-family="${a.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${p}"
          text-anchor="${E}"
          fill="${a.colors.foreground}">${q(C)}</text>`),T+=y}for(const g of I)l.push(`<line x1="${g.x1}" x2="${g.x2}"
        y1="${o+x}" y2="${o+x}"
        stroke="${a.colors.border}" stroke-width="1" opacity="0.5"/>`);T=e+h;for(const g of t)if(g.isGroup){for(const y of g.columns)if(!y.isGroup){const m=r(y),w=y.headerAlign??y.align,{textX:E,anchor:C}=St(T,m,w);l.push(`<text x="${E}" y="${M(o+x,_)}"
              font-family="${a.typography.fontFamily}"
              font-size="${f}px"
              font-weight="${p}"
              text-anchor="${C}"
              fill="${a.colors.foreground}">${q(y.header)}</text>`),T+=m}}else T+=r(g)}else{let x=e;l.push(`<text x="${x+U.TEXT_PADDING}" y="${M(o,s)}"
      font-family="${a.typography.fontFamily}"
      font-size="${f}px"
      font-weight="${p}"
      fill="${a.colors.foreground}">${q(i)}</text>`),x+=h;for(const _ of n){const T=r(_),I=_.headerAlign??_.align,{textX:g,anchor:y}=St(x,T,I),m=un(_.header,T,f,U.TEXT_PADDING);l.push(`<text x="${g}" y="${M(o,s)}"
        font-family="${a.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${p}"
        text-anchor="${y}"
        fill="${a.colors.foreground}">${q(m)}</text>`),x+=T}}return l.join(`
`)}function oo(t,n,e,o,s,a,i,h,c,r,l,d){var _,T,I,g,y,m,w,E,C,D,G,$,H,k,F,b,S,L,v,R,B,O,it,lt,rt,Y,ut,V,K;const u=[],f=Q(a.typography.fontSizeBase),p=o+s/2+f*ot.TEXT_BASELINE_ADJUSTMENT,N=h*U.INDENT_PER_LEVEL+(((_=t.style)==null?void 0:_.indent)??0)*U.INDENT_PER_LEVEL,A=(T=t.style)!=null&&T.bold||(I=t.style)!=null&&I.emphasis?a.typography.fontWeightBold:a.typography.fontWeightNormal,M=(g=t.style)!=null&&g.italic?"italic":"normal";let x=a.colors.foreground;if((y=t.style)!=null&&y.color?x=t.style.color:(m=t.style)!=null&&m.muted?x=a.colors.muted:(w=t.style)!=null&&w.accent&&(x=a.colors.accent),u.push(`<text x="${e+U.TEXT_PADDING+N}" y="${p}"
    font-family="${a.typography.fontFamily}"
    font-size="${f}px"
    font-weight="${A}"
    font-style="${M}"
    fill="${x}">${q(t.label)}</text>`),(E=t.style)!=null&&E.badge){const ft=String(t.style.badge),W=f*mt.FONT_SCALE,P=W+mt.PADDING*2,j=J(t.label,f),Mt=e+U.TEXT_PADDING+N+j+mt.GAP,Dt=J(ft,W)+mt.PADDING*2,z=o+(s-P)/2;u.push(`<rect x="${Mt}" y="${z}" width="${Dt}" height="${P}"
      rx="3" fill="${a.colors.primary}" opacity="0.15"/>`),u.push(`<text x="${Mt+Dt/2}" y="${z+P/2+W*.35}"
      text-anchor="middle"
      font-family="${a.typography.fontFamily}"
      font-size="${W}px"
      font-weight="500"
      fill="${a.colors.primary}">${q(ft)}</text>`)}for(let ft=0;ft<n.length;ft++){const W=n[ft],P=d[ft],j=l(W);if(W.type==="forest"||W.type==="viz_bar"||W.type==="viz_boxplot"||W.type==="viz_violin")continue;const Mt=Un(t,W),{textX:Ct,anchor:Dt}=St(P,j,W.align);if(W.type==="bar"&&typeof t.metadata[W.field]=="number"){const z=t.metadata[W.field],X=c.get(W.field),tt=((D=(C=W.options)==null?void 0:C.bar)==null?void 0:D.maxValue)??X??100,Z=(($=(G=W.options)==null?void 0:G.bar)==null?void 0:$.color)??a.colors.primary,at=a.shapes.pointSize*2,ht=j-U.TEXT_PADDING*2-50,et=Math.min(z/tt*ht,ht);u.push(`<rect x="${P+U.TEXT_PADDING}" y="${o+s/2-at/2}"
        width="${Math.max(0,et)}" height="${at}"
        fill="${Z}" opacity="0.7" rx="2"/>`),u.push(`<text x="${P+j-U.TEXT_PADDING}" y="${p}"
        font-family="${a.typography.fontFamily}"
        font-size="${f}px"
        text-anchor="end"
        fill="${a.colors.foreground}">${bt(z)}</text>`)}else if(W.type==="sparkline"&&Array.isArray(t.metadata[W.field])){let z=t.metadata[W.field];Array.isArray(z[0])&&(z=z[0]);const X=((k=(H=W.options)==null?void 0:H.sparkline)==null?void 0:k.height)??16,tt=((b=(F=W.options)==null?void 0:F.sparkline)==null?void 0:b.color)??a.colors.primary,Z=U.TEXT_PADDING*2,at=Xn(z,P+U.TEXT_PADDING,o+s/2-X/2,j-Z,X);u.push(`<path d="${at}" fill="none" stroke="${tt}" stroke-width="1.5"/>`)}else if(W.type==="badge"){const z=t.metadata[W.field];if(z!=null){const X=String(z),tt=f*.85,Z=tt+8,at=(L=(S=W.options)==null?void 0:S.badge)==null?void 0:L.variants,dt=(R=(v=W.options)==null?void 0:v.badge)==null?void 0:R.colors;let ht=a.colors.primary,et=a.colors.primary;if(dt&&X in dt)ht=dt[X],et=dt[X];else if(at&&X in at){const jt=at[X];ht={default:a.colors.primary,...Tn,muted:a.colors.muted}[jt]??a.colors.primary,et=ht}const $t=J(X,tt)+12,Tt=W.align==="right"?P+j-U.TEXT_PADDING-$t:W.align==="center"?P+(j-$t)/2:P+U.TEXT_PADDING,Ht=o+(s-Z)/2;u.push(`<rect x="${Tt}" y="${Ht}" width="${$t}" height="${Z}"
          rx="${Z/2}" fill="${ht}" opacity="0.15"/>`),u.push(`<text x="${Tt+$t/2}" y="${Ht+Z/2+tt*.35}"
          text-anchor="middle"
          font-family="${a.typography.fontFamily}"
          font-size="${tt}px"
          font-weight="500"
          fill="${et}">${q(X)}</text>`)}}else if(W.type==="stars"){const z=t.metadata[W.field];if(typeof z=="number"){const X=((O=(B=W.options)==null?void 0:B.stars)==null?void 0:O.maxStars)??5,tt=((lt=(it=W.options)==null?void 0:it.stars)==null?void 0:lt.color)??"#f59e0b",Z=((Y=(rt=W.options)==null?void 0:rt.stars)==null?void 0:Y.emptyColor)??"#d1d5db",at=Math.max(0,Math.min(X,z)),dt=Math.floor(at),ht=((V=(ut=W.options)==null?void 0:ut.stars)==null?void 0:V.halfStars)&&at-dt>=.5,et=12,Ot=2,$t=X*et+(X-1)*Ot;let Tt=W.align==="right"?P+j-U.TEXT_PADDING-$t:W.align==="center"?P+(j-$t)/2:P+U.TEXT_PADDING;const Ht=o+(s-et)/2,jt=(gt,kt,Yt)=>{const Ft=Yt/2,Gt=Ft*.4;let fn="";for(let wt=0;wt<5;wt++){const dn=(wt*72-90)*Math.PI/180,hn=(wt*72+36-90)*Math.PI/180,pn=gt+Ft*Math.cos(dn),gn=kt+Ft*Math.sin(dn),lo=gt+Gt*Math.cos(hn),co=kt+Gt*Math.sin(hn);fn+=(wt===0?`M${pn},${gn}`:`L${pn},${gn}`)+`L${lo},${co}`}return fn+"Z"};for(let gt=0;gt<X;gt++){const kt=Tt+et/2,Yt=Ht+et/2,Gt=gt<dt||gt===dt&&ht?tt:Z;u.push(`<path d="${jt(kt,Yt,et)}" fill="${Gt}"/>`),Tt+=et+Ot}}}else{const z=(K=t.cellStyles)==null?void 0:K[W.field];let X=a.typography.fontWeightNormal,tt="normal",Z=a.colors.foreground;z&&((z.bold||z.emphasis)&&(X=a.typography.fontWeightBold),z.italic&&(tt="italic"),z.color?Z=z.color:z.muted?Z=a.colors.muted:z.accent&&(Z=a.colors.accent)),u.push(`<text x="${Ct}" y="${p}"
        font-family="${a.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${X}"
        font-style="${tt}"
        text-anchor="${Dt}"
        fill="${Z}">${q(Mt)}</text>`)}}return u.join(`
`)}function eo(t,n,e,o,s,a){if(Array.isArray(e.axis.tickValues)&&e.axis.tickValues.length>0){const[y,m]=t.domain();let w=e.axis.tickValues.filter(D=>D>=y&&D<=m);const E=e.axis.nullTick!==!1,C=o>=y&&o<=m;return E&&C&&!w.includes(o)&&(w=[...w,o].sort((D,G)=>D-G)),w}const[i,h]=t.domain(),c=e.axis.nullTick!==!1,r=o>=i&&o<=h,l=vt.MIN_TICK_SPACING,d=Math.max(2,Math.floor(s/l)),u=Math.min(n,Math.min(7,d)),f=a&&a.length>0?a.filter(y=>y>=i&&y<=h):t.ticks(u);if(f.length===0)return c&&r?[o]:[];const p=t(o),N=f.filter(y=>y<o).reverse(),A=f.filter(y=>y>o),M=f.some(y=>y===o),x=[];let _=p;for(const y of N){const m=t(y);_-m>=l&&(x.unshift(y),_=m)}const T=[];let I=p;for(const y of A){const m=t(y);m-I>=l&&(T.push(y),I=m)}const g=[...x];if((M||c&&r)&&g.push(o),g.push(...T),g.length<2){const y=new Set(g);y.has(i)||g.unshift(i),g.length<2&&!y.has(h)&&g.push(h)}return g}function qt(t,n,e,o,s,a,i=1,h=.6){let r=`<line x1="${t}" x2="${t}" y1="${n}" y2="${e}"
    stroke="${s}" stroke-width="${i}" stroke-opacity="${h}" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return a&&(r+=`<text x="${t}" y="${n-4}" text-anchor="middle"
      font-size="10px" fill="${s}">${q(a)}</text>`),r}class yt extends Error{constructor(n){super(`SVG Generator: ${n}`),this.name="SVGGeneratorError"}}function ro(t){if(!t||typeof t!="object")throw new yt("Invalid spec: expected an object");const n=t;if(!n.data||typeof n.data!="object")throw new yt("Invalid spec: missing or invalid 'data' property");const e=n.data;if(!Array.isArray(e.rows))throw new yt("Invalid spec: 'data.rows' must be an array");if(!n.theme||typeof n.theme!="object")throw new yt("Invalid spec: missing or invalid 'theme' property");const o=n.theme;if(!o.colors||typeof o.colors!="object")throw new yt("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new yt("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new yt("Invalid spec: missing or invalid 'theme.spacing'")}function ao(t){var a;const e=zt(t.columns,void 0).find(i=>i.type==="forest");if(!e||!((a=e.options)!=null&&a.forest))return{scale:"linear",nullValue:0,effects:[],axisLabel:"Effect",pointCol:null,lowerCol:null,upperCol:null};const o=e.options.forest,s=o.scale??"linear";return{scale:s,nullValue:o.nullValue??(s==="log"?1:0),effects:o.effects??[],axisLabel:o.axisLabel??"Effect",pointCol:o.point??null,lowerCol:o.lower??null,upperCol:o.upper??null}}function so(t,n={}){var w,E,C,D,G;ro(t);const e=t.theme,o=e.spacing.padding,s=Array.isArray(t.columns)?t.columns:[],a=Vt(s),i=[];for(let $=0;$<a.length;$++)a[$].type==="forest"&&i.push($);i.length>0;const h=[];for(let $=0;$<a.length;$++){const H=a[$];(H.type==="viz_bar"||H.type==="viz_boxplot"||H.type==="viz_violin")&&h.push({index:$,type:H.type,column:H})}const c=ao(t),r=vn(t,n,c.nullValue),l=r.autoWidths,d=$=>{var k,F,b,S,L,v,R,B;if($.type==="forest")return typeof $.width=="number"?$.width:((F=(k=$.options)==null?void 0:k.forest)==null?void 0:F.width)??r.forestWidth;if($.type==="viz_bar")return typeof $.width=="number"?$.width:((S=(b=$.options)==null?void 0:b.vizBar)==null?void 0:S.width)??r.forestWidth;if($.type==="viz_boxplot")return typeof $.width=="number"?$.width:((v=(L=$.options)==null?void 0:L.vizBoxplot)==null?void 0:v.width)??r.forestWidth;if($.type==="viz_violin")return typeof $.width=="number"?$.width:((B=(R=$.options)==null?void 0:R.vizViolin)==null?void 0:B.width)??r.forestWidth;const H=l.get($.id);return H!==void 0?H:typeof $.width=="number"?$.width:nt.DEFAULT_COLUMN_WIDTH},u=[];let f=o+r.labelWidth;for(const $ of a)u.push(f),f+=d($);const p=[];p.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${r.totalWidth}" height="${r.totalHeight}"
  viewBox="0 0 ${r.totalWidth} ${r.totalHeight}">`);const N=n.backgroundColor??e.colors.background;p.push(`<rect width="100%" height="100%" fill="${N}"/>`),p.push(Rn(t,r,e)),p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
    y1="${r.mainY}" y2="${r.mainY}"
    stroke="${e.colors.border}" stroke-width="2"/>`);const A=r.mainY;p.push(no(s,a,o,A,r.headerHeight,e,t.data.labelHeader??"Study",r.labelWidth,l,d)),p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
    y1="${A+r.headerHeight}" y2="${A+r.headerHeight}"
    stroke="${e.colors.border}" stroke-width="2"/>`);const M=ln(t),x=[],_=[];let T=0;for(const $ of M){const k=$.type==="data"&&((w=$.row.style)==null?void 0:w.type)==="spacer"?r.rowHeight/2:r.rowHeight;x.push(T),_.push(k),T+=k}const I=r.mainY+r.headerHeight;e.layout.banding&&M.forEach(($,H)=>{var k,F;if($.type==="data"){const b=$.row,S=((k=b.style)==null?void 0:k.type)==="spacer",L=(F=b.style)==null?void 0:F.bg;if(!S&&!L){const v=I+x[H],R=_[H],O=H%2===1?e.colors.altBg:e.colors.rowBg;O!==e.colors.background&&p.push(`<rect x="${o}" y="${v}"
              width="${r.totalWidth-o*2}" height="${R}"
              fill="${O}"/>`)}}});for(const $ of i){const H=a[$],k=u[$],F=d(H),b=(E=H.options)==null?void 0:E.forest,S=(b==null?void 0:b.scale)??"linear",L=(b==null?void 0:b.nullValue)??(S==="log"?1:0),v=(b==null?void 0:b.axisLabel)??"Effect",R=S==="log";let B=(b==null?void 0:b.effects)??[];const O=(b==null?void 0:b.point)??null,it=(b==null?void 0:b.lower)??null,lt=(b==null?void 0:b.upper)??null;B.length===0&&(O||it||lt)&&(B=[{pointCol:O,lowerCol:it,upperCol:lt}]);const rt={scale:S,nullValue:L,effects:B,pointCol:(b==null?void 0:b.point)??null,lowerCol:(b==null?void 0:b.lower)??null,upperCol:(b==null?void 0:b.upper)??null},{scale:Y,clipBounds:ut,ticks:V}=Pn(t,F,rt,n),K=k+Y(L);p.push(qt(K,I,I+r.plotHeight,"dashed",e.colors.muted));const ft=(b==null?void 0:b.annotations)??[];for(const P of ft)if(P.type==="reference_line"){const j=k+Y(P.x);p.push(qt(j,I,I+r.plotHeight,P.style,P.color??e.colors.accent,P.label,P.width??1,P.opacity??.6))}const W=Array.isArray(t.annotations)?t.annotations:[];for(const P of W)if(P.type==="reference_line"){const j=k+Y(P.x);p.push(qt(j,I,I+r.plotHeight,P.style,P.color??e.colors.accent,P.label,P.width??1,P.opacity??.6))}if(M.forEach((P,j)=>{if(P.type==="data"){const Mt=I+x[j]+_[j]/2;p.push(qn(P.row,Mt,Ct=>k+Y(Ct),e,L,B,t.data.weightCol,k,F,ut,R))}}),t.data.overall&&r.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const P=I+r.summaryYPosition;p.push(On(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,P,Y,k,F,e))}p.push(to(Y,r,e,v,k,F,L,V))}const g=t.data.rows;for(const $ of h){const H=$.column,k=u[$.index],F=d(H);if($.type==="viz_bar"){const b=(C=H.options)==null?void 0:C.vizBar;if(!b)continue;const S=Zn(g,b,F);M.forEach((L,v)=>{if(L.type==="data"){const R=I+x[v]+_[v]/2,B=_[v];p.push(jn(L.row,R,B,k,F,b,S,e))}}),b.showAxis!==!1&&(p.push(`<g transform="translate(0, ${I+r.plotHeight})">`),p.push(Xt(S,r,e,b.axisLabel,k,F,b.nullValue)),p.push("</g>"))}else if($.type==="viz_boxplot"){const b=(D=H.options)==null?void 0:D.vizBoxplot;if(!b)continue;const S=Jn(g,b,F);M.forEach((L,v)=>{if(L.type==="data"){const R=I+x[v]+_[v]/2,B=_[v];p.push(Yn(L.row,R,B,k,F,b,S,e))}}),b.showAxis!==!1&&(p.push(`<g transform="translate(0, ${I+r.plotHeight})">`),p.push(Xt(S,r,e,b.axisLabel,k,F,b.nullValue)),p.push("</g>"))}else if($.type==="viz_violin"){const b=(G=H.options)==null?void 0:G.vizViolin;if(!b)continue;const S=Qn(g,b,F);M.forEach((L,v)=>{if(L.type==="data"){const R=I+x[v]+_[v]/2,B=_[v];p.push(Kn(L.row,R,B,k,F,b,S,e))}}),b.showAxis!==!1&&(p.push(`<g transform="translate(0, ${I+r.plotHeight})">`),p.push(Xt(S,r,e,b.axisLabel,k,F,b.nullValue)),p.push("</g>"))}}const y=r.mainY+r.headerHeight,m=zn(g,a);return M.forEach(($,H)=>{var b,S;const k=y+x[H],F=_[H];if($.type==="group_header")p.push(Vn($.label,$.depth,o,k,F,r.totalWidth-o*2,e));else{const L=$.row,v=$.depth;p.push(oo(L,a,o,k,F,e,r.labelWidth,v,m,l,d,u))}if($.type==="data"){const L=$.row,v=((b=L.style)==null?void 0:b.type)==="summary",R=((S=L.style)==null?void 0:S.type)==="spacer";v&&p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
          y1="${k}" y2="${k}"
          stroke="${e.colors.border}" stroke-width="2"/>`),R||p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
          y1="${k+F}" y2="${k+F}"
          stroke="${e.colors.border}" stroke-width="1"/>`)}else p.push(`<line x1="${o}" x2="${r.totalWidth-o}"
        y1="${k+F}" y2="${k+F}"
        stroke="${e.colors.border}" stroke-width="1"/>`)}),p.push(Bn(t,r,e)),p.push("</svg>"),p.join(`
`)}function io(t,n){const e=JSON.parse(t);return so(e,n)}globalThis.generateSVG=io})();
