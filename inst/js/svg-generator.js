(function(){"use strict";function ut(t,e){if(e){const a=[.05,.1,.15,.2,.25,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5,1.75,2,2.5,3,4,5,6,7,8,10,12,15,20,25,30,40,50,75,100];let f=a[0];for(const s of a)if(s<=t[0])f=s;else break;let u=a[a.length-1];for(let s=a.length-1;s>=0&&a[s]>=t[1];s--)u=a[s];return[f,u]}const n=t[1]-t[0];if(n===0)return t;const o=Math.pow(10,Math.floor(Math.log10(n))),i=n/o;let r;i<=1?r=o*.1:i<=2?r=o*.2:i<=5?r=o*.5:r=o;const c=Math.floor(t[0]/r)*r,l=Math.ceil(t[1]/r)*r;return[c,l]}const tt=.15,ht=.06,dt=.05,ot=.04;function pt(t){return t<=0?0:ot+t*ot}const w={DEFAULT_LABEL_WIDTH:200,DEFAULT_COLUMN_WIDTH:100,AXIS_HEIGHT:32,AXIS_LABEL_HEIGHT:20,BOTTOM_MARGIN:16,MIN_FOREST_WIDTH:200,DEFAULT_WIDTH:800,COLUMN_GAP:16},G={TITLE_HEIGHT:28,SUBTITLE_HEIGHT:20,CAPTION_HEIGHT:16,FOOTNOTE_HEIGHT:14,DEFAULT_FONT_SIZE:14,REM_BASE:16,TEXT_BASELINE_ADJUSTMENT:1/3},L={INDENT_PER_LEVEL:12,TEXT_PADDING:10,WHISKER_HALF_HEIGHT:4,DEFAULT_TICK_COUNT:5},nt={GROUP_HEADER_HEIGHT_MULTIPLIER:1.5,OVERALL_ROW_HEIGHT_MULTIPLIER:1.5};function gt(t,e){var C,O,V,z;const n=t.theme,o=n.spacing.rowHeight,i=n.spacing.padding,r=Array.isArray(t.columns)?t.columns:[],c=Y(r,"left"),l=Y(r,"right"),f=K(c)||K(l)?n.spacing.headerHeight*nt.GROUP_HEADER_HEIGHT_MULTIPLIER:n.spacing.headerHeight,u=!!((C=t.labels)!=null&&C.title),s=!!((O=t.labels)!=null&&O.subtitle),$=!!((V=t.labels)!=null&&V.caption),x=!!((z=t.labels)!=null&&z.footnote),p=u?G.TITLE_HEIGHT:0,N=s?G.SUBTITLE_HEIGHT:0,E=p+N+(u||s?i:0),A=$?G.CAPTION_HEIGHT:0,b=x?G.FOOTNOTE_HEIGHT:0,_=A+b+($||x?i:0),h=et(t).length,g=!!t.data.overall,d=h*o+(g?o*nt.OVERALL_ROW_HEIGHT_MULTIPLIER:0),y=j(r,"left"),T=j(r,"right"),I=w.DEFAULT_LABEL_WIDTH+y.reduce((k,U)=>k+(typeof U.width=="number"?U.width:w.DEFAULT_COLUMN_WIDTH),0),m=T.reduce((k,U)=>k+(typeof U.width=="number"?U.width:w.DEFAULT_COLUMN_WIDTH),0),D=e.width??w.DEFAULT_WIDTH,S=t.data.includeForest,R=I+m;let W;if(!S)W=0;else if(typeof t.layout.plotWidth=="number")W=t.layout.plotWidth;else{const k=D-R-w.COLUMN_GAP*2-i*2;W=Math.max(k,w.MIN_FOREST_WIDTH)}const F=i*2+R+W+w.COLUMN_GAP*2,P=Math.max(e.width??D,F),B=E+i+f+d+w.AXIS_HEIGHT+w.AXIS_LABEL_HEIGHT+_+w.BOTTOM_MARGIN;return{totalWidth:P,totalHeight:e.height??B,tableWidth:I+m,forestWidth:W,headerHeight:f,rowHeight:o,plotHeight:d,axisHeight:w.AXIS_HEIGHT,nullValue:t.data.nullValue,summaryYPosition:d-o,showOverallSummary:g,headerTextHeight:E,footerTextHeight:_,titleY:i+G.TITLE_HEIGHT-8,subtitleY:i+p+G.SUBTITLE_HEIGHT-4,mainY:E+i,footerY:E+i+f+d+w.AXIS_HEIGHT+w.AXIS_LABEL_HEIGHT+i}}function et(t){var u;const e=t.data.rows,n=Array.isArray(t.data.groups)?t.data.groups:[];if(n.length===0)return e.map(s=>({type:"data",row:s,depth:0}));const o=new Map;for(const s of n)o.set(s.id,s);const i=new Map;for(const s of e){const $=s.groupId??null;i.has($)||i.set($,[]),i.get($).push(s)}const r=new Set;for(const s of i.keys()){if(!s)continue;let $=s;for(;$;)r.add($),$=(u=o.get($))==null?void 0:u.parentId}function c(s){return n.filter($=>($.parentId??null)===s&&r.has($.id))}function l(s){if(!s)return 0;const $=o.get(s);return $?$.depth+1:0}const a=[];function f(s){var x;if(s){const p=o.get(s);if(!p)return;const N=((x=i.get(s))==null?void 0:x.length)??0;a.push({type:"group_header",groupId:p.id,label:p.label,depth:p.depth,rowCount:N})}for(const p of c(s))f(p.id);const $=i.get(s)??[];for(const p of $)a.push({type:"data",row:p,depth:l(p.groupId)})}return f(null),a}function rt(t){const e=[];for(const n of t)n.isGroup?e.push(...rt(n.columns)):e.push(n);return e}function j(t,e){const n=[];for(const o of t)o.position===e&&(o.isGroup?n.push(...rt(o.columns)):n.push(o));return n}function Y(t,e){return t.filter(n=>n.position===e)}function K(t){return t.some(e=>e.isGroup)}function it(t,e){return t.isGroup?t.columns.reduce((n,o)=>n+it(o,e),0):typeof t.width=="number"?t.width:e}function X(t){return t.endsWith("rem")?parseFloat(t)*G.REM_BASE:t.endsWith("px")?parseFloat(t):G.DEFAULT_FONT_SIZE}function J(t,e,n){return n==="right"?{textX:t+e-L.TEXT_PADDING,anchor:"end"}:n==="center"?{textX:t+e/2,anchor:"middle"}:{textX:t+L.TEXT_PADDING,anchor:"start"}}function M(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function q(t,e,n,o=0){const i=n*.55,r=e-o*2,c=Math.floor(r/i);return t.length<=c?t:t.slice(0,c-1)+"…"}function Z(t,e){var o;if(t==null||Number.isNaN(t))return(e==null?void 0:e.naText)??"";if(e!=null&&e.percent){const{decimals:i=1,multiply:r=!1,symbol:c=!0}=e.percent,a=(r?t*100:t).toFixed(i);return c?`${a}%`:a}const n=(o=e==null?void 0:e.numeric)==null?void 0:o.decimals;return n!==void 0?t.toFixed(n):Number.isInteger(t)||Math.abs(t-Math.round(t))<1e-4?Math.round(t).toString():t.toFixed(2)}function $t(t,e){const{eventsField:n,nField:o,separator:i="/",showPct:r=!1}=e.events,c=t.metadata[n],l=t.metadata[o];if(c==null||l===void 0||l===null)return e.naText??"";const a=Number(c),f=Number(l);let u=`${a}${i}${f}`;if(r&&f>0){const s=(a/f*100).toFixed(1);u+=` (${s}%)`}return u}function yt(t,e,n){return t==null||Number.isNaN(t)?"":e==null||n===void 0||n===null||Number.isNaN(e)||Number.isNaN(n)?Z(t):`${t.toFixed(2)} (${e.toFixed(2)}, ${n.toFixed(2)})`}const mt={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻","+":"⁺"};function Tt(t){return t.split("").map(e=>mt[e]??e).join("")}function xt(t,e){const n=e==null?void 0:e.pvalue,o=(n==null?void 0:n.digits)??2,i=(n==null?void 0:n.expThreshold)??.001,r=(n==null?void 0:n.format)??"auto",c=(n==null?void 0:n.stars)??!1,l=(n==null?void 0:n.thresholds)??[.05,.01,.001];let a="";if(c&&(t<l[2]?a="***":t<l[1]?a="**":t<l[0]&&(a="*")),t<1e-4)return`<0.0001${a}`;if(r==="scientific"||r==="auto"&&t<i){const u=Math.floor(Math.log10(t));return`${(t/Math.pow(10,u)).toPrecision(o)}×10${Tt(u.toString())}${a}`}let f;return t>=.1?f=t.toFixed(o):t>=.01?f=t.toFixed(o+1):f=t.toFixed(o+2),`${f}${a}`}function Et(t){return Math.abs(t)<.01?"0":Math.abs(t)>=100?t.toFixed(0):Math.abs(t)>=10?t.toFixed(1):t.toFixed(2)}function _t(t,e){const[n,o]=t,[i,r]=e,c=(r-i)/(o-n),l=a=>i+(a-n)*c;return l.domain=()=>t,l.range=()=>e,l.ticks=a=>{const f=(o-n)/(a-1),u=[];for(let s=0;s<a;s++)u.push(n+f*s);return u},l}function bt(t,e){const[n,o]=t.map(u=>Math.max(u,.001)),[i,r]=e,c=Math.log10(n),l=Math.log10(o),a=(r-i)/(l-c),f=u=>{const s=Math.log10(Math.max(u,.001));return i+(s-c)*a};return f.domain=()=>[n,o],f.range=()=>e,f.ticks=u=>{const s=[],$=Math.floor(Math.log10(n)),x=Math.ceil(Math.log10(o));for(let p=$;p<=x;p++){const N=Math.pow(10,p);for(const E of[1,2,5]){const A=N*E;A>=n&&A<=o&&s.push(A)}}return s.length>0?s:[n,o]},f}function Ht(t,e){const n=t.data.rows,o=t.theme.axis,i=t.data.scale==="log",r=typeof(o==null?void 0:o.rangeMin)=="number",c=typeof(o==null?void 0:o.rangeMax)=="number";let l;if(r&&c)l=[o.rangeMin,o.rangeMax];else{const f=n.flatMap(u=>[u.lower,u.upper]).filter(u=>u!=null&&!Number.isNaN(u)&&Number.isFinite(u));if(f.length===0)l=i?[.1,10]:[0,1];else{const[u,s]=[Math.min(...f),Math.max(...f)],$=s-u||1;l=[r?o.rangeMin:u-$*tt,c?o.rangeMax:s+$*tt]}}const a=ut(l,i);return i?bt([Math.max(a[0],.01),Math.max(a[1],.02)],[0,e]):_t(a,[0,e])}function It(t,e,n){var r,c;const o=[],i=n.spacing.padding;if((r=t.labels)!=null&&r.title){const l=X(n.typography.fontSizeLg);o.push(`<text x="${i}" y="${e.titleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      font-weight="${n.typography.fontWeightBold}"
      fill="${n.colors.foreground}">${M(t.labels.title)}</text>`)}if((c=t.labels)!=null&&c.subtitle){const l=X(n.typography.fontSizeBase);o.push(`<text x="${i}" y="${e.subtitleY}"
      font-family="${n.typography.fontFamily}"
      font-size="${l}px"
      fill="${n.colors.secondary}">${M(t.labels.subtitle)}</text>`)}return o.join(`
`)}function At(t,e,n){var c,l;const o=[],i=n.spacing.padding;let r=e.footerY;if((c=t.labels)!=null&&c.caption){const a=X(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${r}"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      fill="${n.colors.secondary}">${M(t.labels.caption)}</text>`),r+=G.CAPTION_HEIGHT}if((l=t.labels)!=null&&l.footnote){const a=X(n.typography.fontSizeSm);o.push(`<text x="${i}" y="${r}"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      font-style="italic"
      fill="${n.colors.muted}">${M(t.labels.footnote)}</text>`)}return o.join(`
`)}function st(t,e,n,o,i,r,c,l){const a=[],f=X(r.typography.fontSizeSm),u=r.typography.fontWeightMedium,s=r.typography.fontWeightBold,$=K(t),x=w.DEFAULT_COLUMN_WIDTH,p=l??w.DEFAULT_LABEL_WIDTH,N=(E,A)=>E+A/2+f*G.TEXT_BASELINE_ADJUSTMENT;if($){const E=i/2,A=i/2;let b=n;c&&(a.push(`<text x="${b+L.TEXT_PADDING}" y="${N(o,i)}"
        font-family="${r.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${u}"
        fill="${r.colors.foreground}">${M(c)}</text>`),a.push(`<line x1="${b+p}" x2="${b+p}"
        y1="${o}" y2="${o+i}"
        stroke="${r.colors.border}" stroke-width="1" opacity="0.3"/>`),b+=p);for(const _ of t)if(_.isGroup){const H=it(_,x),h=b+H/2;a.push(`<text x="${h}" y="${N(o,E)}"
          font-family="${r.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${s}"
          text-anchor="middle"
          fill="${r.colors.foreground}">${M(_.header)}</text>`),a.push(`<line x1="${b}" x2="${b+H}"
          y1="${o+E}" y2="${o+E}"
          stroke="${r.colors.border}" stroke-width="1" opacity="0.5"/>`),b+=H}else{const H=typeof _.width=="number"?_.width:x,h=_.headerAlign??_.align,{textX:g,anchor:d}=J(b,H,h),y=q(_.header,H,f,L.TEXT_PADDING);a.push(`<text x="${g}" y="${N(o,i)}"
          font-family="${r.typography.fontFamily}"
          font-size="${f}px"
          font-weight="${u}"
          text-anchor="${d}"
          fill="${r.colors.foreground}">${M(y)}</text>`),b+=H}b=n+(c?p:0);for(const _ of t)if(_.isGroup){for(const H of _.columns)if(!H.isGroup){const h=typeof H.width=="number"?H.width:x,g=H.headerAlign??H.align,{textX:d,anchor:y}=J(b,h,g);a.push(`<text x="${d}" y="${N(o+E,A)}"
              font-family="${r.typography.fontFamily}"
              font-size="${f}px"
              font-weight="${u}"
              text-anchor="${y}"
              fill="${r.colors.foreground}">${M(H.header)}</text>`),b+=h}}else{const H=typeof _.width=="number"?_.width:x;b+=H}}else{let E=n;c&&(a.push(`<text x="${E+L.TEXT_PADDING}" y="${N(o,i)}"
        font-family="${r.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${u}"
        fill="${r.colors.foreground}">${M(c)}</text>`),E+=p);for(const A of e){const b=typeof A.width=="number"?A.width:x,_=A.headerAlign??A.align,{textX:H,anchor:h}=J(E,b,_),g=q(A.header,b,f,L.TEXT_PADDING);a.push(`<text x="${H}" y="${N(o,i)}"
        font-family="${r.typography.fontFamily}"
        font-size="${f}px"
        font-weight="${u}"
        text-anchor="${h}"
        fill="${r.colors.foreground}">${M(g)}</text>`),E+=b}}return a.join(`
`)}function Nt(t,e,n,o,i,r,c){const l=[],a=X(c.typography.fontSizeBase),f=o+i/2+a*G.TEXT_BASELINE_ADJUSTMENT,u=e*L.INDENT_PER_LEVEL;return l.push(`<rect x="${n}" y="${o}"
    width="${r}" height="${i}"
    fill="${c.colors.primary}" opacity="${dt}"/>`),l.push(`<text x="${n+L.TEXT_PADDING+u}" y="${f}"
    font-family="${c.typography.fontFamily}"
    font-size="${a}px"
    font-weight="${c.typography.fontWeightBold}"
    fill="${c.colors.foreground}">${M(t)}</text>`),l.join(`
`)}function at(t,e){const n=new Map;for(const o of e)if(o.type==="bar"){let i=0;for(const r of t){const c=r.metadata[o.field];typeof c=="number"&&c>i&&(i=c)}n.set(o.field,i>0?i:1)}return n}function lt(t,e,n,o,i,r,c,l=w.DEFAULT_LABEL_WIDTH,a=0,f){var p,N,E,A,b,_,H,h,g,d,y,T,I;const u=[],s=X(r.typography.fontSizeBase),$=o+i/2+s*G.TEXT_BASELINE_ADJUSTMENT;let x=n;if(c){const m=a*L.INDENT_PER_LEVEL+(((p=t.style)==null?void 0:p.indent)??0)*L.INDENT_PER_LEVEL,D=(N=t.style)!=null&&N.bold?r.typography.fontWeightBold:r.typography.fontWeightNormal,S=(E=t.style)!=null&&E.italic?"italic":"normal",R=l-m-L.TEXT_PADDING*2,W=q(t.label,R,s,0);if(u.push(`<text x="${x+L.TEXT_PADDING+m}" y="${$}"
      font-family="${r.typography.fontFamily}"
      font-size="${s}px"
      font-weight="${D}"
      font-style="${S}"
      fill="${((A=t.style)==null?void 0:A.color)??r.colors.foreground}">${M(W)}</text>`),(b=t.style)!=null&&b.badge){const F=String(t.style.badge),P=s*.8,B=4,C=P+B*2,O=t.label.length*s*.55,V=x+L.TEXT_PADDING+m+O+6,k=F.length*P*.6+B*2,U=o+(i-C)/2;u.push(`<rect x="${V}" y="${U}" width="${k}" height="${C}"
        rx="3" fill="${r.colors.primary}" opacity="0.15"/>`),u.push(`<text x="${V+k/2}" y="${U+C/2+P*.35}"
        text-anchor="middle"
        font-family="${r.typography.fontFamily}"
        font-size="${P}px"
        font-weight="500"
        fill="${r.colors.primary}">${M(F)}</text>`)}x+=l}for(const m of e){const D=typeof m.width=="number"?m.width:w.DEFAULT_COLUMN_WIDTH,S=wt(t,m),{textX:R,anchor:W}=J(x,D,m.align);if(m.type==="bar"&&typeof t.metadata[m.field]=="number"){const F=t.metadata[m.field],P=f==null?void 0:f.get(m.field),B=((H=(_=m.options)==null?void 0:_.bar)==null?void 0:H.maxValue)??P??100,C=((g=(h=m.options)==null?void 0:h.bar)==null?void 0:g.color)??r.colors.primary,O=r.shapes.pointSize*2,z=D-L.TEXT_PADDING*2-50,k=Math.min(F/B*z,z);u.push(`<rect x="${x+L.TEXT_PADDING}" y="${o+i/2-O/2}"
        width="${Math.max(0,k)}" height="${O}"
        fill="${C}" opacity="0.7" rx="2"/>`);const U=x+D-L.TEXT_PADDING;u.push(`<text x="${U}" y="${$}"
        font-family="${r.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="end"
        fill="${r.colors.foreground}">${Z(F)}</text>`)}else if(m.type==="sparkline"&&Array.isArray(t.metadata[m.field])){let F=t.metadata[m.field];Array.isArray(F[0])&&(F=F[0]);const P=((y=(d=m.options)==null?void 0:d.sparkline)==null?void 0:y.height)??16,B=((I=(T=m.options)==null?void 0:T.sparkline)==null?void 0:I.color)??r.colors.primary,C=L.TEXT_PADDING*2,O=Dt(F,x+L.TEXT_PADDING,o+i/2-P/2,D-C,P);u.push(`<path d="${O}" fill="none" stroke="${B}" stroke-width="1.5"/>`)}else u.push(`<text x="${R}" y="${$}"
        font-family="${r.typography.fontFamily}"
        font-size="${s}px"
        text-anchor="${W}"
        fill="${r.colors.foreground}">${M(S)}</text>`);x+=D}return u.join(`
`)}function wt(t,e){var o,i,r,c;if(e.type==="interval")return yt(t.point,t.lower,t.upper);if(e.type==="numeric"){const l=t.metadata[e.field];return typeof l=="number"?Z(l,e.options):((o=e.options)==null?void 0:o.naText)??""}if(e.type==="custom"&&((i=e.options)!=null&&i.events))return $t(t,e.options);if(e.type==="pvalue"){const l=t.metadata[e.field];return typeof l!="number"?((r=e.options)==null?void 0:r.naText)??"":xt(l,e.options)}const n=t.metadata[e.field];return n!=null?String(n):((c=e.options)==null?void 0:c.naText)??""}function Dt(t,e,n,o,i){if(t.length===0)return"";const r=Math.min(...t),l=Math.max(...t)-r||1;return`M${t.map((f,u)=>{const s=e+u/(t.length-1)*o,$=n+i-(f-r)/l*i;return`${s.toFixed(1)},${$.toFixed(1)}`}).join("L")}`}const ct=6;function Q(t,e,n){const o=t.metadata[e];return o!=null&&typeof o=="number"&&!Number.isNaN(o)?o:n}function Lt(t,e){return e<=1?0:-((e-1)*ct)/2+t*ct}function Mt(t,e,n,o,i,r=[],c){var H;let l;r.length===0?l=[{point:t.point,lower:t.lower,upper:t.upper,color:null,shape:null,opacity:null}]:l=r.map(h=>({point:Q(t,h.pointCol,t.point),lower:Q(t,h.lowerCol,t.lower),upper:Q(t,h.upperCol,t.upper),color:h.color??null,shape:h.shape??null,opacity:h.opacity??null}));const a=l.filter(h=>h.point!=null&&!Number.isNaN(h.point)&&h.lower!=null&&!Number.isNaN(h.lower)&&h.upper!=null&&!Number.isNaN(h.upper));if(a.length===0)return"";const f=o.shapes.pointSize,u=o.shapes.lineWidth,s=o.colors.intervalLine,$=L.WHISKER_HALF_HEIGHT,x=((H=t.style)==null?void 0:H.type)==="summary",N=o.shapes.summaryHeight/2;function E(h){var d;if(h&&((d=t.markerStyle)==null?void 0:d.size)!=null)return f*t.markerStyle.size;const g=c?t.metadata[c]:void 0;if(g){const y=.5+Math.sqrt(g/100)*1.5;return Math.min(Math.max(f*y,3),f*2.5)}return f}function A(h,g){const d=g===0,y=t.markerStyle;let T;d&&(y!=null&&y.color)?T=y.color:h.color?T=h.color:T=o.colors.interval??o.colors.primary??"#2563eb";let I;d&&(y!=null&&y.shape)?I=y.shape:h.shape?I=h.shape:I="square";let m;return d&&(y==null?void 0:y.opacity)!=null?m=y.opacity:h.opacity!=null?m=h.opacity:m=1,{color:T,shape:I,opacity:m}}function b(h,g,d,y){const{color:T,shape:I,opacity:m}=y,D=m<1?` fill-opacity="${m}"`:"";switch(I){case"circle":return`<circle cx="${h}" cy="${g}" r="${d}" fill="${T}"${D}/>`;case"diamond":return`<polygon points="${[`${h},${g-d}`,`${h+d},${g}`,`${h},${g+d}`,`${h-d},${g}`].join(" ")}" fill="${T}"${D}/>`;case"triangle":return`<polygon points="${[`${h},${g-d}`,`${h+d},${g+d}`,`${h-d},${g+d}`].join(" ")}" fill="${T}"${D}/>`;default:return`<rect x="${h-d}" y="${g-d}" width="${d*2}" height="${d*2}" fill="${T}"${D}/>`}}const _=[];return a.forEach((h,g)=>{const d=e+Lt(g,a.length),y=n(h.lower),T=n(h.upper),I=n(h.point),m=A(h,g),D=E(g===0),S=s;if(x){const R=m.opacity<1?` fill-opacity="${m.opacity}"`:"",W=[`${y},${d}`,`${I},${d-N}`,`${T},${d}`,`${I},${d+N}`].join(" ");_.push(`
        <g class="interval effect-${g} summary">
          <polygon points="${W}"
            fill="${m.color}"${R} stroke="${o.colors.summaryBorder}" stroke-width="1"/>
        </g>`)}else _.push(`
        <g class="interval effect-${g}">
          <line x1="${y}" x2="${T}" y1="${d}" y2="${d}"
            stroke="${S}" stroke-width="${u}"/>
          <line x1="${y}" x2="${y}" y1="${d-$}" y2="${d+$}"
            stroke="${S}" stroke-width="${u}"/>
          <line x1="${T}" x2="${T}" y1="${d-$}" y2="${d+$}"
            stroke="${S}" stroke-width="${u}"/>
          ${b(I,d,D,m)}
        </g>`)}),_.join("")}function St(t,e,n,o,i,r,c,l){const f=l.shapes.summaryHeight/2,u=i(e),s=i(t),$=i(n),x=r+Math.max(0,Math.min(c,u)),p=r+Math.max(0,Math.min(c,s)),N=r+Math.max(0,Math.min(c,$));return`<polygon points="${[`${x},${o}`,`${p},${o-f}`,`${N},${o}`,`${p},${o+f}`].join(" ")}"
    fill="${l.colors.summaryFill}"
    stroke="${l.colors.summaryBorder}"
    stroke-width="1"/>`}function Gt(t,e,n,o,i){const r=[],c=typeof n.axis.tickCount=="number"?n.axis.tickCount:L.DEFAULT_TICK_COUNT,l=Array.isArray(n.axis.tickValues)?n.axis.tickValues:t.ticks(c),a=X(n.typography.fontSizeSm);r.push(`<line x1="${i}" x2="${i+e.forestWidth}"
    y1="0" y2="0" stroke="${n.colors.border}" stroke-width="1"/>`);for(const f of l){const u=i+t(f);r.push(`<line x1="${u}" x2="${u}" y1="0" y2="4"
      stroke="${n.colors.border}" stroke-width="1"/>`),r.push(`<text x="${u}" y="16" text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      fill="${n.colors.secondary}">${Et(f)}</text>`)}return o&&r.push(`<text x="${i+e.forestWidth/2}" y="28"
      text-anchor="middle"
      font-family="${n.typography.fontFamily}"
      font-size="${a}px"
      font-weight="500"
      fill="${n.colors.secondary}">${M(o)}</text>`),`<g transform="translate(0, ${e.mainY+e.headerHeight+e.plotHeight})">${r.join(`
`)}</g>`}function ft(t,e,n,o,i,r){let l=`<line x1="${t}" x2="${t}" y1="${e}" y2="${n}"
    stroke="${i}" stroke-width="1" stroke-dasharray="${o==="dashed"?"6,4":o==="dotted"?"2,2":"none"}"/>`;return r&&(l+=`<text x="${t}" y="${e-4}" text-anchor="middle"
      font-size="10px" fill="${i}">${M(r)}</text>`),l}class v extends Error{constructor(e){super(`SVG Generator: ${e}`),this.name="SVGGeneratorError"}}function Ft(t){if(!t||typeof t!="object")throw new v("Invalid spec: expected an object");const e=t;if(!e.data||typeof e.data!="object")throw new v("Invalid spec: missing or invalid 'data' property");const n=e.data;if(!Array.isArray(n.rows))throw new v("Invalid spec: 'data.rows' must be an array");if(!e.theme||typeof e.theme!="object")throw new v("Invalid spec: missing or invalid 'theme' property");const o=e.theme;if(!o.colors||typeof o.colors!="object")throw new v("Invalid spec: missing or invalid 'theme.colors'");if(!o.typography||typeof o.typography!="object")throw new v("Invalid spec: missing or invalid 'theme.typography'");if(!o.spacing||typeof o.spacing!="object")throw new v("Invalid spec: missing or invalid 'theme.spacing'")}function Wt(t,e={}){Ft(t);const n=t.theme,o=gt(t,e),i=n.spacing.padding,r=Array.isArray(t.columns)?t.columns:[],c=Y(r,"left"),l=Y(r,"right"),a=j(r,"left"),f=j(r,"right"),u=w.DEFAULT_LABEL_WIDTH+a.reduce((g,d)=>g+(typeof d.width=="number"?d.width:w.DEFAULT_COLUMN_WIDTH),0),s=i+u,$=Ht(t,o.forestWidth),x=s+o.forestWidth,p=[];p.push(`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
  width="${o.totalWidth}" height="${o.totalHeight}"
  viewBox="0 0 ${o.totalWidth} ${o.totalHeight}">`);const N=e.backgroundColor??n.colors.background;p.push(`<rect width="100%" height="100%" fill="${N}"/>`),p.push(It(t,o,n));const E=o.mainY;p.push(st(c,a,i,E,o.headerHeight,n,t.data.labelHeader??"Study",w.DEFAULT_LABEL_WIDTH)),f.length>0&&p.push(st(l,f,x,E,o.headerHeight,n)),p.push(`<line x1="${i}" x2="${o.totalWidth-i}"
    y1="${E+o.headerHeight}" y2="${E+o.headerHeight}"
    stroke="${n.colors.border}" stroke-width="1"/>`);const A=et(t);if(t.data.includeForest&&o.forestWidth>0){const g=o.mainY+o.headerHeight,d=s+$(t.data.nullValue);p.push(ft(d,g,g+o.plotHeight,"dashed",n.colors.muted));const y=Array.isArray(t.annotations)?t.annotations:[];for(const T of y)if(T.type==="reference_line"){const I=s+$(T.x);p.push(ft(I,g,g+o.plotHeight,T.style,T.color??n.colors.accent,T.label))}if(A.forEach((T,I)=>{if(T.type==="data"){const m=g+I*o.rowHeight+o.rowHeight/2;p.push(Mt(T.row,m,D=>s+$(D),n,t.data.nullValue,t.data.effects,t.data.weightCol))}}),t.data.overall&&o.showOverallSummary&&typeof t.data.overall.point=="number"&&!Number.isNaN(t.data.overall.point)&&typeof t.data.overall.lower=="number"&&!Number.isNaN(t.data.overall.lower)&&typeof t.data.overall.upper=="number"&&!Number.isNaN(t.data.overall.upper)){const T=g+o.summaryYPosition;p.push(St(t.data.overall.point,t.data.overall.lower,t.data.overall.upper,T,$,s,o.forestWidth,n))}p.push(Gt($,o,n,t.data.axisLabel,s))}const b=o.mainY+o.headerHeight,_=t.data.rows,H=at(_,a),h=at(_,f);return A.forEach((g,d)=>{const y=b+d*o.rowHeight;if(g.type==="group_header")p.push(Nt(g.label,g.depth,i,y,o.rowHeight,o.totalWidth-i*2,n));else{const T=g.row,I=g.depth,m=pt(I),D=d%2===1?ht:0,S=Math.max(m,D);S>0&&p.push(`<rect x="${i}" y="${y}"
          width="${o.totalWidth-i*2}" height="${o.rowHeight}"
          fill="${n.colors.muted}" opacity="${S}"/>`),p.push(lt(T,a,i,y,o.rowHeight,n,!0,w.DEFAULT_LABEL_WIDTH,I,H)),f.length>0&&p.push(lt(T,f,x,y,o.rowHeight,n,!1,0,I,h))}p.push(`<line x1="${i}" x2="${o.totalWidth-i}"
      y1="${y+o.rowHeight}" y2="${y+o.rowHeight}"
      stroke="${n.colors.border}" stroke-width="1" opacity="0.5"/>`)}),p.push(At(t,o,n)),p.push("</svg>"),p.join(`
`)}function Pt(t,e){const n=JSON.parse(t);return Wt(n,e)}globalThis.generateSVG=Pt})();
