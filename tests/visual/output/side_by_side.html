<!DOCTYPE html>
<html>
<head>
  <title>Web vs SVG Comparison</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 20px;
      background: #f0f0f0;
    }
    h1 { color: #333; margin-bottom: 20px; }
    .comparison {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    .panel {
      flex: 1;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      overflow: auto;
    }
    .panel h2 {
      margin-top: 0;
      color: #666;
      font-size: 14px;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: 1px solid #ddd;
    }
    img {
      max-width: 100%;
      height: auto;
      border: 1px solid #ddd;
    }
    .overlay-container {
      position: relative;
      margin-top: 20px;
    }
    .overlay-container img {
      position: absolute;
      top: 0;
      left: 0;
    }
    .overlay-container img.svg-overlay {
      opacity: 0.5;
      mix-blend-mode: difference;
    }
    .controls {
      margin: 20px 0;
      padding: 15px;
      background: #fff;
      border-radius: 8px;
    }
    .controls label {
      margin-right: 20px;
    }
    .notes {
      background: #fff9c4;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }
    .notes h3 { margin-top: 0; }
    .grid-lines {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    .pixel-ruler {
      background: repeating-linear-gradient(
        to right,
        transparent,
        transparent 99px,
        red 99px,
        red 100px
      );
      height: 10px;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>Web View vs SVG Export Comparison</h1>

  <div class="controls">
    <strong>Tips for comparison:</strong>
    <ul>
      <li>Open browser DevTools (F12) on the Web View to inspect element positions</li>
      <li>Look for misaligned reference lines, interval endpoints, and markers</li>
      <li>Check that axis ticks align with interval endpoints at same values</li>
    </ul>
  </div>

  <div class="comparison">
    <div class="panel">
      <h2>Web View (HTML Widget)</h2>
      <iframe src="test_web.html"></iframe>
    </div>
    <div class="panel">
      <h2>SVG Export</h2>
      <img src="test_svg.svg" alt="SVG Export">
    </div>
  </div>

  <div class="notes">
    <h3>Key Points to Verify</h3>
    <ol>
      <li><strong>Reference Line Position:</strong> The dashed vertical line at HR=1.0 should be at the same relative position</li>
      <li><strong>Interval Endpoints:</strong> CI whiskers should align with their corresponding axis tick values</li>
      <li><strong>Marker Position:</strong> Point estimate markers should be at the correct x-position</li>
      <li><strong>Marker Size:</strong> Weight-scaled markers should be proportionally sized</li>
      <li><strong>Clipping Arrows:</strong> If any CI extends beyond axis, arrows should appear at axis boundaries</li>
    </ol>
  </div>

  <h2>Gallery Examples</h2>
  <div class="comparison">
    <div class="panel">
      <h2>gallery_15_minimal.svg</h2>
      <img src="gallery_15_minimal.svg" alt="Minimal gallery example">
    </div>
    <div class="panel">
      <h2>gallery_02_multi_effects.svg</h2>
      <img src="gallery_02_multi_effects.svg" alt="Multi-effects gallery example">
    </div>
  </div>
</body>
</html>
