---
title: "webforest"
subtitle: "Interactive Forest Plots for R"
---

```{r}
#| include: false
library(webforest)
```

## Overview

**webforest** is an R htmlwidgets package for creating interactive, web-native forest plots. While traditionally used for meta-analysis, it supports any data with point estimates and confidence intervals.

```{r}
#| echo: false
library(dplyr)

# Fun example: Streaming show ratings by genre
shows <- tibble(
  show = c(
    "The Bear", "Shogun", "Baby Reindeer",
    "Hacks", "Only Murders", "Abbott Elementary",
    "3 Body Problem", "Fallout", "Silo"
  ),
  genre = c(
    rep("Drama", 3),
    rep("Comedy", 3),
    rep("Sci-Fi", 3)
  ),
  # Effect: audience score vs critic baseline
  score = c(92, 95, 88, 86, 89, 94, 78, 91, 87),
  score_lower = c(88, 91, 83, 81, 84, 90, 72, 86, 82),
  score_upper = c(96, 99, 93, 91, 94, 98, 84, 96, 92),
  # Grouped columns
  critic = c(97, 99, 96, 89, 92, 97, 76, 93, 89),
  audience = c(87, 91, 80, 83, 86, 91, 80, 89, 85),
  views_m = c(5.2, 9.1, 4.8, 3.8, 4.1, 6.2, 4.2, 8.5, 3.9),
  weeks_top10 = c(6, 11, 8, 4, 5, 7, 5, 10, 6),
  badge = c("Emmy Winner", "Emmy Winner", NA, NA, NA, "Emmy Winner", NA, "Hit", NA)
)

forest_plot(
  shows,
  point = "score", lower = "score_lower", upper = "score_upper",
  label = "show",
  group = "genre",
  columns = list(
    col_group("Ratings",
      col_numeric("critic", "Critic"),
      col_numeric("audience", "Audience"),
      position = "left"
    ),
    col_group("Viewership",
      col_numeric("views_m", "Views (M)"),
      col_numeric("weeks_top10", "Wks Top 10", decimals = 0),
      position = "left"
    ),
    col_interval("Score (95% CI)")
  ),
  row_badge = "badge",
  theme = web_theme_cochrane() |>
    set_colors(primary = "#e50914", interval_positive = "#e50914"),
  null_value = 85,
  axis_label = "Combined Score",
  title = "2024 Streaming Hits",
  subtitle = "Row grouping by genre + column grouping for related metrics"
)
```

## Features

::: {.grid}
::: {.g-col-6}
**Visualization**

- 9 preset themes (JAMA, Lancet, Nature, etc.)
- 16+ column types (bars, p-values, sparklines)
- Hierarchical grouping with collapsible sections
- Multiple effects per row (ITT vs Per-Protocol)
:::

::: {.g-col-6}
**Interactivity**

- Hover tooltips with custom content
- Column sorting and resizing
- Row selection and highlighting
- Split view navigation for subgroups
:::
:::

::: {.grid}
::: {.g-col-6}
**Export**

- SVG, PNG, PDF output
- Publication-quality figures at 300 DPI
- Consistent rendering between web and export
:::

::: {.g-col-6}
**Developer Experience**

- Fluent API with R pipes
- Declarative column system
- Type-safe styling with column mapping
:::
:::

## Installation

```r
# install.packages("pak")
pak::pak("kaskarn/webforest")
```

## Quick Example

```r
library(webforest)

forest_plot(data,
  point = "estimate",
  lower = "ci_lower",
  upper = "ci_upper",
  label = "study",
  null_value = 1,
  scale = "log"
)
```

## Guide

Learn how to use webforest:

| Chapter | Description |
|---------|-------------|
| [Quick Start](guide/quick-start.qmd) | Installation and basic usage |
| [Themes](guide/themes.qmd) | Preset themes and customization |
| [Columns](guide/columns.qmd) | Data columns and special formatting |
| [Grouping Studies](guide/grouping.qmd) | Collapsible groups from column values |
| [Row Styling](guide/row-styling.qmd) | Headers, summaries, indentation, and badges |
| [Exporting](guide/exporting.qmd) | Save plots as SVG, PNG, or PDF |
| [Axis & Annotations](guide/axis-annotations.qmd) | Axis control and reference lines |

## More Resources

- [Cookbook](cookbook.qmd) - Common tasks and patterns
- [Gallery](gallery.qmd) - Interactive examples
- [Reference](reference.qmd) - API documentation
