---
title: "Examples Gallery"
---

Interactive examples showcasing webforest features. Click group headers to collapse, hover for tooltips, and drag resize handles to adjust column widths.

```{r}
#| include: false
library(webforest)
library(dplyr)
```

## Dark Theme

Dark mode with row badges and quality indicators. Ideal for presentations or dark-themed dashboards.

```{r}
oncology_data <- tibble(
  study = c(
    "CheckMate 067", "KEYNOTE-006", "CheckMate 238",
    "KEYNOTE-054", "CheckMate 915", "KEYNOTE-716",
    "IMpassion130", "KEYNOTE-522", "CheckMate 816"
  ),
  tumor = c(
    rep("Melanoma", 6),
    rep("Triple-Negative Breast", 2),
    "NSCLC"
  ),
  hr = c(0.55, 0.63, 0.65, 0.57, 0.77, 0.65, 0.84, 0.63, 0.63),
  lower = c(0.45, 0.52, 0.51, 0.43, 0.63, 0.52, 0.69, 0.48, 0.43),
  upper = c(0.67, 0.76, 0.83, 0.74, 0.94, 0.81, 1.02, 0.82, 0.91),
  n = c(945, 834, 906, 1019, 1034, 976, 902, 1174, 358),
  median_fu = c(60.0, 57.7, 51.1, 42.3, 32.1, 27.4, 18.0, 39.1, 29.5),
  quality = c("High", "High", "High", "High", "Moderate", "High", "High", "High", "High"),
  pvalue = c(0.001, 0.001, 0.001, 0.001, 0.034, 0.001, 0.057, 0.001, 0.005),
  .row_bold = c(TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE),
  .row_badge = c("Primary", NA, NA, NA, NA, NA, NA, NA, NA)
)

forest_plot(
  oncology_data,
  point = "hr", lower = "lower", upper = "upper",
  label = "study", label_header = "Trial", group = "tumor",
  columns = list(
    col_numeric("n", "N", position = "left"),
    col_numeric("median_fu", "Follow-up (mo)", position = "left"),
    col_text("quality", "Quality", position = "left"),
    col_interval("HR (95% CI)"),
    col_pvalue("pvalue", "P")
  ),
  theme = web_theme_dark(),
  scale = "log", null_value = 1,
  axis_label = "Hazard Ratio (95% CI)",
  title = "Immune Checkpoint Inhibitor Trials",
  subtitle = "Overall Survival or Disease-Free Survival",
  caption = "Sources: Published trial results",
  footnote = "HR < 1 favors immunotherapy"
)
```

## Nested Groups

Multi-level hierarchy with continent > country structure. Groups are collapsible and rows are indented by depth.

```{r}
set.seed(789)
regional_data <- tibble(
  study = c(
    # North America
    "USA - Northeast", "USA - Southeast", "USA - Midwest", "USA - West",
    "Canada - Ontario", "Canada - Quebec",
    # Europe
    "UK - England", "UK - Scotland",
    "Germany - North", "Germany - South",
    "France - Paris", "France - Lyon",
    # Asia-Pacific
    "Japan - Tokyo", "Japan - Osaka",
    "China - Beijing", "China - Shanghai"
  ),
  region = c(
    rep("north_america", 6),
    rep("europe", 6),
    rep("asia", 4)
  ),
  country = c(
    rep("usa", 4), rep("canada", 2),
    rep("uk", 2), rep("germany", 2), rep("france", 2),
    rep("japan", 2), rep("china", 2)
  ),
  or = runif(16, 0.6, 1.4),
  n = sample(500:2000, 16)
) |>
  mutate(
    se = 0.1 + runif(n()) * 0.15,
    lower = or * exp(-1.96 * se),
    upper = or * exp(1.96 * se)
  )

# Simple hierarchical grouping: region > country
# Just pass column names in order from outermost to innermost
forest_plot(
  regional_data,
  point = "or", lower = "lower", upper = "upper",
  label = "study",
  group = c("region", "country"),  # Hierarchical: region > country
  columns = list(
    col_numeric("n", "N", position = "left"),
    col_interval("OR (95% CI)", position = "right")
  ),
  theme = web_theme_modern(),
  scale = "log", null_value = 1,
  axis_label = "Odds Ratio (95% CI)",
  title = "Global Treatment Effect by Region",
  subtitle = "Hierarchical geographic analysis",
  caption = "Click continent headers to collapse. Rows indented by depth."
)
```

## Multiple Effects

Three color-coded effects per row showing ITT, Per-Protocol, and As-Treated analyses.

```{r}
set.seed(654)
multi_effect_data <- tibble(
  study = c("ARISTOTLE 2011", "RE-LY 2009", "ROCKET-AF 2011", "ENGAGE AF 2013", "ATLAS ACS 2012"),
  itt_or = c(0.79, 0.91, 0.88, 0.87, 0.84),
  itt_lower = c(0.66, 0.74, 0.75, 0.73, 0.72),
  itt_upper = c(0.95, 1.11, 1.03, 1.04, 0.97),
  pp_or = c(0.75, 0.85, 0.82, 0.81, 0.78),
  pp_lower = c(0.62, 0.68, 0.69, 0.67, 0.66),
  pp_upper = c(0.91, 1.06, 0.98, 0.98, 0.92),
  at_or = c(0.72, 0.88, 0.85, 0.84, 0.80),
  at_lower = c(0.59, 0.71, 0.71, 0.69, 0.67),
  at_upper = c(0.88, 1.09, 1.02, 1.02, 0.95),
  n_itt = c(18201, 18113, 14264, 21105, 15526),
  n_pp = c(16850, 16920, 13280, 19650, 14420)
)

forest_plot(
  multi_effect_data,
  point = "itt_or", lower = "itt_lower", upper = "itt_upper",
  label = "study",
  columns = list(
    col_numeric("n_itt", "N (ITT)", position = "left"),
    col_numeric("n_pp", "N (PP)", position = "left"),
    col_interval("ITT OR", position = "right")
  ),
  effects = list(
    web_effect("itt_or", "itt_lower", "itt_upper", label = "Intention-to-Treat", color = "#2563eb"),
    web_effect("pp_or", "pp_lower", "pp_upper", label = "Per-Protocol", color = "#16a34a"),
    web_effect("at_or", "at_lower", "at_upper", label = "As-Treated", color = "#dc2626")
  ),
  theme = web_theme_modern(),
  scale = "log", null_value = 1,
  axis_label = "Odds Ratio (95% CI)",
  title = "Sensitivity Analyses: DOAC Trials",
  subtitle = "Comparing ITT, Per-Protocol, and As-Treated populations",
  caption = "Three analysis methods shown per study",
  footnote = "Blue = ITT, Green = Per-Protocol, Red = As-Treated"
)
```

## Interactive Demo

Clinical trial meta-analysis with interactive features. Click group headers to collapse, click rows to select, hover for tooltips.

```{r}
meta_data <- tibble(
  study = c(
    "EMPA-REG OUTCOME", "CANVAS Program", "DECLARE-TIMI 58", "CREDENCE",
    "LEADER", "SUSTAIN-6", "REWIND", "PIONEER 6",
    "SAVOR-TIMI 53", "EXAMINE", "TECOS", "CARMELINA"
  ),
  drug_class = c(
    rep("SGLT2 Inhibitors", 4),
    rep("GLP-1 Receptor Agonists", 4),
    rep("DPP-4 Inhibitors", 4)
  ),
  hr = c(0.86, 0.86, 0.93, 0.80, 0.87, 0.74, 0.88, 0.79, 1.00, 0.96, 0.98, 1.02),
  lower = c(0.74, 0.75, 0.84, 0.67, 0.78, 0.58, 0.79, 0.57, 0.89, 0.80, 0.89, 0.89),
  upper = c(0.99, 0.97, 1.03, 0.95, 0.97, 0.95, 0.99, 1.11, 1.12, 1.15, 1.08, 1.17),
  n = c(7020, 10142, 17160, 4401, 9340, 3297, 9901, 3183, 16492, 5380, 14671, 6979),
  events = c(490, 585, 756, 245, 608, 108, 594, 137, 1222, 305, 839, 434),
  year = c(2015, 2017, 2019, 2019, 2016, 2016, 2019, 2019, 2013, 2013, 2015, 2018)
)

forest_plot(
  meta_data,
  point = "hr", lower = "lower", upper = "upper",
  label = "study", label_header = "Trial", group = "drug_class",
  columns = list(
    col_numeric("year", "Year", position = "left"),
    col_numeric("n", "N", position = "left"),
    col_numeric("events", "Events", position = "left"),
    col_interval("HR (95% CI)"),
    col_bar("n", "Sample Size", position = "right")
  ),
  theme = web_theme_modern(),
  scale = "log", null_value = 1,
  axis_label = "Hazard Ratio for MACE (95% CI)",
  title = "Cardiovascular Outcomes Trials: Diabetes Medications",
  subtitle = "Major Adverse Cardiovascular Events (MACE)",
  caption = "Click group headers to collapse. Click rows to select. Hover for details.",
  footnote = "HR < 1 favors treatment"
)
```

## Column Groups

Hierarchical column headers grouping related statistics (primary endpoint + components).

```{r}
set.seed(321)
outcomes_data <- tibble(
  study = c("PARADIGM-HF 2014", "DAPA-HF 2019", "EMPEROR-Reduced 2020", "GALACTIC-HF 2020", "VICTORIA 2020"),
  primary_hr = c(0.80, 0.74, 0.75, 0.92, 0.90),
  primary_lower = c(0.73, 0.65, 0.65, 0.86, 0.82),
  primary_upper = c(0.87, 0.85, 0.86, 0.99, 0.98),
  primary_p = c(0.001, 0.001, 0.001, 0.025, 0.019),
  cvdeath_hr = c(0.80, 0.82, 0.92, 0.96, 0.93),
  cvdeath_lower = c(0.71, 0.69, 0.75, 0.85, 0.81),
  cvdeath_upper = c(0.89, 0.98, 1.12, 1.08, 1.06),
  cvdeath_p = c(0.001, 0.029, 0.382, 0.494, 0.281),
  hfhosp_hr = c(0.79, 0.70, 0.69, 0.92, 0.90),
  hfhosp_lower = c(0.71, 0.59, 0.59, 0.84, 0.81),
  hfhosp_upper = c(0.89, 0.83, 0.81, 1.01, 1.00),
  hfhosp_p = c(0.001, 0.001, 0.001, 0.070, 0.048),
  n = c(8442, 4744, 3730, 8256, 5050)
)

forest_plot(
  outcomes_data,
  point = "primary_hr", lower = "primary_lower", upper = "primary_upper",
  label = "study",
  columns = list(
    col_numeric("n", "N", position = "left"),
    col_group("Primary Endpoint",
      col_interval("HR (95% CI)"),
      col_pvalue("primary_p", "P"),
      position = "right"
    ),
    col_group("CV Death",
      col_numeric("cvdeath_hr", "HR"),
      col_pvalue("cvdeath_p", "P"),
      position = "right"
    ),
    col_group("HF Hosp",
      col_numeric("hfhosp_hr", "HR"),
      col_pvalue("hfhosp_p", "P"),
      position = "right"
    )
  ),
  theme = web_theme_modern(),
  scale = "log", null_value = 1,
  axis_label = "Hazard Ratio (95% CI)",
  title = "Heart Failure Trials: Primary and Component Endpoints",
  subtitle = "Comparing ARNI, SGLT2i, and novel agents",
  caption = "Primary endpoint: CV death or HF hospitalization",
  footnote = "All trials enrolled patients with reduced ejection fraction"
)
```

## JAMA Style

Clean, minimal journal styling for publication-ready figures.

```{r}
intervention_data <- tibble(
  subgroup = c(
    "All Patients", "Age <65 years", "Age >=65 years",
    "Male", "Female", "BMI <30", "BMI >=30",
    "Diabetes", "No Diabetes", "Prior MI", "No Prior MI"
  ),
  rr = c(0.82, 0.78, 0.88, 0.80, 0.85, 0.84, 0.79, 0.76, 0.86, 0.74, 0.89),
  lower = c(0.74, 0.66, 0.76, 0.70, 0.72, 0.72, 0.66, 0.62, 0.76, 0.60, 0.78),
  upper = c(0.91, 0.92, 1.02, 0.91, 1.00, 0.98, 0.95, 0.93, 0.97, 0.91, 1.02),
  n_int = c(5000, 2400, 2600, 3200, 1800, 2800, 2200, 1500, 3500, 1200, 3800),
  n_ctrl = c(5000, 2380, 2620, 3180, 1820, 2750, 2250, 1480, 3520, 1190, 3810),
  p_int = c(0.001, 0.005, 0.089, 0.001, 0.048, 0.025, 0.012, 0.008, 0.003, 0.004, 0.098),
  .row_type = c("summary", rep("data", 10)),
  .row_bold = c(TRUE, rep(FALSE, 10))
)

forest_plot(
  intervention_data,
  point = "rr", lower = "lower", upper = "upper",
  label = "subgroup", label_header = "Subgroup",
  columns = list(
    col_numeric("n_int", "Intervention (n)", position = "left"),
    col_numeric("n_ctrl", "Control (n)", position = "left"),
    col_interval("RR (95% CI)"),
    col_pvalue("p_int", "P Value")
  ),
  theme = web_theme_jama(),
  scale = "log", null_value = 1,
  axis_label = "Relative Risk (95% CI)",
  title = "Primary Outcome by Prespecified Subgroups",
  subtitle = "Composite of Death, MI, or Stroke at 1 Year",
  footnote = "RR indicates relative risk; CI, confidence interval"
)
```

## Lancet Style

Serif fonts and blue palette for academic publications.

```{r}
set.seed(456)
survival_data <- tibble(
  subgroup = c(
    "Overall", "Age < 65", "Age >= 65",
    "Male", "Female", "Stage I-II", "Stage III-IV",
    "ECOG 0-1", "ECOG 2+"
  ),
  hr = c(0.73, 0.68, 0.81, 0.75, 0.70, 0.65, 0.82, 0.71, 0.88),
  lower = c(0.62, 0.52, 0.65, 0.60, 0.54, 0.48, 0.66, 0.56, 0.68),
  upper = c(0.86, 0.89, 1.01, 0.94, 0.91, 0.88, 1.02, 0.90, 1.14),
  n_treatment = c(450, 220, 230, 280, 170, 180, 270, 320, 130),
  n_control = c(448, 218, 230, 275, 173, 182, 266, 318, 130),
  events_treatment = c(156, 68, 88, 95, 61, 52, 104, 98, 58),
  events_control = c(198, 92, 106, 118, 80, 72, 126, 128, 70)
) |>
  mutate(
    events = paste0(events_treatment, "/", events_control),
    n_total = paste0(n_treatment, "/", n_control)
  )

forest_plot(
  survival_data,
  point = "hr", lower = "lower", upper = "upper",
  label = "subgroup",
  columns = list(
    col_text("n_total", "N (Tx/Ctrl)", position = "left"),
    col_text("events", "Events", position = "left"),
    col_interval("HR (95% CI)", position = "right")
  ),
  theme = web_theme_lancet(),
  scale = "log", null_value = 1,
  axis_label = "Hazard Ratio (95% CI)",
  title = "Subgroup Analysis: Overall Survival",
  subtitle = "Treatment vs Control in Phase III Trial",
  caption = "HR < 1 favors treatment arm",
  footnote = "Stratified Cox proportional hazards model"
)
```

## Row Styling

Headers, summaries, badges, indentation, and custom colors using `.row_*` columns.

```{r}
styled_data <- tibble(
  study = c(
    "Cardiovascular Outcomes",
    "  EMPA-REG 2015", "  CANVAS 2017", "  DECLARE 2019", "  Subtotal", "",
    "Renal Outcomes",
    "  CREDENCE 2019", "  DAPA-CKD 2020", "  Subtotal", "",
    "Overall"
  ),
  hr = c(NA, 0.86, 0.86, 0.93, 0.88, NA, NA, 0.70, 0.61, 0.66, NA, 0.78),
  lower = c(NA, 0.74, 0.75, 0.84, 0.82, NA, NA, 0.59, 0.51, 0.57, NA, 0.73),
  upper = c(NA, 0.99, 0.97, 1.03, 0.95, NA, NA, 0.82, 0.72, 0.76, NA, 0.84),
  n = c(NA, 7020, 10142, 17160, 34322, NA, NA, 4401, 4304, 8705, NA, 43027),
  .row_type = c(
    "header", "data", "data", "data", "summary", "spacer",
    "header", "data", "data", "summary", "spacer", "summary"
  ),
  .row_bold = c(TRUE, FALSE, FALSE, FALSE, TRUE, FALSE, TRUE, FALSE, FALSE, TRUE, FALSE, TRUE),
  .row_indent = c(0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0),
  .row_color = c("#0369a1", NA, NA, NA, "#0369a1", NA, "#0369a1", NA, NA, "#0369a1", NA, "#166534"),
  .row_badge = c(NA, NA, NA, NA, "n=3", NA, NA, NA, NA, "n=2", NA, "n=5")
)

forest_plot(
  styled_data,
  point = "hr", lower = "lower", upper = "upper",
  label = "study",
  columns = list(
    col_numeric("n", "N", position = "right"),
    col_interval("HR (95% CI)", position = "right")
  ),
  theme = web_theme_modern(),
  scale = "log", null_value = 1,
  axis_label = "Hazard Ratio (95% CI)",
  title = "SGLT2 Inhibitors Meta-Analysis",
  subtitle = "Cardiovascular and renal outcomes",
  caption = "Data from landmark SGLT2 inhibitor trials",
  footnote = "Headers in blue, overall summary in green"
)
```

## Presentation Theme

Large fonts and bold colors for slides and presentations.

```{r}
set.seed(123)
trial_data <- tibble(
  study = c("APOLLO 2020", "BEACON 2019", "CASCADE 2021", "DELTA 2018", "ECHO 2022", "FRONTIER 2021"),
  or = c(0.72, 0.85, 0.65, 0.91, 0.78, 0.69),
  lower = c(0.58, 0.71, 0.48, 0.75, 0.62, 0.52),
  upper = c(0.89, 1.02, 0.88, 1.10, 0.98, 0.92),
  n = c(1250, 890, 2100, 650, 1500, 1800),
  events = c(89, 112, 156, 78, 95, 142),
  pvalue = c(0.002, 0.078, 0.005, 0.32, 0.031, 0.011)
)

forest_plot(
  trial_data,
  point = "or", lower = "lower", upper = "upper",
  label = "study",
  columns = list(
    col_numeric("n", "N", position = "left"),
    col_numeric("events", "Events", position = "left"),
    col_interval("OR (95% CI)", position = "right"),
    col_pvalue("pvalue", "P", position = "right")
  ),
  theme = web_theme_presentation(),
  scale = "log", null_value = 1,
  axis_label = "Odds Ratio (95% CI)",
  title = "Treatment Effect Across Trials",
  subtitle = "Pooled analysis of randomized controlled trials",
  caption = "OR < 1 favors treatment",
  footnote = "Random effects meta-analysis"
)
```

## Iris Regression

Non-clinical example: regression coefficients from linear models, grouped by species.

```{r}
library(broom)

coef_data <- iris |>
  group_by(Species) |>
  group_modify(~ {
    model <- lm(Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width, data = .x)
    tidy(model, conf.int = TRUE) |>
      filter(term != "(Intercept)")
  }) |>
  ungroup() |>
  mutate(
    term = case_when(
      term == "Sepal.Width" ~ "Sepal Width",
      term == "Petal.Length" ~ "Petal Length",
      term == "Petal.Width" ~ "Petal Width",
      TRUE ~ term
    ),
    pvalue = p.value
  )

forest_plot(
  coef_data,
  point = "estimate", lower = "conf.low", upper = "conf.high",
  label = "term", group = "Species",
  columns = list(
    col_interval("95% CI", position = "right"),
    col_pvalue("pvalue", "P-value", position = "right")
  ),
  theme = web_theme_modern(),
  null_value = 0,
  axis_label = "Regression Coefficient (95% CI)",
  title = "Predictors of Sepal Length",
  subtitle = "Linear regression coefficients by species",
  caption = "Data: Fisher's Iris dataset"
)
```

## mtcars Meta-Analysis

Built-in dataset transformed into a meta-analysis with weight bars and grouping.

```{r}
set.seed(42)
meta_data <- mtcars |>
  tibble::rownames_to_column("study") |>
  mutate(
    effect = scale(mpg)[, 1],
    se = 0.15 + runif(n()) * 0.25,
    lower = effect - 1.96 * se,
    upper = effect + 1.96 * se,
    weight = 1 / se^2,
    pvalue = 2 * pnorm(-abs(effect / se)),
    group = paste0(cyl, " Cylinder")
  ) |>
  select(study, effect, lower, upper, weight, pvalue, group, hp, wt)

forest_plot(
  meta_data,
  point = "effect", lower = "lower", upper = "upper",
  label = "study", group = "group",
  columns = list(
    col_numeric("hp", "HP", position = "left"),
    col_numeric("wt", "Wt", position = "left"),
    col_bar("weight", "Weight", position = "right"),
    col_pvalue("pvalue", "P", position = "right")
  ),
  theme = web_theme_jama(),
  axis_label = "Standardized Effect (95% CI)",
  title = "Meta-analysis of Fuel Efficiency",
  subtitle = "Effect sizes grouped by cylinder count",
  caption = "Source: mtcars dataset (R)",
  footnote = "* Weights computed as inverse variance"
)
```

---

# Fun & Creative Examples

Examples beyond clinical research showing forest plots for sports, entertainment, finance, and science.

## NBA Player Efficiency

Player efficiency ratings by position. Forest plots work great for comparing performance metrics with confidence intervals.

```{r}
nba_data <- tibble(
  player = c(
    "Nikola Jokic", "Joel Embiid", "Giannis Antetokounmpo",
    "Luka Doncic", "Shai Gilgeous-Alexander", "Jayson Tatum",
    "Stephen Curry", "Damian Lillard", "Tyrese Haliburton"
  ),
  position = c("Center", "Center", "Forward", "Guard", "Guard", "Forward", "Guard", "Guard", "Guard"),
  per = c(31.5, 29.8, 28.2, 27.1, 26.8, 25.4, 24.8, 24.2, 23.5),
  per_se = c(1.2, 1.5, 1.3, 1.4, 1.6, 1.5, 1.7, 1.8, 1.9),
  ppg = c(26.4, 33.1, 29.9, 32.4, 30.1, 26.9, 26.4, 25.8, 20.1),
  team = c("DEN", "PHI", "MIL", "DAL", "OKC", "BOS", "GSW", "POR", "IND")
) |>
  mutate(
    lower = per - 1.96 * per_se,
    upper = per + 1.96 * per_se
  )

forest_plot(
  nba_data,
  point = "per", lower = "lower", upper = "upper",
  label = "player", group = "position",
  columns = list(
    col_text("team", "Team", position = "left"),
    col_numeric("ppg", "PPG", position = "left"),
    col_interval("PER (95% CI)", position = "right")
  ),
  theme = web_theme_modern(),
  null_value = 20,  # League average PER
  axis_label = "Player Efficiency Rating",
  title = "NBA All-Star Candidates",
  subtitle = "2023-24 Season Player Efficiency by Position",
  caption = "Dashed line = league average (20.0)",
  footnote = "PER: Player Efficiency Rating"
)
```

## World Cup Performance

Goal differentials by confederation. Comparing regional football performance across tournaments.

```{r}
set.seed(2022)
worldcup_data <- tibble(
  team = c(
    "Argentina", "Brazil", "France", "England",
    "Germany", "Spain", "Morocco", "Japan",
    "South Korea", "USA", "Australia", "Senegal"
  ),
  confederation = c(
    "CONMEBOL", "CONMEBOL", "UEFA", "UEFA",
    "UEFA", "UEFA", "CAF", "AFC",
    "AFC", "CONCACAF", "AFC", "CAF"
  ),
  gd = c(10, 5, 8, 6, -2, 5, 4, 1, 0, 1, -2, 2),
  gd_se = c(1.5, 2.0, 1.8, 2.2, 2.5, 2.0, 2.3, 2.8, 3.0, 2.6, 3.2, 2.4),
  matches = c(7, 5, 7, 5, 4, 4, 6, 4, 4, 4, 4, 4),
  goals_scored = c(15, 8, 16, 13, 6, 9, 6, 5, 4, 3, 3, 5)
) |>
  mutate(
    lower = gd - 1.96 * gd_se,
    upper = gd + 1.96 * gd_se
  )

forest_plot(
  worldcup_data,
  point = "gd", lower = "lower", upper = "upper",
  label = "team", group = "confederation",
  columns = list(
    col_numeric("matches", "GP", position = "left"),
    col_numeric("goals_scored", "GF", position = "left"),
    col_interval("GD (95% CI)", position = "right")
  ),
  theme = web_theme_modern(),
  null_value = 0,
  axis_label = "Goal Differential",
  title = "FIFA World Cup 2022",
  subtitle = "Team Performance by Confederation",
  caption = "Dashed line = zero goal differential"
)
```

## Oscar Best Picture

Film ratings comparing Best Picture winners and nominees. Entertainment data visualized as effect estimates.

```{r}
oscar_data <- tibble(
  film = c(
    "Everything Everywhere", "The Banshees of Inisherin", "The Fabelmans",
    "CODA", "The Power of the Dog", "Belfast",
    "Nomadland", "The Father", "Promising Young Woman",
    "Parasite", "1917", "Jojo Rabbit"
  ),
  year = c(2023, 2023, 2023, 2022, 2022, 2022, 2021, 2021, 2021, 2020, 2020, 2020),
  status = c("Winner", "Nominee", "Nominee", "Winner", "Nominee", "Nominee",
             "Winner", "Nominee", "Nominee", "Winner", "Nominee", "Nominee"),
  imdb = c(7.8, 7.7, 7.6, 8.0, 6.8, 7.1, 7.3, 8.2, 7.5, 8.5, 8.2, 7.9),
  imdb_se = c(0.15, 0.18, 0.20, 0.12, 0.22, 0.19, 0.16, 0.14, 0.21, 0.10, 0.11, 0.16),
  rt_score = c(95, 97, 88, 95, 94, 86, 93, 98, 90, 99, 89, 80)
) |>
  mutate(
    lower = imdb - 1.96 * imdb_se,
    upper = imdb + 1.96 * imdb_se,
    .row_bold = status == "Winner",
    .row_badge = ifelse(status == "Winner", "Won", NA)
  )

forest_plot(
  oscar_data,
  point = "imdb", lower = "lower", upper = "upper",
  label = "film", group = "year",
  columns = list(
    col_numeric("rt_score", "RT%", position = "left"),
    col_interval("IMDb (95% CI)", position = "right")
  ),
  theme = web_theme_modern(),
  null_value = 7.0,
  axis_label = "IMDb Rating",
  title = "Oscar Best Picture Contenders",
  subtitle = "2020-2023 Winners and Nominees",
  caption = "Winners shown in bold with badge",
  footnote = "Dashed line = 7.0 (good film threshold)"
)
```

## Video Game Reviews

Metacritic scores by platform. Comparing game ratings across different gaming systems.

```{r}
games_data <- tibble(
  game = c(
    "Elden Ring", "God of War: Ragnarok", "Baldur's Gate 3",
    "Zelda: TotK", "Metroid Prime Remastered", "Fire Emblem Engage",
    "Starfield", "Diablo IV", "Final Fantasy XVI",
    "Spider-Man 2", "Horizon: Burning Shores", "Ratchet & Clank"
  ),
  platform = c(
    "PC", "PlayStation", "PC",
    "Nintendo", "Nintendo", "Nintendo",
    "PC", "PC", "PlayStation",
    "PlayStation", "PlayStation", "PlayStation"
  ),
  metacritic = c(96, 94, 96, 96, 91, 80, 83, 88, 87, 90, 82, 88),
  mc_se = c(1.5, 1.8, 1.4, 1.2, 2.0, 2.5, 2.8, 2.2, 2.4, 2.0, 2.6, 2.3),
  user_score = c(8.0, 8.9, 8.8, 8.6, 8.5, 7.8, 7.0, 6.5, 8.1, 8.7, 7.4, 8.2)
) |>
  mutate(
    lower = metacritic - 1.96 * mc_se,
    upper = metacritic + 1.96 * mc_se
  )

forest_plot(
  games_data,
  point = "metacritic", lower = "lower", upper = "upper",
  label = "game", group = "platform",
  columns = list(
    col_numeric("user_score", "User", position = "left"),
    col_interval("Metacritic (95% CI)", position = "right")
  ),
  theme = web_theme_dark(),
  null_value = 75,
  axis_label = "Metacritic Score",
  title = "Top Games of 2023",
  subtitle = "Critic Scores by Platform",
  caption = "Dashed line = 75 (good game threshold)"
)
```

## Streaming Wars

Show ratings across streaming platforms. Comparing content quality between services.

```{r}
streaming_data <- tibble(
  show = c(
    "Beef", "The Bear", "Succession",
    "The Last of Us", "House of the Dragon", "The White Lotus",
    "Wednesday", "Squid Game: The Challenge", "One Piece",
    "For All Mankind", "Ted Lasso", "Slow Horses"
  ),
  platform = c(
    "Netflix", "Hulu", "Max",
    "Max", "Max", "Max",
    "Netflix", "Netflix", "Netflix",
    "Apple TV+", "Apple TV+", "Apple TV+"
  ),
  rating = c(8.4, 8.6, 8.9, 8.8, 8.4, 8.0, 8.1, 6.2, 8.4, 8.3, 8.8, 8.2),
  rating_se = c(0.20, 0.18, 0.12, 0.15, 0.22, 0.25, 0.19, 0.35, 0.21, 0.24, 0.14, 0.28),
  seasons = c(1, 2, 4, 1, 2, 2, 1, 1, 1, 4, 3, 3)
) |>
  mutate(
    lower = rating - 1.96 * rating_se,
    upper = rating + 1.96 * rating_se
  )

forest_plot(
  streaming_data,
  point = "rating", lower = "lower", upper = "upper",
  label = "show", group = "platform",
  columns = list(
    col_numeric("seasons", "S", position = "left"),
    col_interval("Rating (95% CI)", position = "right")
  ),
  theme = web_theme_presentation(),
  null_value = 7.5,
  axis_label = "IMDb Rating",
  title = "Streaming Service Content Quality",
  subtitle = "Top Shows by Platform (2023)",
  caption = "Dashed line = 7.5 (recommended threshold)"
)
```

## Stock Sector Returns

S&P 500 sector performance during 2023. Financial data as effect estimates.

```{r}
sector_data <- tibble(
  sector = c(
    "Technology", "Communication Services", "Consumer Discretionary",
    "Industrials", "Financials", "Materials",
    "Health Care", "Energy", "Utilities",
    "Consumer Staples", "Real Estate"
  ),
  market_cap = c("Large", "Large", "Large", "Mid", "Large", "Mid",
                 "Large", "Mid", "Small", "Mid", "Small"),
  return_2023 = c(57.8, 55.8, 42.4, 18.1, 12.2, 12.6, 2.1, -1.4, -7.1, -0.8, 12.4),
  return_se = c(5.2, 4.8, 5.5, 3.2, 3.5, 4.1, 2.8, 4.5, 3.8, 2.5, 4.2),
  weight = c(28.5, 8.7, 10.8, 8.4, 12.8, 2.5, 13.2, 4.4, 2.4, 6.3, 2.0)
) |>
  mutate(
    lower = return_2023 - 1.96 * return_se,
    upper = return_2023 + 1.96 * return_se
  )

forest_plot(
  sector_data,
  point = "return_2023", lower = "lower", upper = "upper",
  label = "sector", group = "market_cap",
  columns = list(
    col_bar("weight", "S&P Wt%", position = "left"),
    col_interval("Return% (95% CI)", position = "right")
  ),
  theme = web_theme_modern(),
  null_value = 0,
  axis_label = "Total Return (%)",
  title = "S&P 500 Sector Performance",
  subtitle = "2023 Annual Returns by Market Cap Category",
  caption = "Dashed line = 0% return"
)
```

## Cryptocurrency Returns

Annual returns across different cryptocurrency categories.

```{r}
crypto_data <- tibble(
  coin = c(
    "Bitcoin", "Ethereum", "Solana",
    "Dogecoin", "Shiba Inu", "Pepe",
    "Chainlink", "Polygon", "Uniswap",
    "Tether", "USDC", "DAI"
  ),
  category = c(
    rep("Layer 1", 3),
    rep("Meme", 3),
    rep("DeFi", 3),
    rep("Stablecoin", 3)
  ),
  return_2023 = c(155, 91, 918, 28, -24, 4200, 168, -12, -9, 0, 0, 0),
  return_se = c(15, 12, 85, 18, 22, 520, 25, 15, 14, 0.1, 0.1, 0.1),
  market_cap_b = c(839, 274, 43, 13, 5.2, 0.6, 9.3, 7.8, 4.5, 91, 24, 5.3)
) |>
  mutate(
    lower = return_2023 - 1.96 * return_se,
    upper = return_2023 + 1.96 * return_se
  )

forest_plot(
  crypto_data,
  point = "return_2023", lower = "lower", upper = "upper",
  label = "coin", group = "category",
  columns = list(
    col_numeric("market_cap_b", "MCap $B", position = "left"),
    col_interval("Return% (95% CI)", position = "right")
  ),
  theme = web_theme_dark(),
  null_value = 0,
  axis_label = "Annual Return (%)",
  axis_range = c(-100, 500),
  title = "Cryptocurrency Performance",
  subtitle = "2023 Returns by Category (Pepe truncated)",
  caption = "Note: Stablecoins designed for 0% return"
)
```

## Housing Market Trends

Home price changes by metro area. Real estate data visualized as effect estimates.

```{r}
housing_data <- tibble(
  metro = c(
    "San Jose", "San Francisco", "Austin",
    "Denver", "Seattle", "Portland",
    "Miami", "Tampa", "Phoenix",
    "New York", "Boston", "Washington DC"
  ),
  region = c(
    rep("West Coast", 3),
    rep("Mountain", 3),
    rep("Sun Belt", 3),
    rep("East Coast", 3)
  ),
  price_change = c(-8.5, -10.2, -12.4, -3.1, -5.2, -4.8, 4.2, 1.8, -2.1, 2.5, 3.1, 1.5),
  change_se = c(1.8, 2.1, 2.5, 1.4, 1.6, 1.5, 1.2, 1.3, 1.5, 0.9, 1.1, 1.0),
  median_price_k = c(1450, 1250, 450, 550, 750, 520, 580, 410, 445, 680, 720, 580)
) |>
  mutate(
    lower = price_change - 1.96 * change_se,
    upper = price_change + 1.96 * change_se
  )

forest_plot(
  housing_data,
  point = "price_change", lower = "lower", upper = "upper",
  label = "metro", group = "region",
  columns = list(
    col_numeric("median_price_k", "Median $K", position = "left"),
    col_interval("Change% (95% CI)", position = "right")
  ),
  theme = web_theme_lancet(),
  null_value = 0,
  axis_label = "Year-over-Year Price Change (%)",
  title = "US Housing Market Trends",
  subtitle = "2023 Home Price Changes by Metro Area",
  caption = "Dashed line = no change in prices"
)
```

## Climate Anomalies

Temperature anomalies by region over decades. Environmental science data as effect estimates.

```{r}
climate_data <- tibble(
  region = c(
    "Arctic", "Northern Europe", "North America",
    "Central Europe", "Mediterranean", "Central Asia",
    "East Asia", "South Asia", "Southeast Asia",
    "Africa", "South America", "Australia"
  ),
  hemisphere = c(
    rep("Northern", 6),
    rep("Southern/Tropical", 6)
  ),
  temp_anomaly = c(3.2, 2.1, 1.8, 1.9, 2.0, 2.4, 1.5, 1.2, 0.9, 1.1, 1.0, 1.6),
  anomaly_se = c(0.35, 0.22, 0.18, 0.20, 0.25, 0.28, 0.15, 0.14, 0.12, 0.16, 0.13, 0.21),
  baseline = c("1951-1980", "1951-1980", "1951-1980", "1951-1980", "1951-1980", "1951-1980",
               "1951-1980", "1951-1980", "1951-1980", "1951-1980", "1951-1980", "1951-1980")
) |>
  mutate(
    lower = temp_anomaly - 1.96 * anomaly_se,
    upper = temp_anomaly + 1.96 * anomaly_se
  )

forest_plot(
  climate_data,
  point = "temp_anomaly", lower = "lower", upper = "upper",
  label = "region", group = "hemisphere",
  columns = list(
    col_interval("Anomaly C (95% CI)", position = "right")
  ),
  theme = web_theme_modern() |> set_colors(interval_positive = "#ef4444", interval_negative = "#3b82f6"),
  null_value = 0,
  axis_label = "Temperature Anomaly (C)",
  title = "Global Temperature Anomalies",
  subtitle = "2023 vs 1951-1980 Baseline by Region",
  caption = "All regions show positive anomalies (warming)"
)
```

## Wildlife Conservation

Population changes by species group. Conservation biology data as effect estimates.

```{r}
wildlife_data <- tibble(
  species = c(
    "African Elephant", "Mountain Gorilla", "Giant Panda",
    "Bengal Tiger", "Snow Leopard", "Amur Leopard",
    "Blue Whale", "Humpback Whale", "North Atlantic Right Whale",
    "Monarch Butterfly", "Bee Populations", "Coral Reefs"
  ),
  category = c(
    rep("Mammals - Land", 3),
    rep("Mammals - Big Cats", 3),
    rep("Marine", 3),
    rep("Invertebrates", 3)
  ),
  pop_change = c(8, 42, 17, -35, -20, 15, 145, 84, -40, -80, -45, -50),
  change_se = c(5, 12, 8, 12, 15, 10, 25, 18, 15, 12, 10, 8),
  iucn_status = c("EN", "EN", "VU", "EN", "VU", "CR", "EN", "LC", "CR", "EN", "NA", "NA")
) |>
  mutate(
    lower = pop_change - 1.96 * change_se,
    upper = pop_change + 1.96 * change_se,
    .row_color = case_when(
      iucn_status == "CR" ~ "#dc2626",
      iucn_status == "EN" ~ "#f97316",
      TRUE ~ NA_character_
    )
  )

forest_plot(
  wildlife_data,
  point = "pop_change", lower = "lower", upper = "upper",
  label = "species", group = "category",
  columns = list(
    col_text("iucn_status", "IUCN", position = "left"),
    col_interval("Change% (95% CI)", position = "right")
  ),
  theme = web_theme_modern(),
  null_value = 0,
  axis_label = "Population Change (%)",
  title = "Wildlife Population Trends",
  subtitle = "Recent Changes by Species Group",
  caption = "CR=Critically Endangered (red), EN=Endangered (orange)",
  footnote = "Estimates from WWF Living Planet Report methodology"
)
```
